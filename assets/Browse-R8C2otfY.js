import{a as D,c as I,b as M,_ as P,d as V,T as j}from"./styles-jGhVqJSJ.js";import{r as c,w as S,d as z,a as H,c as v,b as O,e as R,f as A,u as k,g as C,_ as L,h as U,F as _,i as Y,j as T,k as q,o as u,l as x,m as G,n as J}from"./main-BBqsybQQ.js";/**
* @vue/runtime-dom v3.4.36
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const E=Symbol("_vod"),K=Symbol("_vsh"),Q={beforeMount(e,{value:n},{transition:t}){e[E]=e.style.display==="none"?"":e.style.display,t&&n?t.beforeEnter(e):h(e,n)},mounted(e,{value:n},{transition:t}){t&&n&&t.enter(e)},updated(e,{value:n,oldValue:t},{transition:s}){!n!=!t&&(s?n?(s.beforeEnter(e),h(e,!0),s.enter(e)):s.leave(e,()=>{h(e,!1)}):h(e,n))},beforeUnmount(e,{value:n}){h(e,n)}};function h(e,n){e.style.display=n?e[E]:"none",e[K]=!n}const w=new Map,y=new Map;function W(e){return n=>{const t=`/trending/${e}/week?page=${n}`;if(w.has(t))return w.get(t);const s=D.get(t).then(r=>{const a=r.results.filter(g=>!g.adult),i=(y.has(e)?y.get(e):[]).concat(I(a)),l=M(i);return l[l.length-1].length<7?y.set(e,l.pop()):y.delete(e),l});return w.set(t,s),s}}function X(e){const n=c([]),t=c(0),s=c(!1);return S(t,async()=>{if(s.value)return;const a=await e(t.value);a.length===0?s.value=!0:n.value=[...n.value,...a]}),{pages:n,page:t,setPage:a=>{t.value=a},end:s,setEnd:a=>{s.value=a}}}function Z(e){const[n,t="ms"]=String(e).split(/(ms|s)/i),s={ms:1,s:1e3};return Number(n)*s[t]}function B(e,n){let t=null;const s=typeof n=="number"?n:Z(n),r=function(...a){const i=()=>{t=null,e.apply(this,a)};clearTimeout(t),t=setTimeout(i,s),t||e.apply(this,a)};return r.cancel=()=>{clearTimeout(t),t=null},r}const ee=["src","item"],se=z({__name:"Browse",props:["filter"],setup(e){const n=c(null),t=c({}),s=c(24),r=c(!1),a=e,i={width:1920,height:800,y:560,x:0,zIndex:2},l=B(o=>Y.value=o,400),g=B(o=>t.value=o||{},200);S(()=>G.value,(o,b)=>{o&&o.item&&(o.item.backdrop&&l(o.item.backdrop),o.item.heroContent&&g(o.item.heroContent))});function F(){s.value=(this.y||0)*-1+24;let o=d.value.length;this.parent.selected=this.parent.children.indexOf(this),(o===0||this.parent.selected&&this.parent.selected>=o-2)&&(p.value=p.value+1)}const $=q();function N(o,b,m){var f;(f=m.item)!=null&&f.href&&$.push(m.item.href)}let d,p;return H(()=>{const o=X(W(a.filter||"all"));d=o.pages,p=o.page,p.value=1}),(o,b)=>(u(),v(_,null,[O(R(P,{y:360,x:162,content:t.value},null,8,["content"]),[[Q,r.value]]),A("view",{clipping:"true",style:i},[k(d).length?(u(),C(L,{key:0,ref_key:"column",ref:n,x:150,y:s.value,scroll:"none",width:1920,height:1080,autofocus:!0,plinko:!0,onEnter:N},{default:T(()=>[(u(!0),v(_,null,x(k(d),m=>(u(),C(V,{width:1620,height:300,onFocus:F,justifyContent:"spaceBetween"},{default:T(()=>[(u(!0),v(_,null,x(m,f=>(u(),v("node",{style:J(j),src:f.src,item:f},null,12,ee))),256))]),_:2},1024))),256))]),_:1},8,["y"])):U("",!0)])],64))}});export{se as default};
//# sourceMappingURL=Browse-R8C2otfY.js.map
