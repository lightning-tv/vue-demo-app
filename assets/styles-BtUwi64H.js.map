{"version":3,"file":"styles-BtUwi64H.js","sources":["../../src/api/key.ts","../../src/api/index.ts","../../src/api/formatters/ItemFormatter.ts","../../src/components/Metadata.vue","../../src/components/ContentBlock.vue","../../src/components/Row.vue","../../src/styles.js"],"sourcesContent":["export default 'eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIyZDE4YjEwMTA0YjdiZTlkNjFiMWYwYjVlMGEwNzM2OCIsInN1YiI6IjYwZTVjMTdlNGNhNjc2MDA3NTA4Njc3MSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.D_nqH9kd-bhhWzeVsTDPYhHnsUaNAuyAa6YATmKHqsA';\n","import API_KEY_V4 from './key';\nconst API_BASE = 'https://api.themoviedb.org/3';\nlet tmdbConfig;\nlet baseImageUrl;\nconst basePosterSize = 'w185';\n\nconst defaultFetchParams = {\n  headers: {\n    'Content-Type': 'application/json',\n    Authorization: 'Bearer ' + API_KEY_V4,\n  },\n};\n\nexport function getImageUrl(path: string, posterSize: string = basePosterSize) {\n  if (!path) {\n    return '';\n  }\n  return baseImageUrl + posterSize + path;\n}\n\nfunction get(path: string, params: RequestInit = {}) {\n  if (tmdbConfig) {\n    return _get(path, params);\n  } else {\n    return loadConfig().then(() => _get(path, params));\n  }\n}\n\nfunction _get(path: string, params: RequestInit = {}) {\n  return fetch(API_BASE + path, {\n    ...defaultFetchParams,\n    ...params,\n  }).then((r) => r.json());\n}\n\nfunction loadConfig() {\n  return _get('/configuration').then((data) => {\n    tmdbConfig = data;\n    baseImageUrl = data.images?.secure_base_url;\n    return data;\n  });\n}\n\nexport default {\n  get,\n  loadConfig,\n};\n","import { getImageUrl } from '../index';\n\nfunction truncateString(str: string, maxLength: number): string {\n  if (str.length > maxLength) {\n    return str.substring(0, maxLength - 3) + '...';\n  }\n  return str;\n}\n\nexport function chunkArray(array: string[], size = 7) {\n  const result: string[][] = [];\n  for (let i = 0, j = array.length; i < j; i += size) {\n    result.push(array.slice(i, i + size));\n  }\n  return result;\n}\n\nexport interface Tile {\n  src: string;\n  tileSrc: string;\n  backdrop: string;\n  href: string;\n  shortTitle: string;\n  title: string;\n  data: unknown;\n  entityInfo: {\n    type: string;\n    id: string;\n  };\n  heroContent: {\n    title: string;\n    description: string;\n  };\n}\n\n// TODO: Remove `any` type\nexport function convertItemsToTiles(items: any[] = []): Tile[] {\n  return items.map((item) => ({\n    src: getImageUrl(item.poster_path || item.profile_path),\n    tileSrc: getImageUrl(item.backdrop_path || item.profile_path, 'w300'),\n    backdrop: getImageUrl(item.backdrop_path, 'w1280'),\n    href: `/entity/${item.media_type || 'people'}/${item.id}`,\n    shortTitle: truncateString(item.title || item.name, 30),\n    title: item.title || item.name,\n    data: item,\n    entityInfo: {\n      type: item.media_type || 'people',\n      id: item.id,\n    },\n    heroContent: {\n      title: item.title || item.name,\n      description: item.overview,\n    },\n  })).filter((item) => item.src);\n}\n","<template>\n  <node\n    :debug=\"true\"\n    :style=\"{\n      display: 'flex',\n      flexDirection: 'row',\n      gap: 18,\n      width: 1200,\n      height: 48,\n    }\"\n  >\n    <node :y=\"-4\" src=\"./assets/stars.png\" :width=\"188\" :height=\"31\"></node>\n    <node\n      :y=\"-4\"\n      :flexItem=\"false\"\n      :clipping=\"true\"\n      :width=\"(188 * voteAverage!) / 10\"\n      :height=\"31\"\n    >\n      <node src=\"./assets/stars-full.png\" :width=\"188\" :height=\"31\"></node>\n    </node>\n    <text :style=\"MetaTextStyle\">{{ voteCount }} reviews</text>\n    <text :style=\"MetaTextStyle\">{{ metaText }}</text>\n  </node>\n</template>\n\n<script setup lang=\"ts\">\ndefineProps({\n  voteCount: Number,\n  voteAverage: Number,\n  metaText: String,\n});\n\nconst MetaTextStyle = {\n  fontSize: 24,\n  fontFamily: \"Roboto\",\n  fontWeight: 400,\n};\n</script>\n","<template>\n  <node id=\"contentBlock\" :style=\"ContentBlockStyle\">\n    <text :style=\"HeadlineStyles\">{{ content.title }}</text>\n    <text :style=\"DescriptionStyles\">{{ content.description }}</text>\n    <Metadata\n      v-if=\"content && content.voteCount\"\n      :metaText=\"content.metaText\"\n      :badges=\"content.badges\"\n      :voteCount=\"content.voteCount\"\n      :voteAverage=\"content.voteAverage\"\n    />\n  </node>\n</template>\n\n<script setup lang=\"ts\">\nimport Metadata from \"./Metadata.vue\";\ndefineProps({\n  content: Object,\n});\n\nconst blockWidth = 1200;\nconst ContentBlockStyle = {\n  display: \"flex\",\n  flexDirection: \"column\",\n  flexBoundary: \"fixed\",\n  width: blockWidth,\n  height: 220,\n  gap: 16,\n};\n\nconst HeadlineStyles = {\n  fontSize: 50,\n  fontFamily: \"Roboto\",\n  fontWeight: 700,\n  maxLines: 1,\n  width: blockWidth,\n  contain: \"width\",\n};\n\nconst DescriptionStyles = {\n  fontSize: 28,\n  fontFamily: \"Roboto\",\n  fontWeight: 400,\n  lineHeight: 32,\n  width: blockWidth,\n  maxLines: 3,\n  contain: \"width\",\n};\n</script>\n","<template>\n  <node\n    :onLeft=\"handleLeft\"\n    :onRight=\"handleRight\"\n    :forwardFocus=\"onGridFocus\"\n    :selected=\"props.selected\"\n    :onSelectedChanged=\"selectedChanged\"\n    :style=\"[style, props.style]\"\n  >\n    <slot></slot>\n  </node>\n</template>\n\n<script setup lang=\"ts\">\nimport { handleNavigation, onGridFocus } from \"./utils/handleNavigation\";\nimport { chainFunctions } from \"./utils/chainFunctions\";\nimport { withScrolling } from \"./utils/withScrolling\";\n\nconst props = defineProps({\n  selected: {\n    type: Number,\n    default: null,\n  },\n  scrollIndex: Number,\n  onLeft: Function,\n  onRight: Function,\n  onLayout: Function,\n  onSelectedChanged: Function,\n  scroll: String,\n  style: Object,\n});\n\nconst handleLeft = chainFunctions(props.onLeft, handleNavigation(\"left\"));\nconst handleRight = chainFunctions(props.onRight, handleNavigation(\"right\"));\nconst selectedChanged = chainFunctions(\n  props.onSelectedChanged,\n  props.scroll !== \"none\" ? withScrolling(props.x) : undefined\n);\n\nconst handleLayout = (elm) => {\n  const scrollFn = withScrolling(props.x);\n  scrollFn.call(elm, elm, elm.children[elm.selected], elm.selected, undefined);\n  if (props.onLayout) props.onLayout(elm);\n};\n\nconst style = {\n  display: \"flex\",\n  flexBoundary: \"fixed\",\n  flexDirection: \"row\",\n  gap: 30,\n  transition: {\n    x: {\n      easing: \"ease-in-out\",\n      duration: 250,\n    },\n  },\n};\n</script>\n","import theme from \"theme\";\n\nexport const Thumbnail = {\n  borderRadius: 16,\n  width: 185,\n  height: 278,\n  scale: 1,\n  zIndex: 2,\n  transition: { scale: { duration: 250, easing: \"ease-in-out\" } },\n  border: { width: 0, color: 0x00000000 },\n  focus: { scale: 1.1, border: { color: 0xffffff66, width: 8 } },\n};\n\nexport const Column = {\n  flexBoundary: \"contain\",\n  gap: 64,\n  width: theme.layout.screenW - 2 * theme.layout.marginX,\n  x: theme.layout.marginX + theme.layout.gutterX,\n  y: 48,\n  transition: { y: { duration: 250, easing: \"ease-in-out\" } },\n  zIndex: 2,\n};\n"],"names":["API_KEY_V4","API_BASE","tmdbConfig","baseImageUrl","basePosterSize","defaultFetchParams","getImageUrl","path","posterSize","get","params","_get","loadConfig","r","data","_a","api","truncateString","str","maxLength","chunkArray","array","size","result","i","j","convertItemsToTiles","items","item","MetaTextStyle","blockWidth","ContentBlockStyle","HeadlineStyles","DescriptionStyles","props","__props","handleLeft","chainFunctions","handleNavigation","handleRight","selectedChanged","withScrolling","style","Thumbnail","Column","theme"],"mappings":"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"}