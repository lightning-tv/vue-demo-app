const __vite__fileDeps=["assets/Browse-HIGR4z2o.js","assets/CoreExtension-BZ_Duo6D.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
var Rl=Object.defineProperty;var Il=(s,t,e)=>t in s?Rl(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var f=(s,t,e)=>Il(s,typeof t!="symbol"?t+"":t,e);import{a as H,i as Ui,T as El,g as br,E as _t,b as Qe,c as Wt,d as Ml,e as an,f as Al,m as is,W as Jt,C as Fl,h as Wi,j as Ll,k as Tr,S as Bn,l as Yi,B as Pl,n as kl,o as ji,p as Nl,q as Ol,r as Bl,s as zl,t as zn,u as $n,v as $l,w as Xi,R as Dl,x as Hl,y as Ul,z as Wl,A as Yl}from"./CoreExtension-BZ_Duo6D.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=e(n);fetch(n.href,i)}})();class Vi{constructor(t){f(this,"releaseCallback");this.releaseCallback=t}}class jl extends Vi{constructor(e,r){super(e);f(this,"textureMap",new Map);f(this,"zeroReferenceTextureSet",new Set);f(this,"options");this.options={textureCleanupIntervalMs:r.textureCleanupIntervalMs??1e4,textureCleanupAgeThreadholdMs:r.textureCleanupAgeThreadholdMs??6e4},setInterval(()=>{const n=Date.now(),i=this.options.textureCleanupAgeThreadholdMs;for(const o of this.zeroReferenceTextureSet)n-o.lastUpdate>i&&(this.releaseCallback(o.id),this.textureMap.delete(o.id),this.zeroReferenceTextureSet.delete(o))},this.options.textureCleanupIntervalMs)}registerTexture(e){var n;const r=(n=e.options)==null?void 0:n.id;if(H(r,"Texture must have an id to be registered"),!this.textureMap.has(r)){const i={id:r,nodeRefCount:0,lastUpdate:Date.now()};this.textureMap.set(r,i),this.zeroReferenceTextureSet.add(i)}}incrementTextureRefCount(e){var i;const r=(i=e.options)==null?void 0:i.id;H(r,"Texture must have an id to be registered");let n=this.textureMap.get(r);n||(this.registerTexture(e),n=this.textureMap.get(r)),H(n,"Texture must have been registered"),e.txType==="SubTexture"&&this.incrementTextureRefCount(e.props.texture),n.nodeRefCount++,n.lastUpdate=Date.now(),this.zeroReferenceTextureSet.has(n)&&this.zeroReferenceTextureSet.delete(n)}decrementTextureRefCount(e){var i;const r=(i=e.options)==null?void 0:i.id;H(r,"Texture must have an id to be registered");const n=this.textureMap.get(r);H(n,"Texture must have been registered"),n.nodeRefCount--,n.lastUpdate=Date.now(),n.nodeRefCount===0&&this.zeroReferenceTextureSet.add(n),e.txType==="SubTexture"&&this.decrementTextureRefCount(e.props.texture)}}class Xl extends Vi{constructor(e){super(e);f(this,"registry");this.registry=new FinalizationRegistry(e)}registerTexture(e){var r,n;H((r=e.options)==null?void 0:r.id,"Texture must have an ID to be registered"),this.registry.register(e,(n=e.options)==null?void 0:n.id)}incrementTextureRefCount(){}decrementTextureRefCount(){}}const ts={alpha:s=>s===1?null:{prop:"opacity",value:`${s}`},x:s=>({prop:"left",value:`${s}px`}),y:s=>({prop:"top",value:`${s}px`}),width:s=>s===0?null:{prop:"width",value:`${s}px`},height:s=>s===0?null:{prop:"height",value:`${s}px`},zIndex:()=>"zIndex",fontFamily:()=>"font-family",fontSize:()=>"font-size",fontStyle:()=>"font-style",fontWeight:()=>"font-weight",fontStretch:()=>"font-stretch",lineHeight:()=>"line-height",letterSpacing:()=>"letter-spacing",textAlign:()=>"text-align",overflowSuffix:()=>"overflow-suffix",maxLines:()=>"max-lines",contain:()=>"contain",verticalAlign:()=>"vertical-align",clipping:s=>s===!1?null:{prop:"overflow",value:s?"hidden":"visible"},rotation:s=>s===0?null:{prop:"transform",value:`rotate(${s}rad)`},scale:s=>s===1?null:{prop:"transform",value:`scale(${s})`},scaleX:s=>s===1?null:{prop:"transform",value:`scaleX(${s})`},scaleY:s=>s===1?null:{prop:"transform",value:`scaleY(${s})`},color:s=>s===0?null:{prop:"color",value:Ki(s)}},Ki=s=>{const t=(s&255)/255,e=s>>8&255,r=s>>16&255;return`rgba(${s>>24&255},${r},${e},${t})`},Vl={id:"id"};class Kl{constructor(t,e){f(this,"root",null);f(this,"canvas",null);f(this,"height",1080);f(this,"width",1920);f(this,"scaleX",1);f(this,"scaleY",1);if(Ui())return;if(!e)throw new Error("settings is required");this.height=Math.ceil(e.appHeight??1080/(e.deviceLogicalPixelRatio??1)),this.width=Math.ceil(e.appWidth??1900/(e.deviceLogicalPixelRatio??1)),this.scaleX=e.deviceLogicalPixelRatio??1,this.scaleY=e.deviceLogicalPixelRatio??1,this.canvas=t,this.root=document.createElement("div"),this.setRootPosition(),document.body.appendChild(this.root),new MutationObserver(this.setRootPosition.bind(this)).observe(t,{attributes:!0,childList:!1,subtree:!1}),new ResizeObserver(this.setRootPosition.bind(this)).observe(t),window.addEventListener("resize",this.setRootPosition.bind(this)),console.warn("Inspector is enabled, this will impact performance")}setRootPosition(){if(this.root===null||this.canvas===null)return;const t=this.canvas.getBoundingClientRect(),e=document.documentElement.scrollTop+t.top,r=document.documentElement.scrollLeft+t.left;this.root.id="root",this.root.style.left=`${r}px`,this.root.style.top=`${e}px`,this.root.style.width=`${this.width}px`,this.root.style.height=`${this.height}px`,this.root.style.position="absolute",this.root.style.transformOrigin="0 0 0",this.root.style.transform=`scale(${this.scaleX}, ${this.scaleY})`,this.root.style.overflow="hidden",this.root.style.zIndex="65534"}createDiv(t,e){const r=document.createElement("div");r.style.position="absolute",r.id=t.id.toString();for(const n in e)this.updateNodeProperty(r,n,e[n]);return r}createNode(t,e){const r=t.createNode(e),n=this.createDiv(r,e);return n.node=r,r.div=n,this.createProxy(r,n)}createTextNode(t,e){const r=t.createTextNode(e),n=this.createDiv(r,e);return n.node=r,r.div=n,this.createProxy(r,n)}createProxy(t,e){return new Proxy(t,{set:(r,n,i)=>(this.updateNodeProperty(e,n,i),Reflect.set(r,n,i)),get:(r,n,i)=>(n==="destroy"&&this.destroyNode(r),n==="animate"?(o,l)=>{const a=r.animate(o,l);return new Proxy(a,{get:(u,c,h)=>(c==="start"&&this.animateNode(e,t,o,l),Reflect.get(u,c,h))})}:Reflect.get(r,n,i))})}destroyNode(t){const e=document.getElementById(t.id.toString());e==null||e.remove()}updateNodeProperty(t,e,r){var n;if(!(this.root===null||r===void 0||r===null)){if(e==="parent"){const i=r.id;if(i===1){this.root.appendChild(t);return}const o=document.getElementById(i.toString());o==null||o.appendChild(t);return}if(e==="text"){t.innerHTML=String(r),t.style.visibility="hidden";return}if(e==="src"&&r){t.setAttribute("data-src",String(r));return}if(ts[e]){const i=(n=ts[e])==null?void 0:n.call(ts,r);if(i===null)return;if(typeof i=="string"){t.style.setProperty(i,String(r));return}typeof i=="object"&&t.style.setProperty(i.prop,i.value);return}if(Vl[e]){t.setAttribute(String(ts[e]),String(r));return}if(e==="data"){for(const i in r){const o=r[i];o===void 0?t.removeAttribute(`data-${i}`):t.setAttribute(`data-${i}`,String(o))}return}}}animateNode(t,e,r,n){const{duration:i=1e3,delay:o=0}=n,{x:l,y:a,width:u,height:c,alpha:h=1,rotation:p=0,scale:m=1,color:x}=r;function v(){setTimeout(()=>{t.style.top=`${a}px`,t.style.left=`${l}px`,t.style.width=`${u}px`,t.style.height=`${c}px`,t.style.opacity=`${h}`,t.style.rotate=`${p}rad`,t.style.scale=`${m}`,t.style.color=Ki(x)},i)}setTimeout(v,o)}}class be{constructor(t){f(this,"priority",1);f(this,"name","");f(this,"ref");f(this,"target");f(this,"passParameters","");f(this,"declaredUniforms","");f(this,"uniformInfo",{});const{ref:e,target:r,props:n={}}=t;this.ref=e,this.target=r;const i={},o=[];let l="";const a=this.constructor.uniforms||{};for(const u in a){const c=a[u],h=c.type,p=`${e}_${u}`;let m="";c.size&&(m=`[${c.size(n)}]`),o.push(p),l+=`uniform ${h} ${p}${m};`,i[u]={name:p,uniform:a[u].method}}this.passParameters=o.join(","),this.declaredUniforms=l,this.uniformInfo=i}static getEffectKey(t){return""}static getMethodParameters(t,e){const r=[];for(const n in t){const i=t[n];let o="";i.size&&(o=`[${i.size(e)}]`),r.push(`${i.type} ${n}${o}`)}return r.join(",")}static resolveDefaults(t){return{}}static makeEffectKey(t){return!1}}f(be,"uniforms",{}),f(be,"methods"),f(be,"onShaderMask"),f(be,"onColorize"),f(be,"onEffectMask");const Gl={x:(s,t)=>{s.props.x=t},y:(s,t)=>{s.props.y=t},width:(s,t)=>{s.props.width=t},height:(s,t)=>{s.props.height=t},color:(s,t)=>{s.props.color=t},zIndex:(s,t)=>{s.props.zIndex=t},fontFamily:(s,t)=>{s.props.fontFamily=t},fontWeight:(s,t)=>{s.props.fontWeight=t},fontStyle:(s,t)=>{s.props.fontStyle=t},fontStretch:(s,t)=>{s.props.fontStretch=t},fontSize:(s,t)=>{s.props.fontSize=t},text:(s,t)=>{s.props.text=t},textAlign:(s,t)=>{s.props.textAlign=t},contain:(s,t)=>{s.props.contain=t},offsetY:(s,t)=>{s.props.offsetY=t},scrollable:(s,t)=>{s.props.scrollable=t},scrollY:(s,t)=>{s.props.scrollY=t},letterSpacing:(s,t)=>{s.props.letterSpacing=t},lineHeight:(s,t)=>{s.props.lineHeight=t},maxLines:(s,t)=>{s.props.maxLines=t},textBaseline:(s,t)=>{s.props.textBaseline=t},verticalAlign:(s,t)=>{s.props.verticalAlign=t},overflowSuffix:(s,t)=>{s.props.overflowSuffix=t},debug:(s,t)=>{s.props.debug=t}};class Gi{constructor(t){f(this,"stage");f(this,"set");this.stage=t;const e={...Gl,...this.getPropertySetters()};this.set=Object.freeze(Object.fromEntries(Object.entries(e).map(([r,n])=>[r,(i,o)=>{i.props[r]!==o&&(n(i,o),this.stage.requestRender())}])))}setStatus(t,e,r){t.status!==e&&(t.status=e,t.emitter.emit(e,r))}setIsRenderable(t,e){t.isRenderable=e}destroyState(t){this.setStatus(t,"destroyed"),t.emitter.removeAllListeners()}scheduleUpdateState(t){t.updateScheduled||(t.updateScheduled=!0,queueMicrotask(()=>{t.status!=="destroyed"&&(t.updateScheduled=!1,this.updateState(t))}))}}function qi(s,t){var e=0,r,n;t=t||{};function i(){var o=r,l=arguments.length,a,u;e:for(;o;){if(o.args.length!==arguments.length){o=o.next;continue}for(u=0;u<l;u++)if(o.args[u]!==arguments[u]){o=o.next;continue e}return o!==r&&(o===n&&(n=o.prev),o.prev.next=o.next,o.next&&(o.next.prev=o.prev),o.next=r,o.prev=null,r.prev=o,r=o),o.val}for(a=new Array(l),u=0;u<l;u++)a[u]=arguments[u];return o={args:a,val:s.apply(null,a)},r?(r.prev=o,o.next=r):n=o,e===t.maxSize?(n=n.prev,n.next=null):e++,r=o,o.val}return i.clear=function(){r=null,n=null,e=0},i}const ql={normal:400,bold:700,bolder:900,lighter:100},Dn=s=>typeof s=="number"?s:ql[s]||400;function Ql(s,t,e,r,n){let i=Dn(e);for(const o of s){const l=o[t];if(!l)continue;if(l.size===1)return console.warn(`TrFontManager: Only one font face found for family: '${t}' - will be used for all weights and styles`),l.values().next().value;const a=new Map;for(const c of l){const h=Dn(c.descriptors.weight);if(h===i&&c.descriptors.style===r&&c.descriptors.stretch===n)return c;a.set(h,c)}const u=`TrFontManager: No exact match: '${t} Weight: ${i} Style: ${r} Stretch: ${n}'`;if(console.error(u),i===400&&a.has(500))return a.get(500);if(i===500&&a.has(400))return a.get(400);if(i<400){for(;i>0;){if(a.has(i))return a.get(i);i-=100}i=600}for(;i<1e3;){if(a.has(i))return a.get(i);i+=100}for(i=500;i>0;){if(a.has(i))return a.get(i);i-=100}}}const Zl=qi(Ql);class cn{constructor(t){f(this,"textRenderers");this.textRenderers=t}addFontFace(t){for(const e in this.textRenderers){const r=this.textRenderers[e];r&&r.isFontFaceSupported(t)&&r.addFontFace(t)}}static resolveFontFace(t,e){const{fontFamily:r,fontWeight:n,fontStyle:i,fontStretch:o}=e;return Zl(t,r,n,i,o)}}class Sr extends El{constructor(e){super(e);f(this,"fontFace");f(this,"fontUrl");const{fontFamily:r,fontUrl:n}=e,i=n.replace(/\(|\)/g,""),o=this.descriptors,l={style:o.style,weight:typeof o.weight=="number"?`${o.weight}`:o.weight,stretch:o.stretch,unicodeRange:o.unicodeRange,variant:o.variant,featureSettings:o.featureSettings,display:o.display},a=new FontFace(r,`url(${i})`,l);a.load().then(()=>{this.loaded=!0,this.emit("loaded")}).catch(console.error),this.fontFace=a,this.fontUrl=n}}function Qi(s,t){return t*(s.ascender-s.descender+s.lineGap)}function Jl(s,t,e){if(t.metrics)return t.metrics;const r=s.measureText("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz");console.warn(`Font metrics not provided for Canvas Web font ${t.fontFamily}. Using fallback values. It is HIGHLY recommended you use the latest version of the Lightning 3 \`msdf-generator\` tool to extract the default metrics for the font and provide them in the Canvas Web font definition.`);let n;return r.actualBoundingBoxDescent&&r.actualBoundingBoxAscent?n={ascender:r.actualBoundingBoxAscent/e,descender:-r.actualBoundingBoxDescent/e,lineGap:.2}:n={ascender:.8,descender:-.2,lineGap:.2},t.metrics=n,n}const Hn=2048;function Un(s,t,e,r,n){const i=s!=="bottom"?.5*t:0;return e*(r-1)+i+Math.max(e,t)+(n||0)}class ea{constructor(t,e){f(this,"_canvas");f(this,"_context");f(this,"_settings");f(this,"renderInfo");this._canvas=t,this._context=e,this._settings=this.mergeDefaults({})}set settings(t){this._settings=this.mergeDefaults(t)}get settings(){return this._settings}getPrecision(){return this._settings.precision}setFontProperties(){this._context.font=this._getFontSetting(),this._context.textBaseline=this._settings.textBaseline}_getFontSetting(){const t=[this._settings.fontFamily],e=[];for(let r=0,n=t.length;r<n;r++)t[r]==="serif"||t[r]==="sans-serif"?e.push(t[r]):e.push(`"${t[r]}"`);return`${this._settings.fontStyle} ${this._settings.fontSize*this.getPrecision()}px ${e.join(",")}`}_load(){if(document.fonts){const t=this._getFontSetting();try{if(!document.fonts.check(t,this._settings.text))return document.fonts.load(t,this._settings.text).catch(e=>{console.warn("[Lightning] Font load error",e,t)}).then(()=>{document.fonts.check(t,this._settings.text)||console.warn("[Lightning] Font not found",t)})}catch{console.warn("[Lightning] Can't check font loading for "+t)}}}calculateRenderInfo(){const t={},e=this.getPrecision(),r=this._settings.paddingLeft*e,n=this._settings.paddingRight*e,i=this._settings.fontSize*e;let o=this._settings.offsetY===null?null:this._settings.offsetY*e;const l=this._settings.w*e,a=this._settings.h*e;let u=this._settings.wordWrapWidth*e;const c=this._settings.cutSx*e,h=this._settings.cutEx*e,p=this._settings.cutSy*e,m=this._settings.cutEy*e,x=(this._settings.letterSpacing||0)*e,v=this._settings.textIndent*e,_=this._settings.trFontFace;this.setFontProperties(),H(_);const w=Jl(this._context,_,i),C=Qi(w,i)*e,M=this._settings.lineHeight!==null?this._settings.lineHeight*e:C,I=this._settings.maxHeight,F=I!==null&&M>0?Math.floor(I/M):0,R=this._settings.maxLines,A=F>0&&R>0?Math.min(F,R):Math.max(F,R);let K=l||2048/this.getPrecision(),X=K-r;if(X<10&&(K+=10-X,X=10),u||(u=X),this._settings.textOverflow&&!this._settings.wordWrap){let U;switch(this._settings.textOverflow){case"clip":U="";break;case"ellipsis":U=this._settings.overflowSuffix;break;default:U=this._settings.textOverflow}this._settings.text=this.wrapWord(this._settings.text,u-v,U)}let Z;if(this._settings.wordWrap)Z=this.wrapText(this._settings.text,u,x,v);else{Z={l:this._settings.text.split(/(?:\r\n|\r|\n)/),n:[]};const U=Z.l.length;for(let W=0;W<U-1;W++)Z.n.push(W)}let G=Z.l;if(A&&G.length>A){const U=G.slice(0,A);let W=null;if(this._settings.overflowSuffix){const _e=this._settings.overflowSuffix?this.measureText(this._settings.overflowSuffix):0,de=this.wrapText(U[U.length-1],u-_e,x,v);U[U.length-1]=`${de.l[0]}${this._settings.overflowSuffix}`,W=[de.l.length>1?de.l[1]:""]}else W=[""];let Y;const ee=G.length;let xe=0;const ve=Z.n.length;for(Y=A;Y<ee;Y++)W[xe]+=`${W[xe]?" ":""}${G[Y]}`,Y+1<ve&&Z.n[Y+1]&&xe++;t.remainingText=W.join(`
`),t.moreTextLines=!0,G=U}else t.moreTextLines=!1,t.remainingText="";let le=0;const se=[];for(let U=0;U<G.length;U++){const W=this.measureText(G[U],x)+(U===0?v:0);se.push(W),le=Math.max(le,W)}t.lineWidths=se,l||(K=le+r+n,X=le);let ie;return a?ie=a:ie=Un(this._settings.textBaseline,i,M,G.length,o),o===null&&(o=i),t.w=K,t.h=ie,t.lines=G,t.precision=e,K||(K=1),ie||(ie=1),(c||h)&&(K=Math.min(K,h-c)),(p||m)&&(ie=Math.min(ie,m-p)),t.width=K,t.innerWidth=X,t.height=ie,t.fontSize=i,t.cutSx=c,t.cutSy=p,t.cutEx=h,t.cutEy=m,t.lineHeight=M,t.defLineHeight=C,t.lineWidths=se,t.offsetY=o,t.paddingLeft=r,t.paddingRight=n,t.letterSpacing=x,t.textIndent=v,t.metrics=w,t}draw(t,e){const r=this.getPrecision(),n=(e==null?void 0:e.lines)||t.lines,i=(e==null?void 0:e.lineWidths)||t.lineWidths,o=e?Un(this._settings.textBaseline,t.fontSize,t.lineHeight,e.lines.length,this._settings.offsetY===null?null:this._settings.offsetY*r):t.height;this._canvas.width=Math.min(Math.ceil(t.width+this._settings.textRenderIssueMargin),Hn),this._canvas.height=Math.min(Math.ceil(o),Hn),this.setFontProperties(),t.fontSize>=128&&(this._context.globalAlpha=.01,this._context.fillRect(0,0,.01,.01),this._context.globalAlpha=1),(t.cutSx||t.cutSy)&&this._context.translate(-t.cutSx,-t.cutSy);let l,a;const u=[],{metrics:c}=t,h=c?c.ascender*t.fontSize:t.fontSize,p=(c.ascender-c.descender)*t.fontSize;for(let x=0,v=n.length;x<v;x++)l=x===0?t.textIndent:0,a=x*t.lineHeight+h,this._settings.verticalAlign=="middle"?a+=(t.lineHeight-p)/2:this._settings.verticalAlign=="bottom"&&(a+=t.lineHeight-p),this._settings.textAlign==="right"?l+=t.innerWidth-i[x]:this._settings.textAlign==="center"&&(l+=(t.innerWidth-i[x])/2),l+=t.paddingLeft,u.push({text:n[x],x:l,y:a,w:i[x]});if(this._settings.highlight){const x=this._settings.highlightColor,v=this._settings.highlightHeight*r||t.fontSize*1.5,_=this._settings.highlightOffset*r,w=this._settings.highlightPaddingLeft!==null?this._settings.highlightPaddingLeft*r:t.paddingLeft,C=this._settings.highlightPaddingRight!==null?this._settings.highlightPaddingRight*r:t.paddingRight;this._context.fillStyle=br(x);for(let M=0;M<u.length;M++){const I=u[M];this._context.fillRect(I.x-w,I.y-t.offsetY+_,I.w+C+w,v)}}let m=null;this._settings.shadow&&(m=[this._context.shadowColor,this._context.shadowOffsetX,this._context.shadowOffsetY,this._context.shadowBlur],this._context.shadowColor=br(this._settings.shadowColor),this._context.shadowOffsetX=this._settings.shadowOffsetX*r,this._context.shadowOffsetY=this._settings.shadowOffsetY*r,this._context.shadowBlur=this._settings.shadowBlur*r),this._context.fillStyle=br(this._settings.textColor);for(let x=0,v=u.length;x<v;x++){const _=u[x];if(t.letterSpacing===0)this._context.fillText(_.text,_.x,_.y);else{const w=_.text.split("");let C=_.x;for(let M=0,I=w.length;M<I;M++)this._context.fillText(w[M],C,_.y),C+=this.measureText(w[M],t.letterSpacing)}}m&&(this._context.shadowColor=m[0],this._context.shadowOffsetX=m[1],this._context.shadowOffsetY=m[2],this._context.shadowBlur=m[3]),(t.cutSx||t.cutSy)&&this._context.translate(t.cutSx,t.cutSy),this.renderInfo=t}wrapWord(t,e,r){const n=this._context.measureText(r).width,i=t.length,o=this._context.measureText(t).width;if(o<=e)return t;let l=Math.floor(e*i/o),a=this._context.measureText(t.substring(0,l)).width+n;if(a>e)for(;l>0&&(a=this._context.measureText(t.substring(0,l)).width+n,a>e);)l-=1;else for(;l<i;)if(a=this._context.measureText(t.substring(0,l)).width+n,a<e)l+=1;else{l-=1;break}return t.substring(0,l)+(e>=n?r:"")}wrapText(t,e,r,n=0){const i=t.split(/\r?\n/g);let o=[];const l=[];for(let a=0;a<i.length;a++){const u=[];let c="",h=e-n;const p=i[a].split(" ");for(let m=0;m<p.length;m++){const x=this.measureText(p[m],r),v=x+this.measureText(" ",r);m===0||v>h?(m>0&&(u.push(c),c=""),c+=p[m],h=e-x-(m===0?n:0)):(h-=v,c+=` ${p[m]}`)}u.push(c),c="",o=o.concat(u),a<i.length-1&&l.push(o.length)}return{l:o,n:l}}measureText(t,e=0){return e?t.split("").reduce((r,n)=>r+this._context.measureText(n).width+e,0):this._context.measureText(t).width}mergeDefaults(t){return{text:"",w:0,h:0,fontStyle:"normal",fontSize:40,fontFamily:null,trFontFace:null,wordWrap:!0,wordWrapWidth:0,wordBreak:!1,textOverflow:"",lineHeight:null,textBaseline:"alphabetic",textAlign:"left",verticalAlign:"top",offsetY:null,maxLines:0,maxHeight:null,overflowSuffix:"...",textColor:[1,1,1,1],paddingLeft:0,paddingRight:0,shadow:!1,shadowColor:[0,0,0,1],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:5,highlight:!1,highlightHeight:0,highlightColor:[0,0,0,1],highlightOffset:0,highlightPaddingLeft:0,highlightPaddingRight:0,letterSpacing:0,textIndent:0,cutSx:0,cutEx:0,cutSy:0,cutEy:0,advancedRenderer:!1,fontBaselineRatio:0,precision:1,textRenderIssueMargin:0,...t}}}const Wn=typeof self>"u"?globalThis:self;var Hi;const Yn=((Hi=Wn.document)==null?void 0:Hi.fonts)||Wn.fonts;function ta(s){const{fontFamily:t,fontStyle:e,fontWeight:r,fontStretch:n,fontSize:i}=s;return[e,r,n,`${i}px`,t].join(" ")}const sa=Wt(0,0,0,0);class jn extends Gi{constructor(e){super(e);f(this,"canvas");f(this,"context");f(this,"rendererBounds");f(this,"fontFamilies",{});f(this,"fontFamilyArray",[this.fontFamilies]);typeof OffscreenCanvas<"u"?this.canvas=new OffscreenCanvas(0,0):this.canvas=document.createElement("canvas");let r=this.canvas.getContext("2d");r||(this.canvas=document.createElement("canvas"),r=this.canvas.getContext("2d")),H(r),this.context=r,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight},this.addFontFace(new Sr({fontFamily:"sans-serif",descriptors:{},fontUrl:""}))}getPropertySetters(){return{fontFamily:(e,r)=>{e.props.fontFamily=r,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontWeight:(e,r)=>{e.props.fontWeight=r,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontStyle:(e,r)=>{e.props.fontStyle=r,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontStretch:(e,r)=>{e.props.fontStretch=r,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontSize:(e,r)=>{e.props.fontSize=r,e.fontInfo=void 0,this.invalidateLayoutCache(e)},text:(e,r)=>{e.props.text=r,this.invalidateLayoutCache(e)},textAlign:(e,r)=>{e.props.textAlign=r,this.invalidateLayoutCache(e)},color:(e,r)=>{e.props.color=r,this.invalidateLayoutCache(e)},x:(e,r)=>{e.props.x=r,this.invalidateVisibleWindowCache(e)},y:(e,r)=>{e.props.y=r,this.invalidateVisibleWindowCache(e)},contain:(e,r)=>{e.props.contain=r,this.invalidateLayoutCache(e)},width:(e,r)=>{e.props.width=r,e.props.contain!=="none"&&this.invalidateLayoutCache(e)},height:(e,r)=>{e.props.height=r,e.props.contain==="both"&&this.invalidateLayoutCache(e)},offsetY:(e,r)=>{e.props.offsetY=r,this.invalidateLayoutCache(e)},scrollY:(e,r)=>{e.props.scrollY=r},letterSpacing:(e,r)=>{e.props.letterSpacing=r,this.invalidateLayoutCache(e)},lineHeight:(e,r)=>{e.props.lineHeight=r,this.invalidateLayoutCache(e)},maxLines:(e,r)=>{e.props.maxLines=r,this.invalidateLayoutCache(e)},textBaseline:(e,r)=>{e.props.textBaseline=r,this.invalidateLayoutCache(e)},verticalAlign:(e,r)=>{e.props.verticalAlign=r,this.invalidateLayoutCache(e)},overflowSuffix:(e,r)=>{e.props.overflowSuffix=r,this.invalidateLayoutCache(e)}}}canRenderFont(e){return!0}isFontFaceSupported(e){return e instanceof Sr}addFontFace(e){H(e instanceof Sr),e.fontFamily!=="sans-serif"&&Yn.add(e.fontFace);const{fontFamilies:r}=this,n=e.fontFace.family;let i=r[n];i||(i=new Set,r[n]=i),i.add(e)}createState(e){return{props:e,status:"initialState",updateScheduled:!1,emitter:new _t,canvasPages:void 0,lightning2TextRenderer:new ea(this.canvas,this.context),renderWindow:void 0,visibleWindow:{x1:0,y1:0,x2:0,y2:0,valid:!1},renderInfo:void 0,forceFullLayoutCalc:!1,textW:0,textH:0,fontInfo:void 0,fontFaceLoadedHandler:void 0,isRenderable:!1,debugData:{updateCount:0,layoutCount:0,drawCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,bufferSize:0}}}updateState(e){var x,v;if(e.status==="initialState"&&this.setStatus(e,"loading"),!e.fontInfo){const _=ta(e.props),w=cn.resolveFontFace(this.fontFamilyArray,e.props);if(H(w,`Could not resolve font face for ${_}`),e.fontInfo={fontFace:w,cssString:_,loaded:!1},!e.fontInfo.loaded){Yn.load(_).then(this.onFontLoaded.bind(this,e,_)).catch(this.onFontLoadError.bind(this,e,_));return}}if(!e.fontInfo.loaded)return;e.renderInfo||(e.lightning2TextRenderer.settings={text:e.props.text,textAlign:e.props.textAlign,fontFamily:e.props.fontFamily,trFontFace:e.fontInfo.fontFace,fontSize:e.props.fontSize,fontStyle:[e.props.fontStretch,e.props.fontStyle,e.props.fontWeight].join(" "),textColor:Qe(e.props.color),offsetY:e.props.offsetY,wordWrap:e.props.contain!=="none",wordWrapWidth:e.props.contain==="none"?void 0:e.props.width,letterSpacing:e.props.letterSpacing,lineHeight:e.props.lineHeight??null,maxLines:e.props.maxLines,maxHeight:e.props.contain==="both"?e.props.height-e.props.offsetY:null,textBaseline:e.props.textBaseline,verticalAlign:e.props.verticalAlign,overflowSuffix:e.props.overflowSuffix,w:e.props.contain!=="none"?e.props.width:void 0},e.renderInfo=e.lightning2TextRenderer.calculateRenderInfo(),e.textH=e.renderInfo.lineHeight*e.renderInfo.lines.length,e.textW=e.renderInfo.width,e.renderWindow=void 0);const{x:r,y:n,width:i,height:o,scrollY:l,contain:a}=e.props,{visibleWindow:u}=e;let{renderWindow:c,canvasPages:h}=e;if(!u.valid){const _=Wt(r,n,a!=="none"?r+i:1/0,a==="both"?n+o:1/0,sa);Ml(this.rendererBounds,_,u),u.valid=!0}const p=u.y2-u.y1,m=Math.ceil(p/e.renderInfo.lineHeight);if(p===0){h=void 0,c=void 0,this.setStatus(e,"loaded");return}else if(c&&h){const _=r+c.x1,w=n-l+c.y1,C=r+c.x2,M=n-l+c.y2;if(_<=u.x1&&C>=u.x2&&w<=u.y1&&M>=u.y2){this.setStatus(e,"loaded");return}M<u.y2?(c.y1+=m*e.renderInfo.lineHeight,c.y2+=m*e.renderInfo.lineHeight,h.push(h.shift()),h[2].lineNumStart=h[1].lineNumStart+m,h[2].lineNumEnd=h[2].lineNumStart+m,h[2].valid=!1):w>u.y1&&(c.y1-=m*e.renderInfo.lineHeight,c.y2-=m*e.renderInfo.lineHeight,h.unshift(h.pop()),h[0].lineNumStart=h[1].lineNumStart-m,h[0].lineNumEnd=h[0].lineNumStart+m,h[0].valid=!1)}else{const _=e.renderInfo.lineHeight*m,w=Math.ceil(l/_),C=w*m,M=C-m,I=C+m;h=[{texture:h==null?void 0:h[0].texture,lineNumStart:M,lineNumEnd:M+m,valid:!1},{texture:h==null?void 0:h[1].texture,lineNumStart:C,lineNumEnd:C+m,valid:!1},{texture:h==null?void 0:h[2].texture,lineNumStart:I,lineNumEnd:I+m,valid:!1}],e.canvasPages=h;const F=w*_;c={x1:0,y1:F-_,x2:i,y2:F+_*2}}e.renderWindow=c,performance.now();for(const _ of h)if(!_.valid){if(_.lineNumStart<0){(x=_.texture)==null||x.setRenderableOwner(e,!1),_.texture=this.stage.txManager.loadTexture("ImageTexture",{src:""}),_.texture.setRenderableOwner(e,e.isRenderable),_.valid=!0;continue}e.lightning2TextRenderer.draw(e.renderInfo,{lines:e.renderInfo.lines.slice(_.lineNumStart,_.lineNumEnd),lineWidths:e.renderInfo.lineWidths.slice(_.lineNumStart,_.lineNumEnd)}),this.canvas.width===0||this.canvas.height===0||((v=_.texture)==null||v.setRenderableOwner(e,!1),_.texture=this.stage.txManager.loadTexture("ImageTexture",{src:this.context.getImageData(0,0,this.canvas.width,this.canvas.height)},{preload:!0}),_.texture.setRenderableOwner(e,e.isRenderable)),_.valid=!0}this.setStatus(e,"loaded")}renderQuads(e,r,n,i){var K,X,Z,G,le,se,ie,U,W,Y,ee,xe;const{stage:o}=this,{canvasPages:l,textW:a=0,textH:u=0,renderWindow:c}=e;if(!l||!c)return;const{x:h,y:p,scrollY:m,contain:x,width:v,height:_}=e.props,w={x:h,y:p,width:x!=="none"?v:a,height:x==="both"?_:u};an({x:0,y:0,width:o.options.appWidth,height:o.options.appHeight},w),H(l,"canvasPages is not defined"),H(c,"renderWindow is not defined");const M=(c.y2-c.y1)/3,{zIndex:I,color:F}=e.props,R=i*Al(F),A=is(4294967295,R);l[0].valid&&this.stage.renderer.addQuad({alpha:R,clippingRect:n,colorBl:A,colorBr:A,colorTl:A,colorTr:A,width:((X=(K=l[0].texture)==null?void 0:K.dimensions)==null?void 0:X.width)||0,height:((G=(Z=l[0].texture)==null?void 0:Z.dimensions)==null?void 0:G.height)||0,texture:l[0].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:I,tx:r.tx,ty:r.ty-m+c.y1,ta:r.ta,tb:r.tb,tc:r.tc,td:r.td}),l[1].valid&&this.stage.renderer.addQuad({alpha:R,clippingRect:n,colorBl:A,colorBr:A,colorTl:A,colorTr:A,width:((se=(le=l[1].texture)==null?void 0:le.dimensions)==null?void 0:se.width)||0,height:((U=(ie=l[1].texture)==null?void 0:ie.dimensions)==null?void 0:U.height)||0,texture:l[1].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:I,tx:r.tx,ty:r.ty-m+c.y1+M,ta:r.ta,tb:r.tb,tc:r.tc,td:r.td}),l[2].valid&&this.stage.renderer.addQuad({alpha:R,clippingRect:n,colorBl:A,colorBr:A,colorTl:A,colorTr:A,width:((Y=(W=l[2].texture)==null?void 0:W.dimensions)==null?void 0:Y.width)||0,height:((xe=(ee=l[2].texture)==null?void 0:ee.dimensions)==null?void 0:xe.height)||0,texture:l[2].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:I,tx:r.tx,ty:r.ty-m+c.y1+M+M,ta:r.ta,tb:r.tb,tc:r.tc,td:r.td})}setIsRenderable(e,r){var n;super.setIsRenderable(e,r),(n=e.canvasPages)==null||n.forEach(i=>{var o;(o=i.texture)==null||o.setRenderableOwner(e,r)})}destroyState(e){var r;super.destroyState(e),(r=e.canvasPages)==null||r.forEach(n=>{var i;(i=n.texture)==null||i.setRenderableOwner(e,!1)})}invalidateVisibleWindowCache(e){e.visibleWindow.valid=!1,this.setStatus(e,"loading"),this.scheduleUpdateState(e)}invalidateLayoutCache(e){e.renderInfo=void 0,e.visibleWindow.valid=!1,this.setStatus(e,"loading"),this.scheduleUpdateState(e)}onFontLoaded(e,r){var n;r!==((n=e.fontInfo)==null?void 0:n.cssString)||!e.fontInfo||(e.fontInfo.loaded=!0,this.scheduleUpdateState(e))}onFontLoadError(e,r,n){var i;r!==((i=e.fontInfo)==null?void 0:i.cssString)||!e.fontInfo||(e.fontInfo.loaded=!0,console.error(`CanvasTextRenderer: Error loading font '${e.fontInfo.cssString}'`,n),this.scheduleUpdateState(e))}}class Zi extends Jt{constructor(t){super({renderer:t,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"}]})}bindTextures(t){const{glw:e}=this;e.activeTexture(0),e.bindTexture(t[0].ctxTexture)}}f(Zi,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRESICISON_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;
      attribute vec4 a_color;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;


      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
        vec2 normalized = a_position * u_pixelRatio;
        vec2 screenSpace = vec2(2.0 / u_resolution.x, -2.0 / u_resolution.y);

        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;

        gl_Position = vec4(normalized.x * screenSpace.x - 1.0, normalized.y * -abs(screenSpace.y) + 1.0, 0.0, 1.0);
        gl_Position.y = -sign(screenSpace.y) * gl_Position.y;
      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRESICISON_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform sampler2D u_texture;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
          vec4 color = texture2D(u_texture, v_textureCoordinate);
          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);
      }
    `});class Ji extends Jt{constructor(e){super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color","a_textureIndex"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_textures[0]",uniform:"uniform1iv"}]});f(this,"supportsIndexedTextures",!0)}bindTextures(e){const{renderer:r,glw:n}=this;if(e.length>r.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS)throw new Error(`DefaultShaderBatched: Cannot bind more than ${r.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS} textures`);e.forEach((o,l)=>{n.activeTexture(l),n.bindTexture(o.ctxTexture)});const i=Array.from(Array(e.length).keys());this.setUniform("u_textures[0]",i)}}f(Ji,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRESICISON_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_textureCoordinate;
      attribute vec2 a_position;
      attribute vec4 a_color;
      attribute float a_textureIndex;
      attribute float a_depth;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;
      varying float v_textureIndex;

      void main(){
        vec2 normalized = a_position * u_pixelRatio / u_resolution;
        vec2 zero_two = normalized * 2.0;
        vec2 clip_space = zero_two - 1.0;

        // pass to fragment
        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;
        v_textureIndex = a_textureIndex;

        // flip y
        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
      }
    `,fragment:e=>`
      #define txUnits ${e}
      # ifdef GL_FRAGMENT_PRESICISON_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform sampler2D u_image;
      uniform sampler2D u_textures[txUnits];

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;
      varying float v_textureIndex;

      vec4 sampleFromTexture(sampler2D textures[${e}], int idx, vec2 uv) {
        ${Array.from(Array(e).keys()).map(r=>`
          ${r!==0?"else ":""}if (idx == ${r}) {
            return texture2D(textures[${r}], uv);
          }
        `).join("")}
        return texture2D(textures[0], uv);
      }

      void main(){
        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);
      }
    `});const Cr=new Map,ra=(s,t)=>{const e=JSON.stringify(s);if(Cr.has(e))return Cr.get(e);const r=(s??[]).map(n=>({type:n.type,props:t[n.type].resolveDefaults(n.props||{})}));return Cr.set(e,r),r},et=class et extends Jt{constructor(e,r,n){const i=et.createShader(r,n);super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_alpha",uniform:"uniform1f"},...i.uniforms],shaderSources:{vertex:i.vertex,fragment:i.fragment}});f(this,"effects",[]);this.effects=i.effects,this.calculateProps=qi(this.calculateProps.bind(this))}bindTextures(e){const{glw:r}=this;r.activeTexture(0),r.bindTexture(e[0].ctxTexture)}calculateProps(e){const r=this.renderer.shManager.getRegisteredEffects(),n=[];return e==null||e.forEach((i,o)=>{const l=this.effects[o],a=r[l.name],u=i.props??{},c=l.uniformInfo;Object.keys(u).forEach(h=>{const p=a.uniforms[h],m=c[h];let x=p.validator?p.validator(u[h],u):u[h];Array.isArray(x)&&(x=new Float32Array(x)),n.push({name:m.name,value:x})})}),n}bindProps(e){this.calculateProps(e.effects).forEach(n=>{this.setUniform(n.name,n.value)})}canBatchShaderProps(e,r){if(e.$dimensions.width!==r.$dimensions.width||e.$dimensions.height!==r.$dimensions.height||e.effects.length!==r.effects.length)return!1;const n=e.effects.length;let i=0;for(;i<n;i++){const o=e.effects[i],l=r.effects[i];if(o.type!==l.type)return!1;for(const a in o.props)if(l.props&&!l.props[a]||o.props[a]!==l.props[a])return!1}return!0}static createShader(e,r){const n={},i={};let o="";const l=[],a=[],u=e.effects.map(x=>{const v=r[x.type],_=v.getEffectKey(x.props||{});n[_]=n[_]?++n[_]:1;const w=n[_];w===1&&a.push({key:_,type:x.type,props:x.props});const C=new v({ref:`${_}${w===1?"":w}`,target:_,props:x.props});return o+=C.declaredUniforms,l.push(...Object.values(C.uniformInfo)),C});let c="";a==null||a.forEach(x=>{const v=r[x.type],_=v.resolveDefaults(x.props??{}),w=[];for(const A in v.methods){let K=A;const X=v.methods[A];i[A]&&i[A]!==X&&(K=et.resolveMethodDuplicate(A,X,i)),i[K]=X.replace("function",K),w.push({m:A,cm:K})}let C=v.onShaderMask instanceof Function?v.onShaderMask(_):v.onShaderMask,M=v.onColorize instanceof Function?v.onColorize(_):v.onColorize,I=v.onEffectMask instanceof Function?v.onEffectMask(_):v.onEffectMask;w.forEach(A=>{const{m:K,cm:X}=A,Z=new RegExp(`\\$${K}`,"g");C&&(C=C.replace(Z,X)),M&&(M=M.replace(Z,X)),I&&(I=I.replace(Z,X))});const F=v.getMethodParameters(v.uniforms,_),R=F.length>0?`, ${F}`:"";C&&(c+=`
        float fx_${x.key}_onShaderMask(float shaderMask ${R}) {
          ${C}
        }
        `),M&&(c+=`
          vec4 fx_${x.key}_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor${R}) {
            ${M}
          }
        `),I&&(c+=`
          vec4 fx_${x.key}_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor${R}) {
            ${I}
          }
        `)});let h="";for(const x in i)h+=i[x];let p="mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))",m=`

    `;for(let x=0;x<u.length;x++){const v=u[x],_=v.passParameters.length>0?`, ${v.passParameters}`:"",w=r[v.name];w.onShaderMask&&(m+=`
        shaderMask = fx_${v.target}_onShaderMask(shaderMask ${_});
        `),w.onColorize&&(m+=`
        maskColor = fx_${v.target}_onColorize(shaderMask, maskColor, shaderColor${_});
        `),w.onEffectMask&&(p=`fx_${v.target}_onEffectMask(shaderMask, maskColor, shaderColor${_})`);const C=u[x+1];(C===void 0||r[C.name].onEffectMask)&&(m+=`
          shaderColor = ${p};
        `)}return{effects:u,uniforms:l,fragment:et.fragment(o,h,c,m),vertex:et.vertex()}}static resolveMethodDuplicate(e,r,n,i=0){const o=e+(i>0?i:"");return n[o]&&n[o]!==r?this.resolveMethodDuplicate(e,r,n,++i):o}static resolveDefaults(e,r){return{effects:ra(e.effects,r),$dimensions:{width:0,height:0},$alpha:0}}static makeCacheKey(e,r){var i;let n="";return(i=e.effects)==null||i.forEach(o=>{const a=r[o.type].getEffectKey(o.props||{});n+=`,${a}`}),`DynamicShader${n}`}};f(et,"z$__type__Props"),f(et,"vertex",()=>`
    # ifdef GL_FRAGMENT_PRESICISON_HIGH
    precision highp float;
    # else
    precision mediump float;
    # endif

    attribute vec2 a_textureCoordinate;
    attribute vec2 a_position;
    attribute vec4 a_color;
    attribute float a_textureIndex;

    uniform vec2 u_resolution;
    uniform float u_pixelRatio;

    varying vec4 v_color;
    varying vec2 v_textureCoordinate;
    varying float v_textureIndex;

    void main(){
      vec2 normalized = a_position * u_pixelRatio / u_resolution;
      vec2 zero_two = normalized * 2.0;
      vec2 clip_space = zero_two - 1.0;

      // pass to fragment
      v_color = a_color;
      v_textureCoordinate = a_textureCoordinate;
      v_textureIndex = a_textureIndex;

      // flip y
      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
    }
  `),f(et,"fragment",(e,r,n,i)=>`
    # ifdef GL_FRAGMENT_PRESICISON_HIGH
    precision highp float;
    # else
    precision mediump float;
    # endif

    #define PI 3.14159265359

    uniform vec2 u_resolution;
    uniform vec2 u_dimensions;
    uniform float u_alpha;
    uniform float u_radius;
    uniform sampler2D u_texture;
    uniform float u_pixelRatio;

    ${e}

    varying vec4 v_color;
    varying vec2 v_textureCoordinate;

    ${r}

    ${n}

    void main() {
      vec2 p = v_textureCoordinate.xy * u_dimensions - u_dimensions * 0.5;
      vec2 d = abs(p) - (u_dimensions) * 0.5;
      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));

      vec4 shaderColor = vec4(0.0);
      float shaderMask = lng_DefaultMask;

      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;

      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));

      ${i}

      gl_FragColor = shaderColor * u_alpha;
    }
  `);let Yt=et;class $r extends Jt{constructor(t){super({renderer:t,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_radius",uniform:"uniform1f"}]})}static resolveDefaults(t){return{radius:t.radius||10,$dimensions:{width:0,height:0}}}bindTextures(t){const{glw:e}=this;e.activeTexture(0),e.bindTexture(t[0].ctxTexture)}bindProps(t){this.setUniform("u_radius",t.radius)}canBatchShaderProps(t,e){return t.radius===e.radius&&t.$dimensions.width===e.$dimensions.width&&t.$dimensions.height===e.$dimensions.height}}f($r,"z$__type__Props"),f($r,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRESICISON_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;
      attribute vec4 a_color;
      attribute float a_textureIndex;
      attribute float a_depth;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
        vec2 normalized = a_position * u_pixelRatio / u_resolution;
        vec2 zero_two = normalized * 2.0;
        vec2 clip_space = zero_two - 1.0;

        // pass to fragment
        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;

        // flip y
        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRESICISON_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform vec2 u_dimensions;
      uniform float u_radius;
      uniform sampler2D u_texture;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      float boxDist(vec2 p, vec2 size, float radius){
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }

      float fillMask(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }

      void main() {
        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;
        vec2 halfDimensions = u_dimensions * 0.5;

        float d = boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);
        gl_FragColor = mix(vec4(0.0), color, fillMask(d));
      }
    `});const na=new Float32Array([1,0,0,0,1,0,0,0,1]),ar=class ar extends Jt{constructor(t){super({renderer:t,attributes:["a_position","a_textureCoordinate"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_transform",uniform:"uniformMatrix3fv"},{name:"u_scrollY",uniform:"uniform1f"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_color",uniform:"uniform4fv"},{name:"u_size",uniform:"uniform1f"},{name:"u_distanceRange",uniform:"uniform1f"},{name:"u_debug",uniform:"uniform1i"}]})}bindTextures(t){const{glw:e}=this;e.activeTexture(0),e.bindTexture(t[0].ctxTexture)}bindProps(t){const e=ar.resolveDefaults(t);for(const r in e)if(r==="transform")this.setUniform("u_transform",!1,e[r]);else if(r==="scrollY")this.setUniform("u_scrollY",e[r]);else if(r==="color"){const n=Qe(e.color);this.setUniform("u_color",n)}else r==="size"?this.setUniform("u_size",e[r]):r==="distanceRange"?this.setUniform("u_distanceRange",e[r]):r==="debug"&&this.setUniform("u_debug",e[r]?1:0)}static resolveDefaults(t={}){return{transform:t.transform??na,scrollY:t.scrollY??0,color:t.color??4294967295,size:t.size??16,distanceRange:t.distanceRange??1,debug:t.debug??!1}}};f(ar,"shaderSources",{vertex:`
      // an attribute is an input (in) to a vertex shader.
      // It will receive data from a buffer
      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;

      uniform vec2 u_resolution;
      uniform mat3 u_transform;
      uniform float u_scrollY;
      uniform float u_pixelRatio;
      uniform float u_size;

      varying vec2 v_texcoord;

      void main() {
        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);
        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;

        // Calculate screen space with pixel ratio
        vec2 screenSpace = (transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1);

        gl_Position = vec4(screenSpace, 0.0, 1.0);
        v_texcoord = a_textureCoordinate;

      }
    `,fragment:`
      precision highp float;

      uniform vec4 u_color;
      uniform sampler2D u_texture;
      uniform float u_distanceRange;
      uniform float u_pixelRatio;
      uniform int u_debug;

      varying vec2 v_texcoord;

      float median(float r, float g, float b) {
          return max(min(r, g), min(max(r, g), b));
      }

      void main() {
          vec3 sample = texture2D(u_texture, v_texcoord).rgb;
          if (u_debug == 1) {
            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);
            return;
          }
          float scaledDistRange = u_distanceRange * u_pixelRatio;
          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);
          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;

          // Build the final color.
          // IMPORTANT: We must premultiply the color by the alpha value before returning it.
          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);
      }
    `});let Dr=ar;class kt extends be{constructor(){super(...arguments);f(this,"name","radius")}static getEffectKey(){return"radius"}static resolveDefaults(e){return{radius:e.radius??10}}}f(kt,"z$__type__Props"),f(kt,"uniforms",{radius:{value:0,method:"uniform4fv",type:"vec4",validator:e=>{let r=e;return Array.isArray(r)?r.length===2?r=[r[0],r[1],r[0],r[1]]:r.length===3?r=[r[0],r[1],r[2],r[0]]:r.length!==4&&(r=[r[0],r[0],r[0],r[0]]):typeof r=="number"&&(r=[r,r,r,r]),r}}}),f(kt,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,boxDist:`
      float function(vec2 p, vec2 size, float radius) {
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }
    `}),f(kt,"onShaderMask",`
  vec2 halfDimensions = u_dimensions * 0.5;
  float r = radius[0] * step(v_textureCoordinate.x, 0.5) * step(v_textureCoordinate.y, 0.5);
  r = r + radius[1] * step(0.5, v_textureCoordinate.x) * step(v_textureCoordinate.y, 0.5);
  r = r + radius[2] * step(0.5, v_textureCoordinate.x) * step(0.5, v_textureCoordinate.y);
  r = r + radius[3] * step(v_textureCoordinate.x, 0.5) * step(0.5, v_textureCoordinate.y);
  return $boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);
  `),f(kt,"onEffectMask",`
  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));
  `);class os extends be{constructor(){super(...arguments);f(this,"name","border")}static getEffectKey(){return"border"}static resolveDefaults(e){return{width:e.width??10,color:e.color??4294967295}}}f(os,"z$__type__Props"),f(os,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Qe(e),method:"uniform4fv",type:"vec4"}}),f(os,"onEffectMask",`
  float mask = clamp(shaderMask + width, 0.0, 1.0) - clamp(shaderMask, 0.0, 1.0);
  return mix(shaderColor, mix(shaderColor, maskColor, maskColor.a), mask);
  `),f(os,"onColorize",`
    return color;
  `);const ut=class ut extends be{constructor(){super(...arguments);f(this,"name","linearGradient")}static getEffectKey(e){return`linearGradient${e.colors.length}`}static resolveDefaults(e){const r=e.colors??[4278190080,4294967295];let n=e.stops||[];if(n.length===0||n.length!==r.length){const i=r.length;let o=0;const l=n;for(;o<i;o++)n[o]?(l[o]=n[o],n[o-1]===void 0&&l[o-2]!==void 0&&(l[o-1]=l[o-2]+(n[o]-l[o-2])/2)):l[o]=o*(1/(r.length-1));n=l}return{colors:r,stops:n,angle:e.angle??0}}};f(ut,"z$__type__Props"),f(ut,"uniforms",{angle:{value:0,method:"uniform1f",type:"float"},colors:{value:4294967295,validator:e=>e.map(n=>Qe(n)).reduce((n,i)=>n.concat(i),[]),size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),f(ut,"methods",{fromLinear:`
      vec4 function(vec4 linearRGB) {
        vec4 higher = vec4(1.055)*pow(linearRGB, vec4(1.0/2.4)) - vec4(0.055);
        vec4 lower = linearRGB * vec4(12.92);
        return mix(higher, lower, 1.0);
      }
    `,toLinear:`
      vec4 function(vec4 sRGB) {
        vec4 higher = pow((sRGB + vec4(0.055))/vec4(1.055), vec4(2.4));
        vec4 lower = sRGB/vec4(12.92);
        return mix(higher, lower, 1.0);
      }
    `,calcPoint:`
      vec2 function(float d, float angle) {
        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);
      }
    `}),f(ut,"ColorLoop",e=>{let r="";for(let n=2;n<e;n++)r+=`colorOut = mix(colorOut, colors[${n}], clamp((dist - stops[${n-1}]) / (stops[${n}] - stops[${n-1}]), 0.0, 1.0));`;return r}),f(ut,"onColorize",e=>{const r=e.colors.length||1;return`
      float a = angle - (PI / 180.0 * 90.0);
      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));
      vec2 f = $calcPoint(lineDist * 0.5, a);
      vec2 t = $calcPoint(lineDist * 0.5, a + PI);
      vec2 gradVec = t - f;
      float dist = dot(v_textureCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);

      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);
      vec4 colorOut = $fromLinear(mix($toLinear(colors[0]), $toLinear(colors[1]), stopCalc));
      ${ut.ColorLoop(r)}
      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));
    `});let Hr=ut;class Ur extends be{constructor(){super(...arguments);f(this,"name","grayscale")}static getEffectKey(){return"grayscale"}static resolveDefaults(e){return{amount:e.amount??1}}}f(Ur,"uniforms",{amount:{value:1,method:"uniform1f",type:"float"}}),f(Ur,"onColorize",`
    float grayness = 0.2 * maskColor.r + 0.6 * maskColor.g + 0.2 * maskColor.b;
    return vec4(amount * vec3(grayness) + (1.0 - amount) * maskColor.rgb, maskColor.a);
  `);class Nt extends be{constructor(){super(...arguments);f(this,"name","borderRight")}static getEffectKey(){return"borderRight"}static resolveDefaults(e){return{width:e.width??10,color:e.color??4294967295}}}f(Nt,"z$__type__Props"),f(Nt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Qe(e),method:"uniform4fv",type:"vec4"}}),f(Nt,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),f(Nt,"onEffectMask",`
  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),f(Nt,"onColorize",`
    return color;
  `);class Ot extends be{constructor(){super(...arguments);f(this,"name","borderTop")}static getEffectKey(){return"borderTop"}static resolveDefaults(e){return{width:e.width??10,color:e.color??4294967295}}}f(Ot,"z$__type__Props"),f(Ot,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Qe(e),method:"uniform4fv",type:"vec4"}}),f(Ot,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),f(Ot,"onEffectMask",`
  vec2 pos = vec2(0.0, width * 0.5);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),f(Ot,"onColorize",`
    return color;
  `);class Bt extends be{constructor(){super(...arguments);f(this,"name","borderBottom")}static getEffectKey(){return"borderBottom"}static resolveDefaults(e){return{width:e.width??10,color:e.color??4294967295}}}f(Bt,"z$__type__Props"),f(Bt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Qe(e),method:"uniform4fv",type:"vec4"}}),f(Bt,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),f(Bt,"onEffectMask",`
  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),f(Bt,"onColorize",`
    return color;
  `);class zt extends be{constructor(){super(...arguments);f(this,"name","borderLeft")}static getEffectKey(){return"borderLeft"}static resolveDefaults(e){return{width:e.width??10,color:e.color??4294967295}}}f(zt,"z$__type__Props"),f(zt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Qe(e),method:"uniform4fv",type:"vec4"}}),f(zt,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),f(zt,"onEffectMask",`
  vec2 pos = vec2(width * 0.5, 0.0);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),f(zt,"onColorize",`
    return color;
  `);class ls extends be{constructor(){super(...arguments);f(this,"name","glitch")}static getEffectKey(e){return"glitch"}static resolveDefaults(e){return{amplitude:e.amplitude??.2,narrowness:e.narrowness??4,blockiness:e.blockiness??2,minimizer:e.minimizer??8,time:e.time??Date.now()}}}f(ls,"z$__type__Props"),f(ls,"uniforms",{amplitude:{value:0,method:"uniform1f",type:"float"},narrowness:{value:0,method:"uniform1f",type:"float"},blockiness:{value:0,method:"uniform1f",type:"float"},minimizer:{value:0,method:"uniform1f",type:"float"},time:{value:0,method:"uniform1f",validator:e=>(Date.now()-e)%1e3,type:"float"}}),f(ls,"methods",{rand:`
      float function(vec2 p, float time) {
        float t = floor(time * 20.) / 10.;
        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);
      }
    `,noise:`
      float function(vec2 uv, float blockiness, float time) {
        vec2 lv = fract(uv);
        vec2 id = floor(uv);

        float n1 = rand(id, time);
        float n2 = rand(id+vec2(1,0), time);
        float n3 = rand(id+vec2(0,1), time);
        float n4 = rand(id+vec2(1,1), time);
        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);
        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);
      }
    `,fbm:`
      float function(vec2 uv, int count, float blockiness, float complexity, float time) {
        float val = 0.0;
        float amp = 0.5;
        const int MAX_ITERATIONS = 10;

        for(int i = 0; i < MAX_ITERATIONS; i++) {
          if(i >= count) {break;}
          val += amp * noise(uv, blockiness, time);
          amp *= 0.5;
          uv *= complexity;
        }
        return val;
      }
    `}),f(ls,"onColorize",`
    vec2 uv = v_textureCoordinate.xy;
    float aspect = u_dimensions.x / u_dimensions.y;
    vec2 a = vec2(uv.x * aspect , uv.y);
    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));

    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);
    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);
    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);
    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);

    vec3 f = vec3(colR, colG, colB);
    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);
  `);class qs extends be{constructor(){super(...arguments);f(this,"name","fadeOut")}static getEffectKey(){return"fadeOut"}static resolveDefaults(e){return{fade:e.fade??10}}}f(qs,"z$__type__Props"),f(qs,"uniforms",{fade:{value:0,method:"uniform4fv",type:"vec4",validator:e=>{let r=e;return Array.isArray(r)?r.length===2?r=[r[0],r[1],r[0],r[1]]:r.length===3?r=[r[0],r[1],r[2],r[0]]:r.length!==4&&(r=[r[0],r[0],r[0],r[0]]):typeof r=="number"&&(r=[r,r,r,r]),r}}}),f(qs,"onColorize",`
  vec2 point = v_textureCoordinate.xy * u_dimensions.xy;
  vec2 pos1;
  vec2 pos2;
  vec2 d;
  float c;
  vec4 result = maskColor;


  if(fade[0] > 0.0) {
    pos1 = vec2(point.x, point.y);
    pos2 = vec2(point.x, point.y + fade[0]);
    d = pos2 - pos1;
    c = dot(pos1, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[1] > 0.0) {
    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_textureCoordinate.y);
    pos2 = vec2(point.x - u_dimensions.x, v_textureCoordinate.y);
    d = pos1 - pos2;
    c = dot(pos2, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[2] > 0.0) {
    pos1 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y - fade[2]);
    pos2 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y);
    d = pos1 - pos2;
    c = dot(pos2, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[3] > 0.0) {
    pos1 = vec2(point.x, point.y);
    pos2 = vec2(point.x + fade[3], point.y);
    d = pos2 - pos1;
    c = dot(pos1, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  return result;
  `);const It=class It extends be{constructor(){super(...arguments);f(this,"name","radialGradient")}static getEffectKey(e){return`radialGradient${e.colors.length}`}static resolveDefaults(e){const r=e.colors??[4278190080,4294967295];let n=e.stops||[];if(n.length===0||n.length!==r.length){const i=r.length;let o=0;const l=n;for(;o<i;o++)n[o]?(l[o]=n[o],n[o-1]===void 0&&l[o-2]!==void 0&&(l[o-1]=l[o-2]+(n[o]-l[o-2])/2)):l[o]=o*(1/(r.length-1));n=l}return{colors:r,stops:n,width:e.width??0,height:e.height??e.width??0,pivot:e.pivot??[.5,.5]}}};f(It,"z$__type__Props"),f(It,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},pivot:{value:[.5,.5],method:"uniform2fv",type:"vec2"},colors:{value:4294967295,validator:e=>e.map(n=>Qe(n)).reduce((n,i)=>n.concat(i),[]),size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),f(It,"ColorLoop",e=>{let r="";for(let n=2;n<e;n++)r+=`colorOut = mix(colorOut, colors[${n}], clamp((dist - stops[${n-1}]) / (stops[${n}] - stops[${n-1}]), 0.0, 1.0));`;return r}),f(It,"onColorize",e=>{const r=e.colors.length||1;return`
      vec2 point = v_textureCoordinate.xy * u_dimensions;
      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);

      float dist = length((point - projection) / vec2(width, height));

      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);
      vec4 colorOut = mix(colors[0], colors[1], stopCalc);
      ${It.ColorLoop(r)}
      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));
    `});let Wr=It;class $t extends be{constructor(){super(...arguments);f(this,"name","radialProgress")}static getEffectKey(){return"radialProgress"}static resolveDefaults(e){return{width:e.width??10,progress:e.progress??.5,offset:e.offset??0,range:e.range??Math.PI*2,rounded:e.rounded??!1,radius:e.radius??1,color:e.color??4294967295}}}f($t,"z$__type__Props"),f($t,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},progress:{value:.5,method:"uniform1f",type:"float"},offset:{value:0,method:"uniform1f",type:"float"},range:{value:0,method:"uniform1f",type:"float"},rounded:{value:0,method:"uniform1f",type:"float",validator:e=>e?1:0},radius:{value:1,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Qe(e),method:"uniform4fv",type:"vec4"}}),f($t,"methods",{rotateUV:`
    vec2 function(vec2 uv, float d) {
      float s = sin(d);
      float c = cos(d);
      mat2 rotMatrix = mat2(c, -s, s, c);
      return uv * rotMatrix;
    }
    `,drawDot:`
    float function(vec2 uv, vec2 p, float r) {
      uv += p;
      float circle = length(uv) - r;
      return clamp(-circle, 0.0, 1.0);
    }
    `}),f($t,"onEffectMask",`
    float outerRadius = radius * u_dimensions.y * 0.5;

    float endAngle = range * progress - 0.0005;

    vec2 uv = v_textureCoordinate.xy * u_dimensions.xy - u_dimensions * 0.5;

    uv = $rotateUV(uv, -(offset));
    float linewidth = width * u_pixelRatio;
    float circle = length(uv) - (outerRadius - linewidth) ;
    circle = abs(circle) - linewidth;
    circle = clamp(-circle, 0.0, 1.0);

    float angle = (atan(uv.x, -uv.y) / 3.14159265359 * 0.5);
    float p = endAngle / (PI * 2.);

    circle *= step(fract(angle), fract(p));

    circle = rounded < 1. ? circle : max(circle, $drawDot(uv, vec2(0, outerRadius - linewidth), linewidth));
    circle = rounded < 1. ? circle : max(circle, $drawDot($rotateUV(uv, -(endAngle)), vec2(0, outerRadius - linewidth), linewidth));

    return mix(shaderColor, maskColor, circle);
  `),f($t,"onColorize",`
    return color;
  `);class Dt extends be{constructor(){super(...arguments);f(this,"name","holePunch")}static getEffectKey(){return"holePunch"}static resolveDefaults(e){return{x:e.x||0,y:e.y||0,width:e.width||50,height:e.height||50,radius:e.radius??0}}}f(Dt,"z$__type__Props"),f(Dt,"uniforms",{x:{value:0,method:"uniform1f",type:"float"},y:{value:0,method:"uniform1f",type:"float"},width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},radius:{value:0,method:"uniform4fv",type:"vec4",validator:e=>{let r=e;return Array.isArray(r)?r.length===2?r=[r[0],r[1],r[0],r[1]]:r.length===3?r=[r[0],r[1],r[2],r[0]]:r.length!==4&&(r=[r[0],r[0],r[0],r[0]]):typeof r=="number"&&(r=[r,r,r,r]),r}}}),f(Dt,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,boxDist:`
      float function(vec2 p, vec2 size, float radius) {
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }
    `}),f(Dt,"onShaderMask",`
  vec2 halfDimensions = u_dimensions * 0.5;
  vec2 size = vec2(width, height) * 0.5;
  vec2 basePos = v_textureCoordinate.xy * u_dimensions.xy - vec2(x, y);
  vec2 pos = basePos - size;
  float r = radius[0] * step(pos.x, 0.5) * step(pos.y, 0.5);
  r = r + radius[1] * step(0.5, pos.x) * step(pos.y, 0.5);
  r = r + radius[2] * step(0.5, pos.x) * step(0.5, pos.y);
  r = r + radius[3] * step(pos.x, 0.5) * step(0.5, pos.y);
  return $boxDist(pos, size, r);
  `),f(Dt,"onEffectMask",`
  return mix(maskColor, vec4(0.0), $fillMask(shaderMask));
  `);const eo="RoundedRectangle";class to extends Fl{constructor(e){super();f(this,"shType");this.shType=e,e!==eo&&console.warn("Unsupported shader:",e)}bindRenderOp(){}bindProps(){}attach(){}detach(){}}class ia{constructor(){f(this,"shCache",new Map);f(this,"shConstructors",{});f(this,"attachedShader",null);f(this,"effectConstructors",{});f(this,"renderer");this.registerShaderType("DefaultShader",Zi),this.registerShaderType("DefaultShaderBatched",Ji),this.registerShaderType("RoundedRectangle",$r),this.registerShaderType("DynamicShader",Yt),this.registerShaderType("SdfShader",Dr),this.registerEffectType("border",os),this.registerEffectType("borderBottom",Bt),this.registerEffectType("borderLeft",zt),this.registerEffectType("borderRight",Nt),this.registerEffectType("borderTop",Ot),this.registerEffectType("fadeOut",qs),this.registerEffectType("linearGradient",Hr),this.registerEffectType("radialGradient",Wr),this.registerEffectType("grayscale",Ur),this.registerEffectType("glitch",ls),this.registerEffectType("radius",kt),this.registerEffectType("radialProgress",$t),this.registerEffectType("holePunch",Dt)}registerShaderType(t,e){this.shConstructors[t]=e}registerEffectType(t,e){this.effectConstructors[t]=e}getRegisteredEffects(){return this.effectConstructors}getRegisteredShaders(){return this.shConstructors}loadShader(t,e){if(!this.renderer)throw new Error("Renderer is not been defined");const r=this.shConstructors[t];if(!r)throw new Error(`Shader type "${t}" is not registered`);if(this.renderer.mode==="canvas"&&r.prototype instanceof Jt)return{shader:new to(t),props:e};if(t==="DynamicShader")return this.loadDynamicShader(e);const n=r.resolveDefaults(e),i=r.makeCacheKey(n)||r.name;if(i&&this.shCache.has(i))return{shader:this.shCache.get(i),props:n};const o=new r(this.renderer,e);return i&&this.shCache.set(i,o),{shader:o,props:n}}loadDynamicShader(t){if(!this.renderer)throw new Error("Renderer is not been defined");const e=Yt.resolveDefaults(t,this.effectConstructors),r=Yt.makeCacheKey(e,this.effectConstructors);if(r&&this.shCache.has(r))return{shader:this.shCache.get(r),props:e};const n=new Yt(this.renderer,t,this.effectConstructors);return r&&this.shCache.set(r,n),{shader:n,props:e}}useShader(t){this.attachedShader!==t&&(this.attachedShader&&this.attachedShader.detach(),t.attach(),this.attachedShader=t)}}function oa(s){return/\.(ktx|pvr)$/.test(s)}const la=async s=>{const e=await(await fetch(s)).arrayBuffer();return s.indexOf(".ktx")!==-1?aa(e):ca(e)},aa=async s=>{const t=new DataView(s),e=t.getUint32(12)===16909060,r=[],n={glInternalFormat:t.getUint32(28,e),pixelWidth:t.getUint32(36,e),pixelHeight:t.getUint32(40,e),numberOfMipmapLevels:t.getUint32(56,e),bytesOfKeyValueData:t.getUint32(60,e)};let i=64;i+=n.bytesOfKeyValueData;for(let o=0;o<n.numberOfMipmapLevels;o++){const l=t.getUint32(i);i+=4,r.push(t.buffer.slice(i,l)),i+=l}return{data:{glInternalFormat:n.glInternalFormat,mipmaps:r,width:n.pixelWidth||0,height:n.pixelHeight||0,type:"ktx"},premultiplyAlpha:!1}},ca=async s=>{const l=s,a=new Int32Array(l,0,13),u=a[12]+52,c=new Uint8Array(l,u),h=[],p={pixelWidth:a[7],pixelHeight:a[6],numberOfMipmapLevels:a[11]||0};let m=0,x=p.pixelWidth||0,v=p.pixelHeight||0;for(let _=0;_<p.numberOfMipmapLevels;_++){const w=(x+3>>2)*(v+3>>2)*8,C=new Uint8Array(l,c.byteOffset+m,w);h.push(C),m+=w,x=x>>1,v=v>>1}return{data:{glInternalFormat:36196,mipmaps:h,width:p.pixelWidth||0,height:p.pixelHeight||0,type:"pvr"},premultiplyAlpha:!1}},_s=class _s extends Wi{constructor(e,r){super(e);f(this,"props");this.props=_s.resolveDefaults(r)}hasAlphaChannel(e){return e.indexOf("image/png")!==-1}async getTextureData(){const{src:e,premultiplyAlpha:r}=this.props;if(!e)return{data:null};if(typeof e!="string")return e instanceof ImageData?{data:e,premultiplyAlpha:r}:{data:e(),premultiplyAlpha:r};if(oa(e))return la(e);if(this.txManager.imageWorkerManager)return await this.txManager.imageWorkerManager.getImage(e,r);if(this.txManager.hasCreateImageBitmap){const i=await(await fetch(e)).blob(),o=r??this.hasAlphaChannel(i.type);return{data:await createImageBitmap(i,{premultiplyAlpha:o?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}),premultiplyAlpha:o}}else{const n=new Image;return e.substr(0,5)!=="data:"&&(n.crossOrigin="Anonymous"),n.src=e,await new Promise((i,o)=>{n.onload=()=>i(),n.onerror=()=>o(new Error("Failed to load image"))}).catch(i=>{console.error(i)}),{data:n,premultiplyAlpha:r??!0}}}static makeCacheKey(e){const r=_s.resolveDefaults(e),n=r.key||r.src;return typeof n!="string"?!1:`ImageTexture,${n},${r.premultiplyAlpha??"true"}`}static resolveDefaults(e){return{src:e.src??"",premultiplyAlpha:e.premultiplyAlpha??!0,key:e.key??null}}};f(_s,"z$__type__Props");let Yr=_s;const ua=24;function ha(s,t,e,r,n,i,o,l,a){const u=Math.min(Math.max(o.firstLineIdx,0),l.length),c=0,{metrics:h}=e;H(h,"Font metrics not loaded"),H(e.data,"Font data not loaded");const p=(h.ascender-h.descender)*s;let m=0;r==="middle"?m=(t-p)/2:r==="bottom"&&(m=t-p);const x=n/i,v=e.data.common.base,w=h.ascender*s-v,C=x+w+u*t+m;if(!(a&&C>=a/i))return{sdfX:c,sdfY:C,lineIndex:u}}class as{constructor(t,e=0){f(this,"iterator");f(this,"peekBuffer",[]);f(this,"_lastIndex");this.iterator=t,this.iterator=t,this._lastIndex=e-1,this.peekBuffer=[]}next(){const t=this.peekBuffer.length>0?this.peekBuffer.pop():this.iterator.next();return t.done?this._lastIndex=-1:this._lastIndex++,t}peek(){if(this.peekBuffer.length>0)return this.peekBuffer[0];const t=this.iterator.next();return this.peekBuffer.push(t),t}get lastIndex(){return this._lastIndex}}function*cs(s,t=0){let e=t;for(;e<s.length;){const r=s.codePointAt(e);if(r===void 0)throw new Error("Invalid Unicode code point");yield r,e+=r<=65535?1:2}}function fa(s,t,e){const r=e.shapeText(t,new as(cs(s,0),0));let n=0;for(const i of r)i.mapped&&(n+=i.xAdvance);return n}function da(s,t,e,r,n,i,o,l,a,u,c,h,p,m,x,v,_,w,C){H(x,"Font face must be loaded"),H(x.loaded,"Font face must be loaded"),H(x.data,"Font face must be loaded"),H(x.shaper,"Font face must be loaded");const M=l/x.data.info.size,I=a/M,F=i/M,R=u/M,A=p[s],K=(A==null?void 0:A.codepointIndex)||0,X=(A==null?void 0:A.maxX)||0,Z=(A==null?void 0:A.maxY)||0;let G=X,le=Z,se=t,ie=e,U=0;const W={codepointIndex:-1,bufferOffset:-1,xStart:-1},Y=x.shaper,ee={letterSpacing:R};let xe=Y.shapeText(ee,new as(cs(r,K),K)),ve,_e=-1;const de=[],rt=o/M,nt=fa(w,ee,Y);let Ze=!0;for(;Ze;){const he=(C===0||s+1<C)&&(h!=="both"||_||ie+I+x.maxCharHeight<=rt),b=he?F:F-nt;let N=0;const B=ie+x.maxCharHeight>=m.y1,D=ie<=m.y2,te=B&&D;for(;(ve=xe.next())&&!ve.done;){const J=ve.value;if(s===p.length)p.push({codepointIndex:J.cluster,maxY:le,maxX:G});else if(s>p.length)throw new Error("Unexpected lineCache length");if(J.codepoint===32||J.codepoint===10?W.codepointIndex!==-1&&(W.codepointIndex=-1,N=se):W.codepointIndex===-1&&(W.codepointIndex=J.cluster,W.bufferOffset=U,W.xStart=N),J.mapped){const d=se+J.xOffset+J.width;if(h!=="none"&&d>=b&&W.codepointIndex!==-1&&W.xStart>0)if(he){xe=Y.shapeText(ee,new as(cs(r,W.codepointIndex),W.codepointIndex)),U=W.bufferOffset;break}else xe=Y.shapeText(ee,new as(cs(w,0),0)),se=W.xStart,U=W.bufferOffset,h="none";else{const g=se+J.xOffset,y=ie+J.yOffset;if(te){_e===-1&&(_e=U);const S=x.getAtlasEntry(J.glyphId),T=S.x/x.data.common.scaleW,L=S.y/x.data.common.scaleH,z=S.width/x.data.common.scaleW,P=S.height/x.data.common.scaleH;c[U++]=g,c[U++]=y,c[U++]=T,c[U++]=L,c[U++]=g+J.width,c[U++]=y,c[U++]=T+z,c[U++]=L,c[U++]=g,c[U++]=y+J.height,c[U++]=T,c[U++]=L+P,c[U++]=g+J.width,c[U++]=y+J.height,c[U++]=T+z,c[U++]=L+P}le=Math.max(le,y+J.height),G=Math.max(G,g+J.width),se+=J.xAdvance}}else if(J.codepoint===10){if(he)break;xe=Y.shapeText(ee,new as(cs(w,0),0)),h="none"}}_e!==-1&&(de.push({bufferStart:_e,bufferEnd:U}),_e=-1),se=0,ie+=I,s++,W.codepointIndex=-1,N=0,!v&&h==="both"&&ie>m.y2||ve&&ve.done?Ze=!1:he||(Ze=!1)}if(n==="center"){const he=h==="none"?G:F;for(let b=0;b<de.length;b++){const N=de[b],B=c[N.bufferEnd-4]-c[N.bufferStart],D=(he-B)/2;for(let te=N.bufferStart;te<N.bufferEnd;te+=4)c[te]+=D}}else if(n==="right"){const he=h==="none"?G:F;for(let b=0;b<de.length;b++){const N=de[b],B=N.bufferEnd===N.bufferStart?0:c[N.bufferEnd-4]-c[N.bufferStart],D=he-B;for(let te=N.bufferStart;te<N.bufferEnd;te+=4)c[te]+=D}}return H(ve),{bufferNumFloats:U,bufferNumQuads:U/16,layoutNumCharacters:ve.done?r.length-K:ve.value.cluster-K+1,fullyProcessed:!!ve.done,maxX:G,maxY:le,numLines:p.length}}function pa(s,t){return Math.ceil(s/t)*t}function ga(s,t){return Math.floor(s/t)*t}function ma(s,t,e,r,n,i,o,l){const{screen:a,sdf:u}=s;if(!Ll(o))a.x1=0,a.y1=0,a.x2=0,a.y2=0,u.x1=0,u.y1=0,u.x2=0,u.y2=0,s.numLines=0,s.firstLineIdx=0;else{const c=o.x1-t,h=c+(o.x2-o.x1),p=o.y1-e+r,m=ga(p-i,n||1),x=pa(p+(o.y2-o.y1)+i,n||1);a.x1=c,a.y1=m,a.x2=h,a.y2=x,u.x1=c/l,u.y1=m/l,u.x2=h/l,u.y2=x/l,s.numLines=Math.ceil((x-m)/n),s.firstLineIdx=n?Math.floor(m/n):0}s.valid=!0}const xa={x:0,y:0,width:0,height:0};class ya extends Gi{constructor(e){super(e);f(this,"ssdfFontFamilies",{});f(this,"msdfFontFamilies",{});f(this,"fontFamilyArray",[this.ssdfFontFamilies,this.msdfFontFamilies]);f(this,"sdfShader");f(this,"rendererBounds");this.sdfShader=this.stage.shManager.loadShader("SdfShader").shader,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(e,r)=>{e.props.fontFamily=r,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontWeight:(e,r)=>{e.props.fontWeight=r,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontStyle:(e,r)=>{e.props.fontStyle=r,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontStretch:(e,r)=>{e.props.fontStretch=r,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontSize:(e,r)=>{e.props.fontSize=r,this.invalidateLayoutCache(e)},text:(e,r)=>{e.props.text=r,this.invalidateLayoutCache(e)},textAlign:(e,r)=>{e.props.textAlign=r,this.invalidateLayoutCache(e)},color:(e,r)=>{e.props.color=r},x:(e,r)=>{e.props.x=r,e.elementBounds.valid&&(this.setElementBoundsX(e),!e.renderWindow.valid&&Tr(e.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(e))},y:(e,r)=>{e.props.y=r,e.elementBounds.valid&&(this.setElementBoundsY(e),!e.renderWindow.valid&&Tr(e.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(e))},contain:(e,r)=>{e.props.contain=r,this.invalidateLayoutCache(e)},width:(e,r)=>{e.props.width=r,e.props.contain!=="none"&&this.invalidateLayoutCache(e)},height:(e,r)=>{e.props.height=r,e.props.contain==="both"&&this.invalidateLayoutCache(e)},offsetY:(e,r)=>{e.props.offsetY=r,this.invalidateLayoutCache(e)},scrollable:(e,r)=>{e.props.scrollable=r,this.invalidateLayoutCache(e)},scrollY:(e,r)=>{e.props.scrollY=r,this.scheduleUpdateState(e)},letterSpacing:(e,r)=>{e.props.letterSpacing=r,this.invalidateLayoutCache(e)},lineHeight:(e,r)=>{e.props.lineHeight=r,e.resLineHeight=void 0,this.invalidateLayoutCache(e)},maxLines:(e,r)=>{e.props.maxLines=r,this.invalidateLayoutCache(e)},textBaseline:(e,r)=>{e.props.textBaseline=r,this.invalidateLayoutCache(e)},verticalAlign:(e,r)=>{e.props.verticalAlign=r,this.invalidateLayoutCache(e)},overflowSuffix:(e,r)=>{e.props.overflowSuffix=r,this.invalidateLayoutCache(e)},debug:(e,r)=>{e.props.debug=r}}}canRenderFont(e){const{fontFamily:r}=e;return r in this.ssdfFontFamilies||r in this.msdfFontFamilies||r==="$$SDF_FAILURE_TEST$$"}isFontFaceSupported(e){return e instanceof Bn}addFontFace(e){H(e instanceof Bn);const r=e.fontFamily,n=e.type==="ssdf"?this.ssdfFontFamilies:e.type==="msdf"?this.msdfFontFamilies:void 0;if(!n){console.warn(`Invalid font face type: ${e.type}`);return}let i=n[r];i||(i=new Set,n[r]=i),i.add(e)}createState(e){return{props:e,status:"initialState",updateScheduled:!1,emitter:new _t,lineCache:[],forceFullLayoutCalc:!1,renderWindow:{screen:{x1:0,y1:0,x2:0,y2:0},sdf:{x1:0,y1:0,x2:0,y2:0},firstLineIdx:0,numLines:0,valid:!1},elementBounds:{x1:0,y1:0,x2:0,y2:0,valid:!1},clippingRect:{x:0,y:0,width:0,height:0,valid:!1},bufferNumFloats:0,bufferNumQuads:0,vertexBuffer:void 0,webGlBuffers:null,bufferUploaded:!1,textH:void 0,textW:void 0,distanceRange:0,trFontFace:void 0,isRenderable:!1,resLineHeight:void 0,debugData:{updateCount:0,layoutCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,drawCount:0,bufferSize:0}}}updateState(e){let{trFontFace:r}=e;const{textH:n,lineCache:i,debugData:o,forceFullLayoutCalc:l}=e;if(o.updateCount++,e.status==="initialState"&&this.setStatus(e,"loading"),!r){if(r=this.resolveFontFace(e.props),e.trFontFace=r,!r){const Y=`SdfTextRenderer: Could not resolve font face for family: '${e.props.fontFamily}'`;console.error(Y),this.setStatus(e,"failed",new Error(Y));return}r.texture.setRenderableOwner(e,e.isRenderable)}if(!r.loaded){r.once("loaded",()=>{this.scheduleUpdateState(e)});return}H(r.data,"Font face data should be loaded"),H(r.metrics,"Font face metrics should be loaded");const{text:a,fontSize:u,x:c,y:h,contain:p,width:m,height:x,verticalAlign:v,scrollable:_,overflowSuffix:w,maxLines:C}=e.props,M=p==="both"&&_?e.props.scrollY:0,{renderWindow:I}=e,F=r.data.info.size,R=u/F;let A=e.resLineHeight;if(A===void 0){const Y=e.props.lineHeight;Y===void 0?A=Qi(r.metrics,u):A=Y,e.resLineHeight=A}const K=A/R;e.distanceRange=R*r.data.distanceField.distanceRange;const X=a.length*ua;let Z=e.vertexBuffer;(!Z||Z.length<X)&&(Z=new Float32Array(X*2));const G=e.elementBounds;if(G.valid||(this.setElementBoundsX(e),this.setElementBoundsY(e),G.valid=!0),!l&&I.valid){const Y=I.screen;if(c+Y.x1<=G.x1&&c+Y.x2>=G.x2&&h-M+Y.y1<=G.y1&&h-M+Y.y2>=G.y2){this.setStatus(e,"loaded");return}I.valid=!1,this.setStatus(e,"loading")}const{offsetY:le,textAlign:se}=e.props;if(!I.valid){if(!Tr(G,this.rendererBounds))return;ma(I,c,h,M,A,p==="both"?G.y2-G.y1:0,G,R)}const ie=ha(F,K,r,v,le,R,I,i,n);if(!ie){this.setStatus(e,"loaded");return}const{letterSpacing:U}=e.props,W=da(ie.lineIndex,ie.sdfX,ie.sdfY,a,se,m,x,u,A,U,Z,p,i,I.sdf,r,l,_,w,C);e.bufferUploaded=!1,e.bufferNumFloats=W.bufferNumFloats,e.bufferNumQuads=W.bufferNumQuads,e.vertexBuffer=Z,e.renderWindow=I,o.lastLayoutNumCharacters=W.layoutNumCharacters,o.bufferSize=Z.byteLength,W.fullyProcessed&&(e.textW=W.maxX*R,e.textH=W.numLines*K*R),this.setStatus(e,"loaded")}renderQuads(e,r,n,i,o,l){var G,le;if(!e.vertexBuffer)return;const a=this.stage.renderer;H(a instanceof Yi);const{fontSize:u,color:c,contain:h,scrollable:p,zIndex:m,debug:x}=e.props,v=h==="both"&&p?e.props.scrollY:0,{textW:_=0,textH:w=0,distanceRange:C,vertexBuffer:M,bufferUploaded:I,trFontFace:F,elementBounds:R}=e;let{webGlBuffers:A}=e;if(!A){const se=a.glw,ie=4*Float32Array.BYTES_PER_ELEMENT,U=se.createBuffer();H(U),e.webGlBuffers=new Pl([{buffer:U,attributes:{a_position:{name:"a_position",size:2,type:se.FLOAT,normalized:!1,stride:ie,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:se.FLOAT,normalized:!1,stride:ie,offset:2*Float32Array.BYTES_PER_ELEMENT}}}]),e.bufferUploaded=!1,H(e.webGlBuffers),A=e.webGlBuffers}if(!I){const se=a.glw,ie=(A==null?void 0:A.getBuffer("a_textureCoordinate"))??null;se.arrayBufferData(ie,M,se.STATIC_DRAW),e.bufferUploaded=!0}if(H(F),p&&h==="both"){H(R.valid);const se=kl(R,xa);n.valid?(e.clippingRect.valid=!0,n=an(n,se,e.clippingRect)):(e.clippingRect.valid=!0,n=ji(se,e.clippingRect))}const K=new Nl(a.glw,a.options,A,this.sdfShader,{transform:r.getFloatArr(),color:Ol(c,i),size:u/(((G=F.data)==null?void 0:G.info.size)||0),scrollY:v,distanceRange:C,debug:x.sdfShaderDebug},i,n,{height:w,width:_},0,m,!1,o,l),X=(le=e.trFontFace)==null?void 0:le.texture;H(X);const Z=this.stage.txManager.getCtxTexture(X);K.addTexture(Z),K.length=e.bufferNumFloats,K.numQuads=e.bufferNumQuads,a.addRenderOp(K)}setIsRenderable(e,r){var n;super.setIsRenderable(e,r),(n=e.trFontFace)==null||n.texture.setRenderableOwner(e,r)}destroyState(e){var r;super.destroyState(e),(r=e.trFontFace)==null||r.texture.setRenderableOwner(e,!1)}resolveFontFace(e){return cn.resolveFontFace(this.fontFamilyArray,e)}releaseFontFace(e){e.resLineHeight=void 0,e.trFontFace&&(e.trFontFace.texture.setRenderableOwner(e,!1),e.trFontFace=void 0)}invalidateLayoutCache(e){e.renderWindow.valid=!1,e.elementBounds.valid=!1,e.textH=void 0,e.textW=void 0,e.lineCache=[],this.setStatus(e,"loading"),this.scheduleUpdateState(e)}setElementBoundsX(e){const{x:r,contain:n,width:i}=e.props,{elementBounds:o}=e;o.x1=r,o.x2=n!=="none"?r+i:1/0}setElementBoundsY(e){const{y:r,contain:n,height:i}=e.props,{elementBounds:o}=e;o.y1=r,o.y2=n==="both"?r+i:1/0}}function va(s){return s.prototype instanceof Bl}async function _a(s,t){let e;try{console.log("Loading core extension",s),e=await import(s)}catch(n){console.error(`The core extension module at '${s}' could not be loaded.`),console.error(n);return}if(!e.default){console.error(`The core extension module at '${s}' does not have a default export.`);return}const r=e.default;if(va(r)){const n=new r;try{await n.run(t)}catch(i){console.error(`The core extension at '${s}' threw an error.`),console.error(i)}}else console.error(`The core extension at '${s}' does not extend CoreExtension.`)}function so(s){const t={boolean:!0,string:!0,number:!0,undefined:!0},e=Object.keys(s);for(let r=0;r<e.length;r++){const n=e[r];if(!n)continue;const i=s[n],o=typeof i;o==="string"&&i.length>2048&&(console.warn(`Custom Data value for ${n} is too long, it will be truncated to 2048 characters`),s[n]=i.substring(0,2048)),t[o]||(console.warn(`Custom Data value for ${n} is not a boolean, string, or number, it will be ignored`),delete s[n])}return s}class wa extends _t{constructor(e,r,n){super();f(this,"root",null);f(this,"driver");f(this,"canvas");f(this,"settings");f(this,"inspector",null);f(this,"nodes",new Map);f(this,"nextTextureId",1);f(this,"textureTracker");const i={appWidth:e.appWidth||1920,appHeight:e.appHeight||1080,txMemByteThreshold:e.txMemByteThreshold||124e6,boundsMargin:e.boundsMargin||0,deviceLogicalPixelRatio:e.deviceLogicalPixelRatio||1,devicePhysicalPixelRatio:e.devicePhysicalPixelRatio||window.devicePixelRatio,clearColor:e.clearColor??0,coreExtensionModule:e.coreExtensionModule||null,experimental_FinalizationRegistryTextureUsageTracker:e.experimental_FinalizationRegistryTextureUsageTracker??!1,textureCleanupOptions:e.textureCleanupOptions||{},fpsUpdateInterval:e.fpsUpdateInterval||0,numImageWorkers:e.numImageWorkers!==void 0?e.numImageWorkers:2,enableContextSpy:e.enableContextSpy??!1,enableInspector:e.enableInspector??!1,renderMode:e.renderMode??"webgl"};this.settings=i;const{appWidth:o,appHeight:l,deviceLogicalPixelRatio:a,devicePhysicalPixelRatio:u,enableInspector:c}=i,h=w=>{this.driver.releaseTexture(w)},p=i.experimental_FinalizationRegistryTextureUsageTracker&&typeof FinalizationRegistry=="function";this.textureTracker=p?new Xl(h):new jl(h,this.settings.textureCleanupOptions);const m=o*a,x=l*a;this.driver=n;const v=document.createElement("canvas");this.canvas=v,v.width=m*u,v.height=x*u,v.style.width=`${m}px`,v.style.height=`${x}px`;let _;if(typeof r=="string"?_=document.getElementById(r):_=r,!_)throw new Error("Could not find target element");n.onCreateNode=w=>{this.nodes.set(w.id,w)},n.onBeforeDestroyNode=w=>{this.nodes.delete(w.id)},n.onFpsUpdate=w=>{this.emit("fpsUpdate",w)},n.onFrameTick=w=>{this.emit("frameTick",w)},n.onIdle=()=>{this.emit("idle")},_.appendChild(v),c&&!Ui()&&(this.inspector=new Kl(v,i))}async init(){await this.driver.init(this,this.settings,this.canvas),this.root=this.driver.getRootNode()}createNode(e){return this.inspector?this.inspector.createNode(this.driver,this.resolveNodeDefaults(e)):this.driver.createNode(this.resolveNodeDefaults(e))}createTextNode(e){const r=e.fontSize??16,n={...this.resolveNodeDefaults(e),text:e.text??"",textRendererOverride:e.textRendererOverride??null,fontSize:r,fontFamily:e.fontFamily??"sans-serif",fontStyle:e.fontStyle??"normal",fontWeight:e.fontWeight??"normal",fontStretch:e.fontStretch??"normal",textAlign:e.textAlign??"left",contain:e.contain??"none",scrollable:e.scrollable??!1,scrollY:e.scrollY??0,offsetY:e.offsetY??0,letterSpacing:e.letterSpacing??0,lineHeight:e.lineHeight,maxLines:e.maxLines??0,textBaseline:e.textBaseline??"alphabetic",verticalAlign:e.verticalAlign??"middle",overflowSuffix:e.overflowSuffix??"...",debug:e.debug??{}};return this.inspector?this.inspector.createTextNode(this.driver,n):this.driver.createTextNode(n)}resolveNodeDefaults(e){const r=e.color??4294967295,n=e.colorTl??e.colorTop??e.colorLeft??r,i=e.colorTr??e.colorTop??e.colorRight??r,o=e.colorBl??e.colorBottom??e.colorLeft??r,l=e.colorBr??e.colorBottom??e.colorRight??r,a=so(e.data??{});return{x:e.x??0,y:e.y??0,width:e.width??0,height:e.height??0,alpha:e.alpha??1,autosize:e.autosize??!1,clipping:e.clipping??!1,color:r,colorTop:e.colorTop??r,colorBottom:e.colorBottom??r,colorLeft:e.colorLeft??r,colorRight:e.colorRight??r,colorBl:o,colorBr:l,colorTl:n,colorTr:i,zIndex:e.zIndex??0,zIndexLocked:e.zIndexLocked??0,parent:e.parent??null,texture:e.texture??null,shader:e.shader??null,src:e.src??"",scale:e.scale??null,scaleX:e.scaleX??e.scale??1,scaleY:e.scaleY??e.scale??1,mount:e.mount??0,mountX:e.mountX??e.mount??0,mountY:e.mountY??e.mount??0,pivot:e.pivot??.5,pivotX:e.pivotX??e.pivot??.5,pivotY:e.pivotY??e.pivot??.5,rotation:e.rotation??0,rtt:e.rtt??!1,data:a}}destroyNode(e){return this.inspector&&this.inspector.destroyNode(e),this.driver.destroyNode(e)}createTexture(e,r,n){const i=this.nextTextureId++,o={descType:"texture",txType:e,props:r,options:{...n,id:i}};return this.textureTracker.registerTexture(o),o}createShader(e,r){return{descType:"shader",shType:e,props:r}}getNodeById(e){return this.nodes.get(e)||null}toggleFreeze(){throw new Error("Not implemented")}advanceFrame(){throw new Error("Not implemented")}rerender(){throw new Error("Not implemented")}}class ba extends _t{constructor(e,r,n){super();f(this,"node");f(this,"props");f(this,"propStartValues",{});f(this,"restoreValues",{});f(this,"settings");f(this,"progress",0);f(this,"delayFor",0);f(this,"timingFunction");f(this,"propsList");this.node=e,this.props=r,this.propStartValues={},this.propsList=Object.keys(r),this.propsList.forEach(l=>{this.propStartValues[l]=e[l]});const i=n.easing||"linear",o=n.delay??0;this.settings={duration:n.duration??0,delay:o,easing:i,loop:n.loop??!1,repeat:n.repeat??0,repeatDelay:n.repeatDelay??0,stopMethod:n.stopMethod??!1},this.timingFunction=zl(i),this.delayFor=o}reset(){this.progress=0,this.delayFor=this.settings.delay||0,this.update(0)}restore(){this.reset(),Object.keys(this.props).forEach(e=>{this.node[e]=this.propStartValues[e]})}reverse(){this.progress=0,Object.keys(this.props).forEach(e=>{const r=this.props[e],n=this.propStartValues[e];this.props[e]=n,this.propStartValues[e]=r}),this.settings.loop||(this.settings.stopMethod=!1)}applyEasing(e,r,n){return(this.timingFunction(e)||e)*(n-r)+r}update(e){const{duration:r,loop:n,easing:i,stopMethod:o}=this.settings,{delayFor:l}=this;if(r===0&&l===0){this.emit("finished",{});return}if(this.delayFor>0){if(this.delayFor-=e,this.delayFor>=0)return;e=-this.delayFor,this.delayFor=0}if(r===0){this.emit("finished",{});return}if(this.progress===0&&this.emit("animating",{}),this.progress+=e/r,this.progress>1&&(this.progress=n?0:1,o)){this.emit("finished",{});return}for(let a=0;a<this.propsList.length;a++){const u=this.propsList[a],c=this.props[u],h=this.propStartValues[u],p=c;if(u.indexOf("color")!==-1){if(h===p){this.node[u]=h;continue}if(i){const m=this.timingFunction(this.progress)||this.progress,x=zn(h,p,m);this.node[u]=x;continue}this.node[u]=zn(h,p,this.progress);continue}if(i){this.node[u]=this.applyEasing(this.progress,h,p);continue}this.node[u]=h+(p-h)*this.progress}this.progress===1&&this.emit("finished",{})}}class Ta extends _t{constructor(e,r){super();f(this,"manager");f(this,"animation");f(this,"stoppedPromise");f(this,"stoppedResolve",null);f(this,"state");this.manager=e,this.animation=r,this.state="stopped",this.stoppedPromise=Promise.resolve(),this.onAnimating=this.onAnimating.bind(this),this.onFinished=this.onFinished.bind(this)}start(){return this.state!=="running"&&(this.makeStoppedPromise(),this.registerAnimation(),this.state="running"),this}stop(){return this.unregisterAnimation(),this.stoppedResolve!==null&&(this.stoppedResolve(),this.stoppedResolve=null,this.emit("stopped",this)),this.animation.reset(),this.state="stopped",this}pause(){return this.unregisterAnimation(),this.state="paused",this}restore(){return this.stoppedResolve=null,this.animation.restore(),this}waitUntilStopped(){return this.stoppedPromise}registerAnimation(){this.animation.once("finished",this.onFinished),this.animation.on("animating",this.onAnimating),this.manager.registerAnimation(this.animation)}unregisterAnimation(){this.manager.unregisterAnimation(this.animation),this.animation.off("finished",this.onFinished),this.animation.off("animating",this.onAnimating)}makeStoppedPromise(){this.stoppedResolve===null&&(this.stoppedPromise=new Promise(e=>{this.stoppedResolve=e}))}onFinished(){H(this.stoppedResolve);const{loop:e,stopMethod:r}=this.animation.settings;if(r==="reverse"){this.animation.reverse();return}e||(this.unregisterAnimation(),this.stoppedResolve(),this.stoppedResolve=null,this.emit("stopped",this),this.state="stopped")}onAnimating(){this.emit("animating",this)}}class Fe{constructor(){f(this,"ta");f(this,"tb");f(this,"tx");f(this,"tc");f(this,"td");f(this,"ty");f(this,"_floatArr",null);f(this,"mutation");this.ta=0,this.tb=0,this.tx=0,this.tc=0,this.td=0,this.ty=0,this.mutation=!0}static get temp(){return Sa}static multiply(t,e,r){const n=t.ta*e.ta+t.tb*e.tc,i=t.ta*e.tb+t.tb*e.td,o=t.ta*e.tx+t.tb*e.ty+t.tx,l=t.tc*e.ta+t.td*e.tc,a=t.tc*e.tb+t.td*e.td,u=t.tc*e.tx+t.td*e.ty+t.ty;return r||(r=new Fe),r.ta=n,r.tb=i,r.tx=o,r.tc=l,r.td=a,r.ty=u,r.mutation=!0,r}static identity(t){return t||(t=new Fe),t.ta=1,t.tb=0,t.tx=0,t.tc=0,t.td=1,t.ty=0,t.mutation=!0,t}static translate(t,e,r){return r||(r=new Fe),r.ta=1,r.tb=0,r.tx=t,r.tc=0,r.td=1,r.ty=e,r.mutation=!0,r}static scale(t,e,r){return r||(r=new Fe),r.ta=t,r.tb=0,r.tx=0,r.tc=0,r.td=e,r.ty=0,r.mutation=!0,r}static rotate(t,e){const r=Math.cos(t),n=Math.sin(t);return e||(e=new Fe),e.ta=r,e.tb=-n,e.tx=0,e.tc=n,e.td=r,e.ty=0,e.mutation=!0,e}static copy(t,e){return e||(e=new Fe),e.ta=t.ta,e.tc=t.tc,e.tb=t.tb,e.td=t.td,e.tx=t.tx,e.ty=t.ty,e.mutation=!0,e}translate(t,e){return this.tx=this.ta*t+this.tb*e+this.tx,this.ty=this.tc*t+this.td*e+this.ty,this.mutation=!0,this}scale(t,e){return this.ta=this.ta*t,this.tb=this.tb*e,this.tc=this.tc*t,this.td=this.td*e,this.mutation=!0,this}rotate(t){if(t===0||!(t%Math.PI*2))return this;const e=Math.cos(t),r=Math.sin(t),n=this.ta*e+this.tb*r,i=this.tb*e-this.ta*r,o=this.tc*e+this.td*r,l=this.td*e-this.tc*r;return this.ta=n,this.tb=i,this.tc=o,this.td=l,this.mutation=!0,this}multiply(t){return Fe.multiply(this,t,this)}getFloatArr(){return this._floatArr||(this._floatArr=new Float32Array(9)),this.mutation&&(this._floatArr[0]=this.ta,this._floatArr[1]=this.tc,this._floatArr[2]=0,this._floatArr[3]=this.tb,this._floatArr[4]=this.td,this._floatArr[5]=0,this._floatArr[6]=this.tx,this._floatArr[7]=this.ty,this._floatArr[8]=1,this.mutation=!1),this._floatArr}}const Sa=new Fe,Ls=0,Ps=2,ks=4,Ns=6,Os=1,Bs=3,zs=5,$s=7;class tr{constructor(t){f(this,"data");this.data=new Float32Array(8),t&&(this.data[Ls]=t[Ls],this.data[Ps]=t[Ps],this.data[ks]=t[ks],this.data[Ns]=t[Ns],this.data[Os]=t[Os],this.data[Bs]=t[Bs],this.data[zs]=t[zs],this.data[$s]=t[$s])}static translate(t,e,r,n,i,o,l,a,u){return u||(u=new tr),u.data[Ls]=t,u.data[Ps]=r,u.data[ks]=i,u.data[Ns]=l,u.data[Os]=e,u.data[Bs]=n,u.data[zs]=o,u.data[$s]=a,u}get x1(){return this.data[Ls]}get x2(){return this.data[Ps]}get x3(){return this.data[ks]}get x4(){return this.data[Ns]}get y1(){return this.data[Os]}get y2(){return this.data[Bs]}get y3(){return this.data[zs]}get y4(){return this.data[$s]}}var ye;(function(s){s[s.Init=0]="Init",s[s.OutOfBounds=2]="OutOfBounds",s[s.InBounds=4]="InBounds",s[s.InViewport=8]="InViewport"})(ye||(ye={}));const Et=new Map;Et.set(ye.Init,"init");Et.set(ye.OutOfBounds,"outOfBounds");Et.set(ye.InBounds,"inBounds");Et.set(ye.InViewport,"inViewport");var k;(function(s){s[s.Children=1]="Children",s[s.ScaleRotate=2]="ScaleRotate",s[s.Local=4]="Local",s[s.Global=8]="Global",s[s.Clipping=16]="Clipping",s[s.CalculatedZIndex=32]="CalculatedZIndex",s[s.ZIndexSortedChildren=64]="ZIndexSortedChildren",s[s.PremultipliedColors=128]="PremultipliedColors",s[s.WorldAlpha=256]="WorldAlpha",s[s.RenderState=512]="RenderState",s[s.IsRenderable=1024]="IsRenderable",s[s.RenderTexture=2048]="RenderTexture",s[s.ParentRenderTexture=4096]="ParentRenderTexture",s[s.None=0]="None",s[s.All=8191]="All"})(k||(k={}));class un extends _t{constructor(e,r){super();f(this,"stage");f(this,"children",[]);f(this,"props");f(this,"updateType",k.All);f(this,"globalTransform");f(this,"scaleRotateTransform");f(this,"localTransform");f(this,"renderCoords");f(this,"renderBound");f(this,"strictBound");f(this,"preloadBound");f(this,"clippingRect",{x:0,y:0,width:0,height:0,valid:!1});f(this,"isRenderable",!1);f(this,"renderState",ye.Init);f(this,"worldAlpha",1);f(this,"premultipliedColorTl",0);f(this,"premultipliedColorTr",0);f(this,"premultipliedColorBl",0);f(this,"premultipliedColorBr",0);f(this,"calcZIndex",0);f(this,"hasRTTupdates",!1);f(this,"parentHasRenderTexture",!1);f(this,"onTextureLoaded",(e,r)=>{this.autosizeNode(r),this.stage.requestRender(),this.parentHasRenderTexture&&this.setRTTUpdates(1),this.emit("loaded",{type:"texture",dimensions:r})});f(this,"onTextureFailed",(e,r)=>{this.emit("failed",{type:"texture",error:r})});f(this,"onTextureFreed",e=>{this.emit("freed",{type:"texture"})});this.stage=e,this.props={...r,parent:null},this.parent=r.parent,this.rtt=r.rtt,this.updateScaleRotateTransform()}loadTexture(e,r,n=null){this.props.texture&&this.unloadTexture();const{txManager:i}=this.stage,o=i.loadTexture(e,r,n);this.props.texture=o,this.props.textureOptions=n,this.setUpdateType(k.IsRenderable),queueMicrotask(()=>{o.state==="loaded"?this.onTextureLoaded(o,o.dimensions):o.state==="failed"?this.onTextureFailed(o,o.error):o.state==="freed"&&this.onTextureFreed(o),o.on("loaded",this.onTextureLoaded),o.on("failed",this.onTextureFailed),o.on("freed",this.onTextureFreed)})}unloadTexture(){if(this.props.texture){const{texture:e}=this.props;e.off("loaded",this.onTextureLoaded),e.off("failed",this.onTextureFailed),e.off("freed",this.onTextureFreed),e.setRenderableOwner(this,!1)}this.props.texture=null,this.props.textureOptions=null,this.setUpdateType(k.IsRenderable)}autosizeNode(e){this.autosize&&(this.width=e.width,this.height=e.height)}loadShader(e,r){const n=this.stage.renderer.getShaderManager();H(n);const{shader:i,props:o}=n.loadShader(e,r);this.props.shader=i,this.props.shaderProps=o,this.setUpdateType(k.IsRenderable)}setUpdateType(e){this.updateType|=e;const r=this.props.parent;r&&!(r.updateType&k.Children)&&r.setUpdateType(k.Children),this.parentHasRenderTexture&&this.setRTTUpdates(e)}sortChildren(){this.children.sort((e,r)=>e.calcZIndex-r.calcZIndex)}updateScaleRotateTransform(){this.scaleRotateTransform=Fe.rotate(this.props.rotation,this.scaleRotateTransform).scale(this.props.scaleX,this.props.scaleY)}updateLocalTransform(){H(this.scaleRotateTransform);const e=this.props.pivotX*this.props.width,r=this.props.pivotY*this.props.height,n=this.props.mountX*this.props.width,i=this.props.mountY*this.props.height;this.localTransform=Fe.translate(e-n+this.props.x,r-i+this.props.y,this.localTransform).multiply(this.scaleRotateTransform).translate(-e,-r),this.setUpdateType(k.Global)}update(e,r){var o;this.updateType&k.ScaleRotate&&(this.updateScaleRotateTransform(),this.setUpdateType(k.Local)),this.updateType&k.Local&&(this.updateLocalTransform(),this.setUpdateType(k.Global));const n=this.props.parent;let i=k.None;if(this.updateType&k.ParentRenderTexture){let l=this.parent;for(;l;)l.rtt&&(this.parentHasRenderTexture=!0),l=l.parent}this.updateType^k.All&&this.updateType&k.RenderTexture&&this.children.forEach(l=>{l.setUpdateType(k.All)}),this.updateType&k.Global&&(H(this.localTransform),this.globalTransform=Fe.copy((n==null?void 0:n.globalTransform)||this.localTransform,this.globalTransform),this.parentHasRenderTexture&&((o=this.props.parent)!=null&&o.rtt)&&(this.globalTransform=Fe.identity()),n&&this.globalTransform.multiply(this.localTransform),this.calculateRenderCoords(),this.updateBoundingRect(),this.setUpdateType(k.Clipping|k.RenderState|k.Children),i|=k.Global),this.updateType&k.Clipping&&(this.calculateClippingRect(r),this.setUpdateType(k.Children),i|=k.Clipping),this.updateType&k.WorldAlpha&&(n?this.worldAlpha=n.worldAlpha*this.props.alpha:this.worldAlpha=this.props.alpha,this.setUpdateType(k.Children|k.PremultipliedColors|k.IsRenderable),i|=k.WorldAlpha),this.updateType&k.PremultipliedColors&&(this.premultipliedColorTl=is(this.props.colorTl,this.worldAlpha,!0),this.props.colorTl===this.props.colorTr&&this.props.colorBl===this.props.colorBr&&this.props.colorTl===this.props.colorBl?this.premultipliedColorTr=this.premultipliedColorBl=this.premultipliedColorBr=this.premultipliedColorTl:(this.premultipliedColorTr=is(this.props.colorTr,this.worldAlpha,!0),this.premultipliedColorBl=is(this.props.colorBl,this.worldAlpha,!0),this.premultipliedColorBr=is(this.props.colorBr,this.worldAlpha,!0))),this.updateType&k.RenderState&&(this.updateRenderState(r),this.setUpdateType(k.IsRenderable)),this.updateType&k.IsRenderable&&this.updateIsRenderable(),n&&this.updateType&k.CalculatedZIndex&&(this.calculateZIndex(),n.setUpdateType(k.ZIndexSortedChildren)),this.updateType&k.Children&&this.children.length&&!this.rtt&&this.children.forEach(l=>{l.setUpdateType(i),l.updateType!==0&&l.update(e,this.clippingRect)}),this.updateType&k.ZIndexSortedChildren&&this.sortChildren(),this.updateType=0}checkRenderProps(){return this.props.texture?!0:!this.props.width||!this.props.height?!1:!!(this.props.shader||this.props.clipping||this.props.color!==0||this.props.colorTop!==0||this.props.colorBottom!==0||this.props.colorLeft!==0||this.props.colorRight!==0||this.props.colorTl!==0||this.props.colorTr!==0||this.props.colorBl!==0||this.props.colorBr!==0)}checkRenderBounds(e){H(this.renderBound);const r=e.width||this.stage.root.width,n=e.height||this.stage.root.height;this.strictBound=Wt(e.x,e.y,e.x+r,e.y+n,this.strictBound);const i=this.stage.boundsMargin;return this.preloadBound=Wt(e.x-i[3],e.y-i[0],e.x+r+i[1],e.y+n+i[2],this.preloadBound),$n(this.renderBound,this.strictBound)?ye.InViewport:$n(this.renderBound,this.preloadBound)?ye.InBounds:ye.OutOfBounds}updateRenderState(e){const r=this.checkRenderBounds(e);if(r!==this.renderState){let n=this.renderState;this.renderState=r,n===ye.InViewport&&this.emit("outOfViewport",{previous:n,current:r}),n<ye.InBounds&&r===ye.InViewport?(this.emit(Et.get(ye.InBounds),{previous:n,current:r}),n=ye.InBounds):n>ye.InBounds&&r===ye.OutOfBounds&&(this.emit(Et.get(ye.InBounds),{previous:n,current:r}),n=ye.InBounds);const i=Et.get(r);H(i),this.emit(i,{previous:n,current:r})}}setRenderState(e){e!==this.renderState&&(this.renderState=e,this.emit(ye[e]))}updateIsRenderable(){let e;this.worldAlpha===0||!this.checkRenderProps()?e=!1:e=this.renderState>ye.OutOfBounds,this.isRenderable!==e&&(this.isRenderable=e,this.onChangeIsRenderable(e))}onChangeIsRenderable(e){var r;(r=this.props.texture)==null||r.setRenderableOwner(this,e)}calculateRenderCoords(){const{width:e,height:r,globalTransform:n}=this;H(n);const{tx:i,ty:o,ta:l,tb:a,tc:u,td:c}=n;if(a===0&&u===0){const h=i,p=i+e*l,m=o,x=o+r*c;this.renderCoords=tr.translate(h,m,p,m,p,x,h,x,this.renderCoords)}else this.renderCoords=tr.translate(i,o,i+e*l,o+e*u,i+e*l+r*a,o+e*u+r*c,i+r*a,o+r*c,this.renderCoords)}updateBoundingRect(){const{renderCoords:e,globalTransform:r}=this;H(r),H(e);const{tb:n,tc:i}=r,{x1:o,y1:l,x3:a,y3:u}=e;if(n===0||i===0)this.renderBound=Wt(o,l,a,u,this.renderBound);else{const{x2:c,x4:h,y2:p,y4:m}=e;this.renderBound=Wt(Math.min(o,c,a,h),Math.min(l,p,u,m),Math.max(o,c,a,h),Math.max(l,p,u,m),this.renderBound)}}calculateClippingRect(e){H(this.globalTransform);const{clippingRect:r,props:n,globalTransform:i}=this,{clipping:o}=n,l=i.tb!==0||i.tc!==0;o&&!l?(r.x=i.tx,r.y=i.ty,r.width=this.width*i.ta,r.height=this.height*i.td,r.valid=!0):r.valid=!1,e.valid&&r.valid?an(e,r,r):e.valid&&(ji(e,r),r.valid=!0)}calculateZIndex(){var o,l;const e=this.props,r=e.zIndex||0,n=((o=e.parent)==null?void 0:o.zIndex)||0;let i=r;(l=e.parent)!=null&&l.zIndexLocked&&(i=r<n?r:n),this.calcZIndex=i}destroy(){this.unloadTexture(),this.clippingRect.valid=!1,this.isRenderable=!1,delete this.renderCoords,delete this.renderBound,delete this.strictBound,delete this.preloadBound,delete this.globalTransform,delete this.scaleRotateTransform,delete this.localTransform,this.props.texture=null,this.props.shader=null,this.rtt&&this.stage.renderer.removeRTTNode(this),this.removeAllListeners(),this.parent=null}renderQuads(e){const{width:r,height:n,texture:i,textureOptions:o,shader:l,shaderProps:a,rtt:u}=this.props;if(this.parentHasRenderTexture&&(!e.renderToTextureActive||this.parentRenderTexture!==e.activeRttNode))return;const{premultipliedColorTl:c,premultipliedColorTr:h,premultipliedColorBl:p,premultipliedColorBr:m}=this,{zIndex:x,worldAlpha:v,globalTransform:_,clippingRect:w}=this;H(_),e.addQuad({width:r,height:n,colorTl:c,colorTr:h,colorBl:p,colorBr:m,texture:i,textureOptions:o,zIndex:x,shader:l,shaderProps:a,alpha:v,clippingRect:w,tx:_.tx,ty:_.ty,ta:_.ta,tb:_.tb,tc:_.tc,td:_.td,rtt:u,parentHasRenderTexture:this.parentHasRenderTexture,framebufferDimensions:this.framebufferDimensions})}get id(){return this.props.id}get x(){return this.props.x}set x(e){this.props.x!==e&&(this.props.x=e,this.setUpdateType(k.Local))}get absX(){var e,r,n;return this.props.x+(((e=this.props.parent)==null?void 0:e.absX)||((n=(r=this.props.parent)==null?void 0:r.globalTransform)==null?void 0:n.tx)||0)}get absY(){var e;return this.props.y+(((e=this.props.parent)==null?void 0:e.absY)??0)}get y(){return this.props.y}set y(e){this.props.y!==e&&(this.props.y=e,this.setUpdateType(k.Local))}get width(){return this.props.width}set width(e){this.props.width!==e&&(this.props.width=e,this.setUpdateType(k.Local),this.props.rtt&&this.setUpdateType(k.RenderTexture))}get height(){return this.props.height}set height(e){this.props.height!==e&&(this.props.height=e,this.setUpdateType(k.Local),this.props.rtt&&this.setUpdateType(k.RenderTexture))}get scale(){return this.scaleX}set scale(e){this.scaleX=e,this.scaleY=e}get scaleX(){return this.props.scaleX}set scaleX(e){this.props.scaleX!==e&&(this.props.scaleX=e,this.setUpdateType(k.ScaleRotate))}get scaleY(){return this.props.scaleY}set scaleY(e){this.props.scaleY!==e&&(this.props.scaleY=e,this.setUpdateType(k.ScaleRotate))}get mount(){return this.props.mount}set mount(e){(this.props.mountX!==e||this.props.mountY!==e)&&(this.props.mountX=e,this.props.mountY=e,this.props.mount=e,this.setUpdateType(k.Local))}get mountX(){return this.props.mountX}set mountX(e){this.props.mountX!==e&&(this.props.mountX=e,this.setUpdateType(k.Local))}get mountY(){return this.props.mountY}set mountY(e){this.props.mountY!==e&&(this.props.mountY=e,this.setUpdateType(k.Local))}get pivot(){return this.props.pivot}set pivot(e){(this.props.pivotX!==e||this.props.pivotY!==e)&&(this.props.pivotX=e,this.props.pivotY=e,this.props.pivot=e,this.setUpdateType(k.Local))}get pivotX(){return this.props.pivotX}set pivotX(e){this.props.pivotX!==e&&(this.props.pivotX=e,this.setUpdateType(k.Local))}get pivotY(){return this.props.pivotY}set pivotY(e){this.props.pivotY!==e&&(this.props.pivotY=e,this.setUpdateType(k.Local))}get rotation(){return this.props.rotation}set rotation(e){this.props.rotation!==e&&(this.props.rotation=e,this.setUpdateType(k.ScaleRotate))}get alpha(){return this.props.alpha}set alpha(e){this.props.alpha=e,this.setUpdateType(k.PremultipliedColors|k.WorldAlpha)}get autosize(){return this.props.autosize}set autosize(e){this.props.autosize=e}get clipping(){return this.props.clipping}set clipping(e){this.props.clipping=e,this.setUpdateType(k.Clipping)}get color(){return this.props.color}set color(e){(this.props.colorTl!==e||this.props.colorTr!==e||this.props.colorBl!==e||this.props.colorBr!==e)&&(this.colorTl=e,this.colorTr=e,this.colorBl=e,this.colorBr=e),this.props.color=e,this.setUpdateType(k.PremultipliedColors)}get colorTop(){return this.props.colorTop}set colorTop(e){(this.props.colorTl!==e||this.props.colorTr!==e)&&(this.colorTl=e,this.colorTr=e),this.props.colorTop=e,this.setUpdateType(k.PremultipliedColors)}get colorBottom(){return this.props.colorBottom}set colorBottom(e){(this.props.colorBl!==e||this.props.colorBr!==e)&&(this.colorBl=e,this.colorBr=e),this.props.colorBottom=e,this.setUpdateType(k.PremultipliedColors)}get colorLeft(){return this.props.colorLeft}set colorLeft(e){(this.props.colorTl!==e||this.props.colorBl!==e)&&(this.colorTl=e,this.colorBl=e),this.props.colorLeft=e,this.setUpdateType(k.PremultipliedColors)}get colorRight(){return this.props.colorRight}set colorRight(e){(this.props.colorTr!==e||this.props.colorBr!==e)&&(this.colorTr=e,this.colorBr=e),this.props.colorRight=e,this.setUpdateType(k.PremultipliedColors)}get colorTl(){return this.props.colorTl}set colorTl(e){this.props.colorTl=e,this.setUpdateType(k.PremultipliedColors)}get colorTr(){return this.props.colorTr}set colorTr(e){this.props.colorTr=e,this.setUpdateType(k.PremultipliedColors)}get colorBl(){return this.props.colorBl}set colorBl(e){this.props.colorBl=e,this.setUpdateType(k.PremultipliedColors)}get colorBr(){return this.props.colorBr}set colorBr(e){this.props.colorBr=e,this.setUpdateType(k.PremultipliedColors)}get zIndexLocked(){return this.props.zIndexLocked||0}set zIndexLocked(e){this.props.zIndexLocked=e,this.setUpdateType(k.CalculatedZIndex|k.Children),this.children.forEach(r=>{r.setUpdateType(k.CalculatedZIndex)})}get zIndex(){return this.props.zIndex}set zIndex(e){this.props.zIndex=e,this.setUpdateType(k.CalculatedZIndex|k.Children),this.children.forEach(r=>{r.setUpdateType(k.CalculatedZIndex)})}get parent(){return this.props.parent}set parent(e){const r=this.props.parent;if(r!==e){if(this.props.parent=e,r){const n=r.children.indexOf(this);H(n!==-1,"CoreNode.parent: Node not found in old parent's children!"),r.children.splice(n,1),r.setUpdateType(k.Children|k.ZIndexSortedChildren)}e&&(e.children.push(this),this.setUpdateType(k.All),e.setUpdateType(k.Children|k.ZIndexSortedChildren),(e.rtt||e.parentHasRenderTexture)&&this.setRTTUpdates(k.All)),this.updateScaleRotateTransform()}}get rtt(){return this.props.rtt}set rtt(e){var r,n;if(!e){this.props.rtt&&(this.props.rtt=!1,this.unloadTexture(),this.setUpdateType(k.All),this.children.forEach(i=>{i.parentHasRenderTexture=!1}),(r=this.stage.renderer)==null||r.removeRTTNode(this));return}this.props.rtt=!0,this.hasRTTupdates=!0,this.setUpdateType(k.All),this.children.forEach(i=>{i.setUpdateType(k.All)}),(n=this.stage.renderer)==null||n.renderToTexture(this)}get framebufferDimensions(){return this.parentHasRenderTexture&&!this.rtt&&this.parent?this.parent.framebufferDimensions:{width:this.width,height:this.height}}get parentRenderTexture(){let e=this.parent;for(;e;){if(e.rtt)return e;e=e.parent}return null}get texture(){return this.props.texture}setRTTUpdates(e){var r;this.hasRTTupdates=!0,(r=this.parent)==null||r.setRTTUpdates(e)}}let Ca=1;function hn(){return Ca++}class jr extends _t{constructor(e,r,n,i){super();f(this,"rendererMain");f(this,"stage");f(this,"id");f(this,"coreNode");f(this,"_children",[]);f(this,"_src","");f(this,"_parent",null);f(this,"_texture",null);f(this,"_shader",null);f(this,"_data",{});f(this,"onTextureLoaded",(e,r)=>{this.emit("loaded",r)});f(this,"onTextureFailed",(e,r)=>{this.emit("failed",r)});f(this,"onTextureFreed",(e,r)=>{this.emit("freed",r)});f(this,"onOutOfBounds",(e,r)=>{this.emit("outOfBounds",r)});f(this,"onInBounds",(e,r)=>{this.emit("inBounds",r)});f(this,"onOutOfViewport",(e,r)=>{this.emit("outOfViewport",r)});f(this,"onInViewport",(e,r)=>{this.emit("inViewport",r)});this.rendererMain=r,this.stage=n,this.id=(i==null?void 0:i.id)??hn(),this.coreNode=i||new un(this.stage,{id:this.id,x:e.x,y:e.y,width:e.width,height:e.height,alpha:e.alpha,autosize:e.autosize,clipping:e.clipping,color:e.color,colorTop:e.colorTop,colorBottom:e.colorBottom,colorLeft:e.colorLeft,colorRight:e.colorRight,colorTl:e.colorTl,colorTr:e.colorTr,colorBl:e.colorBl,colorBr:e.colorBr,zIndex:e.zIndex,zIndexLocked:e.zIndexLocked,scaleX:e.scaleX,scaleY:e.scaleY,mountX:e.mountX,mountY:e.mountY,mount:e.mount,pivot:e.pivot,pivotX:e.pivotX,pivotY:e.pivotY,rotation:e.rotation,parent:null,shader:null,shaderProps:null,texture:null,textureOptions:null,rtt:e.rtt}),this.coreNode.on("loaded",this.onTextureLoaded),this.coreNode.on("failed",this.onTextureFailed),this.coreNode.on("freed",this.onTextureFreed),this.coreNode.on("outOfBounds",this.onOutOfBounds),this.coreNode.on("inBounds",this.onInBounds),this.coreNode.on("outOfViewport",this.onOutOfViewport),this.coreNode.on("inViewport",this.onInViewport),this.parent=e.parent,this.shader=e.shader,this.texture=e.texture,this.src=e.src,this.rtt=e.rtt,this._data=e.data}get x(){return this.coreNode.x}set x(e){this.coreNode.x=e}get y(){return this.coreNode.y}set y(e){this.coreNode.y=e}get width(){return this.coreNode.width}set width(e){e!==this.coreNode.width&&this.coreNode.rtt&&(this.texture=this.rendererMain.createTexture("RenderTexture",{width:this.width,height:this.height},{preload:!0,flipY:!0})),this.coreNode.width=e}get height(){return this.coreNode.height}set height(e){e!==this.coreNode.height&&this.coreNode.rtt&&(this.texture=this.rendererMain.createTexture("RenderTexture",{width:this.width,height:this.height},{preload:!0,flipY:!0})),this.coreNode.height=e}get alpha(){return this.coreNode.alpha}set alpha(e){this.coreNode.alpha=e}get autosize(){return this.coreNode.autosize}set autosize(e){this.coreNode.autosize=e}get clipping(){return this.coreNode.clipping}set clipping(e){this.coreNode.clipping=e}get color(){return this.coreNode.color}set color(e){this.coreNode.color=e}get colorTop(){return this.coreNode.colorTop}set colorTop(e){this.coreNode.colorTop=e}get colorBottom(){return this.coreNode.colorBottom}set colorBottom(e){this.coreNode.colorBottom=e}get colorLeft(){return this.coreNode.colorLeft}set colorLeft(e){this.coreNode.colorLeft=e}get colorRight(){return this.coreNode.colorRight}set colorRight(e){this.coreNode.colorRight=e}get colorTl(){return this.coreNode.colorTl}set colorTl(e){this.coreNode.colorTl=e}get colorTr(){return this.coreNode.colorTr}set colorTr(e){this.coreNode.colorTr=e}get colorBl(){return this.coreNode.colorBl}set colorBl(e){this.coreNode.colorBl=e}get colorBr(){return this.coreNode.colorBr}set colorBr(e){this.coreNode.colorBr=e}get scale(){return this.scaleX!==this.scaleY?null:this.coreNode.scaleX}set scale(e){e!==null&&(this.coreNode.scaleX=e,this.coreNode.scaleY=e)}get scaleX(){return this.coreNode.scaleX}set scaleX(e){this.coreNode.scaleX=e}get scaleY(){return this.coreNode.scaleY}set scaleY(e){this.coreNode.scaleY=e}get mount(){return this.coreNode.mount}set mount(e){this.coreNode.mount=e}get mountX(){return this.coreNode.mountX}set mountX(e){this.coreNode.mountX=e}get mountY(){return this.coreNode.mountY}set mountY(e){this.coreNode.mountY=e}get pivot(){return this.coreNode.pivot}set pivot(e){this.coreNode.pivot=e}get pivotX(){return this.coreNode.pivotX}set pivotX(e){this.coreNode.pivotX=e}get pivotY(){return this.coreNode.pivotY}set pivotY(e){this.coreNode.pivotY=e}get rotation(){return this.coreNode.rotation}set rotation(e){this.coreNode.rotation=e}get parent(){return this._parent}set parent(e){const r=this._parent;if(this._parent=e,this.coreNode.parent=(e==null?void 0:e.coreNode)??null,r){const n=r.children.indexOf(this);H(n!==-1,"MainOnlyNode.parent: Node not found in old parent's children!"),r.children.splice(n,1)}e&&e.children.push(this)}get children(){return this._children}get zIndex(){return this.coreNode.zIndex}set zIndex(e){this.coreNode.zIndex=e}get zIndexLocked(){return this.coreNode.zIndexLocked}set zIndexLocked(e){this.coreNode.zIndexLocked=e}get src(){return this._src}set src(e){if(this._src!==e){if(this._src=e,!e){this.texture=null;return}this.texture=this.rendererMain.createTexture("ImageTexture",{src:e})}}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this.rendererMain.textureTracker.decrementTextureRefCount(this._texture),e&&this.rendererMain.textureTracker.incrementTextureRefCount(e),this._texture=e,e?this.coreNode.loadTexture(e.txType,e.props,e.options):this.coreNode.unloadTexture())}get rtt(){return this.coreNode.rtt}set rtt(e){e&&(this.texture=this.rendererMain.createTexture("RenderTexture",{width:this.width,height:this.height},{preload:!0,flipY:!0})),this.coreNode.rtt=e}get parentHasRenderTexture(){return this.coreNode.parentHasRenderTexture}get shader(){return this._shader}set shader(e){this._shader!==e&&(this._shader=e,e&&this.coreNode.loadShader(e.shType,e.props))}get data(){return this._data}set data(e){this._data=so(e)}destroy(){this.emit("beforeDestroy",{});let e=this.children[0];for(;e;)e.destroy(),e=this.children[0];this.coreNode.destroy(),this.parent=null,this.texture=null,this.emit("afterDestroy",{}),this.removeAllListeners()}flush(){}animate(e,r){const n=new ba(this.coreNode,e,r);return new Ta(this.stage.animationManager,n)}}const Ra=s=>{let t=!1;const e=()=>{if(s.updateAnimations(),!s.hasSceneUpdates()){s.calculateFps(),setTimeout(e,16.666666666666668),t||(s.emit("idle"),t=!0);return}t=!1,s.drawFrame(),requestAnimationFrame(e)};requestAnimationFrame(e)},Ia=()=>performance?performance.now():Date.now();class Ea{constructor(){f(this,"activeAnimations",new Set)}registerAnimation(t){this.activeAnimations.add(t)}unregisterAnimation(t){this.activeAnimations.delete(t)}update(t){this.activeAnimations.forEach(e=>{e.update(t)})}}class Ma{constructor(t){f(this,"imageWorkersEnabled",!0);f(this,"messageManager",{});f(this,"workers",[]);f(this,"workerIndex",0);f(this,"nextId",0);this.workers=this.createWorkers(t),this.workers.forEach(e=>{e.onmessage=this.handleMessage.bind(this)})}handleMessage(t){const{id:e,data:r,error:n}=t.data,i=this.messageManager[e];if(i){const[o,l]=i;delete this.messageManager[e],n?l(new Error(n)):o(r)}}createWorkers(t=1){const e=`
      function hasAlphaChannel(mimeType) {
          return (mimeType.indexOf("image/png") !== -1);
      }

      function getImage(src, premultiplyAlpha) {
        return new Promise(function(resolve, reject) {
          var xhr = new XMLHttpRequest();
          xhr.open('GET', src, true);
          xhr.responseType = 'blob';

          xhr.onload = function() {
            if (xhr.status === 200) {
              var blob = xhr.response;
              var hasAlphaChannel = premultiplyAlpha !== undefined ? premultiplyAlpha : hasAlphaChannel(blob.type);

              createImageBitmap(blob, {
                premultiplyAlpha: hasAlphaChannel ? 'premultiply' : 'none',
                colorSpaceConversion: 'none',
                imageOrientation: 'none'
              }).then(function(data) {
                resolve({ data: data, premultiplyAlpha: premultiplyAlpha });
              }).catch(function(error) {
                reject(error);
              });
            } else {
              reject(new Error('Failed to load image: ' + xhr.statusText));
            }
          };

          xhr.onerror = function() {
            reject(new Error('Network error occurred while trying to fetch the image.'));
          };

          xhr.send();
        });
      }

      self.onmessage = (event) => {
        var id = event.data.id;
        var src = event.data.src;
        var premultiplyAlpha = event.data.premultiplyAlpha;

        getImage(src, premultiplyAlpha)
          .then(function(data) {
              self.postMessage({ id: id, data: data }, [data.data]);
          })
          .catch(function(error) {
              self.postMessage({ id: id, error: error.message });
          });
      };
    `,r=new Blob([e.replace('"use strict";',"")],{type:"application/javascript"}),n=(self.URL?URL:webkitURL).createObjectURL(r),i=[];for(let o=0;o<t;o++)i.push(new Worker(n));return i}getNextWorker(){const t=this.workers[this.workerIndex];return this.workerIndex=(this.workerIndex+1)%this.workers.length,t}convertUrlToAbsolute(t){return new URL(t,self.location.href).href}getImage(t,e){return new Promise((r,n)=>{try{if(this.workers){const i=this.convertUrlToAbsolute(t),o=this.nextId++;this.messageManager[o]=[r,n];const l=this.getNextWorker();l&&l.postMessage({id:o,src:i,premultiplyAlpha:e})}}catch(i){n(i)}})}}const ws=class ws extends Wi{constructor(e,r){super(e);f(this,"props");this.props=ws.resolveDefaults(r)}async getTextureData(){const{width:e,height:r}=this.props,n=e*r*4,i=new Uint8ClampedArray(n);for(let o=0;o<n;o+=4){const l=Math.floor(Math.random()*256);i[o]=l,i[o+1]=l,i[o+2]=l,i[o+3]=255}return{data:new ImageData(i,e,r)}}static makeCacheKey(e){const r=ws.resolveDefaults(e);return`NoiseTexture,${r.width},${r.height},${r.cacheId}`}static resolveDefaults(e){return{width:e.width??128,height:e.height??128,cacheId:e.cacheId??0}}};f(ws,"z$__type__Props");let Xr=ws;class Aa{constructor(t){f(this,"usedMemory",0);f(this,"txConstructors",{});f(this,"textureKeyCache",new Map);f(this,"textureIdCache",new Map);f(this,"ctxTextureCache",new WeakMap);f(this,"textureRefCountMap",new WeakMap);f(this,"imageWorkerManager",null);f(this,"hasCreateImageBitmap",!!self.createImageBitmap);f(this,"hasWorker",!!self.Worker);f(this,"renderer");this.hasCreateImageBitmap&&this.hasWorker&&t>0&&(this.imageWorkerManager=new Ma(t)),this.hasCreateImageBitmap||console.warn("[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower."),this.registerTextureType("ImageTexture",Yr),this.registerTextureType("ColorTexture",$l),this.registerTextureType("NoiseTexture",Xr),this.registerTextureType("SubTexture",Xi),this.registerTextureType("RenderTexture",Dl)}registerTextureType(t,e){this.txConstructors[t]=e}loadTexture(t,e,r=null){const n=this.txConstructors[t];if(!n)throw new Error(`Texture type "${t}" is not registered`);let i;if((r==null?void 0:r.id)!==void 0&&this.textureIdCache.has(r.id)&&(i=this.textureIdCache.get(r.id)),!i){const o=r==null?void 0:r.id,l=(r==null?void 0:r.cacheKey)??n.makeCacheKey(e);l&&this.textureKeyCache.has(l)?i=this.textureKeyCache.get(l):i=new n(this,e),o&&this.addTextureIdToCache(o,l,i)}return r!=null&&r.preload&&this.getCtxTexture(i).load(),i}addTextureIdToCache(t,e,r){const{textureIdCache:n,textureRefCountMap:i}=this;n.set(t,r),i.has(r)?i.get(r).count++:(i.set(r,{cacheKey:e,count:1}),e&&this.textureKeyCache.set(e,r))}removeTextureIdFromCache(t){var i;const{textureIdCache:e,textureRefCountMap:r}=this,n=e.get(t);if(n){if(e.delete(t),r.has(n)){const o=r.get(n);H(o),o.count--,o.count===0&&(r.delete(n),o.cacheKey&&this.textureKeyCache.delete(o.cacheKey))}(i=this.ctxTextureCache.get(n))==null||i.free()}}getDebugInfo(){return{keyCacheSize:this.textureKeyCache.size,idCacheSize:this.textureIdCache.size}}getCtxTexture(t){if(this.ctxTextureCache.has(t))return this.ctxTextureCache.get(t);const e=this.renderer.createCtxTexture(t);return this.ctxTextureCache.set(t,e),e}}class Fa{constructor(){f(this,"data",{})}reset(){this.data={}}increment(t){this.data[t]||(this.data[t]=0),this.data[t]++}getData(){return{...this.data}}}class La{constructor(t){f(this,"memUsed",0);f(this,"textures",new Map);f(this,"threshold");f(this,"gcRequested",!1);this.threshold=t,t===0&&(this.setTextureMemUse=()=>{})}setTextureMemUse(t,e){if(this.textures.has(t)&&(this.memUsed-=this.textures.get(t)),e===0){this.textures.delete(t);return}else this.memUsed+=e,this.textures.set(t,e);this.memUsed>this.threshold&&(this.gcRequested=!0)}gc(){this.gcRequested=!1,this.textures.forEach((t,e)=>{e.renderable||e.free()})}}const Pa={isWhite:!0,a:1,r:255,g:255,b:255};function Rr(s){if(s===4294967295)return Pa;const t=(s>>>24&255)/255,e=s>>>16&255&255,r=s>>>8&255&255,n=s&255&255;return{isWhite:!1,a:t,r:n,g:r,b:e}}function Qs({a:s,r:t,g:e,b:r}){return`rgba(${t},${e},${r},${s})`}class ka extends Hl{constructor(){super(...arguments);f(this,"image");f(this,"tintCache")}load(){this.textureSource.state==="freed"&&(this.textureSource.setState("loading"),this.onLoadRequest().then(e=>{this.textureSource.setState("loaded",e),this.updateMemSize()}).catch(e=>{this.textureSource.setState("failed",e)}))}free(){this.image=void 0,this.tintCache=void 0,this.textureSource.setState("freed"),this.memManager.setTextureMemUse(this,0)}updateMemSize(){const e=this.tintCache?8:4;if(this.textureSource.dimensions){const{width:r,height:n}=this.textureSource.dimensions;this.memManager.setTextureMemUse(this,r*n*e)}}hasImage(){return this.image!==void 0}getImage(e){var o;const r=this.image;if(H(r,"Attempt to get unloaded image texture"),e.isWhite)return this.tintCache&&(this.tintCache=void 0,this.updateMemSize()),r;const n=Qs(e);if(((o=this.tintCache)==null?void 0:o.key)===n)return this.tintCache.image;const i=this.tintTexture(r,n);return this.tintCache={key:n,image:i},this.updateMemSize(),i}tintTexture(e,r){const{width:n,height:i}=e,o=document.createElement("canvas");o.width=n,o.height=i;const l=o.getContext("2d");return l&&(l.fillStyle=r,l.globalCompositeOperation="copy",l.fillRect(0,0,n,i),l.globalCompositeOperation="multiply",l.drawImage(e,0,0,n,i,0,0,n,i),l.globalCompositeOperation="destination-in",l.drawImage(e,0,0,n,i,0,0,n,i)),o}get renderable(){return this.textureSource.renderable}async onLoadRequest(){const{data:e}=await this.textureSource.getTextureData();if(e instanceof ImageData){const r=document.createElement("canvas");r.width=e.width,r.height=e.height;const n=r.getContext("2d");return n&&n.putImageData(e,0,0),this.image=r,{width:e.width,height:e.height}}else if(e instanceof ImageBitmap)return this.image=e,{width:e.width,height:e.height};return{width:0,height:0}}}function Na(s){var t;return s.shader instanceof to&&s.shader.shType===eo?((t=s.shaderProps)==null?void 0:t.radius)??0:0}class Oa extends Ul{constructor(e){super(e);f(this,"context");f(this,"canvas");f(this,"pixelRatio");f(this,"clearColor");f(this,"renderToTextureActive",!1);f(this,"activeRttNode",null);this.mode="canvas",this.shManager.renderer=this;const{canvas:r,pixelRatio:n,clearColor:i}=e;this.canvas=r,this.context=r.getContext("2d"),this.pixelRatio=n,this.clearColor=i?Wl(i):void 0}reset(){this.canvas.width=this.canvas.width;const e=this.context;if(this.clearColor){const[r,n,i,o]=this.clearColor;e.fillStyle=`rgba(${r}, ${n}, ${i}, ${o/255})`,e.fillRect(0,0,this.canvas.width,this.canvas.height)}e.scale(this.pixelRatio,this.pixelRatio)}render(){}addQuad(e){const r=this.context,{tx:n,ty:i,width:o,height:l,alpha:a,colorTl:u,colorTr:c,colorBr:h,ta:p,tb:m,tc:x,td:v,clippingRect:_}=e;let w=e.texture,C,M;if(w){if(w instanceof Xi&&(M=w.props,w=w.parentTexture),C=this.txManager.getCtxTexture(w),w.state==="freed"){C.load();return}if(w.state!=="loaded"||!C.hasImage())return}const I=Rr(u),F=p!==1,R=_.width!==0&&_.height!==0,A=u!==c||u!==h,K=e.shader?Na(e):0;if((F||R||K)&&r.save(),R){const X=new Path2D,{x:Z,y:G,width:le,height:se}=_;X.rect(Z,G,le,se),r.clip(X)}if(F){const X=this.pixelRatio;r.setTransform(p,x,m,v,n*X,i*X),r.scale(X,X),r.translate(-n,-i)}if(K){const X=new Path2D;X.roundRect(n,i,o,l,K),r.clip(X)}if(C){const X=C.getImage(I);r.globalAlpha=a,M?r.drawImage(X,M.x,M.y,M.width,M.height,n,i,o,l):r.drawImage(X,n,i,o,l),r.globalAlpha=1}else if(A){let X=n,Z=i,G;u===c?(X=n,Z=i+l,G=Rr(h)):(X=n+o,Z=i,G=Rr(c));const le=r.createLinearGradient(n,i,X,Z);le.addColorStop(0,Qs(I)),le.addColorStop(1,Qs(G)),r.fillStyle=le,r.fillRect(n,i,o,l)}else r.fillStyle=Qs(I),r.fillRect(n,i,o,l);(F||R||K)&&r.restore()}createCtxTexture(e){return new ka(this.txMemManager,e)}getShaderManager(){return this.shManager}renderRTTNodes(){}removeRTTNode(e){}renderToTexture(e){}}const Ba=2e6;class za extends _t{constructor(e){super();f(this,"options");f(this,"animationManager");f(this,"txManager");f(this,"txMemManager");f(this,"fontManager");f(this,"textRenderers");f(this,"shManager");f(this,"renderer");f(this,"root");f(this,"boundsMargin");f(this,"deltaTime",0);f(this,"lastFrameTime",0);f(this,"currentFrameTime",0);f(this,"fpsNumFrames",0);f(this,"fpsElapsedTime",0);f(this,"renderRequested",!1);f(this,"contextSpy",null);this.options=e;const{canvas:r,clearColor:n,rootId:i,debug:o,appWidth:l,appHeight:a,boundsMargin:u,enableContextSpy:c,numImageWorkers:h,txMemByteThreshold:p,renderMode:m}=e;this.txManager=new Aa(h),this.txMemManager=new La(p),this.shManager=new ia,this.animationManager=new Ea,this.contextSpy=c?new Fa:null;let x=[0,0,0,0];u&&(x=Array.isArray(u)?u:[u,u,u,u]),this.boundsMargin=x,o!=null&&o.monitorTextureCache&&setInterval(()=>{H(this.txManager);const w=this.txManager.getDebugInfo();console.log("Texture ID Cache Size: ",w.idCacheSize),console.log("Texture Key Cache Size: ",w.keyCacheSize)},1e3);const v={stage:this,canvas:r,pixelRatio:e.devicePhysicalPixelRatio*e.deviceLogicalPixelRatio,clearColor:n??4278190080,bufferMemory:Ba,txManager:this.txManager,txMemManager:this.txMemManager,shManager:this.shManager,contextSpy:this.contextSpy};m==="canvas"?this.renderer=new Oa(v):this.renderer=new Yi(v),Yl(m),this.txManager.renderer=this.renderer,this.textRenderers=m==="webgl"?{canvas:new jn(this),sdf:new ya(this)}:{canvas:new jn(this)},this.fontManager=new cn(this.textRenderers);const _=new un(this,{id:i,x:0,y:0,width:l,height:a,alpha:1,autosize:!1,clipping:!1,color:0,colorTop:0,colorBottom:0,colorLeft:0,colorRight:0,colorTl:0,colorTr:0,colorBl:0,colorBr:0,zIndex:0,zIndexLocked:0,scaleX:1,scaleY:1,mountX:0,mountY:0,mount:0,pivot:.5,pivotX:.5,pivotY:.5,rotation:0,parent:null,texture:null,textureOptions:null,shader:null,shaderProps:null,rtt:!1});this.root=_,Ra(this)}updateAnimations(){const{animationManager:e}=this;this.root&&(this.lastFrameTime=this.currentFrameTime,this.currentFrameTime=Ia(),this.deltaTime=this.lastFrameTime?this.currentFrameTime-this.lastFrameTime:100/6,this.emit("frameTick",{time:this.currentFrameTime,delta:this.deltaTime}),e.update(this.deltaTime))}hasSceneUpdates(){return!!this.root.updateType||this.renderRequested}drawFrame(){const{renderer:e,renderRequested:r}=this;H(e),this.root.updateType!==0&&this.root.update(this.deltaTime,this.root.clippingRect),e.reset(),e.txMemManager.gcRequested&&e.txMemManager.gc(),e.rttNodes.length>0&&e.renderRTTNodes(),this.addQuads(this.root),e==null||e.render(),this.calculateFps(),r&&(this.renderRequested=!1)}calculateFps(){var r,n;const{fpsUpdateInterval:e}=this.options;if(e&&(this.fpsNumFrames++,this.fpsElapsedTime+=this.deltaTime,this.fpsElapsedTime>=e)){const i=Math.round(this.fpsNumFrames*1e3/this.fpsElapsedTime);this.fpsNumFrames=0,this.fpsElapsedTime=0,this.emit("fpsUpdate",{fps:i,contextSpyData:((r=this.contextSpy)==null?void 0:r.getData())??null}),(n=this.contextSpy)==null||n.reset()}}addQuads(e){H(this.renderer&&e.globalTransform),e.isRenderable&&e.renderQuads(this.renderer);for(let r=0;r<e.children.length;r++){const n=e.children[r];n&&(n==null?void 0:n.worldAlpha)!==0&&this.addQuads(n)}}requestRender(){this.renderRequested=!0}resolveTextRenderer(e,r=null){let n=r,i=!1;if(n){const l=this.textRenderers[n];l?l.canRenderFont(e)||(console.warn(`Cannot use override text renderer '${n}' for font`,e),n=null,i=!0):(console.warn(`Text renderer override '${n}' not found.`),n=null,i=!0)}if(!n){for(const[l,a]of Object.entries(this.textRenderers))if(l!=="canvas"&&a.canRenderFont(e)){n=l;break}n||(n="canvas")}i&&console.warn(`Falling back to text renderer ${String(n)}`);const o=this.textRenderers[n];return H(o,"resolvedTextRenderer undefined"),o}}class $a extends un{constructor(e,r){super(e,r);f(this,"textRenderer");f(this,"trState");f(this,"_textRendererOverride",null);f(this,"onTextLoaded",()=>{const{contain:e}=this,r=this.trState.props.width,n=this.trState.props.height,i=this.trState.textW||0,o=this.trState.textH||0;e==="both"?(this.props.width=r,this.props.height=n):e==="width"?(this.props.width=r,this.props.height=o):e==="none"&&(this.props.width=i,this.props.height=o),this.updateLocalTransform(),this.stage.requestRender(),this.emit("loaded",{type:"text",dimensions:{width:this.trState.textW||0,height:this.trState.textH||0}})});f(this,"onTextFailed",(e,r)=>{this.emit("failed",{type:"text",error:r})});this._textRendererOverride=r.textRendererOverride;const{resolvedTextRenderer:n,textRendererState:i}=this.resolveTextRendererAndState({x:this.absX,y:this.absY,width:r.width,height:r.height,textAlign:r.textAlign,color:r.color,zIndex:r.zIndex,contain:r.contain,scrollable:r.scrollable,scrollY:r.scrollY,offsetY:r.offsetY,letterSpacing:r.letterSpacing,debug:r.debug,fontFamily:r.fontFamily,fontSize:r.fontSize,fontStretch:r.fontStretch,fontStyle:r.fontStyle,fontWeight:r.fontWeight,text:r.text,lineHeight:r.lineHeight,maxLines:r.maxLines,textBaseline:r.textBaseline,verticalAlign:r.verticalAlign,overflowSuffix:r.overflowSuffix});this.textRenderer=n,this.trState=i}get width(){return this.props.width}set width(e){this.props.width=e,this.textRenderer.set.width(this.trState,e),this.contain==="none"&&this.setUpdateType(k.Local)}get height(){return this.props.height}set height(e){this.props.height=e,this.textRenderer.set.height(this.trState,e),this.contain!=="both"&&this.setUpdateType(k.Local)}get color(){return this.trState.props.color}set color(e){this.textRenderer.set.color(this.trState,e)}get text(){return this.trState.props.text}set text(e){this.textRenderer.set.text(this.trState,e)}get textRendererOverride(){return this._textRendererOverride}set textRendererOverride(e){this._textRendererOverride=e,this.textRenderer.destroyState(this.trState);const{resolvedTextRenderer:r,textRendererState:n}=this.resolveTextRendererAndState(this.trState.props);this.textRenderer=r,this.trState=n}get fontSize(){return this.trState.props.fontSize}set fontSize(e){this.textRenderer.set.fontSize(this.trState,e)}get fontFamily(){return this.trState.props.fontFamily}set fontFamily(e){this.textRenderer.set.fontFamily(this.trState,e)}get fontStretch(){return this.trState.props.fontStretch}set fontStretch(e){this.textRenderer.set.fontStretch(this.trState,e)}get fontStyle(){return this.trState.props.fontStyle}set fontStyle(e){this.textRenderer.set.fontStyle(this.trState,e)}get fontWeight(){return this.trState.props.fontWeight}set fontWeight(e){this.textRenderer.set.fontWeight(this.trState,e)}get textAlign(){return this.trState.props.textAlign}set textAlign(e){this.textRenderer.set.textAlign(this.trState,e)}get contain(){return this.trState.props.contain}set contain(e){this.textRenderer.set.contain(this.trState,e)}get scrollable(){return this.trState.props.scrollable}set scrollable(e){this.textRenderer.set.scrollable(this.trState,e)}get scrollY(){return this.trState.props.scrollY}set scrollY(e){this.textRenderer.set.scrollY(this.trState,e)}get offsetY(){return this.trState.props.offsetY}set offsetY(e){this.textRenderer.set.offsetY(this.trState,e)}get letterSpacing(){return this.trState.props.letterSpacing}set letterSpacing(e){this.textRenderer.set.letterSpacing(this.trState,e)}get lineHeight(){return this.trState.props.lineHeight}set lineHeight(e){this.textRenderer.set.lineHeight&&this.textRenderer.set.lineHeight(this.trState,e)}get maxLines(){return this.trState.props.maxLines}set maxLines(e){this.textRenderer.set.maxLines&&this.textRenderer.set.maxLines(this.trState,e)}get textBaseline(){return this.trState.props.textBaseline}set textBaseline(e){this.textRenderer.set.textBaseline&&this.textRenderer.set.textBaseline(this.trState,e)}get verticalAlign(){return this.trState.props.verticalAlign}set verticalAlign(e){this.textRenderer.set.verticalAlign&&this.textRenderer.set.verticalAlign(this.trState,e)}get overflowSuffix(){return this.trState.props.overflowSuffix}set overflowSuffix(e){this.textRenderer.set.overflowSuffix&&this.textRenderer.set.overflowSuffix(this.trState,e)}get debug(){return this.trState.props.debug}set debug(e){this.textRenderer.set.debug(this.trState,e)}update(e,r){super.update(e,r),H(this.globalTransform),this.textRenderer.set.x(this.trState,this.globalTransform.tx),this.textRenderer.set.y(this.trState,this.globalTransform.ty)}checkRenderProps(){return this.trState.props.text!==""?!0:super.checkRenderProps()}onChangeIsRenderable(e){super.onChangeIsRenderable(e),this.textRenderer.setIsRenderable(this.trState,e)}renderQuads(e){var r;H(this.globalTransform),!(this.parentHasRenderTexture&&(!e.renderToTextureActive||this.parentRenderTexture!==e.activeRttNode))&&(this.parentHasRenderTexture&&((r=this.props.parent)!=null&&r.rtt)&&(this.globalTransform=Fe.identity(),this.localTransform&&this.globalTransform.multiply(this.localTransform)),H(this.globalTransform),this.textRenderer.renderQuads(this.trState,this.globalTransform,this.clippingRect,this.worldAlpha,this.parentHasRenderTexture,this.framebufferDimensions))}destroy(){super.destroy(),this.textRenderer.destroyState(this.trState)}resolveTextRendererAndState(e){const r=this.stage.resolveTextRenderer(e,this._textRendererOverride),n=r.createState(e);return n.emitter.on("loaded",this.onTextLoaded),n.emitter.on("failed",this.onTextFailed),r.scheduleUpdateState(n),{resolvedTextRenderer:r,textRendererState:n}}}class Da extends jr{constructor(t,e,r){super(t,e,r,new $a(r,{id:hn(),x:t.x,y:t.y,width:t.width,height:t.height,alpha:t.alpha,autosize:t.autosize,clipping:t.clipping,color:t.color,colorTop:t.colorTop,colorBottom:t.colorBottom,colorLeft:t.colorLeft,colorRight:t.colorRight,colorTl:t.colorTl,colorTr:t.colorTr,colorBl:t.colorBl,colorBr:t.colorBr,zIndex:t.zIndex,zIndexLocked:t.zIndexLocked,scaleX:t.scaleX,scaleY:t.scaleY,mountX:t.mountX,mountY:t.mountY,mount:t.mount,pivot:t.pivot,pivotX:t.pivotX,pivotY:t.pivotY,rotation:t.rotation,text:t.text,fontSize:t.fontSize,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontStretch:t.fontStretch,fontStyle:t.fontStyle,contain:t.contain,scrollable:t.scrollable,letterSpacing:t.letterSpacing,textAlign:t.textAlign,scrollY:t.scrollY,offsetY:t.offsetY,textRendererOverride:t.textRendererOverride,lineHeight:t.lineHeight,maxLines:t.maxLines,textBaseline:t.textBaseline,verticalAlign:t.verticalAlign,overflowSuffix:t.overflowSuffix,debug:t.debug,parent:null,texture:null,textureOptions:null,shader:null,shaderProps:null,rtt:!1}))}get text(){return this.coreNode.text}set text(t){this.coreNode.text=t}get textRendererOverride(){return this.coreNode.textRendererOverride}set textRendererOverride(t){this.coreNode.textRendererOverride=t}get fontSize(){return this.coreNode.fontSize}set fontSize(t){this.coreNode.fontSize=t}get fontFamily(){return this.coreNode.fontFamily}set fontFamily(t){this.coreNode.fontFamily=t}get fontWeight(){return this.coreNode.fontWeight}set fontWeight(t){this.coreNode.fontWeight=t}get fontStretch(){return this.coreNode.fontStretch}set fontStretch(t){this.coreNode.fontStretch=t}get fontStyle(){return this.coreNode.fontStyle}set fontStyle(t){this.coreNode.fontStyle=t}get textAlign(){return this.coreNode.textAlign}set textAlign(t){this.coreNode.textAlign=t}get contain(){return this.coreNode.contain}set contain(t){this.coreNode.contain=t}get scrollable(){return this.coreNode.scrollable}set scrollable(t){this.coreNode.scrollable=t}get scrollY(){return this.coreNode.scrollY}set scrollY(t){this.coreNode.scrollY=t}get offsetY(){return this.coreNode.offsetY}set offsetY(t){this.coreNode.offsetY=t}get letterSpacing(){return this.coreNode.letterSpacing}set letterSpacing(t){this.coreNode.letterSpacing=t}get lineHeight(){return this.coreNode.lineHeight}set lineHeight(t){this.coreNode.lineHeight=t}get maxLines(){return this.coreNode.maxLines}set maxLines(t){t&&(this.coreNode.maxLines=t)}get textBaseline(){return this.coreNode.textBaseline}set textBaseline(t){t&&(this.coreNode.textBaseline=t)}get verticalAlign(){return this.coreNode.verticalAlign}set verticalAlign(t){t&&(this.coreNode.verticalAlign=t)}get overflowSuffix(){return this.coreNode.overflowSuffix}set overflowSuffix(t){t&&(this.coreNode.overflowSuffix=t)}get debug(){return this.coreNode.debug}set debug(t){this.coreNode.debug=t}}class Ha{constructor(){f(this,"root",null);f(this,"stage",null);f(this,"rendererMain",null)}async init(t,e,r){this.stage=new za({rootId:hn(),appWidth:e.appWidth,appHeight:e.appHeight,txMemByteThreshold:e.txMemByteThreshold,boundsMargin:e.boundsMargin,deviceLogicalPixelRatio:e.deviceLogicalPixelRatio,devicePhysicalPixelRatio:e.devicePhysicalPixelRatio,clearColor:e.clearColor,canvas:r,fpsUpdateInterval:e.fpsUpdateInterval,enableContextSpy:e.enableContextSpy,numImageWorkers:e.numImageWorkers,renderMode:e.renderMode,debug:{monitorTextureCache:!1}}),this.rendererMain=t,H(this.stage.root);const n=new jr(t.resolveNodeDefaults({}),this.rendererMain,this.stage,this.stage.root);this.root=n,n.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,n)),this.onCreateNode(n),e.coreExtensionModule&&await _a(e.coreExtensionModule,this.stage),this.stage.on("fpsUpdate",(i,o)=>{this.onFpsUpdate(o)}),this.stage.on("frameTick",(i,o)=>{this.onFrameTick(o)}),this.stage.on("idle",()=>{this.onIdle()})}createNode(t){H(this.rendererMain),H(this.stage);const e=new jr(t,this.rendererMain,this.stage);return e.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,e)),this.onCreateNode(e),e}createTextNode(t){H(this.rendererMain),H(this.stage);const e=new Da(t,this.rendererMain,this.stage);return e.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,e)),this.onCreateNode(e),e}destroyNode(t){t.destroy()}releaseTexture(t){const{stage:e}=this;H(e),e.txManager.removeTextureIdFromCache(t)}getRootNode(){return H(this.root),this.root}onCreateNode(t){throw new Error("Method not implemented.")}onBeforeDestroyNode(t){throw new Error("Method not implemented.")}onFpsUpdate(t){throw new Error("Method not implemented.")}onFrameTick(t){throw new Error("Method not implemented.")}onIdle(){throw new Error("Method not implemented.")}}let ft,fn;function Ua(s={},t="app"){const e=new Ha;return ft=new wa(s,t,e),fn=ft.createShader.bind(ft),ft}class Wa extends Array{constructor(t){super(),this._parent=t}get selected(){return this[this._parent.selected||0]}get firstChild(){return this[0]}insert(t,e){if(e){const r=this.indexOf(e);this.splice(r,0,t)}else this.push(t);t.parent=this._parent}remove(t){const e=this.indexOf(t);e>=0&&this.splice(e,1)}}var Ya={BASE_URL:"/vue-demo-app/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};function ja(){return!!(Ya&&!1)}const Xa=ja()||!1,Ie={debug:!1,animationsEnabled:!0,animationSettings:{duration:250,easing:"ease-in-out"},fontSettings:{fontFamily:"Ubuntu",fontSize:100},setActiveElement:()=>{}};function Xn(s){return Va(s)&&s.debug}function dt(s,t,...e){Xa&&(Ie.debug||Xn(t)||Xn(e[0]))&&console.log(s,t,...e)}const Ds=s=>s instanceof Function;function Va(s){return typeof s=="object"}function sr(s){return Array.isArray(s)}function Ka(s){return typeof s=="string"}function Ga(s){return typeof s=="number"}function qa(s){return Number.isInteger(s)}function Qa(s){return"destroy"in s&&typeof s.destroy=="function"}function Ir(s){return s instanceof pt}function Za(s,t){for(const e of t)if(e in s)return!0;return!1}function ro(s,t={}){if(sr(s))s.forEach(e=>{ro(e,t)});else if(s)for(const e in s)t[e]===void 0&&(t[e]=s[e]);return t}class Vn extends Array{constructor(t,e={}){return sr(e)?super(...e):Ka(e)?super(e):super(...Object.entries(e).filter(([r,n])=>n).map(([r])=>r)),this.onChange=t,this}has(t){return this.indexOf(t)>=0}is(t){return this.indexOf(t)>=0}add(t){this.push(t),this.onChange()}toggle(t){this.has(t)?this.remove(t):this.add(t)}remove(t){const e=this.indexOf(t);e>=0&&(this.splice(e,1),this.onChange())}}const ht={Element:"element",TextNode:"textNode",Text:"text"};function Ja(s){const t=[];let e=!1,r=0;for(let I=0;I<s.children.length;I++){const F=s.children[I];if(F.type!==ht.Text&&F.flexItem!==!1){if(F.type===ht.TextNode&&F.text&&!(F.width||F.height))return!1;F.flexOrder!==void 0&&(e=!0),F.flexGrow!==void 0&&(r+=F.flexGrow),t.push(F)}}e&&t.sort((I,F)=>(I.flexOrder||0)-(F.flexOrder||0));const n=t.length,o=(s.flexDirection||"row")==="row",l=o?"width":"height",a=o?"height":"width",u=o?"marginLeft":"marginTop",c=o?"marginRight":"marginBottom",h=o?"x":"y",p=o?"y":"x",m=s[l]||0,x=s[a]||0,v=s.gap||0,_=s.justifyContent||"flexStart",w=s.alignItems;if(r){const I=t.reduce((R,A)=>R+(A.flexGrow?0:A[l]||0)+(A[u]||0)+(A[c]||0),0),F=(m-I-v*(n-1))/r;for(let R=0;R<t.length;R++){const A=t[R];A.flexGrow!==void 0&&A.flexGrow>0&&(A[l]=A.flexGrow*F)}}let C=0;["center","spaceBetween","spaceEvenly"].includes(_)&&(C=t.reduce((I,F)=>I+(F[l]||0)+(F[u]||0)+(F[c]||0),0));const M=x&&w?I=>{w==="flexStart"?I[p]=0:w==="center"?I[p]=(x-(I[a]||0))/2:w==="flexEnd"&&(I[p]=x-(I[a]||0))}:I=>I;if(_==="flexStart"){let I=0;for(let F=0;F<t.length;F++){const R=t[F];R[h]=I+(R[u]||0),I+=(R[l]||0)+v+(R[u]||0)+(R[c]||0),M(R)}if(s.flexBoundary!=="fixed"){const F=I-v;if(F!==s[l])return s[l]=F,!0}}else if(_==="flexEnd"){let I=m;for(let F=n-1;F>=0;F--){const R=t[F];R[h]=I-(R[l]||0)-(R[c]||0),I-=(R[l]||0)+v+(R[u]||0)+(R[c]||0),M(R)}if(s.flexBoundary!=="fixed"){const F=I-v;if(F!==s[l])return s[l]=F,!0}}else if(_==="center"){let I=(m-(C+v*(n-1)))/2;for(let F=0;F<t.length;F++){const R=t[F];R[h]=I+(R[u]||0),I+=(R[l]||0)+v+(R[u]||0)+(R[c]||0),M(R)}}else if(_==="spaceBetween"){const I=(m-C)/(n-1);let F=0;for(let R=0;R<t.length;R++){const A=t[R];A[h]=F+(A[u]||0),F+=(A[l]||0)+I+(A[u]||0)+(A[c]||0),M(A)}}else if(_==="spaceEvenly"){const I=(m-C)/(n+1);let F=I;for(let R=0;R<t.length;R++){const A=t[R];A[h]=F+(A[u]||0),F+=(A[l]||0)+I+(A[u]||0)+(A[c]||0),M(A)}}return!1}const Hs=new Set;let Er=!0;function Kn(s){const t=[];for(const[e,r]of Object.entries(s))t.push({type:e,props:r});return fn("DynamicShader",{effects:t})}function ss(s=""){return{set(t){Ga(t)&&(t={width:t,color:255}),this.effects=this.effects?{...this.effects||{},[`border${s}`]:t}:{[`border${s}`]:t}},get(){var t;return(t=this.effects)==null?void 0:t[`border${s}`]}}}const ec=["alpha","color","colorTop","colorRight","colorLeft","colorBottom","colorTl","colorTr","colorBl","colorBr","height","fontSize","lineHeight","mount","mountX","mountY","pivot","pivotX","pivotY","rotation","scale","width","worldX","worldY","x","y","zIndex","zIndexLocked"],tc=["absX","absY","autosize","clipping","contain","fontFamily","fontStretch","fontStyle","fontWeight","letterSpacing","maxLines","offsetY","overflowSuffix","rtt","scrollable","scrollY","src","text","textAlign","textBaseline","textOverflow","texture","verticalAlign","wordWrap"];class pt extends Object{constructor(t){super(),this.type=t==="text"?ht.TextNode:ht.Element,this.rendered=!1,this.lng={},this.children=new Wa(this)}get effects(){return this._effects}set effects(t){this._effects=t,this.rendered&&(this.shader=Kn(t))}get parent(){return this._parent}set parent(t){this._parent=t,this.rendered&&(this.lng.parent=(t==null?void 0:t.lng)??null)}set shader(t){sr(t)&&(t=fn(...t)),this.lng.shader=t}_sendToLightningAnimatable(t,e){if(this.transition&&this.rendered&&Ie.animationsEnabled&&(this.transition===!0||this.transition[t])){const r=this.transition===!0||this.transition[t]===!0?void 0:this.transition[t];return this.animate({[t]:e},r).start()}this.lng[t]=e}animate(t,e){return H(this.rendered,"Node must be rendered before animating"),this.lng.animate(t,e||this.animationSettings)}chain(t,e){return this._animationRunning&&(this._animationQueue=[],this._animationRunning=!1),e?this._animationQueueSettings=e:this._animationQueueSettings||(this._animationQueueSettings=e||this.animationSettings),e=e||this._animationQueueSettings,this._animationQueue=this._animationQueue||[],this._animationQueue.push({props:t,animationSettings:e}),this}async start(){let t=this._animationQueue.shift();for(;t;)this._animationRunning=!0,await this.animate(t.props,t.animationSettings).start().waitUntilStopped(),t=this._animationQueue.shift();this._animationRunning=!1,this._animationQueueSettings=void 0}setFocus(){if(this.rendered){if(this.forwardFocus!==void 0)if(Ds(this.forwardFocus)){if(this.forwardFocus.call(this,this)!==!1)return}else{const t=typeof this.forwardFocus=="number"?this.forwardFocus:null;if(t!==null&&t<this.children.length){const e=this.children[t];Ir(e)&&e.setFocus();return}}queueMicrotask(()=>Ie.setActiveElement(this))}else this.autofocus=!0}isTextNode(){return this.type===ht.TextNode}_layoutOnLoad(){this.lng.on("loaded",(t,e)=>{const{dimensions:r}=e;this.parent.updateLayout(this,r)})}getText(){let t="";for(let e=0;e<this.children.length;e++)t+=this.children[e].text;return t}destroy(){this._queueDelete&&Qa(this.lng)&&this.lng.destroy()}set onEvents(t){this._events=t}get onEvents(){return this._events}set style(t){sr(t)?this._style=ro(t):this._style=t;for(const e in this._style)this[e]===void 0&&(this[e]=this._style[e])}get style(){return this._style}get hasChildren(){return this.children.length>0}getChildById(t){return this.children.find(e=>e.id===t)}searchChildrenById(t){for(let e=0;e<this.children.length;e++){const r=this.children[e];if(Ir(r)){if(r.id===t)return r;const n=r.searchChildrenById(t);if(n)return n}}}set states(t){this._states=new Vn(this._stateChanged.bind(this),t),this.rendered&&this._stateChanged()}get states(){return this._states=this._states||new Vn(this._stateChanged.bind(this)),this._states}get animationSettings(){return this._animationSettings||Ie.animationSettings}set animationSettings(t){this._animationSettings=t}requiresLayout(){return this.display==="flex"||this.onBeforeLayout}updateLayout(t,e){var r,n;if(this.hasChildren){dt("Layout: ",this);let i=!1;Ds(this.onBeforeLayout)&&(i=this.onBeforeLayout.call(this,this,t,e)||!1),this.display==="flex"?(Ja(this)||i)&&((r=this.parent)==null||r.updateLayout()):i&&((n=this.parent)==null||n.updateLayout()),Ds(this.onLayout)&&this.onLayout.call(this,this,t,e)}}_stateChanged(){if(dt("State Changed: ",this,this.states),this.forwardStates){const e=this.states.slice();this.children.forEach(r=>{r.states=e})}const t=this.states;if(this._undoStyles||this.style&&Za(this.style,t)){this._undoStyles=this._undoStyles||[];const e={};this._undoStyles.forEach(n=>{e[n]=this.style[n]});const r=t.reduce((n,i)=>{const o=this.style[i];return o&&(n={...n,...o}),n},{});this._undoStyles=Object.keys(r),r.transition!==void 0&&(this.transition=r.transition),Object.assign(this,e,r)}}render(){var n;const t=this,e=this.parent;if(!e){console.warn("Parent not set - no node created for: ",this);return}if(!e.rendered){console.warn("Parent not rendered yet: ",this);return}if(this.rendered){console.warn("Node already rendered: ",this);return}e.requiresLayout()&&!Hs.has(e)&&(Hs.add(e),Er&&(Er=!1,queueMicrotask(()=>{Er=!0;const i=[...Hs];Hs.clear();for(let o=i.length-1;o>=0;o--)i[o].updateLayout()}))),this._states&&this._stateChanged();const r=t.lng;if(r.x=r.x||0,r.y=r.y||0,e.rendered&&(r.parent=e.lng),t._effects&&(r.shader=Kn(t._effects)),t.isTextNode()){const i=r;if(Ie.fontSettings)for(const o in Ie.fontSettings)i[o]===void 0&&(i[o]=Ie.fontSettings[o]);i.text=t.getText(),i.textAlign&&!i.contain&&console.warn("Text align requires contain: ",t.getText()),i.contain&&(i.width||(i.width=(e.width||0)-i.x-(i.marginRight||0)),i.contain==="both"&&!i.height&&!i.maxLines?i.height=(e.height||0)-i.y-(i.marginBottom||0):i.maxLines===1&&(i.height=i.height||i.lineHeight||i.fontSize)),dt("Rendering: ",this,r),t.lng=ft.createTextNode(r),e.requiresLayout()&&(!r.width||!r.height)&&t._layoutOnLoad()}else r.texture||(isNaN(r.width)&&(r.width=(e.width||0)-r.x),isNaN(r.height)&&(r.height=(e.height||0)-r.y),r.rtt&&!r.color&&(r.color=4294967295),!r.color&&!r.src&&(r.color=0)),dt("Rendering: ",this,r),t.lng=ft.createNode(r);if(t.rendered=!0,t.autosize&&e.requiresLayout()&&t._layoutOnLoad(),t.onFail&&t.lng.on("failed",t.onFail),t.onLoad&&t.lng.on("loaded",t.onLoad),Ds(this.onCreate)&&this.onCreate.call(this,t),t.onEvents&&t.onEvents.forEach(([i,o])=>{t.lng.on(i,(l,a)=>o(t,a))}),(n=t.lng)!=null&&n.div&&(t.lng.div.element=t),t.type===ht.Element)for(let i=0;i<t.children.length;i++){const o=t.children[i];H(o,"Child is undefined"),Ir(o)?o.render():o.text&&o.type===ht.Text&&console.warn("TextNode outside of <Text>: ",o)}t.autofocus&&t.setFocus()}}for(const s of ec)Object.defineProperty(pt.prototype,s,{get(){return this.lng[s]},set(t){this._sendToLightningAnimatable(s,t)}});for(const s of tc)Object.defineProperty(pt.prototype,s,{get(){return this.lng[s]},set(t){this.lng[s]=t}});Object.defineProperties(pt.prototype,{borderRadius:{set(s){this.effects=this.effects?{...this.effects,radius:{radius:s}}:{radius:{radius:s}}},get(){var s,t;return(t=(s=this.effects)==null?void 0:s.radius)==null?void 0:t.radius}},border:ss(),borderLeft:ss("Left"),borderRight:ss("Right"),borderTop:ss("Top"),borderBottom:ss("Bottom"),linearGradient:{set(s={}){this.effects=this.effects?{...this.effects,linearGradient:s}:{linearGradient:s}},get(){var s;return(s=this.effects)==null?void 0:s.linearGradient}}});/**
* @vue/shared v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function no(s,t){const e=new Set(s.split(","));return r=>e.has(r)}const pe={},jt=[],Be=()=>{},sc=()=>!1,dn=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&(s.charCodeAt(2)>122||s.charCodeAt(2)<97),io=s=>s.startsWith("onUpdate:"),Te=Object.assign,pn=(s,t)=>{const e=s.indexOf(t);e>-1&&s.splice(e,1)},rc=Object.prototype.hasOwnProperty,oe=(s,t)=>rc.call(s,t),Q=Array.isArray,Xt=s=>cr(s)==="[object Map]",oo=s=>cr(s)==="[object Set]",re=s=>typeof s=="function",Me=s=>typeof s=="string",Ft=s=>typeof s=="symbol",ge=s=>s!==null&&typeof s=="object",lo=s=>(ge(s)||re(s))&&re(s.then)&&re(s.catch),ao=Object.prototype.toString,cr=s=>ao.call(s),nc=s=>cr(s).slice(8,-1),co=s=>cr(s)==="[object Object]",gn=s=>Me(s)&&s!=="NaN"&&s[0]!=="-"&&""+parseInt(s,10)===s,fs=no(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ur=s=>{const t=Object.create(null);return e=>t[e]||(t[e]=s(e))},ic=/-(\w)/g,bs=ur(s=>s.replace(ic,(t,e)=>e?e.toUpperCase():"")),oc=/\B([A-Z])/g,hr=ur(s=>s.replace(oc,"-$1").toLowerCase()),lc=ur(s=>s.charAt(0).toUpperCase()+s.slice(1)),Mr=ur(s=>s?`on${lc(s)}`:""),xt=(s,t)=>!Object.is(s,t),Ar=(s,...t)=>{for(let e=0;e<s.length;e++)s[e](...t)},uo=(s,t,e,r=!1)=>{Object.defineProperty(s,t,{configurable:!0,enumerable:!1,writable:r,value:e})},ac=s=>{const t=parseFloat(s);return isNaN(t)?s:t};let Gn;const ho=()=>Gn||(Gn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function As(s){if(Q(s)){const t={};for(let e=0;e<s.length;e++){const r=s[e],n=Me(r)?fc(r):As(r);if(n)for(const i in n)t[i]=n[i]}return t}else if(Me(s)||ge(s))return s}const cc=/;(?![^(]*\))/g,uc=/:([^]+)/,hc=/\/\*[^]*?\*\//g;function fc(s){const t={};return s.replace(hc,"").split(cc).forEach(e=>{if(e){const r=e.split(uc);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function mn(s){let t="";if(Me(s))t=s;else if(Q(s))for(let e=0;e<s.length;e++){const r=mn(s[e]);r&&(t+=r+" ")}else if(ge(s))for(const e in s)s[e]&&(t+=e+" ");return t.trim()}const kf=s=>Me(s)?s:s==null?"":Q(s)||ge(s)&&(s.toString===ao||!re(s.toString))?JSON.stringify(s,fo,2):String(s),fo=(s,t)=>t&&t.__v_isRef?fo(s,t.value):Xt(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[r,n],i)=>(e[Fr(r,i)+" =>"]=n,e),{})}:oo(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>Fr(e))}:Ft(t)?Fr(t):ge(t)&&!Q(t)&&!co(t)?String(t):t,Fr=(s,t="")=>{var e;return Ft(s)?`Symbol(${(e=s.description)!=null?e:t})`:s};/**
* @vue/reactivity v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let $e;class dc{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=$e,!t&&$e&&(this.index=($e.scopes||($e.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const e=$e;try{return $e=this,t()}finally{$e=e}}}on(){$e=this}off(){$e=this.parent}stop(t){if(this._active){let e,r;for(e=0,r=this.effects.length;e<r;e++)this.effects[e].stop();for(e=0,r=this.cleanups.length;e<r;e++)this.cleanups[e]();if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0,this._active=!1}}}function pc(s,t=$e){t&&t.active&&t.effects.push(s)}function gc(){return $e}let Mt;class xn{constructor(t,e,r,n){this.fn=t,this.trigger=e,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=5,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,pc(this,n)}get dirty(){if(this._dirtyLevel===2)return!1;if(this._dirtyLevel===3||this._dirtyLevel===4){this._dirtyLevel=1,wt();for(let t=0;t<this._depsLength;t++){const e=this.deps[t];if(e.computed){if(e.computed.effect._dirtyLevel===2)return!0;if(mc(e.computed),this._dirtyLevel>=5)break}}this._dirtyLevel===1&&(this._dirtyLevel=0),bt()}return this._dirtyLevel>=5}set dirty(t){this._dirtyLevel=t?5:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=gt,e=Mt;try{return gt=!0,Mt=this,this._runnings++,qn(this),this.fn()}finally{Qn(this),this._runnings--,Mt=e,gt=t}}stop(){this.active&&(qn(this),Qn(this),this.onStop&&this.onStop(),this.active=!1)}}function mc(s){return s.value}function qn(s){s._trackId++,s._depsLength=0}function Qn(s){if(s.deps.length>s._depsLength){for(let t=s._depsLength;t<s.deps.length;t++)po(s.deps[t],s);s.deps.length=s._depsLength}}function po(s,t){const e=s.get(t);e!==void 0&&t._trackId!==e&&(s.delete(t),s.size===0&&s.cleanup())}let gt=!0,Vr=0;const go=[];function wt(){go.push(gt),gt=!1}function bt(){const s=go.pop();gt=s===void 0?!0:s}function yn(){Vr++}function vn(){for(Vr--;!Vr&&Kr.length;)Kr.shift()()}function mo(s,t,e){if(t.get(s)!==s._trackId){t.set(s,s._trackId);const r=s.deps[s._depsLength];r!==t?(r&&po(r,s),s.deps[s._depsLength++]=t):s._depsLength++}}const Kr=[];function xo(s,t,e){yn();for(const r of s.keys()){if(!s.computed&&r.computed&&s.get(r)===r._trackId&&r._runnings>0){r._dirtyLevel=2;continue}let n;r._dirtyLevel<t&&(n??(n=s.get(r)===r._trackId))&&(r._shouldSchedule||(r._shouldSchedule=r._dirtyLevel===0),r.computed&&r._dirtyLevel===2&&(r._shouldSchedule=!0),r._dirtyLevel=t),r._shouldSchedule&&(n??(n=s.get(r)===r._trackId))&&(r.trigger(),(!r._runnings||r.allowRecurse)&&r._dirtyLevel!==3&&(r._shouldSchedule=!1,r.scheduler&&Kr.push(r.scheduler)))}vn()}const yo=(s,t)=>{const e=new Map;return e.cleanup=s,e.computed=t,e},Gr=new WeakMap,At=Symbol(""),qr=Symbol("");function Pe(s,t,e){if(gt&&Mt){let r=Gr.get(s);r||Gr.set(s,r=new Map);let n=r.get(e);n||r.set(e,n=yo(()=>r.delete(e))),mo(Mt,n)}}function tt(s,t,e,r,n,i){const o=Gr.get(s);if(!o)return;let l=[];if(t==="clear")l=[...o.values()];else if(e==="length"&&Q(s)){const a=Number(r);o.forEach((u,c)=>{(c==="length"||!Ft(c)&&c>=a)&&l.push(u)})}else switch(e!==void 0&&l.push(o.get(e)),t){case"add":Q(s)?gn(e)&&l.push(o.get("length")):(l.push(o.get(At)),Xt(s)&&l.push(o.get(qr)));break;case"delete":Q(s)||(l.push(o.get(At)),Xt(s)&&l.push(o.get(qr)));break;case"set":Xt(s)&&l.push(o.get(At));break}yn();for(const a of l)a&&xo(a,5);vn()}const xc=no("__proto__,__v_isRef,__isVue"),vo=new Set(Object.getOwnPropertyNames(Symbol).filter(s=>s!=="arguments"&&s!=="caller").map(s=>Symbol[s]).filter(Ft)),Zn=yc();function yc(){const s={};return["includes","indexOf","lastIndexOf"].forEach(t=>{s[t]=function(...e){const r=ce(this);for(let i=0,o=this.length;i<o;i++)Pe(r,"get",i+"");const n=r[t](...e);return n===-1||n===!1?r[t](...e.map(ce)):n}}),["push","pop","shift","unshift","splice"].forEach(t=>{s[t]=function(...e){wt(),yn();const r=ce(this)[t].apply(this,e);return vn(),bt(),r}}),s}function vc(s){Ft(s)||(s=String(s));const t=ce(this);return Pe(t,"has",s),t.hasOwnProperty(s)}class _o{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,r){const n=this._isReadonly,i=this._isShallow;if(e==="__v_isReactive")return!n;if(e==="__v_isReadonly")return n;if(e==="__v_isShallow")return i;if(e==="__v_raw")return r===(n?i?Lc:So:i?To:bo).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const o=Q(t);if(!n){if(o&&oe(Zn,e))return Reflect.get(Zn,e,r);if(e==="hasOwnProperty")return vc}const l=Reflect.get(t,e,r);return(Ft(e)?vo.has(e):xc(e))||(n||Pe(t,"get",e),i)?l:ke(l)?o&&gn(e)?l:l.value:ge(l)?n?Ro(l):dr(l):l}}class wo extends _o{constructor(t=!1){super(!1,t)}set(t,e,r,n){let i=t[e];if(!this._isShallow){const a=Ts(i);if(!rr(r)&&!Ts(r)&&(i=ce(i),r=ce(r)),!Q(t)&&ke(i)&&!ke(r))return a?!1:(i.value=r,!0)}const o=Q(t)&&gn(e)?Number(e)<t.length:oe(t,e),l=Reflect.set(t,e,r,n);return t===ce(n)&&(o?xt(r,i)&&tt(t,"set",e,r):tt(t,"add",e,r)),l}deleteProperty(t,e){const r=oe(t,e);t[e];const n=Reflect.deleteProperty(t,e);return n&&r&&tt(t,"delete",e,void 0),n}has(t,e){const r=Reflect.has(t,e);return(!Ft(e)||!vo.has(e))&&Pe(t,"has",e),r}ownKeys(t){return Pe(t,"iterate",Q(t)?"length":At),Reflect.ownKeys(t)}}class _c extends _o{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const wc=new wo,bc=new _c,Tc=new wo(!0);const _n=s=>s,fr=s=>Reflect.getPrototypeOf(s);function Us(s,t,e=!1,r=!1){s=s.__v_raw;const n=ce(s),i=ce(t);e||(xt(t,i)&&Pe(n,"get",t),Pe(n,"get",i));const{has:o}=fr(n),l=r?_n:e?Tn:Ss;if(o.call(n,t))return l(s.get(t));if(o.call(n,i))return l(s.get(i));s!==n&&s.get(t)}function Ws(s,t=!1){const e=this.__v_raw,r=ce(e),n=ce(s);return t||(xt(s,n)&&Pe(r,"has",s),Pe(r,"has",n)),s===n?e.has(s):e.has(s)||e.has(n)}function Ys(s,t=!1){return s=s.__v_raw,!t&&Pe(ce(s),"iterate",At),Reflect.get(s,"size",s)}function Jn(s){s=ce(s);const t=ce(this);return fr(t).has.call(t,s)||(t.add(s),tt(t,"add",s,s)),this}function ei(s,t){t=ce(t);const e=ce(this),{has:r,get:n}=fr(e);let i=r.call(e,s);i||(s=ce(s),i=r.call(e,s));const o=n.call(e,s);return e.set(s,t),i?xt(t,o)&&tt(e,"set",s,t):tt(e,"add",s,t),this}function ti(s){const t=ce(this),{has:e,get:r}=fr(t);let n=e.call(t,s);n||(s=ce(s),n=e.call(t,s)),r&&r.call(t,s);const i=t.delete(s);return n&&tt(t,"delete",s,void 0),i}function si(){const s=ce(this),t=s.size!==0,e=s.clear();return t&&tt(s,"clear",void 0,void 0),e}function js(s,t){return function(r,n){const i=this,o=i.__v_raw,l=ce(o),a=t?_n:s?Tn:Ss;return!s&&Pe(l,"iterate",At),o.forEach((u,c)=>r.call(n,a(u),a(c),i))}}function Xs(s,t,e){return function(...r){const n=this.__v_raw,i=ce(n),o=Xt(i),l=s==="entries"||s===Symbol.iterator&&o,a=s==="keys"&&o,u=n[s](...r),c=e?_n:t?Tn:Ss;return!t&&Pe(i,"iterate",a?qr:At),{next(){const{value:h,done:p}=u.next();return p?{value:h,done:p}:{value:l?[c(h[0]),c(h[1])]:c(h),done:p}},[Symbol.iterator](){return this}}}}function it(s){return function(...t){return s==="delete"?!1:s==="clear"?void 0:this}}function Sc(){const s={get(i){return Us(this,i)},get size(){return Ys(this)},has:Ws,add:Jn,set:ei,delete:ti,clear:si,forEach:js(!1,!1)},t={get(i){return Us(this,i,!1,!0)},get size(){return Ys(this)},has:Ws,add:Jn,set:ei,delete:ti,clear:si,forEach:js(!1,!0)},e={get(i){return Us(this,i,!0)},get size(){return Ys(this,!0)},has(i){return Ws.call(this,i,!0)},add:it("add"),set:it("set"),delete:it("delete"),clear:it("clear"),forEach:js(!0,!1)},r={get(i){return Us(this,i,!0,!0)},get size(){return Ys(this,!0)},has(i){return Ws.call(this,i,!0)},add:it("add"),set:it("set"),delete:it("delete"),clear:it("clear"),forEach:js(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{s[i]=Xs(i,!1,!1),e[i]=Xs(i,!0,!1),t[i]=Xs(i,!1,!0),r[i]=Xs(i,!0,!0)}),[s,e,t,r]}const[Cc,Rc,Ic,Ec]=Sc();function wn(s,t){const e=t?s?Ec:Ic:s?Rc:Cc;return(r,n,i)=>n==="__v_isReactive"?!s:n==="__v_isReadonly"?s:n==="__v_raw"?r:Reflect.get(oe(e,n)&&n in r?e:r,n,i)}const Mc={get:wn(!1,!1)},Ac={get:wn(!1,!0)},Fc={get:wn(!0,!1)};const bo=new WeakMap,To=new WeakMap,So=new WeakMap,Lc=new WeakMap;function Pc(s){switch(s){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function kc(s){return s.__v_skip||!Object.isExtensible(s)?0:Pc(nc(s))}function dr(s){return Ts(s)?s:bn(s,!1,wc,Mc,bo)}function Co(s){return bn(s,!1,Tc,Ac,To)}function Ro(s){return bn(s,!0,bc,Fc,So)}function bn(s,t,e,r,n){if(!ge(s)||s.__v_raw&&!(t&&s.__v_isReactive))return s;const i=n.get(s);if(i)return i;const o=kc(s);if(o===0)return s;const l=new Proxy(s,o===2?r:e);return n.set(s,l),l}function ds(s){return Ts(s)?ds(s.__v_raw):!!(s&&s.__v_isReactive)}function Ts(s){return!!(s&&s.__v_isReadonly)}function rr(s){return!!(s&&s.__v_isShallow)}function Io(s){return s?!!s.__v_raw:!1}function ce(s){const t=s&&s.__v_raw;return t?ce(t):s}function Eo(s){return Object.isExtensible(s)&&uo(s,"__v_skip",!0),s}const Ss=s=>ge(s)?dr(s):s,Tn=s=>ge(s)?Ro(s):s;class Mo{constructor(t,e,r,n){this.getter=t,this._setter=e,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new xn(()=>t(this._value),()=>Zs(this,this.effect._dirtyLevel===3?3:4)),this.effect.computed=this,this.effect.active=this._cacheable=!n,this.__v_isReadonly=r}get value(){const t=ce(this);return(!t._cacheable||t.effect.dirty)&&xt(t._value,t._value=t.effect.run())&&Zs(t,5),Ao(t),t.effect._dirtyLevel>=2&&Zs(t,3),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function Nc(s,t,e=!1){let r,n;const i=re(s);return i?(r=s,n=Be):(r=s.get,n=s.set),new Mo(r,n,i||!n,e)}function Ao(s){var t;gt&&Mt&&(s=ce(s),mo(Mt,(t=s.dep)!=null?t:s.dep=yo(()=>s.dep=void 0,s instanceof Mo?s:void 0)))}function Zs(s,t=5,e,r){s=ce(s);const n=s.dep;n&&xo(n,t)}function ke(s){return!!(s&&s.__v_isRef===!0)}function De(s){return Fo(s,!1)}function Oc(s){return Fo(s,!0)}function Fo(s,t){return ke(s)?s:new Bc(s,t)}class Bc{constructor(t,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:ce(t),this._value=e?t:Ss(t)}get value(){return Ao(this),this._value}set value(t){const e=this.__v_isShallow||rr(t)||Ts(t);t=e?t:ce(t),xt(t,this._rawValue)&&(this._rawValue,this._rawValue=t,this._value=e?t:Ss(t),Zs(this,5))}}function Se(s){return ke(s)?s.value:s}const zc={get:(s,t,e)=>Se(Reflect.get(s,t,e)),set:(s,t,e,r)=>{const n=s[t];return ke(n)&&!ke(e)?(n.value=e,!0):Reflect.set(s,t,e,r)}};function Lo(s){return ds(s)?s:new Proxy(s,zc)}const Sn=De(void 0),$c=s=>Sn.value=s;Ie.setActiveElement=$c;/**
* @vue/runtime-core v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function mt(s,t,e,r){try{return r?s(...r):s()}catch(n){pr(n,t,e)}}function qe(s,t,e,r){if(re(s)){const n=mt(s,t,e,r);return n&&lo(n)&&n.catch(i=>{pr(i,t,e)}),n}if(Q(s)){const n=[];for(let i=0;i<s.length;i++)n.push(qe(s[i],t,e,r));return n}}function pr(s,t,e,r=!0){const n=t?t.vnode:null;if(t){let i=t.parent;const o=t.proxy,l=`https://vuejs.org/error-reference/#runtime-${e}`;for(;i;){const u=i.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](s,o,l)===!1)return}i=i.parent}const a=t.appContext.config.errorHandler;if(a){wt(),mt(a,null,10,[s,o,l]),bt();return}}Dc(s,e,n,r)}function Dc(s,t,e,r=!0){console.error(s)}let Cs=!1,Qr=!1;const Ce=[];let Ge=0;const Vt=[];let lt=null,Ct=0;const Po=Promise.resolve();let Cn=null;function ko(s){const t=Cn||Po;return s?t.then(this?s.bind(this):s):t}function Hc(s){let t=Ge+1,e=Ce.length;for(;t<e;){const r=t+e>>>1,n=Ce[r],i=Rs(n);i<s||i===s&&n.pre?t=r+1:e=r}return t}function Rn(s){(!Ce.length||!Ce.includes(s,Cs&&s.allowRecurse?Ge+1:Ge))&&(s.id==null?Ce.push(s):Ce.splice(Hc(s.id),0,s),No())}function No(){!Cs&&!Qr&&(Qr=!0,Cn=Po.then(Bo))}function Uc(s){const t=Ce.indexOf(s);t>Ge&&Ce.splice(t,1)}function Wc(s){Q(s)?Vt.push(...s):(!lt||!lt.includes(s,s.allowRecurse?Ct+1:Ct))&&Vt.push(s),No()}function ri(s,t,e=Cs?Ge+1:0){for(;e<Ce.length;e++){const r=Ce[e];if(r&&r.pre){if(s&&r.id!==s.uid)continue;Ce.splice(e,1),e--,r()}}}function Oo(s){if(Vt.length){const t=[...new Set(Vt)].sort((e,r)=>Rs(e)-Rs(r));if(Vt.length=0,lt){lt.push(...t);return}for(lt=t,Ct=0;Ct<lt.length;Ct++){const e=lt[Ct];e.active!==!1&&e()}lt=null,Ct=0}}const Rs=s=>s.id==null?1/0:s.id,Yc=(s,t)=>{const e=Rs(s)-Rs(t);if(e===0){if(s.pre&&!t.pre)return-1;if(t.pre&&!s.pre)return 1}return e};function Bo(s){Qr=!1,Cs=!0,Ce.sort(Yc);try{for(Ge=0;Ge<Ce.length;Ge++){const t=Ce[Ge];t&&t.active!==!1&&mt(t,null,14)}}finally{Ge=0,Ce.length=0,Oo(),Cs=!1,Cn=null,(Ce.length||Vt.length)&&Bo()}}function jc(s,t,...e){if(s.isUnmounted)return;const r=s.vnode.props||pe;let n=e;const i=t.startsWith("update:"),o=i&&t.slice(7);if(o&&o in r){const c=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:p}=r[c]||pe;p&&(n=e.map(m=>Me(m)?m.trim():m)),h&&(n=e.map(ac))}let l,a=r[l=Mr(t)]||r[l=Mr(bs(t))];!a&&i&&(a=r[l=Mr(hr(t))]),a&&qe(a,s,6,n);const u=r[l+"Once"];if(u){if(!s.emitted)s.emitted={};else if(s.emitted[l])return;s.emitted[l]=!0,qe(u,s,6,n)}}function zo(s,t,e=!1){const r=t.emitsCache,n=r.get(s);if(n!==void 0)return n;const i=s.emits;let o={},l=!1;if(!re(s)){const a=u=>{const c=zo(u,t,!0);c&&(l=!0,Te(o,c))};!e&&t.mixins.length&&t.mixins.forEach(a),s.extends&&a(s.extends),s.mixins&&s.mixins.forEach(a)}return!i&&!l?(ge(s)&&r.set(s,null),null):(Q(i)?i.forEach(a=>o[a]=null):Te(o,i),ge(s)&&r.set(s,o),o)}function gr(s,t){return!s||!dn(t)?!1:(t=t.slice(2).replace(/Once$/,""),oe(s,t[0].toLowerCase()+t.slice(1))||oe(s,hr(t))||oe(s,t))}let Le=null,$o=null;function nr(s){const t=Le;return Le=s,$o=s&&s.type.__scopeId||null,t}function Ht(s,t=Le,e){if(!t||s._n)return s;const r=(...n)=>{r._d&&pi(-1);const i=nr(t);let o;try{o=s(...n)}finally{nr(i),r._d&&pi(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Lr(s){const{type:t,vnode:e,proxy:r,withProxy:n,propsOptions:[i],slots:o,attrs:l,emit:a,render:u,renderCache:c,props:h,data:p,setupState:m,ctx:x,inheritAttrs:v}=s,_=nr(s);let w,C;try{if(e.shapeFlag&4){const I=n||r,F=I;w=Ke(u.call(F,I,c,h,m,p,x)),C=l}else{const I=t;w=Ke(I.length>1?I(h,{attrs:l,slots:o,emit:a}):I(h,null)),C=t.props?l:Xc(l)}}catch(I){xs.length=0,pr(I,s,1),w=me(yt)}let M=w;if(C&&v!==!1){const I=Object.keys(C),{shapeFlag:F}=M;I.length&&F&7&&(i&&I.some(io)&&(C=Vc(C,i)),M=qt(M,C,!1,!0))}return e.dirs&&(M=qt(M,null,!1,!0),M.dirs=M.dirs?M.dirs.concat(e.dirs):e.dirs),e.transition&&(M.transition=e.transition),w=M,nr(_),w}const Xc=s=>{let t;for(const e in s)(e==="class"||e==="style"||dn(e))&&((t||(t={}))[e]=s[e]);return t},Vc=(s,t)=>{const e={};for(const r in s)(!io(r)||!(r.slice(9)in t))&&(e[r]=s[r]);return e};function Kc(s,t,e){const{props:r,children:n,component:i}=s,{props:o,children:l,patchFlag:a}=t,u=i.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&a>=0){if(a&1024)return!0;if(a&16)return r?ni(r,o,u):!!o;if(a&8){const c=t.dynamicProps;for(let h=0;h<c.length;h++){const p=c[h];if(o[p]!==r[p]&&!gr(u,p))return!0}}}else return(n||l)&&(!l||!l.$stable)?!0:r===o?!1:r?o?ni(r,o,u):!0:!!o;return!1}function ni(s,t,e){const r=Object.keys(t);if(r.length!==Object.keys(s).length)return!0;for(let n=0;n<r.length;n++){const i=r[n];if(t[i]!==s[i]&&!gr(e,i))return!0}return!1}function Gc({vnode:s,parent:t},e){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===s&&(r.el=s.el),r===s)(s=t.vnode).el=e,t=t.parent;else break}}const qc=Symbol.for("v-ndc"),Qc=s=>s.__isSuspense;function Zc(s,t){t&&t.pendingBranch?Q(s)?t.effects.push(...s):t.effects.push(s):Wc(s)}function mr(s,t,e=Ee,r=!1){if(e){const n=e[s]||(e[s]=[]),i=t.__weh||(t.__weh=(...o)=>{wt();const l=Fs(e),a=qe(t,e,s,o);return l(),bt(),a});return r?n.unshift(i):n.push(i),i}}const st=s=>(t,e=Ee)=>{(!vr||s==="sp")&&mr(s,(...r)=>t(...r),e)},Jc=st("bm"),eu=st("m"),tu=st("bu"),su=st("u"),ru=st("bum"),Do=st("um"),nu=st("sp"),iu=st("rtg"),ou=st("rtc");function lu(s,t=Ee){mr("ec",s,t)}function Tt(s,t,e,r){const n=s.dirs,i=t&&t.dirs;for(let o=0;o<n.length;o++){const l=n[o];i&&(l.oldValue=i[o].value);let a=l.dir[r];a&&(wt(),qe(a,e,8,[s.el,l,s,t]),bt())}}function Nf(s,t,e,r){let n;const i=e;if(Q(s)||Me(s)){n=new Array(s.length);for(let o=0,l=s.length;o<l;o++)n[o]=t(s[o],o,void 0,i)}else if(typeof s=="number"){n=new Array(s);for(let o=0;o<s;o++)n[o]=t(o+1,o,void 0,i)}else if(ge(s))if(s[Symbol.iterator])n=Array.from(s,(o,l)=>t(o,l,void 0,i));else{const o=Object.keys(s);n=new Array(o.length);for(let l=0,a=o.length;l<a;l++){const u=o[l];n[l]=t(s[u],u,l,i)}}else n=[];return n}/*! #__NO_SIDE_EFFECTS__ */function Lt(s,t){return re(s)?Te({name:s.name},t,{setup:s}):s}const ps=s=>!!s.type.__asyncLoader;function Ho(s,t,e={},r,n){if(Le.isCE||Le.parent&&ps(Le.parent)&&Le.parent.isCE)return me("slot",e,r);let i=s[t];i&&i._c&&(i._d=!1),vt();const o=i&&Uo(i(e)),l=ll(He,{key:e.key||o&&o.key||`_${t}`},o||[],o&&s._===1?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),i&&i._c&&(i._d=!0),l}function Uo(s){return s.some(t=>or(t)?!(t.type===yt||t.type===He&&!Uo(t.children)):!0)?s:null}const Zr=s=>s?cl(s)?An(s):Zr(s.parent):null,gs=Te(Object.create(null),{$:s=>s,$el:s=>s.vnode.el,$data:s=>s.data,$props:s=>s.props,$attrs:s=>s.attrs,$slots:s=>s.slots,$refs:s=>s.refs,$parent:s=>Zr(s.parent),$root:s=>Zr(s.root),$emit:s=>s.emit,$options:s=>In(s),$forceUpdate:s=>s.f||(s.f=()=>{s.effect.dirty=!0,Rn(s.update)}),$nextTick:s=>s.n||(s.n=ko.bind(s.proxy)),$watch:s=>Iu.bind(s)}),Pr=(s,t)=>s!==pe&&!s.__isScriptSetup&&oe(s,t),au={get({_:s},t){if(t==="__v_skip")return!0;const{ctx:e,setupState:r,data:n,props:i,accessCache:o,type:l,appContext:a}=s;let u;if(t[0]!=="$"){const m=o[t];if(m!==void 0)switch(m){case 1:return r[t];case 2:return n[t];case 4:return e[t];case 3:return i[t]}else{if(Pr(r,t))return o[t]=1,r[t];if(n!==pe&&oe(n,t))return o[t]=2,n[t];if((u=s.propsOptions[0])&&oe(u,t))return o[t]=3,i[t];if(e!==pe&&oe(e,t))return o[t]=4,e[t];Jr&&(o[t]=0)}}const c=gs[t];let h,p;if(c)return t==="$attrs"&&Pe(s.attrs,"get",""),c(s);if((h=l.__cssModules)&&(h=h[t]))return h;if(e!==pe&&oe(e,t))return o[t]=4,e[t];if(p=a.config.globalProperties,oe(p,t))return p[t]},set({_:s},t,e){const{data:r,setupState:n,ctx:i}=s;return Pr(n,t)?(n[t]=e,!0):r!==pe&&oe(r,t)?(r[t]=e,!0):oe(s.props,t)||t[0]==="$"&&t.slice(1)in s?!1:(i[t]=e,!0)},has({_:{data:s,setupState:t,accessCache:e,ctx:r,appContext:n,propsOptions:i}},o){let l;return!!e[o]||s!==pe&&oe(s,o)||Pr(t,o)||(l=i[0])&&oe(l,o)||oe(r,o)||oe(gs,o)||oe(n.config.globalProperties,o)},defineProperty(s,t,e){return e.get!=null?s._.accessCache[t]=0:oe(e,"value")&&this.set(s,t,e.value,null),Reflect.defineProperty(s,t,e)}};function ii(s){return Q(s)?s.reduce((t,e)=>(t[e]=null,t),{}):s}let Jr=!0;function cu(s){const t=In(s),e=s.proxy,r=s.ctx;Jr=!1,t.beforeCreate&&oi(t.beforeCreate,s,"bc");const{data:n,computed:i,methods:o,watch:l,provide:a,inject:u,created:c,beforeMount:h,mounted:p,beforeUpdate:m,updated:x,activated:v,deactivated:_,beforeDestroy:w,beforeUnmount:C,destroyed:M,unmounted:I,render:F,renderTracked:R,renderTriggered:A,errorCaptured:K,serverPrefetch:X,expose:Z,inheritAttrs:G,components:le,directives:se,filters:ie}=t;if(u&&uu(u,r,null),o)for(const Y in o){const ee=o[Y];re(ee)&&(r[Y]=ee.bind(e))}if(n){const Y=n.call(e,e);ge(Y)&&(s.data=dr(Y))}if(Jr=!0,i)for(const Y in i){const ee=i[Y],xe=re(ee)?ee.bind(e,e):re(ee.get)?ee.get.bind(e,e):Be,ve=!re(ee)&&re(ee.set)?ee.set.bind(e):Be,_e=Ue({get:xe,set:ve});Object.defineProperty(r,Y,{enumerable:!0,configurable:!0,get:()=>_e.value,set:de=>_e.value=de})}if(l)for(const Y in l)Wo(l[Y],r,e,Y);if(a){const Y=re(a)?a.call(e):a;Reflect.ownKeys(Y).forEach(ee=>{Js(ee,Y[ee])})}c&&oi(c,s,"c");function W(Y,ee){Q(ee)?ee.forEach(xe=>Y(xe.bind(e))):ee&&Y(ee.bind(e))}if(W(Jc,h),W(eu,p),W(tu,m),W(su,x),W(Eu,v),W(Mu,_),W(lu,K),W(ou,R),W(iu,A),W(ru,C),W(Do,I),W(nu,X),Q(Z))if(Z.length){const Y=s.exposed||(s.exposed={});Z.forEach(ee=>{Object.defineProperty(Y,ee,{get:()=>e[ee],set:xe=>e[ee]=xe})})}else s.exposed||(s.exposed={});F&&s.render===Be&&(s.render=F),G!=null&&(s.inheritAttrs=G),le&&(s.components=le),se&&(s.directives=se)}function uu(s,t,e=Be){Q(s)&&(s=en(s));for(const r in s){const n=s[r];let i;ge(n)?"default"in n?i=Ye(n.from||r,n.default,!0):i=Ye(n.from||r):i=Ye(n),ke(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):t[r]=i}}function oi(s,t,e){qe(Q(s)?s.map(r=>r.bind(t.proxy)):s.bind(t.proxy),t,e)}function Wo(s,t,e,r){const n=r.includes(".")?sl(e,r):()=>e[r];if(Me(s)){const i=t[s];re(i)&&Kt(n,i)}else if(re(s))Kt(n,s.bind(e));else if(ge(s))if(Q(s))s.forEach(i=>Wo(i,t,e,r));else{const i=re(s.handler)?s.handler.bind(e):t[s.handler];re(i)&&Kt(n,i,s)}}function In(s){const t=s.type,{mixins:e,extends:r}=t,{mixins:n,optionsCache:i,config:{optionMergeStrategies:o}}=s.appContext,l=i.get(t);let a;return l?a=l:!n.length&&!e&&!r?a=t:(a={},n.length&&n.forEach(u=>ir(a,u,o,!0)),ir(a,t,o)),ge(t)&&i.set(t,a),a}function ir(s,t,e,r=!1){const{mixins:n,extends:i}=t;i&&ir(s,i,e,!0),n&&n.forEach(o=>ir(s,o,e,!0));for(const o in t)if(!(r&&o==="expose")){const l=hu[o]||e&&e[o];s[o]=l?l(s[o],t[o]):t[o]}return s}const hu={data:li,props:ai,emits:ai,methods:us,computed:us,beforeCreate:Re,created:Re,beforeMount:Re,mounted:Re,beforeUpdate:Re,updated:Re,beforeDestroy:Re,beforeUnmount:Re,destroyed:Re,unmounted:Re,activated:Re,deactivated:Re,errorCaptured:Re,serverPrefetch:Re,components:us,directives:us,watch:du,provide:li,inject:fu};function li(s,t){return t?s?function(){return Te(re(s)?s.call(this,this):s,re(t)?t.call(this,this):t)}:t:s}function fu(s,t){return us(en(s),en(t))}function en(s){if(Q(s)){const t={};for(let e=0;e<s.length;e++)t[s[e]]=s[e];return t}return s}function Re(s,t){return s?[...new Set([].concat(s,t))]:t}function us(s,t){return s?Te(Object.create(null),s,t):t}function ai(s,t){return s?Q(s)&&Q(t)?[...new Set([...s,...t])]:Te(Object.create(null),ii(s),ii(t??{})):t}function du(s,t){if(!s)return t;if(!t)return s;const e=Te(Object.create(null),s);for(const r in t)e[r]=Re(s[r],t[r]);return e}function Yo(){return{app:null,config:{isNativeTag:sc,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let pu=0;function gu(s,t){return function(r,n=null){re(r)||(r=Te({},r)),n!=null&&!ge(n)&&(n=null);const i=Yo(),o=new WeakSet;let l=!1;const a=i.app={_uid:pu++,_component:r,_props:n,_container:null,_context:i,_instance:null,version:Yu,get config(){return i.config},set config(u){},use(u,...c){return o.has(u)||(u&&re(u.install)?(o.add(u),u.install(a,...c)):re(u)&&(o.add(u),u(a,...c))),a},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),a},component(u,c){return c?(i.components[u]=c,a):i.components[u]},directive(u,c){return c?(i.directives[u]=c,a):i.directives[u]},mount(u,c,h){if(!l){const p=me(r,n);return p.appContext=i,h===!0?h="svg":h===!1&&(h=void 0),c&&t?t(p,u):s(p,u,h),l=!0,a._container=u,u.__vue_app__=a,An(p.component)}},unmount(){l&&(s(null,a._container),delete a._container.__vue_app__)},provide(u,c){return i.provides[u]=c,a},runWithContext(u){const c=ms;ms=a;try{return u()}finally{ms=c}}};return a}}let ms=null;function Js(s,t){if(Ee){let e=Ee.provides;const r=Ee.parent&&Ee.parent.provides;r===e&&(e=Ee.provides=Object.create(r)),e[s]=t}}function Ye(s,t,e=!1){const r=Ee||Le;if(r||ms){const n=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:ms._context.provides;if(n&&s in n)return n[s];if(arguments.length>1)return e&&re(t)?t.call(r&&r.proxy):t}}const jo={},Xo=()=>Object.create(jo),Vo=s=>Object.getPrototypeOf(s)===jo;function mu(s,t,e,r=!1){const n={},i=Xo();s.propsDefaults=Object.create(null),Ko(s,t,n,i);for(const o in s.propsOptions[0])o in n||(n[o]=void 0);e?s.props=r?n:Co(n):s.type.props?s.props=n:s.props=i,s.attrs=i}function xu(s,t,e,r){const{props:n,attrs:i,vnode:{patchFlag:o}}=s,l=ce(n),[a]=s.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const c=s.vnode.dynamicProps;for(let h=0;h<c.length;h++){let p=c[h];if(gr(s.emitsOptions,p))continue;const m=t[p];if(a)if(oe(i,p))m!==i[p]&&(i[p]=m,u=!0);else{const x=bs(p);n[x]=tn(a,l,x,m,s,!1)}else m!==i[p]&&(i[p]=m,u=!0)}}}else{Ko(s,t,n,i)&&(u=!0);let c;for(const h in l)(!t||!oe(t,h)&&((c=hr(h))===h||!oe(t,c)))&&(a?e&&(e[h]!==void 0||e[c]!==void 0)&&(n[h]=tn(a,l,h,void 0,s,!0)):delete n[h]);if(i!==l)for(const h in i)(!t||!oe(t,h))&&(delete i[h],u=!0)}u&&tt(s.attrs,"set","")}function Ko(s,t,e,r){const[n,i]=s.propsOptions;let o=!1,l;if(t)for(let a in t){if(fs(a))continue;const u=t[a];let c;n&&oe(n,c=bs(a))?!i||!i.includes(c)?e[c]=u:(l||(l={}))[c]=u:gr(s.emitsOptions,a)||(!(a in r)||u!==r[a])&&(r[a]=u,o=!0)}if(i){const a=ce(e),u=l||pe;for(let c=0;c<i.length;c++){const h=i[c];e[h]=tn(n,a,h,u[h],s,!oe(u,h))}}return o}function tn(s,t,e,r,n,i){const o=s[e];if(o!=null){const l=oe(o,"default");if(l&&r===void 0){const a=o.default;if(o.type!==Function&&!o.skipFactory&&re(a)){const{propsDefaults:u}=n;if(e in u)r=u[e];else{const c=Fs(n);r=u[e]=a.call(null,t),c()}}else r=a}o[0]&&(i&&!l?r=!1:o[1]&&(r===""||r===hr(e))&&(r=!0))}return r}function Go(s,t,e=!1){const r=t.propsCache,n=r.get(s);if(n)return n;const i=s.props,o={},l=[];let a=!1;if(!re(s)){const c=h=>{a=!0;const[p,m]=Go(h,t,!0);Te(o,p),m&&l.push(...m)};!e&&t.mixins.length&&t.mixins.forEach(c),s.extends&&c(s.extends),s.mixins&&s.mixins.forEach(c)}if(!i&&!a)return ge(s)&&r.set(s,jt),jt;if(Q(i))for(let c=0;c<i.length;c++){const h=bs(i[c]);ci(h)&&(o[h]=pe)}else if(i)for(const c in i){const h=bs(c);if(ci(h)){const p=i[c],m=o[h]=Q(p)||re(p)?{type:p}:Te({},p);if(m){const x=fi(Boolean,m.type),v=fi(String,m.type);m[0]=x>-1,m[1]=v<0||x<v,(x>-1||oe(m,"default"))&&l.push(h)}}}const u=[o,l];return ge(s)&&r.set(s,u),u}function ci(s){return s[0]!=="$"&&!fs(s)}function ui(s){return s===null?"null":typeof s=="function"?s.name||"":typeof s=="object"&&s.constructor&&s.constructor.name||""}function hi(s,t){return ui(s)===ui(t)}function fi(s,t){return Q(t)?t.findIndex(e=>hi(e,s)):re(t)&&hi(t,s)?0:-1}const qo=s=>s[0]==="_"||s==="$stable",En=s=>Q(s)?s.map(Ke):[Ke(s)],yu=(s,t,e)=>{if(t._n)return t;const r=Ht((...n)=>En(t(...n)),e);return r._c=!1,r},Qo=(s,t,e)=>{const r=s._ctx;for(const n in s){if(qo(n))continue;const i=s[n];if(re(i))t[n]=yu(n,i,r);else if(i!=null){const o=En(i);t[n]=()=>o}}},Zo=(s,t)=>{const e=En(t);s.slots.default=()=>e},vu=(s,t)=>{const e=s.slots=Xo();if(s.vnode.shapeFlag&32){const r=t._;r?(Te(e,t),uo(e,"_",r,!0)):Qo(t,e)}else t&&Zo(s,t)},_u=(s,t,e)=>{const{vnode:r,slots:n}=s;let i=!0,o=pe;if(r.shapeFlag&32){const l=t._;l?e&&l===1?i=!1:(Te(n,t),!e&&l===1&&delete n._):(i=!t.$stable,Qo(t,n)),o=t}else t&&(Zo(s,t),o={default:1});if(i)for(const l in n)!qo(l)&&o[l]==null&&delete n[l]};function sn(s,t,e,r,n=!1){if(Q(s)){s.forEach((p,m)=>sn(p,t&&(Q(t)?t[m]:t),e,r,n));return}if(ps(r)&&!n)return;const i=r.shapeFlag&4?An(r.component):r.el,o=n?null:i,{i:l,r:a}=s,u=t&&t.r,c=l.refs===pe?l.refs={}:l.refs,h=l.setupState;if(u!=null&&u!==a&&(Me(u)?(c[u]=null,oe(h,u)&&(h[u]=null)):ke(u)&&(u.value=null)),re(a))mt(a,l,12,[o,c]);else{const p=Me(a),m=ke(a);if(p||m){const x=()=>{if(s.f){const v=p?oe(h,a)?h[a]:c[a]:a.value;n?Q(v)&&pn(v,i):Q(v)?v.includes(i)||v.push(i):p?(c[a]=[i],oe(h,a)&&(h[a]=c[a])):(a.value=[i],s.k&&(c[s.k]=a.value))}else p?(c[a]=o,oe(h,a)&&(h[a]=o)):m&&(a.value=o,s.k&&(c[s.k]=o))};o?(x.id=-1,Ae(x,e)):x()}}}const Ae=Zc;function wu(s){return bu(s)}function bu(s,t){const e=ho();e.__VUE__=!0;const{insert:r,remove:n,patchProp:i,createElement:o,createText:l,createComment:a,setText:u,setElementText:c,parentNode:h,nextSibling:p,setScopeId:m=Be,insertStaticContent:x}=s,v=(d,g,y,S=null,T=null,L=null,z=void 0,P=null,O=!!g.dynamicChildren)=>{if(d===g)return;d&&!rs(d,g)&&(S=b(d),de(d,T,L,!0),d=null),g.patchFlag===-2&&(O=!1,g.dynamicChildren=null);const{type:E,ref:$,shapeFlag:V}=g;switch(E){case xr:_(d,g,y,S);break;case yt:w(d,g,y,S);break;case Nr:d==null&&C(g,y,S,z);break;case He:le(d,g,y,S,T,L,z,P,O);break;default:V&1?F(d,g,y,S,T,L,z,P,O):V&6?se(d,g,y,S,T,L,z,P,O):(V&64||V&128)&&E.process(d,g,y,S,T,L,z,P,O,D)}$!=null&&T&&sn($,d&&d.ref,L,g||d,!g)},_=(d,g,y,S)=>{if(d==null)r(g.el=l(g.children),y,S);else{const T=g.el=d.el;g.children!==d.children&&u(T,g.children)}},w=(d,g,y,S)=>{d==null?r(g.el=a(g.children||""),y,S):g.el=d.el},C=(d,g,y,S)=>{[d.el,d.anchor]=x(d.children,g,y,S,d.el,d.anchor)},M=({el:d,anchor:g},y,S)=>{let T;for(;d&&d!==g;)T=p(d),r(d,y,S),d=T;r(g,y,S)},I=({el:d,anchor:g})=>{let y;for(;d&&d!==g;)y=p(d),n(d),d=y;n(g)},F=(d,g,y,S,T,L,z,P,O)=>{g.type==="svg"?z="svg":g.type==="math"&&(z="mathml"),d==null?R(g,y,S,T,L,z,P,O):X(d,g,T,L,z,P,O)},R=(d,g,y,S,T,L,z,P)=>{let O,E;const{props:$,shapeFlag:V,transition:j,dirs:q}=d;if(O=d.el=o(d.type,L,$&&$.is,$),V&8?c(O,d.children):V&16&&K(d.children,O,null,S,T,kr(d,L),z,P),q&&Tt(d,null,S,"created"),A(O,d,d.scopeId,z,S),$){for(const fe in $)fe!=="value"&&!fs(fe)&&i(O,fe,null,$[fe],L,d.children,S,T,he);"value"in $&&i(O,"value",null,$.value,L),(E=$.onVnodeBeforeMount)&&Ve(E,S,d)}q&&Tt(d,null,S,"beforeMount");const ne=Tu(T,j);ne&&j.beforeEnter(O),r(O,g,y),((E=$&&$.onVnodeMounted)||ne||q)&&Ae(()=>{E&&Ve(E,S,d),ne&&j.enter(O),q&&Tt(d,null,S,"mounted")},T)},A=(d,g,y,S,T)=>{if(y&&m(d,y),S)for(let L=0;L<S.length;L++)m(d,S[L]);if(T){let L=T.subTree;if(g===L){const z=T.vnode;A(d,z,z.scopeId,z.slotScopeIds,T.parent)}}},K=(d,g,y,S,T,L,z,P,O=0)=>{for(let E=O;E<d.length;E++){const $=d[E]=P?at(d[E]):Ke(d[E]);v(null,$,g,y,S,T,L,z,P)}},X=(d,g,y,S,T,L,z)=>{const P=g.el=d.el;let{patchFlag:O,dynamicChildren:E,dirs:$}=g;O|=d.patchFlag&16;const V=d.props||pe,j=g.props||pe;let q;if(y&&St(y,!1),(q=j.onVnodeBeforeUpdate)&&Ve(q,y,g,d),$&&Tt(g,d,y,"beforeUpdate"),y&&St(y,!0),E?Z(d.dynamicChildren,E,P,y,S,kr(g,T),L):z||ee(d,g,P,null,y,S,kr(g,T),L,!1),O>0){if(O&16)G(P,g,V,j,y,S,T);else if(O&2&&V.class!==j.class&&i(P,"class",null,j.class,T),O&4&&i(P,"style",V.style,j.style,T),O&8){const ne=g.dynamicProps;for(let fe=0;fe<ne.length;fe++){const ae=ne[fe],we=V[ae],ze=j[ae];(ze!==we||ae==="value")&&i(P,ae,we,ze,T,d.children,y,S,he)}}O&1&&d.children!==g.children&&c(P,g.children)}else!z&&E==null&&G(P,g,V,j,y,S,T);((q=j.onVnodeUpdated)||$)&&Ae(()=>{q&&Ve(q,y,g,d),$&&Tt(g,d,y,"updated")},S)},Z=(d,g,y,S,T,L,z)=>{for(let P=0;P<g.length;P++){const O=d[P],E=g[P],$=O.el&&(O.type===He||!rs(O,E)||O.shapeFlag&70)?h(O.el):y;v(O,E,$,null,S,T,L,z,!0)}},G=(d,g,y,S,T,L,z)=>{if(y!==S){if(y!==pe)for(const P in y)!fs(P)&&!(P in S)&&i(d,P,y[P],null,z,g.children,T,L,he);for(const P in S){if(fs(P))continue;const O=S[P],E=y[P];O!==E&&P!=="value"&&i(d,P,E,O,z,g.children,T,L,he)}"value"in S&&i(d,"value",y.value,S.value,z)}},le=(d,g,y,S,T,L,z,P,O)=>{const E=g.el=d?d.el:l(""),$=g.anchor=d?d.anchor:l("");let{patchFlag:V,dynamicChildren:j,slotScopeIds:q}=g;q&&(P=P?P.concat(q):q),d==null?(r(E,y,S),r($,y,S),K(g.children||[],y,$,T,L,z,P,O)):V>0&&V&64&&j&&d.dynamicChildren?(Z(d.dynamicChildren,j,y,T,L,z,P),(g.key!=null||T&&g===T.subTree)&&Jo(d,g,!0)):ee(d,g,y,$,T,L,z,P,O)},se=(d,g,y,S,T,L,z,P,O)=>{g.slotScopeIds=P,d==null?g.shapeFlag&512?T.ctx.activate(g,y,S,z,O):ie(g,y,S,T,L,z,O):U(d,g,O)},ie=(d,g,y,S,T,L,z)=>{const P=d.component=zu(d,S,T);if(rl(d)&&(P.ctx.renderer=D),$u(P),P.asyncDep){if(T&&T.registerDep(P,W,z),!d.el){const O=P.subTree=me(yt);w(null,O,g,y)}}else W(P,d,g,y,T,L,z)},U=(d,g,y)=>{const S=g.component=d.component;if(Kc(d,g,y))if(S.asyncDep&&!S.asyncResolved){Y(S,g,y);return}else S.next=g,Uc(S.update),S.effect.dirty=!0,S.update();else g.el=d.el,S.vnode=g},W=(d,g,y,S,T,L,z)=>{const P=()=>{if(d.isMounted){let{next:$,bu:V,u:j,parent:q,vnode:ne}=d;{const Pt=el(d);if(Pt){$&&($.el=ne.el,Y(d,$,z)),Pt.asyncDep.then(()=>{d.isUnmounted||P()});return}}let fe=$,ae;St(d,!1),$?($.el=ne.el,Y(d,$,z)):$=ne,V&&Ar(V),(ae=$.props&&$.props.onVnodeBeforeUpdate)&&Ve(ae,q,$,ne),St(d,!0);const we=Lr(d),ze=d.subTree;d.subTree=we,v(ze,we,h(ze.el),b(ze),d,T,L),$.el=we.el,fe===null&&Gc(d,we.el),j&&Ae(j,T),(ae=$.props&&$.props.onVnodeUpdated)&&Ae(()=>Ve(ae,q,$,ne),T)}else{let $;const{el:V,props:j}=g,{bm:q,m:ne,parent:fe}=d,ae=ps(g);if(St(d,!1),q&&Ar(q),!ae&&($=j&&j.onVnodeBeforeMount)&&Ve($,fe,g),St(d,!0),V&&J){const we=()=>{d.subTree=Lr(d),J(V,d.subTree,d,T,null)};ae?g.type.__asyncLoader().then(()=>!d.isUnmounted&&we()):we()}else{const we=d.subTree=Lr(d);v(null,we,y,S,d,T,L),g.el=we.el}if(ne&&Ae(ne,T),!ae&&($=j&&j.onVnodeMounted)){const we=g;Ae(()=>Ve($,fe,we),T)}(g.shapeFlag&256||fe&&ps(fe.vnode)&&fe.vnode.shapeFlag&256)&&d.a&&Ae(d.a,T),d.isMounted=!0,g=y=S=null}},O=d.effect=new xn(P,Be,()=>Rn(E),d.scope),E=d.update=()=>{O.dirty&&O.run()};E.id=d.uid,St(d,!0),E()},Y=(d,g,y)=>{g.component=d;const S=d.vnode.props;d.vnode=g,d.next=null,xu(d,g.props,S,y),_u(d,g.children,y),wt(),ri(d),bt()},ee=(d,g,y,S,T,L,z,P,O=!1)=>{const E=d&&d.children,$=d?d.shapeFlag:0,V=g.children,{patchFlag:j,shapeFlag:q}=g;if(j>0){if(j&128){ve(E,V,y,S,T,L,z,P,O);return}else if(j&256){xe(E,V,y,S,T,L,z,P,O);return}}q&8?($&16&&he(E,T,L),V!==E&&c(y,V)):$&16?q&16?ve(E,V,y,S,T,L,z,P,O):he(E,T,L,!0):($&8&&c(y,""),q&16&&K(V,y,S,T,L,z,P,O))},xe=(d,g,y,S,T,L,z,P,O)=>{d=d||jt,g=g||jt;const E=d.length,$=g.length,V=Math.min(E,$);let j;for(j=0;j<V;j++){const q=g[j]=O?at(g[j]):Ke(g[j]);v(d[j],q,y,null,T,L,z,P,O)}E>$?he(d,T,L,!0,!1,V):K(g,y,S,T,L,z,P,O,V)},ve=(d,g,y,S,T,L,z,P,O)=>{let E=0;const $=g.length;let V=d.length-1,j=$-1;for(;E<=V&&E<=j;){const q=d[E],ne=g[E]=O?at(g[E]):Ke(g[E]);if(rs(q,ne))v(q,ne,y,null,T,L,z,P,O);else break;E++}for(;E<=V&&E<=j;){const q=d[V],ne=g[j]=O?at(g[j]):Ke(g[j]);if(rs(q,ne))v(q,ne,y,null,T,L,z,P,O);else break;V--,j--}if(E>V){if(E<=j){const q=j+1,ne=q<$?g[q].el:S;for(;E<=j;)v(null,g[E]=O?at(g[E]):Ke(g[E]),y,ne,T,L,z,P,O),E++}}else if(E>j)for(;E<=V;)de(d[E],T,L,!0),E++;else{const q=E,ne=E,fe=new Map;for(E=ne;E<=j;E++){const Ne=g[E]=O?at(g[E]):Ke(g[E]);Ne.key!=null&&fe.set(Ne.key,E)}let ae,we=0;const ze=j-ne+1;let Pt=!1,kn=0;const es=new Array(ze);for(E=0;E<ze;E++)es[E]=0;for(E=q;E<=V;E++){const Ne=d[E];if(we>=ze){de(Ne,T,L,!0);continue}let Xe;if(Ne.key!=null)Xe=fe.get(Ne.key);else for(ae=ne;ae<=j;ae++)if(es[ae-ne]===0&&rs(Ne,g[ae])){Xe=ae;break}Xe===void 0?de(Ne,T,L,!0):(es[Xe-ne]=E+1,Xe>=kn?kn=Xe:Pt=!0,v(Ne,g[Xe],y,null,T,L,z,P,O),we++)}const Nn=Pt?Su(es):jt;for(ae=Nn.length-1,E=ze-1;E>=0;E--){const Ne=ne+E,Xe=g[Ne],On=Ne+1<$?g[Ne+1].el:S;es[E]===0?v(null,Xe,y,On,T,L,z,P,O):Pt&&(ae<0||E!==Nn[ae]?_e(Xe,y,On,2):ae--)}}},_e=(d,g,y,S,T=null)=>{const{el:L,type:z,transition:P,children:O,shapeFlag:E}=d;if(E&6){_e(d.component.subTree,g,y,S);return}if(E&128){d.suspense.move(g,y,S);return}if(E&64){z.move(d,g,y,D);return}if(z===He){r(L,g,y);for(let V=0;V<O.length;V++)_e(O[V],g,y,S);r(d.anchor,g,y);return}if(z===Nr){M(d,g,y);return}if(S!==2&&E&1&&P)if(S===0)P.beforeEnter(L),r(L,g,y),Ae(()=>P.enter(L),T);else{const{leave:V,delayLeave:j,afterLeave:q}=P,ne=()=>r(L,g,y),fe=()=>{V(L,()=>{ne(),q&&q()})};j?j(L,ne,fe):fe()}else r(L,g,y)},de=(d,g,y,S=!1,T=!1)=>{const{type:L,props:z,ref:P,children:O,dynamicChildren:E,shapeFlag:$,patchFlag:V,dirs:j,memoIndex:q}=d;if(P!=null&&sn(P,null,y,d,!0),q!=null&&(g.renderCache[q]=void 0),$&256){g.ctx.deactivate(d);return}const ne=$&1&&j,fe=!ps(d);let ae;if(fe&&(ae=z&&z.onVnodeBeforeUnmount)&&Ve(ae,g,d),$&6)Ze(d.component,y,S);else{if($&128){d.suspense.unmount(y,S);return}ne&&Tt(d,null,g,"beforeUnmount"),$&64?d.type.remove(d,g,y,T,D,S):E&&(L!==He||V>0&&V&64)?he(E,g,y,!1,!0):(L===He&&V&384||!T&&$&16)&&he(O,g,y),S&&rt(d)}(fe&&(ae=z&&z.onVnodeUnmounted)||ne)&&Ae(()=>{ae&&Ve(ae,g,d),ne&&Tt(d,null,g,"unmounted")},y)},rt=d=>{const{type:g,el:y,anchor:S,transition:T}=d;if(g===He){nt(y,S);return}if(g===Nr){I(d);return}const L=()=>{n(y),T&&!T.persisted&&T.afterLeave&&T.afterLeave()};if(d.shapeFlag&1&&T&&!T.persisted){const{leave:z,delayLeave:P}=T,O=()=>z(y,L);P?P(d.el,L,O):O()}else L()},nt=(d,g)=>{let y;for(;d!==g;)y=p(d),n(d),d=y;n(g)},Ze=(d,g,y)=>{const{bum:S,scope:T,update:L,subTree:z,um:P,m:O,a:E}=d;di(O),di(E),S&&Ar(S),T.stop(),L&&(L.active=!1,de(z,d,g,y)),P&&Ae(P,g),Ae(()=>{d.isUnmounted=!0},g),g&&g.pendingBranch&&!g.isUnmounted&&d.asyncDep&&!d.asyncResolved&&d.suspenseId===g.pendingId&&(g.deps--,g.deps===0&&g.resolve())},he=(d,g,y,S=!1,T=!1,L=0)=>{for(let z=L;z<d.length;z++)de(d[z],g,y,S,T)},b=d=>d.shapeFlag&6?b(d.component.subTree):d.shapeFlag&128?d.suspense.next():p(d.anchor||d.el);let N=!1;const B=(d,g,y)=>{d==null?g._vnode&&de(g._vnode,null,null,!0):v(g._vnode||null,d,g,null,null,null,y),N||(N=!0,ri(),Oo(),N=!1),g._vnode=d},D={p:v,um:de,m:_e,r:rt,mt:ie,mc:K,pc:ee,pbc:Z,n:b,o:s};let te,J;return{render:B,hydrate:te,createApp:gu(B,te)}}function kr({type:s,props:t},e){return e==="svg"&&s==="foreignObject"||e==="mathml"&&s==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:e}function St({effect:s,update:t},e){s.allowRecurse=t.allowRecurse=e}function Tu(s,t){return(!s||s&&!s.pendingBranch)&&t&&!t.persisted}function Jo(s,t,e=!1){const r=s.children,n=t.children;if(Q(r)&&Q(n))for(let i=0;i<r.length;i++){const o=r[i];let l=n[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=n[i]=at(n[i]),l.el=o.el),!e&&l.patchFlag!==-2&&Jo(o,l)),l.type===xr&&(l.el=o.el)}}function Su(s){const t=s.slice(),e=[0];let r,n,i,o,l;const a=s.length;for(r=0;r<a;r++){const u=s[r];if(u!==0){if(n=e[e.length-1],s[n]<u){t[r]=n,e.push(r);continue}for(i=0,o=e.length-1;i<o;)l=i+o>>1,s[e[l]]<u?i=l+1:o=l;u<s[e[i]]&&(i>0&&(t[r]=e[i-1]),e[i]=r)}}for(i=e.length,o=e[i-1];i-- >0;)e[i]=o,o=t[o];return e}function el(s){const t=s.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:el(t)}function di(s){if(s)for(let t=0;t<s.length;t++)s[t].active=!1}const Cu=Symbol.for("v-scx"),Ru=()=>Ye(Cu),Vs={};function Kt(s,t,e){return tl(s,t,e)}function tl(s,t,{immediate:e,deep:r,flush:n,once:i,onTrack:o,onTrigger:l}=pe){if(t&&i){const R=t;t=(...A)=>{R(...A),F()}}const a=Ee,u=R=>r===!0?R:Rt(R,r===!1?1:void 0);let c,h=!1,p=!1;if(ke(s)?(c=()=>s.value,h=rr(s)):ds(s)?(c=()=>u(s),h=!0):Q(s)?(p=!0,h=s.some(R=>ds(R)||rr(R)),c=()=>s.map(R=>{if(ke(R))return R.value;if(ds(R))return u(R);if(re(R))return mt(R,a,2)})):re(s)?t?c=()=>mt(s,a,2):c=()=>(m&&m(),qe(s,a,3,[x])):c=Be,t&&r){const R=c;c=()=>Rt(R())}let m,x=R=>{m=M.onStop=()=>{mt(R,a,4),m=M.onStop=void 0}},v;if(vr)if(x=Be,t?e&&qe(t,a,3,[c(),p?[]:void 0,x]):c(),n==="sync"){const R=Ru();v=R.__watcherHandles||(R.__watcherHandles=[])}else return Be;let _=p?new Array(s.length).fill(Vs):Vs;const w=()=>{if(!(!M.active||!M.dirty))if(t){const R=M.run();(r||h||(p?R.some((A,K)=>xt(A,_[K])):xt(R,_)))&&(m&&m(),qe(t,a,3,[R,_===Vs?void 0:p&&_[0]===Vs?[]:_,x]),_=R)}else M.run()};w.allowRecurse=!!t;let C;n==="sync"?C=w:n==="post"?C=()=>Ae(w,a&&a.suspense):(w.pre=!0,a&&(w.id=a.uid),C=()=>Rn(w));const M=new xn(c,Be,C),I=gc(),F=()=>{M.stop(),I&&pn(I.effects,M)};return t?e?w():_=M.run():n==="post"?Ae(M.run.bind(M),a&&a.suspense):M.run(),v&&v.push(F),F}function Iu(s,t,e){const r=this.proxy,n=Me(s)?s.includes(".")?sl(r,s):()=>r[s]:s.bind(r,r);let i;re(t)?i=t:(i=t.handler,e=t);const o=Fs(this),l=tl(n,i.bind(r),e);return o(),l}function sl(s,t){const e=t.split(".");return()=>{let r=s;for(let n=0;n<e.length&&r;n++)r=r[e[n]];return r}}function Rt(s,t=1/0,e){if(t<=0||!ge(s)||s.__v_skip||(e=e||new Set,e.has(s)))return s;if(e.add(s),t--,ke(s))Rt(s.value,t,e);else if(Q(s))for(let r=0;r<s.length;r++)Rt(s[r],t,e);else if(oo(s)||Xt(s))s.forEach(r=>{Rt(r,t,e)});else if(co(s)){for(const r in s)Rt(s[r],t,e);for(const r of Object.getOwnPropertySymbols(s))Object.prototype.propertyIsEnumerable.call(s,r)&&Rt(s[r],t,e)}return s}const rl=s=>s.type.__isKeepAlive;function Eu(s,t){nl(s,"a",t)}function Mu(s,t){nl(s,"da",t)}function nl(s,t,e=Ee){const r=s.__wdc||(s.__wdc=()=>{let n=e;for(;n;){if(n.isDeactivated)return;n=n.parent}return s()});if(mr(t,r,e),e){let n=e.parent;for(;n&&n.parent;)rl(n.parent.vnode)&&Au(r,t,e,n),n=n.parent}}function Au(s,t,e,r){const n=mr(t,s,r,!0);Do(()=>{pn(r[t],n)},e)}function il(s,t){s.shapeFlag&6&&s.component?il(s.component.subTree,t):s.shapeFlag&128?(s.ssContent.transition=t.clone(s.ssContent),s.ssFallback.transition=t.clone(s.ssFallback)):s.transition=t}const Fu=s=>s.__isTeleport,He=Symbol.for("v-fgt"),xr=Symbol.for("v-txt"),yt=Symbol.for("v-cmt"),Nr=Symbol.for("v-stc"),xs=[];let We=null;function vt(s=!1){xs.push(We=s?null:[])}function Lu(){xs.pop(),We=xs[xs.length-1]||null}let Is=1;function pi(s){Is+=s}function ol(s){return s.dynamicChildren=Is>0?We||jt:null,Lu(),Is>0&&We&&We.push(s),s}function Gt(s,t,e,r,n,i){return ol(Oe(s,t,e,r,n,i,!0))}function ll(s,t,e,r,n){return ol(me(s,t,e,r,n,!0))}function or(s){return s?s.__v_isVNode===!0:!1}function rs(s,t){return s.type===t.type&&s.key===t.key}const al=({key:s})=>s??null,er=({ref:s,ref_key:t,ref_for:e})=>(typeof s=="number"&&(s=""+s),s!=null?Me(s)||ke(s)||re(s)?{i:Le,r:s,k:t,f:!!e}:s:null);function Oe(s,t=null,e=null,r=0,n=null,i=s===He?0:1,o=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:s,props:t,key:t&&al(t),ref:t&&er(t),scopeId:$o,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Le};return l?(Mn(a,e),i&128&&s.normalize(a)):e&&(a.shapeFlag|=Me(e)?8:16),Is>0&&!o&&We&&(a.patchFlag>0||i&6)&&a.patchFlag!==32&&We.push(a),a}const me=Pu;function Pu(s,t=null,e=null,r=0,n=null,i=!1){if((!s||s===qc)&&(s=yt),or(s)){const l=qt(s,t,!0);return e&&Mn(l,e),Is>0&&!i&&We&&(l.shapeFlag&6?We[We.indexOf(s)]=l:We.push(l)),l.patchFlag=-2,l}if(Wu(s)&&(s=s.__vccOpts),t){t=ku(t);let{class:l,style:a}=t;l&&!Me(l)&&(t.class=mn(l)),ge(a)&&(Io(a)&&!Q(a)&&(a=Te({},a)),t.style=As(a))}const o=Me(s)?1:Qc(s)?128:Fu(s)?64:ge(s)?4:re(s)?2:0;return Oe(s,t,e,r,n,o,i,!0)}function ku(s){return s?Io(s)||Vo(s)?Te({},s):s:null}function qt(s,t,e=!1,r=!1){const{props:n,ref:i,patchFlag:o,children:l,transition:a}=s,u=t?yr(n||{},t):n,c={__v_isVNode:!0,__v_skip:!0,type:s.type,props:u,key:u&&al(u),ref:t&&t.ref?e&&i?Q(i)?i.concat(er(t)):[i,er(t)]:er(t):i,scopeId:s.scopeId,slotScopeIds:s.slotScopeIds,children:l,target:s.target,targetAnchor:s.targetAnchor,staticCount:s.staticCount,shapeFlag:s.shapeFlag,patchFlag:t&&s.type!==He?o===-1?16:o|16:o,dynamicProps:s.dynamicProps,dynamicChildren:s.dynamicChildren,appContext:s.appContext,dirs:s.dirs,transition:a,component:s.component,suspense:s.suspense,ssContent:s.ssContent&&qt(s.ssContent),ssFallback:s.ssFallback&&qt(s.ssFallback),el:s.el,anchor:s.anchor,ctx:s.ctx,ce:s.ce};return a&&r&&il(c,a.clone(c)),c}function hs(s=" ",t=0){return me(xr,null,s,t)}function Nu(s="",t=!1){return t?(vt(),ll(yt,null,s)):me(yt,null,s)}function Ke(s){return s==null||typeof s=="boolean"?me(yt):Q(s)?me(He,null,s.slice()):typeof s=="object"?at(s):me(xr,null,String(s))}function at(s){return s.el===null&&s.patchFlag!==-1||s.memo?s:qt(s)}function Mn(s,t){let e=0;const{shapeFlag:r}=s;if(t==null)t=null;else if(Q(t))e=16;else if(typeof t=="object")if(r&65){const n=t.default;n&&(n._c&&(n._d=!1),Mn(s,n()),n._c&&(n._d=!0));return}else{e=32;const n=t._;!n&&!Vo(t)?t._ctx=Le:n===3&&Le&&(Le.slots._===1?t._=1:(t._=2,s.patchFlag|=1024))}else re(t)?(t={default:t,_ctx:Le},e=32):(t=String(t),r&64?(e=16,t=[hs(t)]):e=8);s.children=t,s.shapeFlag|=e}function yr(...s){const t={};for(let e=0;e<s.length;e++){const r=s[e];for(const n in r)if(n==="class")t.class!==r.class&&(t.class=mn([t.class,r.class]));else if(n==="style")t.style=As([t.style,r.style]);else if(dn(n)){const i=t[n],o=r[n];o&&i!==o&&!(Q(i)&&i.includes(o))&&(t[n]=i?[].concat(i,o):o)}else n!==""&&(t[n]=r[n])}return t}function Ve(s,t,e,r=null){qe(s,t,7,[e,r])}const Ou=Yo();let Bu=0;function zu(s,t,e){const r=s.type,n=(t?t.appContext:s.appContext)||Ou,i={uid:Bu++,vnode:s,type:r,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,scope:new dc(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Go(r,n),emitsOptions:zo(r,n),emit:null,emitted:null,propsDefaults:pe,inheritAttrs:r.inheritAttrs,ctx:pe,data:pe,props:pe,attrs:pe,slots:pe,refs:pe,setupState:pe,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=jc.bind(null,i),s.ce&&s.ce(i),i}let Ee=null,lr,rn;{const s=ho(),t=(e,r)=>{let n;return(n=s[e])||(n=s[e]=[]),n.push(r),i=>{n.length>1?n.forEach(o=>o(i)):n[0](i)}};lr=t("__VUE_INSTANCE_SETTERS__",e=>Ee=e),rn=t("__VUE_SSR_SETTERS__",e=>vr=e)}const Fs=s=>{const t=Ee;return lr(s),s.scope.on(),()=>{s.scope.off(),lr(t)}},gi=()=>{Ee&&Ee.scope.off(),lr(null)};function cl(s){return s.vnode.shapeFlag&4}let vr=!1;function $u(s,t=!1){t&&rn(t);const{props:e,children:r}=s.vnode,n=cl(s);mu(s,e,n,t),vu(s,r);const i=n?Du(s,t):void 0;return t&&rn(!1),i}function Du(s,t){const e=s.type;s.accessCache=Object.create(null),s.proxy=new Proxy(s.ctx,au);const{setup:r}=e;if(r){const n=s.setupContext=r.length>1?Uu(s):null,i=Fs(s);wt();const o=mt(r,s,0,[s.props,n]);if(bt(),i(),lo(o)){if(o.then(gi,gi),t)return o.then(l=>{mi(s,l,t)}).catch(l=>{pr(l,s,0)});s.asyncDep=o}else mi(s,o,t)}else ul(s,t)}function mi(s,t,e){re(t)?s.type.__ssrInlineRender?s.ssrRender=t:s.render=t:ge(t)&&(s.setupState=Lo(t)),ul(s,e)}let xi;function ul(s,t,e){const r=s.type;if(!s.render){if(!t&&xi&&!r.render){const n=r.template||In(s).template;if(n){const{isCustomElement:i,compilerOptions:o}=s.appContext.config,{delimiters:l,compilerOptions:a}=r,u=Te(Te({isCustomElement:i,delimiters:l},o),a);r.render=xi(n,u)}}s.render=r.render||Be}{const n=Fs(s);wt();try{cu(s)}finally{bt(),n()}}}const Hu={get(s,t){return Pe(s,"get",""),s[t]}};function Uu(s){const t=e=>{s.exposed=e||{}};return{attrs:new Proxy(s.attrs,Hu),slots:s.slots,emit:s.emit,expose:t}}function An(s){return s.exposed?s.exposeProxy||(s.exposeProxy=new Proxy(Lo(Eo(s.exposed)),{get(t,e){if(e in t)return t[e];if(e in gs)return gs[e](s)},has(t,e){return e in t||e in gs}})):s.proxy}function Wu(s){return re(s)&&"__vccOpts"in s}const Ue=(s,t)=>Nc(s,t,vr);function hl(s,t,e){const r=arguments.length;return r===2?ge(t)&&!Q(t)?or(t)?me(s,null,[t]):me(s,t):me(s,null,t):(r>3?e=Array.prototype.slice.call(arguments,2):r===3&&or(e)&&(e=[e]),me(s,t,e))}const Yu="3.4.29",ju="comment",Fn={createElement(s){const t=new pt(s);return Eo(t),t},createText(s){return{type:ht.Text,text:s,parent:void 0,skipFocus:!0}},createComment(s){return{type:ju,text:s,parent:void 0,skipFocus:!0}},setText(s,t){dt("Replace Text: ",s,t),s.text=t;const e=s.parent;H(e),e.text=e.getText()},setElementText(s,t){dt("SetElementText: ",s,t),s.text=t},setProperty(s,t,e=!0,r=!0){s[t]=r},insert(s,t,e){dt("INSERT: ",t,s,e),t.children.insert(s,e),s._queueDelete=!1,s instanceof pt?t.rendered&&s.render():t.isTextNode()&&(t.text=t.getText())},isTextNode(s){return s.isTextNode()},remove(s){dt("REMOVE: ",s),s.parent.children.remove(s),s._queueDelete=!0,s instanceof pt&&queueMicrotask(()=>s.destroy())},querySelector(s){},setScopeId(s,t){return s.id=t},parentNode(s){return s.parent},nextSibling(s){const t=s.parent.children||[],e=t.indexOf(s)+1;if(e<t.length)return t[e]}},Xu=Fn.setProperty,Vu=async function(s,t){const e=Ua(Ie.rendererOptions,t);await e.init();const r=Fn.createElement("App");return r.lng=e.root,r.rendered=!0,{app:Ku(s),rootNode:r,renderer:e}},{render:Of,createApp:Ku}=wu(Te({patchProp:Xu},Fn));function fl(s=""){return qa(s)?s:typeof s=="string"?s.startsWith("#")?+(s.replace("#","0x")+(s.length===7?"ff":"")):s.startsWith("0x")?Number(s):+("0x"+(s.length===6?s+"ff":s)):0}function Gu(){if(!this||this.selected===void 0||this.children.length===0)return!1;let s=this.children[this.selected];for(;s!=null&&s.skipFocus;)this.selected++,s=this.children[this.selected];return s instanceof pt?(s.setFocus(),!0):!1}function yi(s){return function(){var i,o,l;const t=this.children.length,e=this.wrap,r=this.selected||0;if(t===0)return!1;if(s==="right"||s==="down")do if(this.selected=(this.selected||0)%t+1,this.selected>=t){if(!e){this.selected=void 0;break}this.selected=0}while((i=this.children[this.selected])!=null&&i.skipFocus);else if(s==="left"||s==="up")do if(this.selected=(this.selected||0)%t-1,this.selected<0){if(!e){this.selected=void 0;break}this.selected=t-1}while((o=this.children[this.selected])!=null&&o.skipFocus);if(this.selected===void 0&&(this.selected=r,(l=this.children[this.selected])!=null&&l.states.has("focus")))return!1;const n=this.children[this.selected];if(this.onSelectedChanged&&this.onSelectedChanged.call(this,this,n,this.selected,r),this.plinko&&r!==void 0){const u=this.children[r].selected||0;n.selected=u<n.children.length?u:n.children.length-1}return n.setFocus(),!0}}function vi(...s){const t=s.filter(e=>typeof e=="function");if(t.length!==0)return t.length===1?t[0]:function(...e){let r;for(const n of t)if(r=n.apply(this,e),r===!0)return r;return r}}function qu(s=0){return(t,e,r=0,n)=>{if(t.children.length===0)return;const i=t.flexDirection==="row"?"width":"height",o=t.flexDirection==="row"?"x":"y",l=t.gap||0,a=t.scroll||"auto",[u,c]=Qu(t);let h=t[o]??0;const p=(e==null?void 0:e[o])??0,m=(e==null?void 0:e[i])??0,x=n===void 0?"none":r>n?"positive":"negative";let v=h;if(a==="auto")t.scrollIndex!=null&&t.scrollIndex>=0?t.selected>=t.scrollIndex&&(x==="positive"?v=h-m-l:v=h+m+l):(Math.abs(h)+c<u.position+u.size||p<Math.abs(h))&&(v=-p+s);else if(a==="always"||a==="edge"&&x==="negative"&&Math.abs(h)>p)v=-p+s;else if(a==="edge"&&x==="positive"&&Math.abs(h)+c<p+m)v=h-m-l;else if(a==="edge"&&x==="none"){let _=0,w,C;for(;_<t.children.length&&Math.abs(h)+c<p+m;)w=t.children[_++],C=w[i]??0,h-=C+l;v=h}o==="x"&&t.x!==v?t.x=v:o==="y"&&t.y!==v&&(t.y=v)}}function Qu(s){let t,e;return s.flexDirection==="row"?(t={position:s.children[s.children.length-1].x??0,size:s.children[s.children.length-1].width??0},e=s.width??0):(t={position:s.children[s.children.length-1].y??0,size:s.children[s.children.length-1].height??0},e=s.height??0),[t,e]}const Zu=["onUp","onDown","forwardFocus","selected"],Ju=Lt({__name:"Column",props:{selected:{type:Number,default:0},scrollIndex:Number,onUp:Function,onDown:Function,onLayout:Function,onSelectedChanged:Function,scroll:String,style:Object},setup(s){const t=s,e=vi(t.onUp,yi("up")),r=vi(t.onDown,yi("down")),n=o=>{t.onSelectedChanged&&t.onSelectedChanged(o),t.scroll!=="none"&&qu(t.x)(o)},i={display:"flex",flexBoundary:"fixed",flexDirection:"column",gap:30,transition:{y:{easing:"ease-in-out",duration:250}}};return(o,l)=>(vt(),Gt("node",{onUp:Se(e),onDown:Se(r),forwardFocus:Se(Gu),selected:t.selected,selectedChanged:n,style:As([i,t.style])},[Ho(o.$slots,"default")],44,Zu))}});/*!
  * vue-router v4.3.3
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Ut=typeof document<"u";function eh(s){return s.__esModule||s[Symbol.toStringTag]==="Module"}const ue=Object.assign;function Or(s,t){const e={};for(const r in t){const n=t[r];e[r]=je(n)?n.map(s):s(n)}return e}const ys=()=>{},je=Array.isArray,dl=/#/g,th=/&/g,sh=/\//g,rh=/=/g,nh=/\?/g,pl=/\+/g,ih=/%5B/g,oh=/%5D/g,gl=/%5E/g,lh=/%60/g,ml=/%7B/g,ah=/%7C/g,xl=/%7D/g,ch=/%20/g;function Ln(s){return encodeURI(""+s).replace(ah,"|").replace(ih,"[").replace(oh,"]")}function uh(s){return Ln(s).replace(ml,"{").replace(xl,"}").replace(gl,"^")}function nn(s){return Ln(s).replace(pl,"%2B").replace(ch,"+").replace(dl,"%23").replace(th,"%26").replace(lh,"`").replace(ml,"{").replace(xl,"}").replace(gl,"^")}function hh(s){return nn(s).replace(rh,"%3D")}function fh(s){return Ln(s).replace(dl,"%23").replace(nh,"%3F")}function dh(s){return s==null?"":fh(s).replace(sh,"%2F")}function Es(s){try{return decodeURIComponent(""+s)}catch{}return""+s}const ph=/\/$/,gh=s=>s.replace(ph,"");function Br(s,t,e="/"){let r,n={},i="",o="";const l=t.indexOf("#");let a=t.indexOf("?");return l<a&&l>=0&&(a=-1),a>-1&&(r=t.slice(0,a),i=t.slice(a+1,l>-1?l:t.length),n=s(i)),l>-1&&(r=r||t.slice(0,l),o=t.slice(l,t.length)),r=vh(r??t,e),{fullPath:r+(i&&"?")+i+o,path:r,query:n,hash:Es(o)}}function mh(s,t){const e=t.query?s(t.query):"";return t.path+(e&&"?")+e+(t.hash||"")}function _i(s,t){return!t||!s.toLowerCase().startsWith(t.toLowerCase())?s:s.slice(t.length)||"/"}function xh(s,t,e){const r=t.matched.length-1,n=e.matched.length-1;return r>-1&&r===n&&Qt(t.matched[r],e.matched[n])&&yl(t.params,e.params)&&s(t.query)===s(e.query)&&t.hash===e.hash}function Qt(s,t){return(s.aliasOf||s)===(t.aliasOf||t)}function yl(s,t){if(Object.keys(s).length!==Object.keys(t).length)return!1;for(const e in s)if(!yh(s[e],t[e]))return!1;return!0}function yh(s,t){return je(s)?wi(s,t):je(t)?wi(t,s):s===t}function wi(s,t){return je(t)?s.length===t.length&&s.every((e,r)=>e===t[r]):s.length===1&&s[0]===t}function vh(s,t){if(s.startsWith("/"))return s;if(!s)return t;const e=t.split("/"),r=s.split("/"),n=r[r.length-1];(n===".."||n===".")&&r.push("");let i=e.length-1,o,l;for(o=0;o<r.length;o++)if(l=r[o],l!==".")if(l==="..")i>1&&i--;else break;return e.slice(0,i).join("/")+"/"+r.slice(o).join("/")}var Ms;(function(s){s.pop="pop",s.push="push"})(Ms||(Ms={}));var vs;(function(s){s.back="back",s.forward="forward",s.unknown=""})(vs||(vs={}));function _h(s){if(!s)if(Ut){const t=document.querySelector("base");s=t&&t.getAttribute("href")||"/",s=s.replace(/^\w+:\/\/[^\/]+/,"")}else s="/";return s[0]!=="/"&&s[0]!=="#"&&(s="/"+s),gh(s)}const wh=/^[^#]+#/;function bh(s,t){return s.replace(wh,"#")+t}function Th(s,t){const e=document.documentElement.getBoundingClientRect(),r=s.getBoundingClientRect();return{behavior:t.behavior,left:r.left-e.left-(t.left||0),top:r.top-e.top-(t.top||0)}}const _r=()=>({left:window.scrollX,top:window.scrollY});function Sh(s){let t;if("el"in s){const e=s.el,r=typeof e=="string"&&e.startsWith("#"),n=typeof e=="string"?r?document.getElementById(e.slice(1)):document.querySelector(e):e;if(!n)return;t=Th(n,s)}else t=s;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function bi(s,t){return(history.state?history.state.position-t:-1)+s}const on=new Map;function Ch(s,t){on.set(s,t)}function Rh(s){const t=on.get(s);return on.delete(s),t}let Ih=()=>location.protocol+"//"+location.host;function vl(s,t){const{pathname:e,search:r,hash:n}=t,i=s.indexOf("#");if(i>-1){let l=n.includes(s.slice(i))?s.slice(i).length:1,a=n.slice(l);return a[0]!=="/"&&(a="/"+a),_i(a,"")}return _i(e,s)+r+n}function Eh(s,t,e,r){let n=[],i=[],o=null;const l=({state:p})=>{const m=vl(s,location),x=e.value,v=t.value;let _=0;if(p){if(e.value=m,t.value=p,o&&o===x){o=null;return}_=v?p.position-v.position:0}else r(m);n.forEach(w=>{w(e.value,x,{delta:_,type:Ms.pop,direction:_?_>0?vs.forward:vs.back:vs.unknown})})};function a(){o=e.value}function u(p){n.push(p);const m=()=>{const x=n.indexOf(p);x>-1&&n.splice(x,1)};return i.push(m),m}function c(){const{history:p}=window;p.state&&p.replaceState(ue({},p.state,{scroll:_r()}),"")}function h(){for(const p of i)p();i=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:a,listen:u,destroy:h}}function Ti(s,t,e,r=!1,n=!1){return{back:s,current:t,forward:e,replaced:r,position:window.history.length,scroll:n?_r():null}}function Mh(s){const{history:t,location:e}=window,r={value:vl(s,e)},n={value:t.state};n.value||i(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(a,u,c){const h=s.indexOf("#"),p=h>-1?(e.host&&document.querySelector("base")?s:s.slice(h))+a:Ih()+s+a;try{t[c?"replaceState":"pushState"](u,"",p),n.value=u}catch(m){console.error(m),e[c?"replace":"assign"](p)}}function o(a,u){const c=ue({},t.state,Ti(n.value.back,a,n.value.forward,!0),u,{position:n.value.position});i(a,c,!0),r.value=a}function l(a,u){const c=ue({},n.value,t.state,{forward:a,scroll:_r()});i(c.current,c,!0);const h=ue({},Ti(r.value,a,null),{position:c.position+1},u);i(a,h,!1),r.value=a}return{location:r,state:n,push:l,replace:o}}function Ah(s){s=_h(s);const t=Mh(s),e=Eh(s,t.state,t.location,t.replace);function r(i,o=!0){o||e.pauseListeners(),history.go(i)}const n=ue({location:"",base:s,go:r,createHref:bh.bind(null,s)},t,e);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>t.state.value}),n}function Fh(s){return s=location.host?s||location.pathname+location.search:"",s.includes("#")||(s+="#"),Ah(s)}function Lh(s){return typeof s=="string"||s&&typeof s=="object"}function _l(s){return typeof s=="string"||typeof s=="symbol"}const ot={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},wl=Symbol("");var Si;(function(s){s[s.aborted=4]="aborted",s[s.cancelled=8]="cancelled",s[s.duplicated=16]="duplicated"})(Si||(Si={}));function Zt(s,t){return ue(new Error,{type:s,[wl]:!0},t)}function Je(s,t){return s instanceof Error&&wl in s&&(t==null||!!(s.type&t))}const Ci="[^/]+?",Ph={sensitive:!1,strict:!1,start:!0,end:!0},kh=/[.+*?^${}()[\]/\\]/g;function Nh(s,t){const e=ue({},Ph,t),r=[];let n=e.start?"^":"";const i=[];for(const u of s){const c=u.length?[]:[90];e.strict&&!u.length&&(n+="/");for(let h=0;h<u.length;h++){const p=u[h];let m=40+(e.sensitive?.25:0);if(p.type===0)h||(n+="/"),n+=p.value.replace(kh,"\\$&"),m+=40;else if(p.type===1){const{value:x,repeatable:v,optional:_,regexp:w}=p;i.push({name:x,repeatable:v,optional:_});const C=w||Ci;if(C!==Ci){m+=10;try{new RegExp(`(${C})`)}catch(I){throw new Error(`Invalid custom RegExp for param "${x}" (${C}): `+I.message)}}let M=v?`((?:${C})(?:/(?:${C}))*)`:`(${C})`;h||(M=_&&u.length<2?`(?:/${M})`:"/"+M),_&&(M+="?"),n+=M,m+=20,_&&(m+=-8),v&&(m+=-20),C===".*"&&(m+=-50)}c.push(m)}r.push(c)}if(e.strict&&e.end){const u=r.length-1;r[u][r[u].length-1]+=.7000000000000001}e.strict||(n+="/?"),e.end?n+="$":e.strict&&(n+="(?:/|$)");const o=new RegExp(n,e.sensitive?"":"i");function l(u){const c=u.match(o),h={};if(!c)return null;for(let p=1;p<c.length;p++){const m=c[p]||"",x=i[p-1];h[x.name]=m&&x.repeatable?m.split("/"):m}return h}function a(u){let c="",h=!1;for(const p of s){(!h||!c.endsWith("/"))&&(c+="/"),h=!1;for(const m of p)if(m.type===0)c+=m.value;else if(m.type===1){const{value:x,repeatable:v,optional:_}=m,w=x in u?u[x]:"";if(je(w)&&!v)throw new Error(`Provided param "${x}" is an array but it is not repeatable (* or + modifiers)`);const C=je(w)?w.join("/"):w;if(!C)if(_)p.length<2&&(c.endsWith("/")?c=c.slice(0,-1):h=!0);else throw new Error(`Missing required param "${x}"`);c+=C}}return c||"/"}return{re:o,score:r,keys:i,parse:l,stringify:a}}function Oh(s,t){let e=0;for(;e<s.length&&e<t.length;){const r=t[e]-s[e];if(r)return r;e++}return s.length<t.length?s.length===1&&s[0]===80?-1:1:s.length>t.length?t.length===1&&t[0]===80?1:-1:0}function bl(s,t){let e=0;const r=s.score,n=t.score;for(;e<r.length&&e<n.length;){const i=Oh(r[e],n[e]);if(i)return i;e++}if(Math.abs(n.length-r.length)===1){if(Ri(r))return 1;if(Ri(n))return-1}return n.length-r.length}function Ri(s){const t=s[s.length-1];return s.length>0&&t[t.length-1]<0}const Bh={type:0,value:""},zh=/[a-zA-Z0-9_]/;function $h(s){if(!s)return[[]];if(s==="/")return[[Bh]];if(!s.startsWith("/"))throw new Error(`Invalid path "${s}"`);function t(m){throw new Error(`ERR (${e})/"${u}": ${m}`)}let e=0,r=e;const n=[];let i;function o(){i&&n.push(i),i=[]}let l=0,a,u="",c="";function h(){u&&(e===0?i.push({type:0,value:u}):e===1||e===2||e===3?(i.length>1&&(a==="*"||a==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:c,repeatable:a==="*"||a==="+",optional:a==="*"||a==="?"})):t("Invalid state to consume buffer"),u="")}function p(){u+=a}for(;l<s.length;){if(a=s[l++],a==="\\"&&e!==2){r=e,e=4;continue}switch(e){case 0:a==="/"?(u&&h(),o()):a===":"?(h(),e=1):p();break;case 4:p(),e=r;break;case 1:a==="("?e=2:zh.test(a)?p():(h(),e=0,a!=="*"&&a!=="?"&&a!=="+"&&l--);break;case 2:a===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+a:e=3:c+=a;break;case 3:h(),e=0,a!=="*"&&a!=="?"&&a!=="+"&&l--,c="";break;default:t("Unknown state");break}}return e===2&&t(`Unfinished custom RegExp for param "${u}"`),h(),o(),n}function Dh(s,t,e){const r=Nh($h(s.path),e),n=ue(r,{record:s,parent:t,children:[],alias:[]});return t&&!n.record.aliasOf==!t.record.aliasOf&&t.children.push(n),n}function Hh(s,t){const e=[],r=new Map;t=Mi({strict:!1,end:!0,sensitive:!1},t);function n(c){return r.get(c)}function i(c,h,p){const m=!p,x=Uh(c);x.aliasOf=p&&p.record;const v=Mi(t,c),_=[x];if("alias"in c){const M=typeof c.alias=="string"?[c.alias]:c.alias;for(const I of M)_.push(ue({},x,{components:p?p.record.components:x.components,path:I,aliasOf:p?p.record:x}))}let w,C;for(const M of _){const{path:I}=M;if(h&&I[0]!=="/"){const F=h.record.path,R=F[F.length-1]==="/"?"":"/";M.path=h.record.path+(I&&R+I)}if(w=Dh(M,h,v),p?p.alias.push(w):(C=C||w,C!==w&&C.alias.push(w),m&&c.name&&!Ei(w)&&o(c.name)),Tl(w)&&a(w),x.children){const F=x.children;for(let R=0;R<F.length;R++)i(F[R],w,p&&p.children[R])}p=p||w}return C?()=>{o(C)}:ys}function o(c){if(_l(c)){const h=r.get(c);h&&(r.delete(c),e.splice(e.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=e.indexOf(c);h>-1&&(e.splice(h,1),c.record.name&&r.delete(c.record.name),c.children.forEach(o),c.alias.forEach(o))}}function l(){return e}function a(c){const h=jh(c,e);e.splice(h,0,c),c.record.name&&!Ei(c)&&r.set(c.record.name,c)}function u(c,h){let p,m={},x,v;if("name"in c&&c.name){if(p=r.get(c.name),!p)throw Zt(1,{location:c});v=p.record.name,m=ue(Ii(h.params,p.keys.filter(C=>!C.optional).concat(p.parent?p.parent.keys.filter(C=>C.optional):[]).map(C=>C.name)),c.params&&Ii(c.params,p.keys.map(C=>C.name))),x=p.stringify(m)}else if(c.path!=null)x=c.path,p=e.find(C=>C.re.test(x)),p&&(m=p.parse(x),v=p.record.name);else{if(p=h.name?r.get(h.name):e.find(C=>C.re.test(h.path)),!p)throw Zt(1,{location:c,currentLocation:h});v=p.record.name,m=ue({},h.params,c.params),x=p.stringify(m)}const _=[];let w=p;for(;w;)_.unshift(w.record),w=w.parent;return{name:v,path:x,params:m,matched:_,meta:Yh(_)}}return s.forEach(c=>i(c)),{addRoute:i,resolve:u,removeRoute:o,getRoutes:l,getRecordMatcher:n}}function Ii(s,t){const e={};for(const r of t)r in s&&(e[r]=s[r]);return e}function Uh(s){return{path:s.path,redirect:s.redirect,name:s.name,meta:s.meta||{},aliasOf:void 0,beforeEnter:s.beforeEnter,props:Wh(s),children:s.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in s?s.components||null:s.component&&{default:s.component}}}function Wh(s){const t={},e=s.props||!1;if("component"in s)t.default=e;else for(const r in s.components)t[r]=typeof e=="object"?e[r]:e;return t}function Ei(s){for(;s;){if(s.record.aliasOf)return!0;s=s.parent}return!1}function Yh(s){return s.reduce((t,e)=>ue(t,e.meta),{})}function Mi(s,t){const e={};for(const r in s)e[r]=r in t?t[r]:s[r];return e}function jh(s,t){let e=0,r=t.length;for(;e!==r;){const i=e+r>>1;bl(s,t[i])<0?r=i:e=i+1}const n=Xh(s);return n&&(r=t.lastIndexOf(n,r-1)),r}function Xh(s){let t=s;for(;t=t.parent;)if(Tl(t)&&bl(s,t)===0)return t}function Tl({record:s}){return!!(s.name||s.components&&Object.keys(s.components).length||s.redirect)}function Vh(s){const t={};if(s===""||s==="?")return t;const r=(s[0]==="?"?s.slice(1):s).split("&");for(let n=0;n<r.length;++n){const i=r[n].replace(pl," "),o=i.indexOf("="),l=Es(o<0?i:i.slice(0,o)),a=o<0?null:Es(i.slice(o+1));if(l in t){let u=t[l];je(u)||(u=t[l]=[u]),u.push(a)}else t[l]=a}return t}function Ai(s){let t="";for(let e in s){const r=s[e];if(e=hh(e),r==null){r!==void 0&&(t+=(t.length?"&":"")+e);continue}(je(r)?r.map(i=>i&&nn(i)):[r&&nn(r)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+e,i!=null&&(t+="="+i))})}return t}function Kh(s){const t={};for(const e in s){const r=s[e];r!==void 0&&(t[e]=je(r)?r.map(n=>n==null?null:""+n):r==null?r:""+r)}return t}const Gh=Symbol(""),Fi=Symbol(""),wr=Symbol(""),Pn=Symbol(""),ln=Symbol("");function ns(){let s=[];function t(r){return s.push(r),()=>{const n=s.indexOf(r);n>-1&&s.splice(n,1)}}function e(){s=[]}return{add:t,list:()=>s.slice(),reset:e}}function ct(s,t,e,r,n,i=o=>o()){const o=r&&(r.enterCallbacks[n]=r.enterCallbacks[n]||[]);return()=>new Promise((l,a)=>{const u=p=>{p===!1?a(Zt(4,{from:e,to:t})):p instanceof Error?a(p):Lh(p)?a(Zt(2,{from:t,to:p})):(o&&r.enterCallbacks[n]===o&&typeof p=="function"&&o.push(p),l())},c=i(()=>s.call(r&&r.instances[n],t,e,u));let h=Promise.resolve(c);s.length<3&&(h=h.then(u)),h.catch(p=>a(p))})}function zr(s,t,e,r,n=i=>i()){const i=[];for(const o of s)for(const l in o.components){let a=o.components[l];if(!(t!=="beforeRouteEnter"&&!o.instances[l]))if(qh(a)){const c=(a.__vccOpts||a)[t];c&&i.push(ct(c,e,r,o,l,n))}else{let u=a();i.push(()=>u.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${l}" at "${o.path}"`));const h=eh(c)?c.default:c;o.components[l]=h;const m=(h.__vccOpts||h)[t];return m&&ct(m,e,r,o,l,n)()}))}}return i}function qh(s){return typeof s=="object"||"displayName"in s||"props"in s||"__vccOpts"in s}function Li(s){const t=Ye(wr),e=Ye(Pn),r=Ue(()=>{const a=Se(s.to);return t.resolve(a)}),n=Ue(()=>{const{matched:a}=r.value,{length:u}=a,c=a[u-1],h=e.matched;if(!c||!h.length)return-1;const p=h.findIndex(Qt.bind(null,c));if(p>-1)return p;const m=Pi(a[u-2]);return u>1&&Pi(c)===m&&h[h.length-1].path!==m?h.findIndex(Qt.bind(null,a[u-2])):p}),i=Ue(()=>n.value>-1&&ef(e.params,r.value.params)),o=Ue(()=>n.value>-1&&n.value===e.matched.length-1&&yl(e.params,r.value.params));function l(a={}){return Jh(a)?t[Se(s.replace)?"replace":"push"](Se(s.to)).catch(ys):Promise.resolve()}return{route:r,href:Ue(()=>r.value.href),isActive:i,isExactActive:o,navigate:l}}const Qh=Lt({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Li,setup(s,{slots:t}){const e=dr(Li(s)),{options:r}=Ye(wr),n=Ue(()=>({[ki(s.activeClass,r.linkActiveClass,"router-link-active")]:e.isActive,[ki(s.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:e.isExactActive}));return()=>{const i=t.default&&t.default(e);return s.custom?i:hl("a",{"aria-current":e.isExactActive?s.ariaCurrentValue:null,href:e.href,onClick:e.navigate,class:n.value},i)}}}),Zh=Qh;function Jh(s){if(!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)&&!s.defaultPrevented&&!(s.button!==void 0&&s.button!==0)){if(s.currentTarget&&s.currentTarget.getAttribute){const t=s.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return s.preventDefault&&s.preventDefault(),!0}}function ef(s,t){for(const e in t){const r=t[e],n=s[e];if(typeof r=="string"){if(r!==n)return!1}else if(!je(n)||n.length!==r.length||r.some((i,o)=>i!==n[o]))return!1}return!0}function Pi(s){return s?s.aliasOf?s.aliasOf.path:s.path:""}const ki=(s,t,e)=>s??t??e,tf=Lt({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(s,{attrs:t,slots:e}){const r=Ye(ln),n=Ue(()=>s.route||r.value),i=Ye(Fi,0),o=Ue(()=>{let u=Se(i);const{matched:c}=n.value;let h;for(;(h=c[u])&&!h.components;)u++;return u}),l=Ue(()=>n.value.matched[o.value]);Js(Fi,Ue(()=>o.value+1)),Js(Gh,l),Js(ln,n);const a=De();return Kt(()=>[a.value,l.value,s.name],([u,c,h],[p,m,x])=>{c&&(c.instances[h]=u,m&&m!==c&&u&&u===p&&(c.leaveGuards.size||(c.leaveGuards=m.leaveGuards),c.updateGuards.size||(c.updateGuards=m.updateGuards))),u&&c&&(!m||!Qt(c,m)||!p)&&(c.enterCallbacks[h]||[]).forEach(v=>v(u))},{flush:"post"}),()=>{const u=n.value,c=s.name,h=l.value,p=h&&h.components[c];if(!p)return Ni(e.default,{Component:p,route:u});const m=h.props[c],x=m?m===!0?u.params:typeof m=="function"?m(u):m:null,_=hl(p,ue({},x,t,{onVnodeUnmounted:w=>{w.component.isUnmounted&&(h.instances[c]=null)},ref:a}));return Ni(e.default,{Component:_,route:u})||_}}});function Ni(s,t){if(!s)return null;const e=s(t);return e.length===1?e[0]:e}const Sl=tf;function sf(s){const t=Hh(s.routes,s),e=s.parseQuery||Vh,r=s.stringifyQuery||Ai,n=s.history,i=ns(),o=ns(),l=ns(),a=Oc(ot);let u=ot;Ut&&s.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=Or.bind(null,b=>""+b),h=Or.bind(null,dh),p=Or.bind(null,Es);function m(b,N){let B,D;return _l(b)?(B=t.getRecordMatcher(b),D=N):D=b,t.addRoute(D,B)}function x(b){const N=t.getRecordMatcher(b);N&&t.removeRoute(N)}function v(){return t.getRoutes().map(b=>b.record)}function _(b){return!!t.getRecordMatcher(b)}function w(b,N){if(N=ue({},N||a.value),typeof b=="string"){const g=Br(e,b,N.path),y=t.resolve({path:g.path},N),S=n.createHref(g.fullPath);return ue(g,y,{params:p(y.params),hash:Es(g.hash),redirectedFrom:void 0,href:S})}let B;if(b.path!=null)B=ue({},b,{path:Br(e,b.path,N.path).path});else{const g=ue({},b.params);for(const y in g)g[y]==null&&delete g[y];B=ue({},b,{params:h(g)}),N.params=h(N.params)}const D=t.resolve(B,N),te=b.hash||"";D.params=c(p(D.params));const J=mh(r,ue({},b,{hash:uh(te),path:D.path})),d=n.createHref(J);return ue({fullPath:J,hash:te,query:r===Ai?Kh(b.query):b.query||{}},D,{redirectedFrom:void 0,href:d})}function C(b){return typeof b=="string"?Br(e,b,a.value.path):ue({},b)}function M(b,N){if(u!==b)return Zt(8,{from:N,to:b})}function I(b){return A(b)}function F(b){return I(ue(C(b),{replace:!0}))}function R(b){const N=b.matched[b.matched.length-1];if(N&&N.redirect){const{redirect:B}=N;let D=typeof B=="function"?B(b):B;return typeof D=="string"&&(D=D.includes("?")||D.includes("#")?D=C(D):{path:D},D.params={}),ue({query:b.query,hash:b.hash,params:D.path!=null?{}:b.params},D)}}function A(b,N){const B=u=w(b),D=a.value,te=b.state,J=b.force,d=b.replace===!0,g=R(B);if(g)return A(ue(C(g),{state:typeof g=="object"?ue({},te,g.state):te,force:J,replace:d}),N||B);const y=B;y.redirectedFrom=N;let S;return!J&&xh(r,D,B)&&(S=Zt(16,{to:y,from:D}),_e(D,D,!0,!1)),(S?Promise.resolve(S):Z(y,D)).catch(T=>Je(T)?Je(T,2)?T:ve(T):ee(T,y,D)).then(T=>{if(T){if(Je(T,2))return A(ue({replace:d},C(T.to),{state:typeof T.to=="object"?ue({},te,T.to.state):te,force:J}),N||y)}else T=le(y,D,!0,d,te);return G(y,D,T),T})}function K(b,N){const B=M(b,N);return B?Promise.reject(B):Promise.resolve()}function X(b){const N=nt.values().next().value;return N&&typeof N.runWithContext=="function"?N.runWithContext(b):b()}function Z(b,N){let B;const[D,te,J]=rf(b,N);B=zr(D.reverse(),"beforeRouteLeave",b,N);for(const g of D)g.leaveGuards.forEach(y=>{B.push(ct(y,b,N))});const d=K.bind(null,b,N);return B.push(d),he(B).then(()=>{B=[];for(const g of i.list())B.push(ct(g,b,N));return B.push(d),he(B)}).then(()=>{B=zr(te,"beforeRouteUpdate",b,N);for(const g of te)g.updateGuards.forEach(y=>{B.push(ct(y,b,N))});return B.push(d),he(B)}).then(()=>{B=[];for(const g of J)if(g.beforeEnter)if(je(g.beforeEnter))for(const y of g.beforeEnter)B.push(ct(y,b,N));else B.push(ct(g.beforeEnter,b,N));return B.push(d),he(B)}).then(()=>(b.matched.forEach(g=>g.enterCallbacks={}),B=zr(J,"beforeRouteEnter",b,N,X),B.push(d),he(B))).then(()=>{B=[];for(const g of o.list())B.push(ct(g,b,N));return B.push(d),he(B)}).catch(g=>Je(g,8)?g:Promise.reject(g))}function G(b,N,B){l.list().forEach(D=>X(()=>D(b,N,B)))}function le(b,N,B,D,te){const J=M(b,N);if(J)return J;const d=N===ot,g=Ut?history.state:{};B&&(D||d?n.replace(b.fullPath,ue({scroll:d&&g&&g.scroll},te)):n.push(b.fullPath,te)),a.value=b,_e(b,N,B,d),ve()}let se;function ie(){se||(se=n.listen((b,N,B)=>{if(!Ze.listening)return;const D=w(b),te=R(D);if(te){A(ue(te,{replace:!0}),D).catch(ys);return}u=D;const J=a.value;Ut&&Ch(bi(J.fullPath,B.delta),_r()),Z(D,J).catch(d=>Je(d,12)?d:Je(d,2)?(A(d.to,D).then(g=>{Je(g,20)&&!B.delta&&B.type===Ms.pop&&n.go(-1,!1)}).catch(ys),Promise.reject()):(B.delta&&n.go(-B.delta,!1),ee(d,D,J))).then(d=>{d=d||le(D,J,!1),d&&(B.delta&&!Je(d,8)?n.go(-B.delta,!1):B.type===Ms.pop&&Je(d,20)&&n.go(-1,!1)),G(D,J,d)}).catch(ys)}))}let U=ns(),W=ns(),Y;function ee(b,N,B){ve(b);const D=W.list();return D.length?D.forEach(te=>te(b,N,B)):console.error(b),Promise.reject(b)}function xe(){return Y&&a.value!==ot?Promise.resolve():new Promise((b,N)=>{U.add([b,N])})}function ve(b){return Y||(Y=!b,ie(),U.list().forEach(([N,B])=>b?B(b):N()),U.reset()),b}function _e(b,N,B,D){const{scrollBehavior:te}=s;if(!Ut||!te)return Promise.resolve();const J=!B&&Rh(bi(b.fullPath,0))||(D||!B)&&history.state&&history.state.scroll||null;return ko().then(()=>te(b,N,J)).then(d=>d&&Sh(d)).catch(d=>ee(d,b,N))}const de=b=>n.go(b);let rt;const nt=new Set,Ze={currentRoute:a,listening:!0,addRoute:m,removeRoute:x,hasRoute:_,getRoutes:v,resolve:w,options:s,push:I,replace:F,go:de,back:()=>de(-1),forward:()=>de(1),beforeEach:i.add,beforeResolve:o.add,afterEach:l.add,onError:W.add,isReady:xe,install(b){const N=this;b.component("RouterLink",Zh),b.component("RouterView",Sl),b.config.globalProperties.$router=N,Object.defineProperty(b.config.globalProperties,"$route",{enumerable:!0,get:()=>Se(a)}),Ut&&!rt&&a.value===ot&&(rt=!0,I(n.location).catch(te=>{}));const B={};for(const te in ot)Object.defineProperty(B,te,{get:()=>a.value[te],enumerable:!0});b.provide(wr,N),b.provide(Pn,Co(B)),b.provide(ln,a);const D=b.unmount;nt.add(b),b.unmount=function(){nt.delete(b),nt.size<1&&(u=ot,se&&se(),se=null,a.value=ot,rt=!1,Y=!1),D()}}};function he(b){return b.reduce((N,B)=>N.then(()=>X(B)),Promise.resolve())}return Ze}function rf(s,t){const e=[],r=[],n=[],i=Math.max(t.matched.length,s.matched.length);for(let o=0;o<i;o++){const l=t.matched[o];l&&(s.matched.find(u=>Qt(u,l))?r.push(l):e.push(l));const a=s.matched[o];a&&(t.matched.find(u=>Qt(u,a))||n.push(a))}return[e,r,n]}function nf(){return Ye(wr)}function of(){return Ye(Pn)}const lf=["texture","width","height","x","y"],af=Lt({__name:"Icon",props:["name"],setup(s){function t(o,l){const a=ft.createTexture("ImageTexture",{src:o});return l.reduce((u,c)=>{const{x:h,y:p,width:m,height:x}=c;return u[c.name]=ft.createTexture("SubTexture",{texture:a,x:h,y:p,width:m,height:x}),u},{})}const e=s,r="/vue-demo-app/",n=De([{name:"experiment",width:81,height:100,x:0,y:0},{name:"trending",width:100,height:56,x:81,y:0},{name:"tv",width:100,height:68,x:181,y:0},{name:"movie",width:94,height:100,x:282,y:0}]),i=t(r+"assets/icons_white.png",n.value);return(o,l)=>(vt(),Gt("view",yr(e,{texture:Se(i)[e.name],width:Se(i)[e.name].props.width,height:Se(i)[e.name].props.height,x:(100-(Se(i)[e.name].props.width||0))/2,y:(100-(Se(i)[e.name].props.height||0))/2}),null,16,lf))}}),cf=["forwardStates"],uf={y:-16},Ks=Lt({__name:"NavButton",props:["icon"],setup(s){const t=s,e={zIndex:102,height:70,width:100,borderRadius:8,focus:{color:fl("#424242")},active:{width:328,height:70}},r={fontSize:"38px",x:"116px",y:"18px",height:"50px",alpha:0,active:{alpha:1}};return(n,i)=>(vt(),Gt("view",yr({style:e},t,{forwardStates:n.forwardStates}),[Oe("view",uf,[me(af,{scale:.5,name:t.icon},null,8,["name"])]),Oe("text",{style:r},[Ho(n.$slots,"default")])],16,cf))}}),Oi={Column:{flexDirection:"column",display:"flex",width:140,height:600,y:360,gap:20,zIndex:101,transition:{x:{duration:250,easing:"ease-in-out"}},x:8,focus:{width:500,x:24}},Gradient:{zIndex:99,color:fl("#000000"),src:"./assets/sidenav.png",alpha:0,width:1200,height:1080,focus:{alpha:1},transition:{alpha:!0}}},hf=["alpha"],ff=Oe("text",{x:80,fontSize:28,color:4143380036},"Built With:",-1),df=Oe("view",{y:22,src:"./assets/vue.png",width:280,height:52},null,-1),pf=Oe("view",{x:0,y:110,src:"./assets/tmdb.png",width:80,height:41},null,-1),gf=Oe("text",{x:90,y:110,contain:"width",width:160,fontSize:12,color:4143380036}," This product uses the TMDB API but is not endorsed or certified by TMDB. ",-1),mf=[ff,df,pf,gf],xf=Lt({__name:"NavDrawer",setup(s){const t=s,e=De(null),r=nf(),n=of();function i(){e.value.states.add("focus"),this.children.forEach(a=>a.states.add("active")),this.children.selected.setFocus()}function o(){e.value.states.remove("focus"),this.selected=0,this.children.forEach(a=>a.states.remove("active"))}function l(a){if(n.path===a)return t.focusPage();r.push(a)}return(a,u)=>(vt(),Gt("view",null,[t.showWidgets?(vt(),Gt("view",{key:0,flexItem:!1,width:300,height:150,x:30,y:15,zIndex:105,alpha:t.showWidgets?1:0},mf,8,hf)):Nu("",!0),me(Ju,yr(t,{onFocus:i,onBlur:o,style:Se(Oi).Column,scroll:"none"}),{default:Ht(()=>[me(Ks,{icon:"trending",onEnter:u[0]||(u[0]=c=>l("/browse/all"))},{default:Ht(()=>[hs(" Trending ")]),_:1}),me(Ks,{icon:"movie",onEnter:u[1]||(u[1]=c=>l("/browse/movie"))},{default:Ht(()=>[hs(" Movies ")]),_:1}),me(Ks,{icon:"tv",onEnter:u[2]||(u[2]=c=>l("/browse/tv"))},{default:Ht(()=>[hs("TV")]),_:1}),me(Ks,{icon:"experiment",onEnter:u[3]||(u[3]=c=>l("/examples"))},{default:Ht(()=>[hs(" Examples ")]),_:1})]),_:1},16,["style"]),Oe("view",{skipFocus:"",ref_key:"backdrop",ref:e,style:As(Se(Oi).Gradient)},null,4)]))}});function Gs(s){return typeof s=="function"}const Bi={ArrowLeft:"Left",ArrowRight:"Right",ArrowUp:"Up",ArrowDown:"Down",Enter:"Enter",l:"Last"," ":"Space",Backspace:"Back",Escape:"Escape"},Cl=De(),yf=s=>{Cl.value=s},vf=s=>{let t=[];Kt(()=>Sn.value,(r,n)=>{let i=r;const o=[];for(;i;)i.states.has("focus")||(i.states.add("focus"),Gs(i.onFocus)&&i.onFocus.call(i,r,n)),o.push(i),i=i.parent;t.forEach(l=>{o.includes(l)||(l.states.remove("focus"),Gs(l.onBlur)&&l.onBlur.call(l,r,n))}),t=o,yf(o)});const e=r=>{if(r){const n=Bi[r.key]||Bi[r.keyCode],i=Cl.value||[];let o;for(const l of i){if(o=o||l,n){const a=l[`on${n}`];if(Gs(a)&&a.call(l,r,l,o)===!0)break}else console.log(`Unhandled key event: ${r.key||r.keyCode}`);if(Gs(l.onKeyPress)&&l.onKeyPress.call(l,r,n,l,o)===!0)break}return!1}};document.addEventListener("keydown",e)};function _f(s){const[t,e="ms"]=String(s).split(/(ms|s)/i),r={ms:1,s:1e3};return Number(t)*r[e]}function zi(s,t){let e=null;const r=typeof t=="number"?t:_f(t),n=function(...i){const o=()=>{e=null,s.apply(this,i)};clearTimeout(e),e=setTimeout(o,r),e||s.apply(this,i)};return n.cancel=()=>{clearTimeout(e),e=null},n}const wf={style:{width:1920,height:1080}},bf={width:1920,height:1080,zIndex:-5},Tf=["src"],Sf=Oe("node",{src:"./assets/hero-mask-inverted.png",color:255,width:1920,height:1080},null,-1),Cf=Lt({__name:"App",setup(s){vf();const t=De(1);De([]),De(null);const e=De(null),r=De(""),n=De({}),i={alpha:t.value,color:4294967295},o=zi(a=>r.value=a,400),l=zi(a=>n.value=a||{},200);return Kt(()=>Sn.value,(a,u)=>{a&&a.item&&(a.item.backdrop&&o(a.item.backdrop),a.item.heroContent&&l(a.item.heroContent))}),(a,u)=>(vt(),Gt("node",wf,[me(Se(Sl)),me(xf,{ref_key:"navDrawer",ref:e,focusPage:"lastFocused.setFocus",showWidgets:"showWidgets()"},null,512),Oe("node",bf,[Oe("node",{ref:"bg1",src:r.value,style:i},null,8,Tf),Oe("node",{ref:"bg2",style:i,alpha:"0"},null,512),Sf])]))}}),Rf=new URL("AppCoreExtensions-fMgXrzO0.js",import.meta.url).href,If="modulepreload",Ef=function(s){return"/vue-demo-app/"+s},$i={},Mf=function(t,e,r){let n=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));n=Promise.all(e.map(l=>{if(l=Ef(l),l in $i)return;$i[l]=!0;const a=l.endsWith(".css"),u=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const c=document.createElement("link");if(c.rel=a?"stylesheet":If,a||(c.as="script",c.crossOrigin=""),c.href=l,o&&c.setAttribute("nonce",o),document.head.appendChild(c),a)return new Promise((h,p)=>{c.addEventListener("load",h),c.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}return n.then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},Di=()=>Mf(()=>import("./Browse-HIGR4z2o.js"),__vite__mapDeps([0,1])),Af=[{path:"/",component:Di},{path:"/browse/:filter",component:Di}],Ff=sf({history:Fh(),routes:Af});Ie.debug=!0;Ie.animationsEnabled=!0;Ie.fontSettings.fontFamily="Ubuntu";Ie.fontSettings.color=4143380223;Ie.fontSettings.fontSize=32;Ie.rendererOptions={coreExtensionModule:Rf,fpsUpdateInterval:0,enableInspector:!0};Vu(Cf).then(({app:s,rootNode:t})=>{s.use(Ff),s.mount(t)});export{He as F,Ju as _,Oe as a,vi as b,Gt as c,Lt as d,Gu as e,De as f,zi as g,yi as h,Kt as i,eu as j,me as k,ll as l,Nu as m,As as n,vt as o,Ht as p,Sn as q,Ho as r,Nf as s,kf as t,Se as u,qu as w};
//# sourceMappingURL=main-DXofxo6k.js.map
