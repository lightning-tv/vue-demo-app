const __vite__fileDeps=["assets/Browse-FdAM41ZU.js","assets/styles-_hYwUma5.js","assets/CoreExtension-CvzE2bo0.js","assets/Entity-B9pSSdqM.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
var bl=Object.defineProperty;var Tl=(s,t,e)=>t in s?bl(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var f=(s,t,e)=>Tl(s,typeof t!="symbol"?t+"":t,e);import{a as H,i as Di,T as Sl,g as Tn,E as _t,b as qe,c as Yt,d as Cl,e as lr,f as Rl,m as rs,W as Zt,C as Il,h as El,j as Sn,S as Or,k as Hi,B as Ml,l as Fl,n as Ui,o as Al,p as Ll,q as Pl,r as Nl,s as Br,t as zr,u as kl,I as Ol,v as Bl,w as Wi,R as zl,x as $l,y as Dl,z as Hl,A as Ul}from"./CoreExtension-CvzE2bo0.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=e(r);fetch(r.href,i)}})();class Yi{constructor(t){f(this,"releaseCallback");this.releaseCallback=t}}class Wl extends Yi{constructor(e,n){super(e);f(this,"textureMap",new Map);f(this,"zeroReferenceTextureSet",new Set);f(this,"options");this.options={textureCleanupIntervalMs:n.textureCleanupIntervalMs??1e4,textureCleanupAgeThreadholdMs:n.textureCleanupAgeThreadholdMs??6e4},setInterval(()=>{const r=Date.now(),i=this.options.textureCleanupAgeThreadholdMs;for(const o of this.zeroReferenceTextureSet)r-o.lastUpdate>i&&(this.releaseCallback(o.id),this.textureMap.delete(o.id),this.zeroReferenceTextureSet.delete(o))},this.options.textureCleanupIntervalMs)}registerTexture(e){var r;const n=(r=e.options)==null?void 0:r.id;if(H(n,"Texture must have an id to be registered"),!this.textureMap.has(n)){const i={id:n,nodeRefCount:0,lastUpdate:Date.now()};this.textureMap.set(n,i),this.zeroReferenceTextureSet.add(i)}}incrementTextureRefCount(e){var i;const n=(i=e.options)==null?void 0:i.id;H(n,"Texture must have an id to be registered");let r=this.textureMap.get(n);r||(this.registerTexture(e),r=this.textureMap.get(n)),H(r,"Texture must have been registered"),e.txType==="SubTexture"&&this.incrementTextureRefCount(e.props.texture),r.nodeRefCount++,r.lastUpdate=Date.now(),this.zeroReferenceTextureSet.has(r)&&this.zeroReferenceTextureSet.delete(r)}decrementTextureRefCount(e){var i;const n=(i=e.options)==null?void 0:i.id;H(n,"Texture must have an id to be registered");const r=this.textureMap.get(n);H(r,"Texture must have been registered"),r.nodeRefCount--,r.lastUpdate=Date.now(),r.nodeRefCount===0&&this.zeroReferenceTextureSet.add(r),e.txType==="SubTexture"&&this.decrementTextureRefCount(e.props.texture)}}class Yl extends Yi{constructor(e){super(e);f(this,"registry");this.registry=new FinalizationRegistry(e)}registerTexture(e){var n,r;H((n=e.options)==null?void 0:n.id,"Texture must have an ID to be registered"),this.registry.register(e,(r=e.options)==null?void 0:r.id)}incrementTextureRefCount(){}decrementTextureRefCount(){}}const es={alpha:s=>s===1?null:{prop:"opacity",value:`${s}`},x:s=>({prop:"left",value:`${s}px`}),y:s=>({prop:"top",value:`${s}px`}),width:s=>s===0?null:{prop:"width",value:`${s}px`},height:s=>s===0?null:{prop:"height",value:`${s}px`},zIndex:()=>"zIndex",fontFamily:()=>"font-family",fontSize:()=>"font-size",fontStyle:()=>"font-style",fontWeight:()=>"font-weight",fontStretch:()=>"font-stretch",lineHeight:()=>"line-height",letterSpacing:()=>"letter-spacing",textAlign:()=>"text-align",overflowSuffix:()=>"overflow-suffix",maxLines:()=>"max-lines",contain:()=>"contain",verticalAlign:()=>"vertical-align",clipping:s=>s===!1?null:{prop:"overflow",value:s?"hidden":"visible"},rotation:s=>s===0?null:{prop:"transform",value:`rotate(${s}rad)`},scale:s=>s===1?null:{prop:"transform",value:`scale(${s})`},scaleX:s=>s===1?null:{prop:"transform",value:`scaleX(${s})`},scaleY:s=>s===1?null:{prop:"transform",value:`scaleY(${s})`},color:s=>s===0?null:{prop:"color",value:ji(s)}},ji=s=>{const t=(s&255)/255,e=s>>8&255,n=s>>16&255;return`rgba(${s>>24&255},${n},${e},${t})`},jl={id:"id"};class Xl{constructor(t,e){f(this,"root",null);f(this,"canvas",null);f(this,"height",1080);f(this,"width",1920);f(this,"scaleX",1);f(this,"scaleY",1);if(Di())return;if(!e)throw new Error("settings is required");this.height=Math.ceil(e.appHeight??1080/(e.deviceLogicalPixelRatio??1)),this.width=Math.ceil(e.appWidth??1900/(e.deviceLogicalPixelRatio??1)),this.scaleX=e.deviceLogicalPixelRatio??1,this.scaleY=e.deviceLogicalPixelRatio??1,this.canvas=t,this.root=document.createElement("div"),this.setRootPosition(),document.body.appendChild(this.root),new MutationObserver(this.setRootPosition.bind(this)).observe(t,{attributes:!0,childList:!1,subtree:!1}),new ResizeObserver(this.setRootPosition.bind(this)).observe(t),window.addEventListener("resize",this.setRootPosition.bind(this)),console.warn("Inspector is enabled, this will impact performance")}setRootPosition(){if(this.root===null||this.canvas===null)return;const t=this.canvas.getBoundingClientRect(),e=document.documentElement.scrollTop+t.top,n=document.documentElement.scrollLeft+t.left;this.root.id="root",this.root.style.left=`${n}px`,this.root.style.top=`${e}px`,this.root.style.width=`${this.width}px`,this.root.style.height=`${this.height}px`,this.root.style.position="absolute",this.root.style.transformOrigin="0 0 0",this.root.style.transform=`scale(${this.scaleX}, ${this.scaleY})`,this.root.style.overflow="hidden",this.root.style.zIndex="65534"}createDiv(t,e){const n=document.createElement("div");n.style.position="absolute",n.id=t.id.toString();for(const r in e)this.updateNodeProperty(n,r,e[r]);return n}createNode(t,e){const n=t.createNode(e),r=this.createDiv(n,e);return r.node=n,n.div=r,this.createProxy(n,r)}createTextNode(t,e){const n=t.createTextNode(e),r=this.createDiv(n,e);return r.node=n,n.div=r,this.createProxy(n,r)}createProxy(t,e){return new Proxy(t,{set:(n,r,i)=>(this.updateNodeProperty(e,r,i),Reflect.set(n,r,i)),get:(n,r,i)=>(r==="destroy"&&this.destroyNode(n),r==="animate"?(o,l)=>{const a=n.animate(o,l);return new Proxy(a,{get:(u,c,h)=>(c==="start"&&this.animateNode(e,t,o,l),Reflect.get(u,c,h))})}:Reflect.get(n,r,i))})}destroyNode(t){const e=document.getElementById(t.id.toString());e==null||e.remove()}updateNodeProperty(t,e,n){var r;if(!(this.root===null||n===void 0||n===null)){if(e==="parent"){const i=n.id;if(i===1){this.root.appendChild(t);return}const o=document.getElementById(i.toString());o==null||o.appendChild(t);return}if(e==="text"){t.innerHTML=String(n),t.style.visibility="hidden";return}if(e==="src"&&n){t.setAttribute("data-src",String(n));return}if(es[e]){const i=(r=es[e])==null?void 0:r.call(es,n);if(i===null)return;if(typeof i=="string"){t.style.setProperty(i,String(n));return}typeof i=="object"&&t.style.setProperty(i.prop,i.value);return}if(jl[e]){t.setAttribute(String(es[e]),String(n));return}if(e==="data"){for(const i in n){const o=n[i];o===void 0?t.removeAttribute(`data-${i}`):t.setAttribute(`data-${i}`,String(o))}return}}}animateNode(t,e,n,r){const{duration:i=1e3,delay:o=0}=r,{x:l,y:a,width:u,height:c,alpha:h=1,rotation:p=0,scale:m=1,color:x}=n;function v(){setTimeout(()=>{t.style.top=`${a}px`,t.style.left=`${l}px`,t.style.width=`${u}px`,t.style.height=`${c}px`,t.style.opacity=`${h}`,t.style.rotate=`${p}rad`,t.style.scale=`${m}`,t.style.color=ji(x)},i)}setTimeout(v,o)}}class Te{constructor(t){f(this,"priority",1);f(this,"name","");f(this,"ref");f(this,"target");f(this,"passParameters","");f(this,"declaredUniforms","");f(this,"uniformInfo",{});const{ref:e,target:n,props:r={}}=t;this.ref=e,this.target=n;const i={},o=[];let l="";const a=this.constructor.uniforms||{};for(const u in a){const c=a[u],h=c.type,p=`${e}_${u}`;let m="";c.size&&(m=`[${c.size(r)}]`),o.push(p),l+=`uniform ${h} ${p}${m};`,i[u]={name:p,uniform:a[u].method}}this.passParameters=o.join(","),this.declaredUniforms=l,this.uniformInfo=i}static getEffectKey(t){return""}static getMethodParameters(t,e){const n=[];for(const r in t){const i=t[r];let o="";i.size&&(o=`[${i.size(e)}]`),n.push(`${i.type} ${r}${o}`)}return n.join(",")}static resolveDefaults(t){return{}}static makeEffectKey(t){return!1}}f(Te,"uniforms",{}),f(Te,"methods"),f(Te,"onShaderMask"),f(Te,"onColorize"),f(Te,"onEffectMask");const Vl={x:(s,t)=>{s.props.x=t},y:(s,t)=>{s.props.y=t},width:(s,t)=>{s.props.width=t},height:(s,t)=>{s.props.height=t},color:(s,t)=>{s.props.color=t},zIndex:(s,t)=>{s.props.zIndex=t},fontFamily:(s,t)=>{s.props.fontFamily=t},fontWeight:(s,t)=>{s.props.fontWeight=t},fontStyle:(s,t)=>{s.props.fontStyle=t},fontStretch:(s,t)=>{s.props.fontStretch=t},fontSize:(s,t)=>{s.props.fontSize=t},text:(s,t)=>{s.props.text=t},textAlign:(s,t)=>{s.props.textAlign=t},contain:(s,t)=>{s.props.contain=t},offsetY:(s,t)=>{s.props.offsetY=t},scrollable:(s,t)=>{s.props.scrollable=t},scrollY:(s,t)=>{s.props.scrollY=t},letterSpacing:(s,t)=>{s.props.letterSpacing=t},lineHeight:(s,t)=>{s.props.lineHeight=t},maxLines:(s,t)=>{s.props.maxLines=t},textBaseline:(s,t)=>{s.props.textBaseline=t},verticalAlign:(s,t)=>{s.props.verticalAlign=t},overflowSuffix:(s,t)=>{s.props.overflowSuffix=t},debug:(s,t)=>{s.props.debug=t}};class Xi{constructor(t){f(this,"stage");f(this,"set");this.stage=t;const e={...Vl,...this.getPropertySetters()};this.set=Object.freeze(Object.fromEntries(Object.entries(e).map(([n,r])=>[n,(i,o)=>{i.props[n]!==o&&(r(i,o),this.stage.requestRender())}])))}setStatus(t,e,n){t.status!==e&&(t.status=e,t.emitter.emit(e,n))}setIsRenderable(t,e){t.isRenderable=e}destroyState(t){this.setStatus(t,"destroyed"),t.emitter.removeAllListeners()}scheduleUpdateState(t){t.updateScheduled||(t.updateScheduled=!0,queueMicrotask(()=>{t.status!=="destroyed"&&(t.updateScheduled=!1,this.updateState(t))}))}}function Vi(s,t){var e=0,n,r;t=t||{};function i(){var o=n,l=arguments.length,a,u;e:for(;o;){if(o.args.length!==arguments.length){o=o.next;continue}for(u=0;u<l;u++)if(o.args[u]!==arguments[u]){o=o.next;continue e}return o!==n&&(o===r&&(r=o.prev),o.prev.next=o.next,o.next&&(o.next.prev=o.prev),o.next=n,o.prev=null,n.prev=o,n=o),o.val}for(a=new Array(l),u=0;u<l;u++)a[u]=arguments[u];return o={args:a,val:s.apply(null,a)},n?(n.prev=o,o.next=n):r=o,e===t.maxSize?(r=r.prev,r.next=null):e++,n=o,o.val}return i.clear=function(){n=null,r=null,e=0},i}const Kl={normal:400,bold:700,bolder:900,lighter:100},$r=s=>typeof s=="number"?s:Kl[s]||400;function Gl(s,t,e,n,r){let i=$r(e);for(const o of s){const l=o[t];if(!l)continue;if(l.size===1)return console.warn(`TrFontManager: Only one font face found for family: '${t}' - will be used for all weights and styles`),l.values().next().value;const a=new Map;for(const c of l){const h=$r(c.descriptors.weight);if(h===i&&c.descriptors.style===n&&c.descriptors.stretch===r)return c;a.set(h,c)}const u=`TrFontManager: No exact match: '${t} Weight: ${i} Style: ${n} Stretch: ${r}'`;if(console.error(u),i===400&&a.has(500))return a.get(500);if(i===500&&a.has(400))return a.get(400);if(i<400){for(;i>0;){if(a.has(i))return a.get(i);i-=100}i=600}for(;i<1e3;){if(a.has(i))return a.get(i);i+=100}for(i=500;i>0;){if(a.has(i))return a.get(i);i-=100}}}const ql=Vi(Gl);class ar{constructor(t){f(this,"textRenderers");this.textRenderers=t}addFontFace(t){for(const e in this.textRenderers){const n=this.textRenderers[e];n&&n.isFontFaceSupported(t)&&n.addFontFace(t)}}static resolveFontFace(t,e){const{fontFamily:n,fontWeight:r,fontStyle:i,fontStretch:o}=e;return ql(t,n,r,i,o)}}class Cn extends Sl{constructor(e){super(e);f(this,"fontFace");f(this,"fontUrl");const{fontFamily:n,fontUrl:r}=e,i=r.replace(/\(|\)/g,""),o=this.descriptors,l={style:o.style,weight:typeof o.weight=="number"?`${o.weight}`:o.weight,stretch:o.stretch,unicodeRange:o.unicodeRange,variant:o.variant,featureSettings:o.featureSettings,display:o.display},a=new FontFace(n,`url(${i})`,l);a.load().then(()=>{this.loaded=!0,this.emit("loaded")}).catch(console.error),this.fontFace=a,this.fontUrl=r}}function Ki(s,t){return t*(s.ascender-s.descender+s.lineGap)}function Ql(s,t,e){if(t.metrics)return t.metrics;const n=s.measureText("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz");console.warn(`Font metrics not provided for Canvas Web font ${t.fontFamily}. Using fallback values. It is HIGHLY recommended you use the latest version of the Lightning 3 \`msdf-generator\` tool to extract the default metrics for the font and provide them in the Canvas Web font definition.`);let r;return n.actualBoundingBoxDescent&&n.actualBoundingBoxAscent?r={ascender:n.actualBoundingBoxAscent/e,descender:-n.actualBoundingBoxDescent/e,lineGap:.2}:r={ascender:.8,descender:-.2,lineGap:.2},t.metrics=r,r}const Dr=2048;function Hr(s,t,e,n,r){const i=s!=="bottom"?.5*t:0;return e*(n-1)+i+Math.max(e,t)+(r||0)}class Zl{constructor(t,e){f(this,"_canvas");f(this,"_context");f(this,"_settings");f(this,"renderInfo");this._canvas=t,this._context=e,this._settings=this.mergeDefaults({})}set settings(t){this._settings=this.mergeDefaults(t)}get settings(){return this._settings}getPrecision(){return this._settings.precision}setFontProperties(){this._context.font=this._getFontSetting(),this._context.textBaseline=this._settings.textBaseline}_getFontSetting(){const t=[this._settings.fontFamily],e=[];for(let n=0,r=t.length;n<r;n++)t[n]==="serif"||t[n]==="sans-serif"?e.push(t[n]):e.push(`"${t[n]}"`);return`${this._settings.fontStyle} ${this._settings.fontSize*this.getPrecision()}px ${e.join(",")}`}_load(){if(document.fonts){const t=this._getFontSetting();try{if(!document.fonts.check(t,this._settings.text))return document.fonts.load(t,this._settings.text).catch(e=>{console.warn("[Lightning] Font load error",e,t)}).then(()=>{document.fonts.check(t,this._settings.text)||console.warn("[Lightning] Font not found",t)})}catch{console.warn("[Lightning] Can't check font loading for "+t)}}}calculateRenderInfo(){const t={},e=this.getPrecision(),n=this._settings.paddingLeft*e,r=this._settings.paddingRight*e,i=this._settings.fontSize*e;let o=this._settings.offsetY===null?null:this._settings.offsetY*e;const l=this._settings.w*e,a=this._settings.h*e;let u=this._settings.wordWrapWidth*e;const c=this._settings.cutSx*e,h=this._settings.cutEx*e,p=this._settings.cutSy*e,m=this._settings.cutEy*e,x=(this._settings.letterSpacing||0)*e,v=this._settings.textIndent*e,_=this._settings.trFontFace;this.setFontProperties(),H(_);const w=Ql(this._context,_,i),R=Ki(w,i)*e,E=this._settings.lineHeight!==null?this._settings.lineHeight*e:R,C=this._settings.maxHeight,A=C!==null&&E>0?Math.floor(C/E):0,I=this._settings.maxLines,F=A>0&&I>0?Math.min(A,I):Math.max(A,I);let K=l||2048/this.getPrecision(),X=K-n;if(X<10&&(K+=10-X,X=10),u||(u=X),this._settings.textOverflow&&!this._settings.wordWrap){let U;switch(this._settings.textOverflow){case"clip":U="";break;case"ellipsis":U=this._settings.overflowSuffix;break;default:U=this._settings.textOverflow}this._settings.text=this.wrapWord(this._settings.text,u-v,U)}let Z;if(this._settings.wordWrap)Z=this.wrapText(this._settings.text,u,x,v);else{Z={l:this._settings.text.split(/(?:\r\n|\r|\n)/),n:[]};const U=Z.l.length;for(let W=0;W<U-1;W++)Z.n.push(W)}let G=Z.l;if(F&&G.length>F){const U=G.slice(0,F);let W=null;if(this._settings.overflowSuffix){const we=this._settings.overflowSuffix?this.measureText(this._settings.overflowSuffix):0,pe=this.wrapText(U[U.length-1],u-we,x,v);U[U.length-1]=`${pe.l[0]}${this._settings.overflowSuffix}`,W=[pe.l.length>1?pe.l[1]:""]}else W=[""];let Y;const ee=G.length;let xe=0;const ve=Z.n.length;for(Y=F;Y<ee;Y++)W[xe]+=`${W[xe]?" ":""}${G[Y]}`,Y+1<ve&&Z.n[Y+1]&&xe++;t.remainingText=W.join(`
`),t.moreTextLines=!0,G=U}else t.moreTextLines=!1,t.remainingText="";let le=0;const ne=[];for(let U=0;U<G.length;U++){const W=this.measureText(G[U],x)+(U===0?v:0);ne.push(W),le=Math.max(le,W)}t.lineWidths=ne,l||(K=le+n+r,X=le);let ie;return a?ie=a:ie=Hr(this._settings.textBaseline,i,E,G.length,o),o===null&&(o=i),t.w=K,t.h=ie,t.lines=G,t.precision=e,K||(K=1),ie||(ie=1),(c||h)&&(K=Math.min(K,h-c)),(p||m)&&(ie=Math.min(ie,m-p)),t.width=K,t.innerWidth=X,t.height=ie,t.fontSize=i,t.cutSx=c,t.cutSy=p,t.cutEx=h,t.cutEy=m,t.lineHeight=E,t.defLineHeight=R,t.lineWidths=ne,t.offsetY=o,t.paddingLeft=n,t.paddingRight=r,t.letterSpacing=x,t.textIndent=v,t.metrics=w,t}draw(t,e){const n=this.getPrecision(),r=(e==null?void 0:e.lines)||t.lines,i=(e==null?void 0:e.lineWidths)||t.lineWidths,o=e?Hr(this._settings.textBaseline,t.fontSize,t.lineHeight,e.lines.length,this._settings.offsetY===null?null:this._settings.offsetY*n):t.height;this._canvas.width=Math.min(Math.ceil(t.width+this._settings.textRenderIssueMargin),Dr),this._canvas.height=Math.min(Math.ceil(o),Dr),this.setFontProperties(),t.fontSize>=128&&(this._context.globalAlpha=.01,this._context.fillRect(0,0,.01,.01),this._context.globalAlpha=1),(t.cutSx||t.cutSy)&&this._context.translate(-t.cutSx,-t.cutSy);let l,a;const u=[],{metrics:c}=t,h=c?c.ascender*t.fontSize:t.fontSize,p=(c.ascender-c.descender)*t.fontSize;for(let x=0,v=r.length;x<v;x++)l=x===0?t.textIndent:0,a=x*t.lineHeight+h,this._settings.verticalAlign=="middle"?a+=(t.lineHeight-p)/2:this._settings.verticalAlign=="bottom"&&(a+=t.lineHeight-p),this._settings.textAlign==="right"?l+=t.innerWidth-i[x]:this._settings.textAlign==="center"&&(l+=(t.innerWidth-i[x])/2),l+=t.paddingLeft,u.push({text:r[x],x:l,y:a,w:i[x]});if(this._settings.highlight){const x=this._settings.highlightColor,v=this._settings.highlightHeight*n||t.fontSize*1.5,_=this._settings.highlightOffset*n,w=this._settings.highlightPaddingLeft!==null?this._settings.highlightPaddingLeft*n:t.paddingLeft,R=this._settings.highlightPaddingRight!==null?this._settings.highlightPaddingRight*n:t.paddingRight;this._context.fillStyle=Tn(x);for(let E=0;E<u.length;E++){const C=u[E];this._context.fillRect(C.x-w,C.y-t.offsetY+_,C.w+R+w,v)}}let m=null;this._settings.shadow&&(m=[this._context.shadowColor,this._context.shadowOffsetX,this._context.shadowOffsetY,this._context.shadowBlur],this._context.shadowColor=Tn(this._settings.shadowColor),this._context.shadowOffsetX=this._settings.shadowOffsetX*n,this._context.shadowOffsetY=this._settings.shadowOffsetY*n,this._context.shadowBlur=this._settings.shadowBlur*n),this._context.fillStyle=Tn(this._settings.textColor);for(let x=0,v=u.length;x<v;x++){const _=u[x];if(t.letterSpacing===0)this._context.fillText(_.text,_.x,_.y);else{const w=_.text.split("");let R=_.x;for(let E=0,C=w.length;E<C;E++)this._context.fillText(w[E],R,_.y),R+=this.measureText(w[E],t.letterSpacing)}}m&&(this._context.shadowColor=m[0],this._context.shadowOffsetX=m[1],this._context.shadowOffsetY=m[2],this._context.shadowBlur=m[3]),(t.cutSx||t.cutSy)&&this._context.translate(t.cutSx,t.cutSy),this.renderInfo=t}wrapWord(t,e,n){const r=this._context.measureText(n).width,i=t.length,o=this._context.measureText(t).width;if(o<=e)return t;let l=Math.floor(e*i/o),a=this._context.measureText(t.substring(0,l)).width+r;if(a>e)for(;l>0&&(a=this._context.measureText(t.substring(0,l)).width+r,a>e);)l-=1;else for(;l<i;)if(a=this._context.measureText(t.substring(0,l)).width+r,a<e)l+=1;else{l-=1;break}return t.substring(0,l)+(e>=r?n:"")}wrapText(t,e,n,r=0){const i=t.split(/\r?\n/g);let o=[];const l=[];for(let a=0;a<i.length;a++){const u=[];let c="",h=e-r;const p=i[a].split(" ");for(let m=0;m<p.length;m++){const x=this.measureText(p[m],n),v=x+this.measureText(" ",n);m===0||v>h?(m>0&&(u.push(c),c=""),c+=p[m],h=e-x-(m===0?r:0)):(h-=v,c+=` ${p[m]}`)}u.push(c),c="",o=o.concat(u),a<i.length-1&&l.push(o.length)}return{l:o,n:l}}measureText(t,e=0){return e?t.split("").reduce((n,r)=>n+this._context.measureText(r).width+e,0):this._context.measureText(t).width}mergeDefaults(t){return{text:"",w:0,h:0,fontStyle:"normal",fontSize:40,fontFamily:null,trFontFace:null,wordWrap:!0,wordWrapWidth:0,wordBreak:!1,textOverflow:"",lineHeight:null,textBaseline:"alphabetic",textAlign:"left",verticalAlign:"top",offsetY:null,maxLines:0,maxHeight:null,overflowSuffix:"...",textColor:[1,1,1,1],paddingLeft:0,paddingRight:0,shadow:!1,shadowColor:[0,0,0,1],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:5,highlight:!1,highlightHeight:0,highlightColor:[0,0,0,1],highlightOffset:0,highlightPaddingLeft:0,highlightPaddingRight:0,letterSpacing:0,textIndent:0,cutSx:0,cutEx:0,cutSy:0,cutEy:0,advancedRenderer:!1,fontBaselineRatio:0,precision:1,textRenderIssueMargin:0,...t}}}const Ur=typeof self>"u"?globalThis:self;var $i;const Wr=(($i=Ur.document)==null?void 0:$i.fonts)||Ur.fonts;function Jl(s){const{fontFamily:t,fontStyle:e,fontWeight:n,fontStretch:r,fontSize:i}=s;return[e,n,r,`${i}px`,t].join(" ")}const ea=Yt(0,0,0,0);class Yr extends Xi{constructor(e){super(e);f(this,"canvas");f(this,"context");f(this,"rendererBounds");f(this,"fontFamilies",{});f(this,"fontFamilyArray",[this.fontFamilies]);typeof OffscreenCanvas<"u"?this.canvas=new OffscreenCanvas(0,0):this.canvas=document.createElement("canvas");let n=this.canvas.getContext("2d");n||(this.canvas=document.createElement("canvas"),n=this.canvas.getContext("2d")),H(n),this.context=n,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight},this.addFontFace(new Cn({fontFamily:"sans-serif",descriptors:{},fontUrl:""}))}getPropertySetters(){return{fontFamily:(e,n)=>{e.props.fontFamily=n,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontWeight:(e,n)=>{e.props.fontWeight=n,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontStyle:(e,n)=>{e.props.fontStyle=n,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontStretch:(e,n)=>{e.props.fontStretch=n,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontSize:(e,n)=>{e.props.fontSize=n,e.fontInfo=void 0,this.invalidateLayoutCache(e)},text:(e,n)=>{e.props.text=n,this.invalidateLayoutCache(e)},textAlign:(e,n)=>{e.props.textAlign=n,this.invalidateLayoutCache(e)},color:(e,n)=>{e.props.color=n,this.invalidateLayoutCache(e)},x:(e,n)=>{e.props.x=n,this.invalidateVisibleWindowCache(e)},y:(e,n)=>{e.props.y=n,this.invalidateVisibleWindowCache(e)},contain:(e,n)=>{e.props.contain=n,this.invalidateLayoutCache(e)},width:(e,n)=>{e.props.width=n,e.props.contain!=="none"&&this.invalidateLayoutCache(e)},height:(e,n)=>{e.props.height=n,e.props.contain==="both"&&this.invalidateLayoutCache(e)},offsetY:(e,n)=>{e.props.offsetY=n,this.invalidateLayoutCache(e)},scrollY:(e,n)=>{e.props.scrollY=n},letterSpacing:(e,n)=>{e.props.letterSpacing=n,this.invalidateLayoutCache(e)},lineHeight:(e,n)=>{e.props.lineHeight=n,this.invalidateLayoutCache(e)},maxLines:(e,n)=>{e.props.maxLines=n,this.invalidateLayoutCache(e)},textBaseline:(e,n)=>{e.props.textBaseline=n,this.invalidateLayoutCache(e)},verticalAlign:(e,n)=>{e.props.verticalAlign=n,this.invalidateLayoutCache(e)},overflowSuffix:(e,n)=>{e.props.overflowSuffix=n,this.invalidateLayoutCache(e)}}}canRenderFont(e){return!0}isFontFaceSupported(e){return e instanceof Cn}addFontFace(e){H(e instanceof Cn),e.fontFamily!=="sans-serif"&&Wr.add(e.fontFace);const{fontFamilies:n}=this,r=e.fontFace.family;let i=n[r];i||(i=new Set,n[r]=i),i.add(e)}createState(e){return{props:e,status:"initialState",updateScheduled:!1,emitter:new _t,canvasPages:void 0,lightning2TextRenderer:new Zl(this.canvas,this.context),renderWindow:void 0,visibleWindow:{x1:0,y1:0,x2:0,y2:0,valid:!1},renderInfo:void 0,forceFullLayoutCalc:!1,textW:0,textH:0,fontInfo:void 0,fontFaceLoadedHandler:void 0,isRenderable:!1,debugData:{updateCount:0,layoutCount:0,drawCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,bufferSize:0}}}updateState(e){var x,v;if(e.status==="initialState"&&this.setStatus(e,"loading"),!e.fontInfo){const _=Jl(e.props),w=ar.resolveFontFace(this.fontFamilyArray,e.props);if(H(w,`Could not resolve font face for ${_}`),e.fontInfo={fontFace:w,cssString:_,loaded:!1},!e.fontInfo.loaded){Wr.load(_).then(this.onFontLoaded.bind(this,e,_)).catch(this.onFontLoadError.bind(this,e,_));return}}if(!e.fontInfo.loaded)return;e.renderInfo||(e.lightning2TextRenderer.settings={text:e.props.text,textAlign:e.props.textAlign,fontFamily:e.props.fontFamily,trFontFace:e.fontInfo.fontFace,fontSize:e.props.fontSize,fontStyle:[e.props.fontStretch,e.props.fontStyle,e.props.fontWeight].join(" "),textColor:qe(e.props.color),offsetY:e.props.offsetY,wordWrap:e.props.contain!=="none",wordWrapWidth:e.props.contain==="none"?void 0:e.props.width,letterSpacing:e.props.letterSpacing,lineHeight:e.props.lineHeight??null,maxLines:e.props.maxLines,maxHeight:e.props.contain==="both"?e.props.height-e.props.offsetY:null,textBaseline:e.props.textBaseline,verticalAlign:e.props.verticalAlign,overflowSuffix:e.props.overflowSuffix,w:e.props.contain!=="none"?e.props.width:void 0},e.renderInfo=e.lightning2TextRenderer.calculateRenderInfo(),e.textH=e.renderInfo.lineHeight*e.renderInfo.lines.length,e.textW=e.renderInfo.width,e.renderWindow=void 0);const{x:n,y:r,width:i,height:o,scrollY:l,contain:a}=e.props,{visibleWindow:u}=e;let{renderWindow:c,canvasPages:h}=e;if(!u.valid){const _=Yt(n,r,a!=="none"?n+i:1/0,a==="both"?r+o:1/0,ea);Cl(this.rendererBounds,_,u),u.valid=!0}const p=u.y2-u.y1,m=Math.ceil(p/e.renderInfo.lineHeight);if(p===0){h=void 0,c=void 0,this.setStatus(e,"loaded");return}else if(c&&h){const _=n+c.x1,w=r-l+c.y1,R=n+c.x2,E=r-l+c.y2;if(_<=u.x1&&R>=u.x2&&w<=u.y1&&E>=u.y2){this.setStatus(e,"loaded");return}E<u.y2?(c.y1+=m*e.renderInfo.lineHeight,c.y2+=m*e.renderInfo.lineHeight,h.push(h.shift()),h[2].lineNumStart=h[1].lineNumStart+m,h[2].lineNumEnd=h[2].lineNumStart+m,h[2].valid=!1):w>u.y1&&(c.y1-=m*e.renderInfo.lineHeight,c.y2-=m*e.renderInfo.lineHeight,h.unshift(h.pop()),h[0].lineNumStart=h[1].lineNumStart-m,h[0].lineNumEnd=h[0].lineNumStart+m,h[0].valid=!1)}else{const _=e.renderInfo.lineHeight*m,w=Math.ceil(l/_),R=w*m,E=R-m,C=R+m;h=[{texture:h==null?void 0:h[0].texture,lineNumStart:E,lineNumEnd:E+m,valid:!1},{texture:h==null?void 0:h[1].texture,lineNumStart:R,lineNumEnd:R+m,valid:!1},{texture:h==null?void 0:h[2].texture,lineNumStart:C,lineNumEnd:C+m,valid:!1}],e.canvasPages=h;const A=w*_;c={x1:0,y1:A-_,x2:i,y2:A+_*2}}e.renderWindow=c,performance.now();for(const _ of h)if(!_.valid){if(_.lineNumStart<0){(x=_.texture)==null||x.setRenderableOwner(e,!1),_.texture=this.stage.txManager.loadTexture("ImageTexture",{src:""}),_.texture.setRenderableOwner(e,e.isRenderable),_.valid=!0;continue}e.lightning2TextRenderer.draw(e.renderInfo,{lines:e.renderInfo.lines.slice(_.lineNumStart,_.lineNumEnd),lineWidths:e.renderInfo.lineWidths.slice(_.lineNumStart,_.lineNumEnd)}),this.canvas.width===0||this.canvas.height===0||((v=_.texture)==null||v.setRenderableOwner(e,!1),_.texture=this.stage.txManager.loadTexture("ImageTexture",{src:this.context.getImageData(0,0,this.canvas.width,this.canvas.height)},{preload:!0}),_.texture.setRenderableOwner(e,e.isRenderable)),_.valid=!0}this.setStatus(e,"loaded")}renderQuads(e,n,r,i){var K,X,Z,G,le,ne,ie,U,W,Y,ee,xe;const{stage:o}=this,{canvasPages:l,textW:a=0,textH:u=0,renderWindow:c}=e;if(!l||!c)return;const{x:h,y:p,scrollY:m,contain:x,width:v,height:_}=e.props,w={x:h,y:p,width:x!=="none"?v:a,height:x==="both"?_:u};lr({x:0,y:0,width:o.options.appWidth,height:o.options.appHeight},w),H(l,"canvasPages is not defined"),H(c,"renderWindow is not defined");const E=(c.y2-c.y1)/3,{zIndex:C,color:A}=e.props,I=i*Rl(A),F=rs(4294967295,I);l[0].valid&&this.stage.renderer.addQuad({alpha:I,clippingRect:r,colorBl:F,colorBr:F,colorTl:F,colorTr:F,width:((X=(K=l[0].texture)==null?void 0:K.dimensions)==null?void 0:X.width)||0,height:((G=(Z=l[0].texture)==null?void 0:Z.dimensions)==null?void 0:G.height)||0,texture:l[0].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:C,tx:n.tx,ty:n.ty-m+c.y1,ta:n.ta,tb:n.tb,tc:n.tc,td:n.td}),l[1].valid&&this.stage.renderer.addQuad({alpha:I,clippingRect:r,colorBl:F,colorBr:F,colorTl:F,colorTr:F,width:((ne=(le=l[1].texture)==null?void 0:le.dimensions)==null?void 0:ne.width)||0,height:((U=(ie=l[1].texture)==null?void 0:ie.dimensions)==null?void 0:U.height)||0,texture:l[1].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:C,tx:n.tx,ty:n.ty-m+c.y1+E,ta:n.ta,tb:n.tb,tc:n.tc,td:n.td}),l[2].valid&&this.stage.renderer.addQuad({alpha:I,clippingRect:r,colorBl:F,colorBr:F,colorTl:F,colorTr:F,width:((Y=(W=l[2].texture)==null?void 0:W.dimensions)==null?void 0:Y.width)||0,height:((xe=(ee=l[2].texture)==null?void 0:ee.dimensions)==null?void 0:xe.height)||0,texture:l[2].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:C,tx:n.tx,ty:n.ty-m+c.y1+E+E,ta:n.ta,tb:n.tb,tc:n.tc,td:n.td})}setIsRenderable(e,n){var r;super.setIsRenderable(e,n),(r=e.canvasPages)==null||r.forEach(i=>{var o;(o=i.texture)==null||o.setRenderableOwner(e,n)})}destroyState(e){var n;super.destroyState(e),(n=e.canvasPages)==null||n.forEach(r=>{var i;(i=r.texture)==null||i.setRenderableOwner(e,!1)})}invalidateVisibleWindowCache(e){e.visibleWindow.valid=!1,this.setStatus(e,"loading"),this.scheduleUpdateState(e)}invalidateLayoutCache(e){e.renderInfo=void 0,e.visibleWindow.valid=!1,this.setStatus(e,"loading"),this.scheduleUpdateState(e)}onFontLoaded(e,n){var r;n!==((r=e.fontInfo)==null?void 0:r.cssString)||!e.fontInfo||(e.fontInfo.loaded=!0,this.scheduleUpdateState(e))}onFontLoadError(e,n,r){var i;n!==((i=e.fontInfo)==null?void 0:i.cssString)||!e.fontInfo||(e.fontInfo.loaded=!0,console.error(`CanvasTextRenderer: Error loading font '${e.fontInfo.cssString}'`,r),this.scheduleUpdateState(e))}}class Gi extends Zt{constructor(t){super({renderer:t,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"}]})}bindTextures(t){const{glw:e}=this;e.activeTexture(0),e.bindTexture(t[0].ctxTexture)}}f(Gi,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRESICISON_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;
      attribute vec4 a_color;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;


      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
        vec2 normalized = a_position * u_pixelRatio;
        vec2 screenSpace = vec2(2.0 / u_resolution.x, -2.0 / u_resolution.y);

        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;

        gl_Position = vec4(normalized.x * screenSpace.x - 1.0, normalized.y * -abs(screenSpace.y) + 1.0, 0.0, 1.0);
        gl_Position.y = -sign(screenSpace.y) * gl_Position.y;
      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRESICISON_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform sampler2D u_texture;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
          vec4 color = texture2D(u_texture, v_textureCoordinate);
          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);
      }
    `});class qi extends Zt{constructor(e){super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color","a_textureIndex"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_textures[0]",uniform:"uniform1iv"}]});f(this,"supportsIndexedTextures",!0)}bindTextures(e){const{renderer:n,glw:r}=this;if(e.length>n.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS)throw new Error(`DefaultShaderBatched: Cannot bind more than ${n.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS} textures`);e.forEach((o,l)=>{r.activeTexture(l),r.bindTexture(o.ctxTexture)});const i=Array.from(Array(e.length).keys());this.setUniform("u_textures[0]",i)}}f(qi,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRESICISON_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_textureCoordinate;
      attribute vec2 a_position;
      attribute vec4 a_color;
      attribute float a_textureIndex;
      attribute float a_depth;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;
      varying float v_textureIndex;

      void main(){
        vec2 normalized = a_position * u_pixelRatio / u_resolution;
        vec2 zero_two = normalized * 2.0;
        vec2 clip_space = zero_two - 1.0;

        // pass to fragment
        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;
        v_textureIndex = a_textureIndex;

        // flip y
        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
      }
    `,fragment:e=>`
      #define txUnits ${e}
      # ifdef GL_FRAGMENT_PRESICISON_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform sampler2D u_image;
      uniform sampler2D u_textures[txUnits];

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;
      varying float v_textureIndex;

      vec4 sampleFromTexture(sampler2D textures[${e}], int idx, vec2 uv) {
        ${Array.from(Array(e).keys()).map(n=>`
          ${n!==0?"else ":""}if (idx == ${n}) {
            return texture2D(textures[${n}], uv);
          }
        `).join("")}
        return texture2D(textures[0], uv);
      }

      void main(){
        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);
      }
    `});const Rn=new Map,ta=(s,t)=>{const e=JSON.stringify(s);if(Rn.has(e))return Rn.get(e);const n=(s??[]).map(r=>({type:r.type,props:t[r.type].resolveDefaults(r.props||{})}));return Rn.set(e,n),n},Je=class Je extends Zt{constructor(e,n,r){const i=Je.createShader(n,r);super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_alpha",uniform:"uniform1f"},...i.uniforms],shaderSources:{vertex:i.vertex,fragment:i.fragment}});f(this,"effects",[]);this.effects=i.effects,this.calculateProps=Vi(this.calculateProps.bind(this))}bindTextures(e){const{glw:n}=this;n.activeTexture(0),n.bindTexture(e[0].ctxTexture)}calculateProps(e){const n=this.renderer.shManager.getRegisteredEffects(),r=[];return e==null||e.forEach((i,o)=>{const l=this.effects[o],a=n[l.name],u=i.props??{},c=l.uniformInfo;Object.keys(u).forEach(h=>{const p=a.uniforms[h],m=c[h];let x=p.validator?p.validator(u[h],u):u[h];Array.isArray(x)&&(x=new Float32Array(x)),r.push({name:m.name,value:x})})}),r}bindProps(e){this.calculateProps(e.effects).forEach(r=>{this.setUniform(r.name,r.value)})}canBatchShaderProps(e,n){if(e.$dimensions.width!==n.$dimensions.width||e.$dimensions.height!==n.$dimensions.height||e.effects.length!==n.effects.length)return!1;const r=e.effects.length;let i=0;for(;i<r;i++){const o=e.effects[i],l=n.effects[i];if(o.type!==l.type)return!1;for(const a in o.props)if(l.props&&!l.props[a]||o.props[a]!==l.props[a])return!1}return!0}static createShader(e,n){const r={},i={};let o="";const l=[],a=[],u=e.effects.map(x=>{const v=n[x.type],_=v.getEffectKey(x.props||{});r[_]=r[_]?++r[_]:1;const w=r[_];w===1&&a.push({key:_,type:x.type,props:x.props});const R=new v({ref:`${_}${w===1?"":w}`,target:_,props:x.props});return o+=R.declaredUniforms,l.push(...Object.values(R.uniformInfo)),R});let c="";a==null||a.forEach(x=>{const v=n[x.type],_=v.resolveDefaults(x.props??{}),w=[];for(const F in v.methods){let K=F;const X=v.methods[F];i[F]&&i[F]!==X&&(K=Je.resolveMethodDuplicate(F,X,i)),i[K]=X.replace("function",K),w.push({m:F,cm:K})}let R=v.onShaderMask instanceof Function?v.onShaderMask(_):v.onShaderMask,E=v.onColorize instanceof Function?v.onColorize(_):v.onColorize,C=v.onEffectMask instanceof Function?v.onEffectMask(_):v.onEffectMask;w.forEach(F=>{const{m:K,cm:X}=F,Z=new RegExp(`\\$${K}`,"g");R&&(R=R.replace(Z,X)),E&&(E=E.replace(Z,X)),C&&(C=C.replace(Z,X))});const A=v.getMethodParameters(v.uniforms,_),I=A.length>0?`, ${A}`:"";R&&(c+=`
        float fx_${x.key}_onShaderMask(float shaderMask ${I}) {
          ${R}
        }
        `),E&&(c+=`
          vec4 fx_${x.key}_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor${I}) {
            ${E}
          }
        `),C&&(c+=`
          vec4 fx_${x.key}_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor${I}) {
            ${C}
          }
        `)});let h="";for(const x in i)h+=i[x];let p="mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))",m=`

    `;for(let x=0;x<u.length;x++){const v=u[x],_=v.passParameters.length>0?`, ${v.passParameters}`:"",w=n[v.name];w.onShaderMask&&(m+=`
        shaderMask = fx_${v.target}_onShaderMask(shaderMask ${_});
        `),w.onColorize&&(m+=`
        maskColor = fx_${v.target}_onColorize(shaderMask, maskColor, shaderColor${_});
        `),w.onEffectMask&&(p=`fx_${v.target}_onEffectMask(shaderMask, maskColor, shaderColor${_})`);const R=u[x+1];(R===void 0||n[R.name].onEffectMask)&&(m+=`
          shaderColor = ${p};
        `)}return{effects:u,uniforms:l,fragment:Je.fragment(o,h,c,m),vertex:Je.vertex()}}static resolveMethodDuplicate(e,n,r,i=0){const o=e+(i>0?i:"");return r[o]&&r[o]!==n?this.resolveMethodDuplicate(e,n,r,++i):o}static resolveDefaults(e,n){return{effects:ta(e.effects,n),$dimensions:{width:0,height:0},$alpha:0}}static makeCacheKey(e,n){var i;let r="";return(i=e.effects)==null||i.forEach(o=>{const a=n[o.type].getEffectKey(o.props||{});r+=`,${a}`}),`DynamicShader${r}`}};f(Je,"z$__type__Props"),f(Je,"vertex",()=>`
    # ifdef GL_FRAGMENT_PRESICISON_HIGH
    precision highp float;
    # else
    precision mediump float;
    # endif

    attribute vec2 a_textureCoordinate;
    attribute vec2 a_position;
    attribute vec4 a_color;
    attribute float a_textureIndex;

    uniform vec2 u_resolution;
    uniform float u_pixelRatio;

    varying vec4 v_color;
    varying vec2 v_textureCoordinate;
    varying float v_textureIndex;

    void main(){
      vec2 normalized = a_position * u_pixelRatio / u_resolution;
      vec2 zero_two = normalized * 2.0;
      vec2 clip_space = zero_two - 1.0;

      // pass to fragment
      v_color = a_color;
      v_textureCoordinate = a_textureCoordinate;
      v_textureIndex = a_textureIndex;

      // flip y
      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
    }
  `),f(Je,"fragment",(e,n,r,i)=>`
    # ifdef GL_FRAGMENT_PRESICISON_HIGH
    precision highp float;
    # else
    precision mediump float;
    # endif

    #define PI 3.14159265359

    uniform vec2 u_resolution;
    uniform vec2 u_dimensions;
    uniform float u_alpha;
    uniform float u_radius;
    uniform sampler2D u_texture;
    uniform float u_pixelRatio;

    ${e}

    varying vec4 v_color;
    varying vec2 v_textureCoordinate;

    ${n}

    ${r}

    void main() {
      vec2 p = v_textureCoordinate.xy * u_dimensions - u_dimensions * 0.5;
      vec2 d = abs(p) - (u_dimensions) * 0.5;
      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));

      vec4 shaderColor = vec4(0.0);
      float shaderMask = lng_DefaultMask;

      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;

      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));

      ${i}

      gl_FragColor = shaderColor * u_alpha;
    }
  `);let jt=Je;class Dn extends Zt{constructor(t){super({renderer:t,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_radius",uniform:"uniform1f"}]})}static resolveDefaults(t){return{radius:t.radius||10,$dimensions:{width:0,height:0}}}bindTextures(t){const{glw:e}=this;e.activeTexture(0),e.bindTexture(t[0].ctxTexture)}bindProps(t){this.setUniform("u_radius",t.radius)}canBatchShaderProps(t,e){return t.radius===e.radius&&t.$dimensions.width===e.$dimensions.width&&t.$dimensions.height===e.$dimensions.height}}f(Dn,"z$__type__Props"),f(Dn,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRESICISON_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;
      attribute vec4 a_color;
      attribute float a_textureIndex;
      attribute float a_depth;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
        vec2 normalized = a_position * u_pixelRatio / u_resolution;
        vec2 zero_two = normalized * 2.0;
        vec2 clip_space = zero_two - 1.0;

        // pass to fragment
        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;

        // flip y
        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRESICISON_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform vec2 u_dimensions;
      uniform float u_radius;
      uniform sampler2D u_texture;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      float boxDist(vec2 p, vec2 size, float radius){
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }

      float fillMask(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }

      void main() {
        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;
        vec2 halfDimensions = u_dimensions * 0.5;

        float d = boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);
        gl_FragColor = mix(vec4(0.0), color, fillMask(d));
      }
    `});const sa=new Float32Array([1,0,0,0,1,0,0,0,1]),an=class an extends Zt{constructor(t){super({renderer:t,attributes:["a_position","a_textureCoordinate"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_transform",uniform:"uniformMatrix3fv"},{name:"u_scrollY",uniform:"uniform1f"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_color",uniform:"uniform4fv"},{name:"u_size",uniform:"uniform1f"},{name:"u_distanceRange",uniform:"uniform1f"},{name:"u_debug",uniform:"uniform1i"}]})}bindTextures(t){const{glw:e}=this;e.activeTexture(0),e.bindTexture(t[0].ctxTexture)}bindProps(t){const e=an.resolveDefaults(t);for(const n in e)if(n==="transform")this.setUniform("u_transform",!1,e[n]);else if(n==="scrollY")this.setUniform("u_scrollY",e[n]);else if(n==="color"){const r=qe(e.color);this.setUniform("u_color",r)}else n==="size"?this.setUniform("u_size",e[n]):n==="distanceRange"?this.setUniform("u_distanceRange",e[n]):n==="debug"&&this.setUniform("u_debug",e[n]?1:0)}static resolveDefaults(t={}){return{transform:t.transform??sa,scrollY:t.scrollY??0,color:t.color??4294967295,size:t.size??16,distanceRange:t.distanceRange??1,debug:t.debug??!1}}};f(an,"shaderSources",{vertex:`
      // an attribute is an input (in) to a vertex shader.
      // It will receive data from a buffer
      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;

      uniform vec2 u_resolution;
      uniform mat3 u_transform;
      uniform float u_scrollY;
      uniform float u_pixelRatio;
      uniform float u_size;

      varying vec2 v_texcoord;

      void main() {
        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);
        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;

        // Calculate screen space with pixel ratio
        vec2 screenSpace = (transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1);

        gl_Position = vec4(screenSpace, 0.0, 1.0);
        v_texcoord = a_textureCoordinate;

      }
    `,fragment:`
      precision highp float;

      uniform vec4 u_color;
      uniform sampler2D u_texture;
      uniform float u_distanceRange;
      uniform float u_pixelRatio;
      uniform int u_debug;

      varying vec2 v_texcoord;

      float median(float r, float g, float b) {
          return max(min(r, g), min(max(r, g), b));
      }

      void main() {
          vec3 sample = texture2D(u_texture, v_texcoord).rgb;
          if (u_debug == 1) {
            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);
            return;
          }
          float scaledDistRange = u_distanceRange * u_pixelRatio;
          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);
          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;

          // Build the final color.
          // IMPORTANT: We must premultiply the color by the alpha value before returning it.
          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);
      }
    `});let Hn=an;class kt extends Te{constructor(){super(...arguments);f(this,"name","radius")}static getEffectKey(){return"radius"}static resolveDefaults(e){return{radius:e.radius??10}}}f(kt,"z$__type__Props"),f(kt,"uniforms",{radius:{value:0,method:"uniform4fv",type:"vec4",validator:e=>{let n=e;return Array.isArray(n)?n.length===2?n=[n[0],n[1],n[0],n[1]]:n.length===3?n=[n[0],n[1],n[2],n[0]]:n.length!==4&&(n=[n[0],n[0],n[0],n[0]]):typeof n=="number"&&(n=[n,n,n,n]),n}}}),f(kt,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,boxDist:`
      float function(vec2 p, vec2 size, float radius) {
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }
    `}),f(kt,"onShaderMask",`
  vec2 halfDimensions = u_dimensions * 0.5;
  float r = radius[0] * step(v_textureCoordinate.x, 0.5) * step(v_textureCoordinate.y, 0.5);
  r = r + radius[1] * step(0.5, v_textureCoordinate.x) * step(v_textureCoordinate.y, 0.5);
  r = r + radius[2] * step(0.5, v_textureCoordinate.x) * step(0.5, v_textureCoordinate.y);
  r = r + radius[3] * step(v_textureCoordinate.x, 0.5) * step(0.5, v_textureCoordinate.y);
  return $boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);
  `),f(kt,"onEffectMask",`
  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));
  `);class is extends Te{constructor(){super(...arguments);f(this,"name","border")}static getEffectKey(){return"border"}static resolveDefaults(e){return{width:e.width??10,color:e.color??4294967295}}}f(is,"z$__type__Props"),f(is,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>qe(e),method:"uniform4fv",type:"vec4"}}),f(is,"onEffectMask",`
  float intR = shaderMask + 1.0;
  float mask = clamp(intR + width, 0.0, 1.0) - clamp(intR, 0.0, 1.0);
  return mix(shaderColor, mix(shaderColor, maskColor, maskColor.a), mask);
  `),f(is,"onColorize",`
    return color;
  `);const ut=class ut extends Te{constructor(){super(...arguments);f(this,"name","linearGradient")}static getEffectKey(e){return`linearGradient${e.colors.length}`}static resolveDefaults(e){const n=e.colors??[4278190080,4294967295];let r=e.stops||[];if(r.length===0||r.length!==n.length){const i=n.length;let o=0;const l=r;for(;o<i;o++)r[o]?(l[o]=r[o],r[o-1]===void 0&&l[o-2]!==void 0&&(l[o-1]=l[o-2]+(r[o]-l[o-2])/2)):l[o]=o*(1/(n.length-1));r=l}return{colors:n,stops:r,angle:e.angle??0}}};f(ut,"z$__type__Props"),f(ut,"uniforms",{angle:{value:0,method:"uniform1f",type:"float"},colors:{value:4294967295,validator:e=>e.map(r=>qe(r)).reduce((r,i)=>r.concat(i),[]),size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),f(ut,"methods",{fromLinear:`
      vec4 function(vec4 linearRGB) {
        vec4 higher = vec4(1.055)*pow(linearRGB, vec4(1.0/2.4)) - vec4(0.055);
        vec4 lower = linearRGB * vec4(12.92);
        return mix(higher, lower, 1.0);
      }
    `,toLinear:`
      vec4 function(vec4 sRGB) {
        vec4 higher = pow((sRGB + vec4(0.055))/vec4(1.055), vec4(2.4));
        vec4 lower = sRGB/vec4(12.92);
        return mix(higher, lower, 1.0);
      }
    `,calcPoint:`
      vec2 function(float d, float angle) {
        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);
      }
    `}),f(ut,"ColorLoop",e=>{let n="";for(let r=2;r<e;r++)n+=`colorOut = mix(colorOut, colors[${r}], clamp((dist - stops[${r-1}]) / (stops[${r}] - stops[${r-1}]), 0.0, 1.0));`;return n}),f(ut,"onColorize",e=>{const n=e.colors.length||1;return`
      float a = angle - (PI / 180.0 * 90.0);
      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));
      vec2 f = $calcPoint(lineDist * 0.5, a);
      vec2 t = $calcPoint(lineDist * 0.5, a + PI);
      vec2 gradVec = t - f;
      float dist = dot(v_textureCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);

      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);
      vec4 colorOut = $fromLinear(mix($toLinear(colors[0]), $toLinear(colors[1]), stopCalc));
      ${ut.ColorLoop(n)}
      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));
    `});let Un=ut;class Wn extends Te{constructor(){super(...arguments);f(this,"name","grayscale")}static getEffectKey(){return"grayscale"}static resolveDefaults(e){return{amount:e.amount??1}}}f(Wn,"uniforms",{amount:{value:1,method:"uniform1f",type:"float"}}),f(Wn,"onColorize",`
    float grayness = 0.2 * maskColor.r + 0.6 * maskColor.g + 0.2 * maskColor.b;
    return vec4(amount * vec3(grayness) + (1.0 - amount) * maskColor.rgb, maskColor.a);
  `);class Ot extends Te{constructor(){super(...arguments);f(this,"name","borderRight")}static getEffectKey(){return"borderRight"}static resolveDefaults(e){return{width:e.width??10,color:e.color??4294967295}}}f(Ot,"z$__type__Props"),f(Ot,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>qe(e),method:"uniform4fv",type:"vec4"}}),f(Ot,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),f(Ot,"onEffectMask",`
  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),f(Ot,"onColorize",`
    return color;
  `);class Bt extends Te{constructor(){super(...arguments);f(this,"name","borderTop")}static getEffectKey(){return"borderTop"}static resolveDefaults(e){return{width:e.width??10,color:e.color??4294967295}}}f(Bt,"z$__type__Props"),f(Bt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>qe(e),method:"uniform4fv",type:"vec4"}}),f(Bt,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),f(Bt,"onEffectMask",`
  vec2 pos = vec2(0.0, width * 0.5);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),f(Bt,"onColorize",`
    return color;
  `);class zt extends Te{constructor(){super(...arguments);f(this,"name","borderBottom")}static getEffectKey(){return"borderBottom"}static resolveDefaults(e){return{width:e.width??10,color:e.color??4294967295}}}f(zt,"z$__type__Props"),f(zt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>qe(e),method:"uniform4fv",type:"vec4"}}),f(zt,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),f(zt,"onEffectMask",`
  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),f(zt,"onColorize",`
    return color;
  `);class $t extends Te{constructor(){super(...arguments);f(this,"name","borderLeft")}static getEffectKey(){return"borderLeft"}static resolveDefaults(e){return{width:e.width??10,color:e.color??4294967295}}}f($t,"z$__type__Props"),f($t,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>qe(e),method:"uniform4fv",type:"vec4"}}),f($t,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),f($t,"onEffectMask",`
  vec2 pos = vec2(width * 0.5, 0.0);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),f($t,"onColorize",`
    return color;
  `);class os extends Te{constructor(){super(...arguments);f(this,"name","glitch")}static getEffectKey(e){return"glitch"}static resolveDefaults(e){return{amplitude:e.amplitude??.2,narrowness:e.narrowness??4,blockiness:e.blockiness??2,minimizer:e.minimizer??8,time:e.time??Date.now()}}}f(os,"z$__type__Props"),f(os,"uniforms",{amplitude:{value:0,method:"uniform1f",type:"float"},narrowness:{value:0,method:"uniform1f",type:"float"},blockiness:{value:0,method:"uniform1f",type:"float"},minimizer:{value:0,method:"uniform1f",type:"float"},time:{value:0,method:"uniform1f",validator:e=>(Date.now()-e)%1e3,type:"float"}}),f(os,"methods",{rand:`
      float function(vec2 p, float time) {
        float t = floor(time * 20.) / 10.;
        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);
      }
    `,noise:`
      float function(vec2 uv, float blockiness, float time) {
        vec2 lv = fract(uv);
        vec2 id = floor(uv);

        float n1 = rand(id, time);
        float n2 = rand(id+vec2(1,0), time);
        float n3 = rand(id+vec2(0,1), time);
        float n4 = rand(id+vec2(1,1), time);
        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);
        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);
      }
    `,fbm:`
      float function(vec2 uv, int count, float blockiness, float complexity, float time) {
        float val = 0.0;
        float amp = 0.5;
        const int MAX_ITERATIONS = 10;

        for(int i = 0; i < MAX_ITERATIONS; i++) {
          if(i >= count) {break;}
          val += amp * noise(uv, blockiness, time);
          amp *= 0.5;
          uv *= complexity;
        }
        return val;
      }
    `}),f(os,"onColorize",`
    vec2 uv = v_textureCoordinate.xy;
    float aspect = u_dimensions.x / u_dimensions.y;
    vec2 a = vec2(uv.x * aspect , uv.y);
    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));

    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);
    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);
    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);
    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);

    vec3 f = vec3(colR, colG, colB);
    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);
  `);class Gs extends Te{constructor(){super(...arguments);f(this,"name","fadeOut")}static getEffectKey(){return"fadeOut"}static resolveDefaults(e){return{fade:e.fade??10}}}f(Gs,"z$__type__Props"),f(Gs,"uniforms",{fade:{value:0,method:"uniform4fv",type:"vec4",validator:e=>{let n=e;return Array.isArray(n)?n.length===2?n=[n[0],n[1],n[0],n[1]]:n.length===3?n=[n[0],n[1],n[2],n[0]]:n.length!==4&&(n=[n[0],n[0],n[0],n[0]]):typeof n=="number"&&(n=[n,n,n,n]),n}}}),f(Gs,"onColorize",`
  vec2 point = v_textureCoordinate.xy * u_dimensions.xy;
  vec2 pos1;
  vec2 pos2;
  vec2 d;
  float c;
  vec4 result = maskColor;


  if(fade[0] > 0.0) {
    pos1 = vec2(point.x, point.y);
    pos2 = vec2(point.x, point.y + fade[0]);
    d = pos2 - pos1;
    c = dot(pos1, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[1] > 0.0) {
    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_textureCoordinate.y);
    pos2 = vec2(point.x - u_dimensions.x, v_textureCoordinate.y);
    d = pos1 - pos2;
    c = dot(pos2, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[2] > 0.0) {
    pos1 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y - fade[2]);
    pos2 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y);
    d = pos1 - pos2;
    c = dot(pos2, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[3] > 0.0) {
    pos1 = vec2(point.x, point.y);
    pos2 = vec2(point.x + fade[3], point.y);
    d = pos2 - pos1;
    c = dot(pos1, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  return result;
  `);const Rt=class Rt extends Te{constructor(){super(...arguments);f(this,"name","radialGradient")}static getEffectKey(e){return`radialGradient${e.colors.length}`}static resolveDefaults(e){const n=e.colors??[4278190080,4294967295];let r=e.stops||[];if(r.length===0||r.length!==n.length){const i=n.length;let o=0;const l=r;for(;o<i;o++)r[o]?(l[o]=r[o],r[o-1]===void 0&&l[o-2]!==void 0&&(l[o-1]=l[o-2]+(r[o]-l[o-2])/2)):l[o]=o*(1/(n.length-1));r=l}return{colors:n,stops:r,width:e.width??0,height:e.height??e.width??0,pivot:e.pivot??[.5,.5]}}};f(Rt,"z$__type__Props"),f(Rt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},pivot:{value:[.5,.5],method:"uniform2fv",type:"vec2"},colors:{value:4294967295,validator:e=>e.map(r=>qe(r)).reduce((r,i)=>r.concat(i),[]),size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),f(Rt,"ColorLoop",e=>{let n="";for(let r=2;r<e;r++)n+=`colorOut = mix(colorOut, colors[${r}], clamp((dist - stops[${r-1}]) / (stops[${r}] - stops[${r-1}]), 0.0, 1.0));`;return n}),f(Rt,"onColorize",e=>{const n=e.colors.length||1;return`
      vec2 point = v_textureCoordinate.xy * u_dimensions;
      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);

      float dist = length((point - projection) / vec2(width, height));

      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);
      vec4 colorOut = mix(colors[0], colors[1], stopCalc);
      ${Rt.ColorLoop(n)}
      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));
    `});let Yn=Rt;class Dt extends Te{constructor(){super(...arguments);f(this,"name","radialProgress")}static getEffectKey(){return"radialProgress"}static resolveDefaults(e){return{width:e.width??10,progress:e.progress??.5,offset:e.offset??0,range:e.range??Math.PI*2,rounded:e.rounded??!1,radius:e.radius??1,color:e.color??4294967295}}}f(Dt,"z$__type__Props"),f(Dt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},progress:{value:.5,method:"uniform1f",type:"float"},offset:{value:0,method:"uniform1f",type:"float"},range:{value:0,method:"uniform1f",type:"float"},rounded:{value:0,method:"uniform1f",type:"float",validator:e=>e?1:0},radius:{value:1,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>qe(e),method:"uniform4fv",type:"vec4"}}),f(Dt,"methods",{rotateUV:`
    vec2 function(vec2 uv, float d) {
      float s = sin(d);
      float c = cos(d);
      mat2 rotMatrix = mat2(c, -s, s, c);
      return uv * rotMatrix;
    }
    `,drawDot:`
    float function(vec2 uv, vec2 p, float r) {
      uv += p;
      float circle = length(uv) - r;
      return clamp(-circle, 0.0, 1.0);
    }
    `}),f(Dt,"onEffectMask",`
    float outerRadius = radius * u_dimensions.y * 0.5;

    float endAngle = range * progress - 0.0005;

    vec2 uv = v_textureCoordinate.xy * u_dimensions.xy - u_dimensions * 0.5;

    uv = $rotateUV(uv, -(offset));
    float linewidth = width * u_pixelRatio;
    float circle = length(uv) - (outerRadius - linewidth) ;
    circle = abs(circle) - linewidth;
    circle = clamp(-circle, 0.0, 1.0);

    float angle = (atan(uv.x, -uv.y) / 3.14159265359 * 0.5);
    float p = endAngle / (PI * 2.);

    circle *= step(fract(angle), fract(p));

    circle = rounded < 1. ? circle : max(circle, $drawDot(uv, vec2(0, outerRadius - linewidth), linewidth));
    circle = rounded < 1. ? circle : max(circle, $drawDot($rotateUV(uv, -(endAngle)), vec2(0, outerRadius - linewidth), linewidth));

    return mix(shaderColor, maskColor, circle);
  `),f(Dt,"onColorize",`
    return color;
  `);class Ht extends Te{constructor(){super(...arguments);f(this,"name","holePunch")}static getEffectKey(){return"holePunch"}static resolveDefaults(e){return{x:e.x||0,y:e.y||0,width:e.width||50,height:e.height||50,radius:e.radius??0}}}f(Ht,"z$__type__Props"),f(Ht,"uniforms",{x:{value:0,method:"uniform1f",type:"float"},y:{value:0,method:"uniform1f",type:"float"},width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},radius:{value:0,method:"uniform4fv",type:"vec4",validator:e=>{let n=e;return Array.isArray(n)?n.length===2?n=[n[0],n[1],n[0],n[1]]:n.length===3?n=[n[0],n[1],n[2],n[0]]:n.length!==4&&(n=[n[0],n[0],n[0],n[0]]):typeof n=="number"&&(n=[n,n,n,n]),n}}}),f(Ht,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,boxDist:`
      float function(vec2 p, vec2 size, float radius) {
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }
    `}),f(Ht,"onShaderMask",`
  vec2 halfDimensions = u_dimensions * 0.5;
  vec2 size = vec2(width, height) * 0.5;
  vec2 basePos = v_textureCoordinate.xy * u_dimensions.xy - vec2(x, y);
  vec2 pos = basePos - size;
  float r = radius[0] * step(pos.x, 0.5) * step(pos.y, 0.5);
  r = r + radius[1] * step(0.5, pos.x) * step(pos.y, 0.5);
  r = r + radius[2] * step(0.5, pos.x) * step(0.5, pos.y);
  r = r + radius[3] * step(pos.x, 0.5) * step(0.5, pos.y);
  return $boxDist(pos, size, r);
  `),f(Ht,"onEffectMask",`
  return mix(maskColor, vec4(0.0), $fillMask(shaderMask));
  `);const Qi="RoundedRectangle";class Zi extends Il{constructor(e){super();f(this,"shType");this.shType=e,e!==Qi&&console.warn("Unsupported shader:",e)}bindRenderOp(){}bindProps(){}attach(){}detach(){}}class na{constructor(){f(this,"shCache",new Map);f(this,"shConstructors",{});f(this,"attachedShader",null);f(this,"effectConstructors",{});f(this,"renderer");this.registerShaderType("DefaultShader",Gi),this.registerShaderType("DefaultShaderBatched",qi),this.registerShaderType("RoundedRectangle",Dn),this.registerShaderType("DynamicShader",jt),this.registerShaderType("SdfShader",Hn),this.registerEffectType("border",is),this.registerEffectType("borderBottom",zt),this.registerEffectType("borderLeft",$t),this.registerEffectType("borderRight",Ot),this.registerEffectType("borderTop",Bt),this.registerEffectType("fadeOut",Gs),this.registerEffectType("linearGradient",Un),this.registerEffectType("radialGradient",Yn),this.registerEffectType("grayscale",Wn),this.registerEffectType("glitch",os),this.registerEffectType("radius",kt),this.registerEffectType("radialProgress",Dt),this.registerEffectType("holePunch",Ht)}registerShaderType(t,e){this.shConstructors[t]=e}registerEffectType(t,e){this.effectConstructors[t]=e}getRegisteredEffects(){return this.effectConstructors}getRegisteredShaders(){return this.shConstructors}loadShader(t,e){if(!this.renderer)throw new Error("Renderer is not been defined");const n=this.shConstructors[t];if(!n)throw new Error(`Shader type "${t}" is not registered`);if(this.renderer.mode==="canvas"&&n.prototype instanceof Zt)return{shader:new Zi(t),props:e};if(t==="DynamicShader")return this.loadDynamicShader(e);const r=n.resolveDefaults(e),i=n.makeCacheKey(r)||n.name;if(i&&this.shCache.has(i))return{shader:this.shCache.get(i),props:r};const o=new n(this.renderer,e);return i&&this.shCache.set(i,o),{shader:o,props:r}}loadDynamicShader(t){if(!this.renderer)throw new Error("Renderer is not been defined");const e=jt.resolveDefaults(t,this.effectConstructors),n=jt.makeCacheKey(e,this.effectConstructors);if(n&&this.shCache.has(n))return{shader:this.shCache.get(n),props:e};const r=new jt(this.renderer,t,this.effectConstructors);return n&&this.shCache.set(n,r),{shader:r,props:e}}useShader(t){this.attachedShader!==t&&(this.attachedShader&&this.attachedShader.detach(),t.attach(),this.attachedShader=t)}}const ra=24;function ia(s,t,e,n,r,i,o,l,a){const u=Math.min(Math.max(o.firstLineIdx,0),l.length),c=0,{metrics:h}=e;H(h,"Font metrics not loaded"),H(e.data,"Font data not loaded");const p=(h.ascender-h.descender)*s;let m=0;n==="middle"?m=(t-p)/2:n==="bottom"&&(m=t-p);const x=r/i,v=e.data.common.base,w=h.ascender*s-v,R=x+w+u*t+m;if(!(a&&R>=a/i))return{sdfX:c,sdfY:R,lineIndex:u}}class ls{constructor(t,e=0){f(this,"iterator");f(this,"peekBuffer",[]);f(this,"_lastIndex");this.iterator=t,this.iterator=t,this._lastIndex=e-1,this.peekBuffer=[]}next(){const t=this.peekBuffer.length>0?this.peekBuffer.pop():this.iterator.next();return t.done?this._lastIndex=-1:this._lastIndex++,t}peek(){if(this.peekBuffer.length>0)return this.peekBuffer[0];const t=this.iterator.next();return this.peekBuffer.push(t),t}get lastIndex(){return this._lastIndex}}function*as(s,t=0){let e=t;for(;e<s.length;){const n=s.codePointAt(e);if(n===void 0)throw new Error("Invalid Unicode code point");yield n,e+=n<=65535?1:2}}function oa(s,t,e){const n=e.shapeText(t,new ls(as(s,0),0));let r=0;for(const i of n)i.mapped&&(r+=i.xAdvance);return r}function la(s,t,e,n,r,i,o,l,a,u,c,h,p,m,x,v,_,w,R){H(x,"Font face must be loaded"),H(x.loaded,"Font face must be loaded"),H(x.data,"Font face must be loaded"),H(x.shaper,"Font face must be loaded");const E=l/x.data.info.size,C=a/E,A=i/E,I=u/E,F=p[s],K=(F==null?void 0:F.codepointIndex)||0,X=(F==null?void 0:F.maxX)||0,Z=(F==null?void 0:F.maxY)||0;let G=X,le=Z,ne=t,ie=e,U=0;const W={codepointIndex:-1,bufferOffset:-1,xStart:-1},Y=x.shaper,ee={letterSpacing:I};let xe=Y.shapeText(ee,new ls(as(n,K),K)),ve,we=-1;const pe=[],nt=o/E,rt=oa(w,ee,Y);let Qe=!0;for(;Qe;){const he=(R===0||s+1<R)&&(h!=="both"||_||ie+C+x.maxCharHeight<=nt),b=he?A:A-rt;let k=0;const B=ie+x.maxCharHeight>=m.y1,D=ie<=m.y2,te=B&&D;for(;(ve=xe.next())&&!ve.done;){const J=ve.value;if(s===p.length)p.push({codepointIndex:J.cluster,maxY:le,maxX:G});else if(s>p.length)throw new Error("Unexpected lineCache length");if(J.codepoint===32||J.codepoint===10?W.codepointIndex!==-1&&(W.codepointIndex=-1,k=ne):W.codepointIndex===-1&&(W.codepointIndex=J.cluster,W.bufferOffset=U,W.xStart=k),J.mapped){const d=ne+J.xOffset+J.width;if(h!=="none"&&d>=b&&W.codepointIndex!==-1&&W.xStart>0)if(he){xe=Y.shapeText(ee,new ls(as(n,W.codepointIndex),W.codepointIndex)),U=W.bufferOffset;break}else xe=Y.shapeText(ee,new ls(as(w,0),0)),ne=W.xStart,U=W.bufferOffset,h="none";else{const g=ne+J.xOffset,y=ie+J.yOffset;if(te){we===-1&&(we=U);const S=x.getAtlasEntry(J.glyphId),T=S.x/x.data.common.scaleW,L=S.y/x.data.common.scaleH,z=S.width/x.data.common.scaleW,P=S.height/x.data.common.scaleH;c[U++]=g,c[U++]=y,c[U++]=T,c[U++]=L,c[U++]=g+J.width,c[U++]=y,c[U++]=T+z,c[U++]=L,c[U++]=g,c[U++]=y+J.height,c[U++]=T,c[U++]=L+P,c[U++]=g+J.width,c[U++]=y+J.height,c[U++]=T+z,c[U++]=L+P}le=Math.max(le,y+J.height),G=Math.max(G,g+J.width),ne+=J.xAdvance}}else if(J.codepoint===10){if(he)break;xe=Y.shapeText(ee,new ls(as(w,0),0)),h="none"}}we!==-1&&(pe.push({bufferStart:we,bufferEnd:U}),we=-1),ne=0,ie+=C,s++,W.codepointIndex=-1,k=0,!v&&h==="both"&&ie>m.y2||ve&&ve.done?Qe=!1:he||(Qe=!1)}if(r==="center"){const he=h==="none"?G:A;for(let b=0;b<pe.length;b++){const k=pe[b],B=c[k.bufferEnd-4]-c[k.bufferStart],D=(he-B)/2;for(let te=k.bufferStart;te<k.bufferEnd;te+=4)c[te]+=D}}else if(r==="right"){const he=h==="none"?G:A;for(let b=0;b<pe.length;b++){const k=pe[b],B=k.bufferEnd===k.bufferStart?0:c[k.bufferEnd-4]-c[k.bufferStart],D=he-B;for(let te=k.bufferStart;te<k.bufferEnd;te+=4)c[te]+=D}}return H(ve),{bufferNumFloats:U,bufferNumQuads:U/16,layoutNumCharacters:ve.done?n.length-K:ve.value.cluster-K+1,fullyProcessed:!!ve.done,maxX:G,maxY:le,numLines:p.length}}function aa(s,t){return Math.ceil(s/t)*t}function ca(s,t){return Math.floor(s/t)*t}function ua(s,t,e,n,r,i,o,l){const{screen:a,sdf:u}=s;if(!El(o))a.x1=0,a.y1=0,a.x2=0,a.y2=0,u.x1=0,u.y1=0,u.x2=0,u.y2=0,s.numLines=0,s.firstLineIdx=0;else{const c=o.x1-t,h=c+(o.x2-o.x1),p=o.y1-e+n,m=ca(p-i,r||1),x=aa(p+(o.y2-o.y1)+i,r||1);a.x1=c,a.y1=m,a.x2=h,a.y2=x,u.x1=c/l,u.y1=m/l,u.x2=h/l,u.y2=x/l,s.numLines=Math.ceil((x-m)/r),s.firstLineIdx=r?Math.floor(m/r):0}s.valid=!0}const ha={x:0,y:0,width:0,height:0};class fa extends Xi{constructor(e){super(e);f(this,"ssdfFontFamilies",{});f(this,"msdfFontFamilies",{});f(this,"fontFamilyArray",[this.ssdfFontFamilies,this.msdfFontFamilies]);f(this,"sdfShader");f(this,"rendererBounds");this.sdfShader=this.stage.shManager.loadShader("SdfShader").shader,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(e,n)=>{e.props.fontFamily=n,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontWeight:(e,n)=>{e.props.fontWeight=n,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontStyle:(e,n)=>{e.props.fontStyle=n,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontStretch:(e,n)=>{e.props.fontStretch=n,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontSize:(e,n)=>{e.props.fontSize=n,this.invalidateLayoutCache(e)},text:(e,n)=>{e.props.text=n,this.invalidateLayoutCache(e)},textAlign:(e,n)=>{e.props.textAlign=n,this.invalidateLayoutCache(e)},color:(e,n)=>{e.props.color=n},x:(e,n)=>{e.props.x=n,e.elementBounds.valid&&(this.setElementBoundsX(e),!e.renderWindow.valid&&Sn(e.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(e))},y:(e,n)=>{e.props.y=n,e.elementBounds.valid&&(this.setElementBoundsY(e),!e.renderWindow.valid&&Sn(e.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(e))},contain:(e,n)=>{e.props.contain=n,this.invalidateLayoutCache(e)},width:(e,n)=>{e.props.width=n,e.props.contain!=="none"&&this.invalidateLayoutCache(e)},height:(e,n)=>{e.props.height=n,e.props.contain==="both"&&this.invalidateLayoutCache(e)},offsetY:(e,n)=>{e.props.offsetY=n,this.invalidateLayoutCache(e)},scrollable:(e,n)=>{e.props.scrollable=n,this.invalidateLayoutCache(e)},scrollY:(e,n)=>{e.props.scrollY=n,this.scheduleUpdateState(e)},letterSpacing:(e,n)=>{e.props.letterSpacing=n,this.invalidateLayoutCache(e)},lineHeight:(e,n)=>{e.props.lineHeight=n,e.resLineHeight=void 0,this.invalidateLayoutCache(e)},maxLines:(e,n)=>{e.props.maxLines=n,this.invalidateLayoutCache(e)},textBaseline:(e,n)=>{e.props.textBaseline=n,this.invalidateLayoutCache(e)},verticalAlign:(e,n)=>{e.props.verticalAlign=n,this.invalidateLayoutCache(e)},overflowSuffix:(e,n)=>{e.props.overflowSuffix=n,this.invalidateLayoutCache(e)},debug:(e,n)=>{e.props.debug=n}}}canRenderFont(e){const{fontFamily:n}=e;return n in this.ssdfFontFamilies||n in this.msdfFontFamilies||n==="$$SDF_FAILURE_TEST$$"}isFontFaceSupported(e){return e instanceof Or}addFontFace(e){H(e instanceof Or);const n=e.fontFamily,r=e.type==="ssdf"?this.ssdfFontFamilies:e.type==="msdf"?this.msdfFontFamilies:void 0;if(!r){console.warn(`Invalid font face type: ${e.type}`);return}let i=r[n];i||(i=new Set,r[n]=i),i.add(e)}createState(e){return{props:e,status:"initialState",updateScheduled:!1,emitter:new _t,lineCache:[],forceFullLayoutCalc:!1,renderWindow:{screen:{x1:0,y1:0,x2:0,y2:0},sdf:{x1:0,y1:0,x2:0,y2:0},firstLineIdx:0,numLines:0,valid:!1},elementBounds:{x1:0,y1:0,x2:0,y2:0,valid:!1},clippingRect:{x:0,y:0,width:0,height:0,valid:!1},bufferNumFloats:0,bufferNumQuads:0,vertexBuffer:void 0,webGlBuffers:null,bufferUploaded:!1,textH:void 0,textW:void 0,distanceRange:0,trFontFace:void 0,isRenderable:!1,resLineHeight:void 0,debugData:{updateCount:0,layoutCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,drawCount:0,bufferSize:0}}}updateState(e){let{trFontFace:n}=e;const{textH:r,lineCache:i,debugData:o,forceFullLayoutCalc:l}=e;if(o.updateCount++,e.status==="initialState"&&this.setStatus(e,"loading"),!n){if(n=this.resolveFontFace(e.props),e.trFontFace=n,!n){const Y=`SdfTextRenderer: Could not resolve font face for family: '${e.props.fontFamily}'`;console.error(Y),this.setStatus(e,"failed",new Error(Y));return}n.texture.setRenderableOwner(e,e.isRenderable)}if(!n.loaded){n.once("loaded",()=>{this.scheduleUpdateState(e)});return}H(n.data,"Font face data should be loaded"),H(n.metrics,"Font face metrics should be loaded");const{text:a,fontSize:u,x:c,y:h,contain:p,width:m,height:x,verticalAlign:v,scrollable:_,overflowSuffix:w,maxLines:R}=e.props,E=p==="both"&&_?e.props.scrollY:0,{renderWindow:C}=e,A=n.data.info.size,I=u/A;let F=e.resLineHeight;if(F===void 0){const Y=e.props.lineHeight;Y===void 0?F=Ki(n.metrics,u):F=Y,e.resLineHeight=F}const K=F/I;e.distanceRange=I*n.data.distanceField.distanceRange;const X=a.length*ra;let Z=e.vertexBuffer;(!Z||Z.length<X)&&(Z=new Float32Array(X*2));const G=e.elementBounds;if(G.valid||(this.setElementBoundsX(e),this.setElementBoundsY(e),G.valid=!0),!l&&C.valid){const Y=C.screen;if(c+Y.x1<=G.x1&&c+Y.x2>=G.x2&&h-E+Y.y1<=G.y1&&h-E+Y.y2>=G.y2){this.setStatus(e,"loaded");return}C.valid=!1,this.setStatus(e,"loading")}const{offsetY:le,textAlign:ne}=e.props;if(!C.valid){if(!Sn(G,this.rendererBounds))return;ua(C,c,h,E,F,p==="both"?G.y2-G.y1:0,G,I)}const ie=ia(A,K,n,v,le,I,C,i,r);if(!ie){this.setStatus(e,"loaded");return}const{letterSpacing:U}=e.props,W=la(ie.lineIndex,ie.sdfX,ie.sdfY,a,ne,m,x,u,F,U,Z,p,i,C.sdf,n,l,_,w,R);e.bufferUploaded=!1,e.bufferNumFloats=W.bufferNumFloats,e.bufferNumQuads=W.bufferNumQuads,e.vertexBuffer=Z,e.renderWindow=C,o.lastLayoutNumCharacters=W.layoutNumCharacters,o.bufferSize=Z.byteLength,W.fullyProcessed&&(e.textW=W.maxX*I,e.textH=W.numLines*K*I),this.setStatus(e,"loaded")}renderQuads(e,n,r,i,o,l){var G,le;if(!e.vertexBuffer)return;const a=this.stage.renderer;H(a instanceof Hi);const{fontSize:u,color:c,contain:h,scrollable:p,zIndex:m,debug:x}=e.props,v=h==="both"&&p?e.props.scrollY:0,{textW:_=0,textH:w=0,distanceRange:R,vertexBuffer:E,bufferUploaded:C,trFontFace:A,elementBounds:I}=e;let{webGlBuffers:F}=e;if(!F){const ne=a.glw,ie=4*Float32Array.BYTES_PER_ELEMENT,U=ne.createBuffer();H(U),e.webGlBuffers=new Ml([{buffer:U,attributes:{a_position:{name:"a_position",size:2,type:ne.FLOAT,normalized:!1,stride:ie,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:ne.FLOAT,normalized:!1,stride:ie,offset:2*Float32Array.BYTES_PER_ELEMENT}}}]),e.bufferUploaded=!1,H(e.webGlBuffers),F=e.webGlBuffers}if(!C){const ne=a.glw,ie=(F==null?void 0:F.getBuffer("a_textureCoordinate"))??null;ne.arrayBufferData(ie,E,ne.STATIC_DRAW),e.bufferUploaded=!0}if(H(A),p&&h==="both"){H(I.valid);const ne=Fl(I,ha);r.valid?(e.clippingRect.valid=!0,r=lr(r,ne,e.clippingRect)):(e.clippingRect.valid=!0,r=Ui(ne,e.clippingRect))}const K=new Al(a.glw,a.options,F,this.sdfShader,{transform:n.getFloatArr(),color:Ll(c,i),size:u/(((G=A.data)==null?void 0:G.info.size)||0),scrollY:v,distanceRange:R,debug:x.sdfShaderDebug},i,r,{height:w,width:_},0,m,!1,o,l),X=(le=e.trFontFace)==null?void 0:le.texture;H(X);const Z=this.stage.txManager.getCtxTexture(X);K.addTexture(Z),K.length=e.bufferNumFloats,K.numQuads=e.bufferNumQuads,a.addRenderOp(K)}setIsRenderable(e,n){var r;super.setIsRenderable(e,n),(r=e.trFontFace)==null||r.texture.setRenderableOwner(e,n)}destroyState(e){var n;super.destroyState(e),(n=e.trFontFace)==null||n.texture.setRenderableOwner(e,!1)}resolveFontFace(e){return ar.resolveFontFace(this.fontFamilyArray,e)}releaseFontFace(e){e.resLineHeight=void 0,e.trFontFace&&(e.trFontFace.texture.setRenderableOwner(e,!1),e.trFontFace=void 0)}invalidateLayoutCache(e){e.renderWindow.valid=!1,e.elementBounds.valid=!1,e.textH=void 0,e.textW=void 0,e.lineCache=[],this.setStatus(e,"loading"),this.scheduleUpdateState(e)}setElementBoundsX(e){const{x:n,contain:r,width:i}=e.props,{elementBounds:o}=e;o.x1=n,o.x2=r!=="none"?n+i:1/0}setElementBoundsY(e){const{y:n,contain:r,height:i}=e.props,{elementBounds:o}=e;o.y1=n,o.y2=r==="both"?n+i:1/0}}function da(s){return s.prototype instanceof Pl}async function pa(s,t){let e;try{console.log("Loading core extension",s),e=await import(s)}catch(r){console.error(`The core extension module at '${s}' could not be loaded.`),console.error(r);return}if(!e.default){console.error(`The core extension module at '${s}' does not have a default export.`);return}const n=e.default;if(da(n)){const r=new n;try{await r.run(t)}catch(i){console.error(`The core extension at '${s}' threw an error.`),console.error(i)}}else console.error(`The core extension at '${s}' does not extend CoreExtension.`)}function Ji(s){const t={boolean:!0,string:!0,number:!0,undefined:!0},e=Object.keys(s);for(let n=0;n<e.length;n++){const r=e[n];if(!r)continue;const i=s[r],o=typeof i;o==="string"&&i.length>2048&&(console.warn(`Custom Data value for ${r} is too long, it will be truncated to 2048 characters`),s[r]=i.substring(0,2048)),t[o]||(console.warn(`Custom Data value for ${r} is not a boolean, string, or number, it will be ignored`),delete s[r])}return s}class ga extends _t{constructor(e,n,r){super();f(this,"root",null);f(this,"driver");f(this,"canvas");f(this,"settings");f(this,"inspector",null);f(this,"nodes",new Map);f(this,"nextTextureId",1);f(this,"textureTracker");const i={appWidth:e.appWidth||1920,appHeight:e.appHeight||1080,txMemByteThreshold:e.txMemByteThreshold||124e6,boundsMargin:e.boundsMargin||0,deviceLogicalPixelRatio:e.deviceLogicalPixelRatio||1,devicePhysicalPixelRatio:e.devicePhysicalPixelRatio||window.devicePixelRatio,clearColor:e.clearColor??0,coreExtensionModule:e.coreExtensionModule||null,experimental_FinalizationRegistryTextureUsageTracker:e.experimental_FinalizationRegistryTextureUsageTracker??!1,textureCleanupOptions:e.textureCleanupOptions||{},fpsUpdateInterval:e.fpsUpdateInterval||0,numImageWorkers:e.numImageWorkers!==void 0?e.numImageWorkers:2,enableContextSpy:e.enableContextSpy??!1,enableInspector:e.enableInspector??!1,renderMode:e.renderMode??"webgl"};this.settings=i;const{appWidth:o,appHeight:l,deviceLogicalPixelRatio:a,devicePhysicalPixelRatio:u,enableInspector:c}=i,h=w=>{this.driver.releaseTexture(w)},p=i.experimental_FinalizationRegistryTextureUsageTracker&&typeof FinalizationRegistry=="function";this.textureTracker=p?new Yl(h):new Wl(h,this.settings.textureCleanupOptions);const m=o*a,x=l*a;this.driver=r;const v=document.createElement("canvas");this.canvas=v,v.width=m*u,v.height=x*u,v.style.width=`${m}px`,v.style.height=`${x}px`;let _;if(typeof n=="string"?_=document.getElementById(n):_=n,!_)throw new Error("Could not find target element");r.onCreateNode=w=>{this.nodes.set(w.id,w)},r.onBeforeDestroyNode=w=>{this.nodes.delete(w.id)},r.onFpsUpdate=w=>{this.emit("fpsUpdate",w)},r.onFrameTick=w=>{this.emit("frameTick",w)},r.onIdle=()=>{this.emit("idle")},_.appendChild(v),c&&!Di()&&(this.inspector=new Xl(v,i))}async init(){await this.driver.init(this,this.settings,this.canvas),this.root=this.driver.getRootNode()}createNode(e){return this.inspector?this.inspector.createNode(this.driver,this.resolveNodeDefaults(e)):this.driver.createNode(this.resolveNodeDefaults(e))}createTextNode(e){const n=e.fontSize??16,r={...this.resolveNodeDefaults(e),text:e.text??"",textRendererOverride:e.textRendererOverride??null,fontSize:n,fontFamily:e.fontFamily??"sans-serif",fontStyle:e.fontStyle??"normal",fontWeight:e.fontWeight??"normal",fontStretch:e.fontStretch??"normal",textAlign:e.textAlign??"left",contain:e.contain??"none",scrollable:e.scrollable??!1,scrollY:e.scrollY??0,offsetY:e.offsetY??0,letterSpacing:e.letterSpacing??0,lineHeight:e.lineHeight,maxLines:e.maxLines??0,textBaseline:e.textBaseline??"alphabetic",verticalAlign:e.verticalAlign??"middle",overflowSuffix:e.overflowSuffix??"...",debug:e.debug??{}};return this.inspector?this.inspector.createTextNode(this.driver,r):this.driver.createTextNode(r)}resolveNodeDefaults(e){const n=e.color??4294967295,r=e.colorTl??e.colorTop??e.colorLeft??n,i=e.colorTr??e.colorTop??e.colorRight??n,o=e.colorBl??e.colorBottom??e.colorLeft??n,l=e.colorBr??e.colorBottom??e.colorRight??n,a=Ji(e.data??{});return{x:e.x??0,y:e.y??0,width:e.width??0,height:e.height??0,alpha:e.alpha??1,autosize:e.autosize??!1,clipping:e.clipping??!1,color:n,colorTop:e.colorTop??n,colorBottom:e.colorBottom??n,colorLeft:e.colorLeft??n,colorRight:e.colorRight??n,colorBl:o,colorBr:l,colorTl:r,colorTr:i,zIndex:e.zIndex??0,zIndexLocked:e.zIndexLocked??0,parent:e.parent??null,texture:e.texture??null,shader:e.shader??null,src:e.src??"",scale:e.scale??null,scaleX:e.scaleX??e.scale??1,scaleY:e.scaleY??e.scale??1,mount:e.mount??0,mountX:e.mountX??e.mount??0,mountY:e.mountY??e.mount??0,pivot:e.pivot??.5,pivotX:e.pivotX??e.pivot??.5,pivotY:e.pivotY??e.pivot??.5,rotation:e.rotation??0,rtt:e.rtt??!1,data:a}}destroyNode(e){return this.inspector&&this.inspector.destroyNode(e),this.driver.destroyNode(e)}createTexture(e,n,r){const i=this.nextTextureId++,o={descType:"texture",txType:e,props:n,options:{...r,id:i}};return this.textureTracker.registerTexture(o),o}createShader(e,n){return{descType:"shader",shType:e,props:n}}getNodeById(e){return this.nodes.get(e)||null}toggleFreeze(){throw new Error("Not implemented")}advanceFrame(){throw new Error("Not implemented")}rerender(){throw new Error("Not implemented")}}class ma extends _t{constructor(e,n,r){super();f(this,"node");f(this,"props");f(this,"propStartValues",{});f(this,"restoreValues",{});f(this,"settings");f(this,"progress",0);f(this,"delayFor",0);f(this,"timingFunction");f(this,"propsList");this.node=e,this.props=n,this.propStartValues={},this.propsList=Object.keys(n),this.propsList.forEach(l=>{this.propStartValues[l]=e[l]});const i=r.easing||"linear",o=r.delay??0;this.settings={duration:r.duration??0,delay:o,easing:i,loop:r.loop??!1,repeat:r.repeat??0,repeatDelay:r.repeatDelay??0,stopMethod:r.stopMethod??!1},this.timingFunction=Nl(i),this.delayFor=o}reset(){this.progress=0,this.delayFor=this.settings.delay||0,this.update(0)}restore(){this.reset(),Object.keys(this.props).forEach(e=>{this.node[e]=this.propStartValues[e]})}reverse(){this.progress=0,Object.keys(this.props).forEach(e=>{const n=this.props[e],r=this.propStartValues[e];this.props[e]=r,this.propStartValues[e]=n}),this.settings.loop||(this.settings.stopMethod=!1)}applyEasing(e,n,r){return(this.timingFunction(e)||e)*(r-n)+n}update(e){const{duration:n,loop:r,easing:i,stopMethod:o}=this.settings,{delayFor:l}=this;if(n===0&&l===0){this.emit("finished",{});return}if(this.delayFor>0){if(this.delayFor-=e,this.delayFor>=0)return;e=-this.delayFor,this.delayFor=0}if(n===0){this.emit("finished",{});return}if(this.progress===0&&this.emit("animating",{}),this.progress+=e/n,this.progress>1&&(this.progress=r?0:1,o)){this.emit("finished",{});return}for(let a=0;a<this.propsList.length;a++){const u=this.propsList[a],c=this.props[u],h=this.propStartValues[u],p=c;if(u.indexOf("color")!==-1){if(h===p){this.node[u]=h;continue}if(i){const m=this.timingFunction(this.progress)||this.progress,x=Br(h,p,m);this.node[u]=x;continue}this.node[u]=Br(h,p,this.progress);continue}if(i){this.node[u]=this.applyEasing(this.progress,h,p);continue}this.node[u]=h+(p-h)*this.progress}this.progress===1&&this.emit("finished",{})}}class xa extends _t{constructor(e,n){super();f(this,"manager");f(this,"animation");f(this,"stoppedPromise");f(this,"stoppedResolve",null);f(this,"state");this.manager=e,this.animation=n,this.state="stopped",this.stoppedPromise=Promise.resolve(),this.onAnimating=this.onAnimating.bind(this),this.onFinished=this.onFinished.bind(this)}start(){return this.state!=="running"&&(this.makeStoppedPromise(),this.registerAnimation(),this.state="running"),this}stop(){return this.unregisterAnimation(),this.stoppedResolve!==null&&(this.stoppedResolve(),this.stoppedResolve=null,this.emit("stopped",this)),this.animation.reset(),this.state="stopped",this}pause(){return this.unregisterAnimation(),this.state="paused",this}restore(){return this.stoppedResolve=null,this.animation.restore(),this}waitUntilStopped(){return this.stoppedPromise}registerAnimation(){this.animation.once("finished",this.onFinished),this.animation.on("animating",this.onAnimating),this.manager.registerAnimation(this.animation)}unregisterAnimation(){this.manager.unregisterAnimation(this.animation),this.animation.off("finished",this.onFinished),this.animation.off("animating",this.onAnimating)}makeStoppedPromise(){this.stoppedResolve===null&&(this.stoppedPromise=new Promise(e=>{this.stoppedResolve=e}))}onFinished(){H(this.stoppedResolve);const{loop:e,stopMethod:n}=this.animation.settings;if(n==="reverse"){this.animation.reverse();return}e||(this.unregisterAnimation(),this.stoppedResolve(),this.stoppedResolve=null,this.emit("stopped",this),this.state="stopped")}onAnimating(){this.emit("animating",this)}}class Le{constructor(){f(this,"ta");f(this,"tb");f(this,"tx");f(this,"tc");f(this,"td");f(this,"ty");f(this,"_floatArr",null);f(this,"mutation");this.ta=0,this.tb=0,this.tx=0,this.tc=0,this.td=0,this.ty=0,this.mutation=!0}static get temp(){return ya}static multiply(t,e,n){const r=t.ta*e.ta+t.tb*e.tc,i=t.ta*e.tb+t.tb*e.td,o=t.ta*e.tx+t.tb*e.ty+t.tx,l=t.tc*e.ta+t.td*e.tc,a=t.tc*e.tb+t.td*e.td,u=t.tc*e.tx+t.td*e.ty+t.ty;return n||(n=new Le),n.ta=r,n.tb=i,n.tx=o,n.tc=l,n.td=a,n.ty=u,n.mutation=!0,n}static identity(t){return t||(t=new Le),t.ta=1,t.tb=0,t.tx=0,t.tc=0,t.td=1,t.ty=0,t.mutation=!0,t}static translate(t,e,n){return n||(n=new Le),n.ta=1,n.tb=0,n.tx=t,n.tc=0,n.td=1,n.ty=e,n.mutation=!0,n}static scale(t,e,n){return n||(n=new Le),n.ta=t,n.tb=0,n.tx=0,n.tc=0,n.td=e,n.ty=0,n.mutation=!0,n}static rotate(t,e){const n=Math.cos(t),r=Math.sin(t);return e||(e=new Le),e.ta=n,e.tb=-r,e.tx=0,e.tc=r,e.td=n,e.ty=0,e.mutation=!0,e}static copy(t,e){return e||(e=new Le),e.ta=t.ta,e.tc=t.tc,e.tb=t.tb,e.td=t.td,e.tx=t.tx,e.ty=t.ty,e.mutation=!0,e}translate(t,e){return this.tx=this.ta*t+this.tb*e+this.tx,this.ty=this.tc*t+this.td*e+this.ty,this.mutation=!0,this}scale(t,e){return this.ta=this.ta*t,this.tb=this.tb*e,this.tc=this.tc*t,this.td=this.td*e,this.mutation=!0,this}rotate(t){if(t===0||!(t%Math.PI*2))return this;const e=Math.cos(t),n=Math.sin(t),r=this.ta*e+this.tb*n,i=this.tb*e-this.ta*n,o=this.tc*e+this.td*n,l=this.td*e-this.tc*n;return this.ta=r,this.tb=i,this.tc=o,this.td=l,this.mutation=!0,this}multiply(t){return Le.multiply(this,t,this)}getFloatArr(){return this._floatArr||(this._floatArr=new Float32Array(9)),this.mutation&&(this._floatArr[0]=this.ta,this._floatArr[1]=this.tc,this._floatArr[2]=0,this._floatArr[3]=this.tb,this._floatArr[4]=this.td,this._floatArr[5]=0,this._floatArr[6]=this.tx,this._floatArr[7]=this.ty,this._floatArr[8]=1,this.mutation=!1),this._floatArr}}const ya=new Le,Ls=0,Ps=2,Ns=4,ks=6,Os=1,Bs=3,zs=5,$s=7;class en{constructor(t){f(this,"data");this.data=new Float32Array(8),t&&(this.data[Ls]=t[Ls],this.data[Ps]=t[Ps],this.data[Ns]=t[Ns],this.data[ks]=t[ks],this.data[Os]=t[Os],this.data[Bs]=t[Bs],this.data[zs]=t[zs],this.data[$s]=t[$s])}static translate(t,e,n,r,i,o,l,a,u){return u||(u=new en),u.data[Ls]=t,u.data[Ps]=n,u.data[Ns]=i,u.data[ks]=l,u.data[Os]=e,u.data[Bs]=r,u.data[zs]=o,u.data[$s]=a,u}get x1(){return this.data[Ls]}get x2(){return this.data[Ps]}get x3(){return this.data[Ns]}get x4(){return this.data[ks]}get y1(){return this.data[Os]}get y2(){return this.data[Bs]}get y3(){return this.data[zs]}get y4(){return this.data[$s]}}var ye;(function(s){s[s.Init=0]="Init",s[s.OutOfBounds=2]="OutOfBounds",s[s.InBounds=4]="InBounds",s[s.InViewport=8]="InViewport"})(ye||(ye={}));const It=new Map;It.set(ye.Init,"init");It.set(ye.OutOfBounds,"outOfBounds");It.set(ye.InBounds,"inBounds");It.set(ye.InViewport,"inViewport");var N;(function(s){s[s.Children=1]="Children",s[s.ScaleRotate=2]="ScaleRotate",s[s.Local=4]="Local",s[s.Global=8]="Global",s[s.Clipping=16]="Clipping",s[s.CalculatedZIndex=32]="CalculatedZIndex",s[s.ZIndexSortedChildren=64]="ZIndexSortedChildren",s[s.PremultipliedColors=128]="PremultipliedColors",s[s.WorldAlpha=256]="WorldAlpha",s[s.RenderState=512]="RenderState",s[s.IsRenderable=1024]="IsRenderable",s[s.RenderTexture=2048]="RenderTexture",s[s.ParentRenderTexture=4096]="ParentRenderTexture",s[s.None=0]="None",s[s.All=8191]="All"})(N||(N={}));class cr extends _t{constructor(e,n){super();f(this,"stage");f(this,"children",[]);f(this,"props");f(this,"updateType",N.All);f(this,"globalTransform");f(this,"scaleRotateTransform");f(this,"localTransform");f(this,"renderCoords");f(this,"renderBound");f(this,"strictBound");f(this,"preloadBound");f(this,"clippingRect",{x:0,y:0,width:0,height:0,valid:!1});f(this,"isRenderable",!1);f(this,"renderState",ye.Init);f(this,"worldAlpha",1);f(this,"premultipliedColorTl",0);f(this,"premultipliedColorTr",0);f(this,"premultipliedColorBl",0);f(this,"premultipliedColorBr",0);f(this,"calcZIndex",0);f(this,"hasRTTupdates",!1);f(this,"parentHasRenderTexture",!1);f(this,"onTextureLoaded",(e,n)=>{var r,i;this.autosizeNode(n),this.stage.requestRender(),this.parentHasRenderTexture&&this.setRTTUpdates(1),this.emit("loaded",{type:"texture",dimensions:n}),((i=(r=this.props.textureOptions)==null?void 0:r.resizeMode)==null?void 0:i.type)==="contain"&&this.setUpdateType(N.Local)});f(this,"onTextureFailed",(e,n)=>{this.emit("failed",{type:"texture",error:n})});f(this,"onTextureFreed",e=>{this.emit("freed",{type:"texture"})});this.stage=e,this.props={...n,parent:null},this.parent=n.parent,this.rtt=n.rtt,this.updateScaleRotateTransform()}loadTexture(e,n,r=null){this.props.texture&&this.unloadTexture();const{txManager:i}=this.stage,o=i.loadTexture(e,n,r);this.props.texture=o,this.props.textureOptions=r,this.setUpdateType(N.IsRenderable),queueMicrotask(()=>{o.state==="loaded"?this.onTextureLoaded(o,o.dimensions):o.state==="failed"?this.onTextureFailed(o,o.error):o.state==="freed"&&this.onTextureFreed(o),o.on("loaded",this.onTextureLoaded),o.on("failed",this.onTextureFailed),o.on("freed",this.onTextureFreed)})}unloadTexture(){if(this.props.texture){const{texture:e}=this.props;e.off("loaded",this.onTextureLoaded),e.off("failed",this.onTextureFailed),e.off("freed",this.onTextureFreed),e.setRenderableOwner(this,!1)}this.props.texture=null,this.props.textureOptions=null,this.setUpdateType(N.IsRenderable)}autosizeNode(e){this.autosize&&(this.width=e.width,this.height=e.height)}loadShader(e,n){const r=this.stage.renderer.getShaderManager();H(r);const{shader:i,props:o}=r.loadShader(e,n);this.props.shader=i,this.props.shaderProps=o,this.setUpdateType(N.IsRenderable)}setUpdateType(e){this.updateType|=e;const n=this.props.parent;n&&!(n.updateType&N.Children)&&n.setUpdateType(N.Children),this.parentHasRenderTexture&&this.setRTTUpdates(e)}sortChildren(){this.children.sort((e,n)=>e.calcZIndex-n.calcZIndex)}updateScaleRotateTransform(){this.scaleRotateTransform=Le.rotate(this.props.rotation,this.scaleRotateTransform).scale(this.props.scaleX,this.props.scaleY)}updateLocalTransform(){var u,c;H(this.scaleRotateTransform);const e=this.props.pivotX*this.props.width,n=this.props.pivotY*this.props.height,r=this.props.mountX*this.props.width,i=this.props.mountY*this.props.height;this.localTransform=Le.translate(e-r+this.props.x,n-i+this.props.y,this.localTransform).multiply(this.scaleRotateTransform).translate(-e,-n);const{width:o,height:l}=this.props,a=this.props.texture;if(a&&a.dimensions&&((c=(u=this.props.textureOptions)==null?void 0:u.resizeMode)==null?void 0:c.type)==="contain"){let h=1,p=1,m=0,x=0;const{width:v,height:_}=a.dimensions,w=v/_,R=o/l;if(w>R){const E=o/v,C=_*E;x=(l-C)/2,p=C/l}else{const E=l/_,C=v*E;m=(o-C)/2,h=C/o}this.localTransform.translate(m,x).scale(h,p)}this.setUpdateType(N.Global)}update(e,n){var o;this.updateType&N.ScaleRotate&&(this.updateScaleRotateTransform(),this.setUpdateType(N.Local)),this.updateType&N.Local&&(this.updateLocalTransform(),this.setUpdateType(N.Global));const r=this.props.parent;let i=N.None;if(this.updateType&N.ParentRenderTexture){let l=this.parent;for(;l;)l.rtt&&(this.parentHasRenderTexture=!0),l=l.parent}this.updateType^N.All&&this.updateType&N.RenderTexture&&this.children.forEach(l=>{l.setUpdateType(N.All)}),this.updateType&N.Global&&(H(this.localTransform),this.globalTransform=Le.copy((r==null?void 0:r.globalTransform)||this.localTransform,this.globalTransform),this.parentHasRenderTexture&&((o=this.props.parent)!=null&&o.rtt)&&(this.globalTransform=Le.identity()),r&&this.globalTransform.multiply(this.localTransform),this.calculateRenderCoords(),this.updateBoundingRect(),this.setUpdateType(N.Clipping|N.RenderState|N.Children),i|=N.Global),this.updateType&N.Clipping&&(this.calculateClippingRect(n),this.setUpdateType(N.Children),i|=N.Clipping),this.updateType&N.WorldAlpha&&(r?this.worldAlpha=r.worldAlpha*this.props.alpha:this.worldAlpha=this.props.alpha,this.setUpdateType(N.Children|N.PremultipliedColors|N.IsRenderable),i|=N.WorldAlpha),this.updateType&N.PremultipliedColors&&(this.premultipliedColorTl=rs(this.props.colorTl,this.worldAlpha,!0),this.props.colorTl===this.props.colorTr&&this.props.colorBl===this.props.colorBr&&this.props.colorTl===this.props.colorBl?this.premultipliedColorTr=this.premultipliedColorBl=this.premultipliedColorBr=this.premultipliedColorTl:(this.premultipliedColorTr=rs(this.props.colorTr,this.worldAlpha,!0),this.premultipliedColorBl=rs(this.props.colorBl,this.worldAlpha,!0),this.premultipliedColorBr=rs(this.props.colorBr,this.worldAlpha,!0))),this.updateType&N.RenderState&&(this.updateRenderState(n),this.setUpdateType(N.IsRenderable)),this.updateType&N.IsRenderable&&this.updateIsRenderable(),r&&this.updateType&N.CalculatedZIndex&&(this.calculateZIndex(),r.setUpdateType(N.ZIndexSortedChildren)),this.updateType&N.Children&&this.children.length&&!this.rtt&&this.children.forEach(l=>{l.setUpdateType(i),l.updateType!==0&&l.update(e,this.clippingRect)}),this.updateType&N.ZIndexSortedChildren&&this.sortChildren(),this.updateType=0}checkRenderProps(){return this.props.texture?!0:!this.props.width||!this.props.height?!1:!!(this.props.shader||this.props.clipping||this.props.color!==0||this.props.colorTop!==0||this.props.colorBottom!==0||this.props.colorLeft!==0||this.props.colorRight!==0||this.props.colorTl!==0||this.props.colorTr!==0||this.props.colorBl!==0||this.props.colorBr!==0)}checkRenderBounds(e){H(this.renderBound);const n=e.width||this.stage.root.width,r=e.height||this.stage.root.height;this.strictBound=Yt(e.x,e.y,e.x+n,e.y+r,this.strictBound);const i=this.stage.boundsMargin;return this.preloadBound=Yt(e.x-i[3],e.y-i[0],e.x+n+i[1],e.y+r+i[2],this.preloadBound),zr(this.renderBound,this.strictBound)?ye.InViewport:zr(this.renderBound,this.preloadBound)?ye.InBounds:ye.OutOfBounds}updateRenderState(e){const n=this.checkRenderBounds(e);if(n!==this.renderState){let r=this.renderState;this.renderState=n,r===ye.InViewport&&this.emit("outOfViewport",{previous:r,current:n}),r<ye.InBounds&&n===ye.InViewport?(this.emit(It.get(ye.InBounds),{previous:r,current:n}),r=ye.InBounds):r>ye.InBounds&&n===ye.OutOfBounds&&(this.emit(It.get(ye.InBounds),{previous:r,current:n}),r=ye.InBounds);const i=It.get(n);H(i),this.emit(i,{previous:r,current:n})}}setRenderState(e){e!==this.renderState&&(this.renderState=e,this.emit(ye[e]))}updateIsRenderable(){let e;this.worldAlpha===0||!this.checkRenderProps()?e=!1:e=this.renderState>ye.OutOfBounds,this.isRenderable!==e&&(this.isRenderable=e,this.onChangeIsRenderable(e))}onChangeIsRenderable(e){var n;(n=this.props.texture)==null||n.setRenderableOwner(this,e)}calculateRenderCoords(){const{width:e,height:n,globalTransform:r}=this;H(r);const{tx:i,ty:o,ta:l,tb:a,tc:u,td:c}=r;if(a===0&&u===0){const h=i,p=i+e*l,m=o,x=o+n*c;this.renderCoords=en.translate(h,m,p,m,p,x,h,x,this.renderCoords)}else this.renderCoords=en.translate(i,o,i+e*l,o+e*u,i+e*l+n*a,o+e*u+n*c,i+n*a,o+n*c,this.renderCoords)}updateBoundingRect(){const{renderCoords:e,globalTransform:n}=this;H(n),H(e);const{tb:r,tc:i}=n,{x1:o,y1:l,x3:a,y3:u}=e;if(r===0||i===0)this.renderBound=Yt(o,l,a,u,this.renderBound);else{const{x2:c,x4:h,y2:p,y4:m}=e;this.renderBound=Yt(Math.min(o,c,a,h),Math.min(l,p,u,m),Math.max(o,c,a,h),Math.max(l,p,u,m),this.renderBound)}}calculateClippingRect(e){H(this.globalTransform);const{clippingRect:n,props:r,globalTransform:i}=this,{clipping:o}=r,l=i.tb!==0||i.tc!==0;o&&!l?(n.x=i.tx,n.y=i.ty,n.width=this.width*i.ta,n.height=this.height*i.td,n.valid=!0):n.valid=!1,e.valid&&n.valid?lr(e,n,n):e.valid&&(Ui(e,n),n.valid=!0)}calculateZIndex(){var o,l;const e=this.props,n=e.zIndex||0,r=((o=e.parent)==null?void 0:o.zIndex)||0;let i=n;(l=e.parent)!=null&&l.zIndexLocked&&(i=n<r?n:r),this.calcZIndex=i}destroy(){this.unloadTexture(),this.clippingRect.valid=!1,this.isRenderable=!1,delete this.renderCoords,delete this.renderBound,delete this.strictBound,delete this.preloadBound,delete this.globalTransform,delete this.scaleRotateTransform,delete this.localTransform,this.props.texture=null,this.props.shader=null,this.rtt&&this.stage.renderer.removeRTTNode(this),this.removeAllListeners(),this.parent=null}renderQuads(e){const{width:n,height:r,texture:i,textureOptions:o,shader:l,shaderProps:a,rtt:u}=this.props;if(this.parentHasRenderTexture&&(!e.renderToTextureActive||this.parentRenderTexture!==e.activeRttNode))return;const{premultipliedColorTl:c,premultipliedColorTr:h,premultipliedColorBl:p,premultipliedColorBr:m}=this,{zIndex:x,worldAlpha:v,globalTransform:_,clippingRect:w}=this;H(_),e.addQuad({width:n,height:r,colorTl:c,colorTr:h,colorBl:p,colorBr:m,texture:i,textureOptions:o,zIndex:x,shader:l,shaderProps:a,alpha:v,clippingRect:w,tx:_.tx,ty:_.ty,ta:_.ta,tb:_.tb,tc:_.tc,td:_.td,rtt:u,parentHasRenderTexture:this.parentHasRenderTexture,framebufferDimensions:this.framebufferDimensions})}get id(){return this.props.id}get x(){return this.props.x}set x(e){this.props.x!==e&&(this.props.x=e,this.setUpdateType(N.Local))}get absX(){var e,n,r;return this.props.x+(((e=this.props.parent)==null?void 0:e.absX)||((r=(n=this.props.parent)==null?void 0:n.globalTransform)==null?void 0:r.tx)||0)}get absY(){var e;return this.props.y+(((e=this.props.parent)==null?void 0:e.absY)??0)}get y(){return this.props.y}set y(e){this.props.y!==e&&(this.props.y=e,this.setUpdateType(N.Local))}get width(){return this.props.width}set width(e){this.props.width!==e&&(this.props.width=e,this.setUpdateType(N.Local),this.props.rtt&&this.setUpdateType(N.RenderTexture))}get height(){return this.props.height}set height(e){this.props.height!==e&&(this.props.height=e,this.setUpdateType(N.Local),this.props.rtt&&this.setUpdateType(N.RenderTexture))}get scale(){return this.scaleX}set scale(e){this.scaleX=e,this.scaleY=e}get scaleX(){return this.props.scaleX}set scaleX(e){this.props.scaleX!==e&&(this.props.scaleX=e,this.setUpdateType(N.ScaleRotate))}get scaleY(){return this.props.scaleY}set scaleY(e){this.props.scaleY!==e&&(this.props.scaleY=e,this.setUpdateType(N.ScaleRotate))}get mount(){return this.props.mount}set mount(e){(this.props.mountX!==e||this.props.mountY!==e)&&(this.props.mountX=e,this.props.mountY=e,this.props.mount=e,this.setUpdateType(N.Local))}get mountX(){return this.props.mountX}set mountX(e){this.props.mountX!==e&&(this.props.mountX=e,this.setUpdateType(N.Local))}get mountY(){return this.props.mountY}set mountY(e){this.props.mountY!==e&&(this.props.mountY=e,this.setUpdateType(N.Local))}get pivot(){return this.props.pivot}set pivot(e){(this.props.pivotX!==e||this.props.pivotY!==e)&&(this.props.pivotX=e,this.props.pivotY=e,this.props.pivot=e,this.setUpdateType(N.Local))}get pivotX(){return this.props.pivotX}set pivotX(e){this.props.pivotX!==e&&(this.props.pivotX=e,this.setUpdateType(N.Local))}get pivotY(){return this.props.pivotY}set pivotY(e){this.props.pivotY!==e&&(this.props.pivotY=e,this.setUpdateType(N.Local))}get rotation(){return this.props.rotation}set rotation(e){this.props.rotation!==e&&(this.props.rotation=e,this.setUpdateType(N.ScaleRotate))}get alpha(){return this.props.alpha}set alpha(e){this.props.alpha=e,this.setUpdateType(N.PremultipliedColors|N.WorldAlpha)}get autosize(){return this.props.autosize}set autosize(e){this.props.autosize=e}get clipping(){return this.props.clipping}set clipping(e){this.props.clipping=e,this.setUpdateType(N.Clipping)}get color(){return this.props.color}set color(e){(this.props.colorTl!==e||this.props.colorTr!==e||this.props.colorBl!==e||this.props.colorBr!==e)&&(this.colorTl=e,this.colorTr=e,this.colorBl=e,this.colorBr=e),this.props.color=e,this.setUpdateType(N.PremultipliedColors)}get colorTop(){return this.props.colorTop}set colorTop(e){(this.props.colorTl!==e||this.props.colorTr!==e)&&(this.colorTl=e,this.colorTr=e),this.props.colorTop=e,this.setUpdateType(N.PremultipliedColors)}get colorBottom(){return this.props.colorBottom}set colorBottom(e){(this.props.colorBl!==e||this.props.colorBr!==e)&&(this.colorBl=e,this.colorBr=e),this.props.colorBottom=e,this.setUpdateType(N.PremultipliedColors)}get colorLeft(){return this.props.colorLeft}set colorLeft(e){(this.props.colorTl!==e||this.props.colorBl!==e)&&(this.colorTl=e,this.colorBl=e),this.props.colorLeft=e,this.setUpdateType(N.PremultipliedColors)}get colorRight(){return this.props.colorRight}set colorRight(e){(this.props.colorTr!==e||this.props.colorBr!==e)&&(this.colorTr=e,this.colorBr=e),this.props.colorRight=e,this.setUpdateType(N.PremultipliedColors)}get colorTl(){return this.props.colorTl}set colorTl(e){this.props.colorTl=e,this.setUpdateType(N.PremultipliedColors)}get colorTr(){return this.props.colorTr}set colorTr(e){this.props.colorTr=e,this.setUpdateType(N.PremultipliedColors)}get colorBl(){return this.props.colorBl}set colorBl(e){this.props.colorBl=e,this.setUpdateType(N.PremultipliedColors)}get colorBr(){return this.props.colorBr}set colorBr(e){this.props.colorBr=e,this.setUpdateType(N.PremultipliedColors)}get zIndexLocked(){return this.props.zIndexLocked||0}set zIndexLocked(e){this.props.zIndexLocked=e,this.setUpdateType(N.CalculatedZIndex|N.Children),this.children.forEach(n=>{n.setUpdateType(N.CalculatedZIndex)})}get zIndex(){return this.props.zIndex}set zIndex(e){this.props.zIndex=e,this.setUpdateType(N.CalculatedZIndex|N.Children),this.children.forEach(n=>{n.setUpdateType(N.CalculatedZIndex)})}get parent(){return this.props.parent}set parent(e){const n=this.props.parent;if(n!==e){if(this.props.parent=e,n){const r=n.children.indexOf(this);H(r!==-1,"CoreNode.parent: Node not found in old parent's children!"),n.children.splice(r,1),n.setUpdateType(N.Children|N.ZIndexSortedChildren)}e&&(e.children.push(this),this.setUpdateType(N.All),e.setUpdateType(N.Children|N.ZIndexSortedChildren),(e.rtt||e.parentHasRenderTexture)&&this.setRTTUpdates(N.All)),this.updateScaleRotateTransform()}}get rtt(){return this.props.rtt}set rtt(e){var n,r;if(!e){this.props.rtt&&(this.props.rtt=!1,this.unloadTexture(),this.setUpdateType(N.All),this.children.forEach(i=>{i.parentHasRenderTexture=!1}),(n=this.stage.renderer)==null||n.removeRTTNode(this));return}this.props.rtt=!0,this.hasRTTupdates=!0,this.setUpdateType(N.All),this.children.forEach(i=>{i.setUpdateType(N.All)}),(r=this.stage.renderer)==null||r.renderToTexture(this)}get framebufferDimensions(){return this.parentHasRenderTexture&&!this.rtt&&this.parent?this.parent.framebufferDimensions:{width:this.width,height:this.height}}get parentRenderTexture(){let e=this.parent;for(;e;){if(e.rtt)return e;e=e.parent}return null}get texture(){return this.props.texture}setRTTUpdates(e){var n;this.hasRTTupdates=!0,(n=this.parent)==null||n.setRTTUpdates(e)}}let va=1;function ur(){return va++}class jn extends _t{constructor(e,n,r,i){super();f(this,"rendererMain");f(this,"stage");f(this,"id");f(this,"coreNode");f(this,"_children",[]);f(this,"_src","");f(this,"_parent",null);f(this,"_texture",null);f(this,"_shader",null);f(this,"_data",{});f(this,"onTextureLoaded",(e,n)=>{this.emit("loaded",n)});f(this,"onTextureFailed",(e,n)=>{this.emit("failed",n)});f(this,"onTextureFreed",(e,n)=>{this.emit("freed",n)});f(this,"onOutOfBounds",(e,n)=>{this.emit("outOfBounds",n)});f(this,"onInBounds",(e,n)=>{this.emit("inBounds",n)});f(this,"onOutOfViewport",(e,n)=>{this.emit("outOfViewport",n)});f(this,"onInViewport",(e,n)=>{this.emit("inViewport",n)});this.rendererMain=n,this.stage=r,this.id=(i==null?void 0:i.id)??ur(),this.coreNode=i||new cr(this.stage,{id:this.id,x:e.x,y:e.y,width:e.width,height:e.height,alpha:e.alpha,autosize:e.autosize,clipping:e.clipping,color:e.color,colorTop:e.colorTop,colorBottom:e.colorBottom,colorLeft:e.colorLeft,colorRight:e.colorRight,colorTl:e.colorTl,colorTr:e.colorTr,colorBl:e.colorBl,colorBr:e.colorBr,zIndex:e.zIndex,zIndexLocked:e.zIndexLocked,scaleX:e.scaleX,scaleY:e.scaleY,mountX:e.mountX,mountY:e.mountY,mount:e.mount,pivot:e.pivot,pivotX:e.pivotX,pivotY:e.pivotY,rotation:e.rotation,parent:null,shader:null,shaderProps:null,texture:null,textureOptions:null,rtt:e.rtt}),this.coreNode.on("loaded",this.onTextureLoaded),this.coreNode.on("failed",this.onTextureFailed),this.coreNode.on("freed",this.onTextureFreed),this.coreNode.on("outOfBounds",this.onOutOfBounds),this.coreNode.on("inBounds",this.onInBounds),this.coreNode.on("outOfViewport",this.onOutOfViewport),this.coreNode.on("inViewport",this.onInViewport),this.parent=e.parent,this.shader=e.shader,this.texture=e.texture,this.src=e.src,this.rtt=e.rtt,this._data=e.data}get x(){return this.coreNode.x}set x(e){this.coreNode.x=e}get y(){return this.coreNode.y}set y(e){this.coreNode.y=e}get width(){return this.coreNode.width}set width(e){e!==this.coreNode.width&&this.coreNode.rtt&&(this.texture=this.rendererMain.createTexture("RenderTexture",{width:this.width,height:this.height},{preload:!0,flipY:!0})),this.coreNode.width=e}get height(){return this.coreNode.height}set height(e){e!==this.coreNode.height&&this.coreNode.rtt&&(this.texture=this.rendererMain.createTexture("RenderTexture",{width:this.width,height:this.height},{preload:!0,flipY:!0})),this.coreNode.height=e}get alpha(){return this.coreNode.alpha}set alpha(e){this.coreNode.alpha=e}get autosize(){return this.coreNode.autosize}set autosize(e){this.coreNode.autosize=e}get clipping(){return this.coreNode.clipping}set clipping(e){this.coreNode.clipping=e}get color(){return this.coreNode.color}set color(e){this.coreNode.color=e}get colorTop(){return this.coreNode.colorTop}set colorTop(e){this.coreNode.colorTop=e}get colorBottom(){return this.coreNode.colorBottom}set colorBottom(e){this.coreNode.colorBottom=e}get colorLeft(){return this.coreNode.colorLeft}set colorLeft(e){this.coreNode.colorLeft=e}get colorRight(){return this.coreNode.colorRight}set colorRight(e){this.coreNode.colorRight=e}get colorTl(){return this.coreNode.colorTl}set colorTl(e){this.coreNode.colorTl=e}get colorTr(){return this.coreNode.colorTr}set colorTr(e){this.coreNode.colorTr=e}get colorBl(){return this.coreNode.colorBl}set colorBl(e){this.coreNode.colorBl=e}get colorBr(){return this.coreNode.colorBr}set colorBr(e){this.coreNode.colorBr=e}get scale(){return this.scaleX!==this.scaleY?null:this.coreNode.scaleX}set scale(e){e!==null&&(this.coreNode.scaleX=e,this.coreNode.scaleY=e)}get scaleX(){return this.coreNode.scaleX}set scaleX(e){this.coreNode.scaleX=e}get scaleY(){return this.coreNode.scaleY}set scaleY(e){this.coreNode.scaleY=e}get mount(){return this.coreNode.mount}set mount(e){this.coreNode.mount=e}get mountX(){return this.coreNode.mountX}set mountX(e){this.coreNode.mountX=e}get mountY(){return this.coreNode.mountY}set mountY(e){this.coreNode.mountY=e}get pivot(){return this.coreNode.pivot}set pivot(e){this.coreNode.pivot=e}get pivotX(){return this.coreNode.pivotX}set pivotX(e){this.coreNode.pivotX=e}get pivotY(){return this.coreNode.pivotY}set pivotY(e){this.coreNode.pivotY=e}get rotation(){return this.coreNode.rotation}set rotation(e){this.coreNode.rotation=e}get parent(){return this._parent}set parent(e){const n=this._parent;if(this._parent=e,this.coreNode.parent=(e==null?void 0:e.coreNode)??null,n){const r=n.children.indexOf(this);H(r!==-1,"MainOnlyNode.parent: Node not found in old parent's children!"),n.children.splice(r,1)}e&&e.children.push(this)}get children(){return this._children}get zIndex(){return this.coreNode.zIndex}set zIndex(e){this.coreNode.zIndex=e}get zIndexLocked(){return this.coreNode.zIndexLocked}set zIndexLocked(e){this.coreNode.zIndexLocked=e}get src(){return this._src}set src(e){if(this._src!==e){if(this._src=e,!e){this.texture=null;return}this.texture=this.rendererMain.createTexture("ImageTexture",{src:e})}}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this.rendererMain.textureTracker.decrementTextureRefCount(this._texture),e&&this.rendererMain.textureTracker.incrementTextureRefCount(e),this._texture=e,e?this.coreNode.loadTexture(e.txType,e.props,e.options):this.coreNode.unloadTexture())}get rtt(){return this.coreNode.rtt}set rtt(e){e&&(this.texture=this.rendererMain.createTexture("RenderTexture",{width:this.width,height:this.height},{preload:!0,flipY:!0})),this.coreNode.rtt=e}get parentHasRenderTexture(){return this.coreNode.parentHasRenderTexture}get shader(){return this._shader}set shader(e){this._shader!==e&&(this._shader=e,e&&this.coreNode.loadShader(e.shType,e.props))}get data(){return this._data}set data(e){this._data=Ji(e)}destroy(){this.emit("beforeDestroy",{});let e=this.children[0];for(;e;)e.destroy(),e=this.children[0];this.coreNode.destroy(),this.parent=null,this.texture=null,this.emit("afterDestroy",{}),this.removeAllListeners()}flush(){}animate(e,n){const r=new ma(this.coreNode,e,n);return new xa(this.stage.animationManager,r)}}const _a=s=>{let t=!1;const e=()=>{if(s.updateAnimations(),!s.hasSceneUpdates()){s.calculateFps(),setTimeout(e,16.666666666666668),t||(s.emit("idle"),t=!0);return}t=!1,s.drawFrame(),requestAnimationFrame(e)};requestAnimationFrame(e)},wa=()=>performance?performance.now():Date.now();class ba{constructor(){f(this,"activeAnimations",new Set)}registerAnimation(t){this.activeAnimations.add(t)}unregisterAnimation(t){this.activeAnimations.delete(t)}update(t){this.activeAnimations.forEach(e=>{e.update(t)})}}class Ta{constructor(t){f(this,"imageWorkersEnabled",!0);f(this,"messageManager",{});f(this,"workers",[]);f(this,"workerIndex",0);f(this,"nextId",0);this.workers=this.createWorkers(t),this.workers.forEach(e=>{e.onmessage=this.handleMessage.bind(this)})}handleMessage(t){const{id:e,data:n,error:r}=t.data,i=this.messageManager[e];if(i){const[o,l]=i;delete this.messageManager[e],r?l(new Error(r)):o(n)}}createWorkers(t=1){const e=`
      function hasAlphaChannel(mimeType) {
          return (mimeType.indexOf("image/png") !== -1);
      }

      function getImage(src, premultiplyAlpha) {
        return new Promise(function(resolve, reject) {
          var xhr = new XMLHttpRequest();
          xhr.open('GET', src, true);
          xhr.responseType = 'blob';

          xhr.onload = function() {
            if (xhr.status === 200) {
              var blob = xhr.response;
              var hasAlphaChannel = premultiplyAlpha !== undefined ? premultiplyAlpha : hasAlphaChannel(blob.type);

              createImageBitmap(blob, {
                premultiplyAlpha: hasAlphaChannel ? 'premultiply' : 'none',
                colorSpaceConversion: 'none',
                imageOrientation: 'none'
              }).then(function(data) {
                resolve({ data: data, premultiplyAlpha: premultiplyAlpha });
              }).catch(function(error) {
                reject(error);
              });
            } else {
              reject(new Error('Failed to load image: ' + xhr.statusText));
            }
          };

          xhr.onerror = function() {
            reject(new Error('Network error occurred while trying to fetch the image.'));
          };

          xhr.send();
        });
      }

      self.onmessage = (event) => {
        var id = event.data.id;
        var src = event.data.src;
        var premultiplyAlpha = event.data.premultiplyAlpha;

        getImage(src, premultiplyAlpha)
          .then(function(data) {
              self.postMessage({ id: id, data: data }, [data.data]);
          })
          .catch(function(error) {
              self.postMessage({ id: id, error: error.message });
          });
      };
    `,n=new Blob([e.replace('"use strict";',"")],{type:"application/javascript"}),r=(self.URL?URL:webkitURL).createObjectURL(n),i=[];for(let o=0;o<t;o++)i.push(new Worker(r));return i}getNextWorker(){const t=this.workers[this.workerIndex];return this.workerIndex=(this.workerIndex+1)%this.workers.length,t}getImage(t,e){return new Promise((n,r)=>{try{if(this.workers){const i=this.nextId++;this.messageManager[i]=[n,r];const o=this.getNextWorker();o&&o.postMessage({id:i,src:t,premultiplyAlpha:e})}}catch(i){r(i)}})}}const _s=class _s extends kl{constructor(e,n){super(e);f(this,"props");this.props=_s.resolveDefaults(n)}async getTextureData(){const{width:e,height:n}=this.props,r=e*n*4,i=new Uint8ClampedArray(r);for(let o=0;o<r;o+=4){const l=Math.floor(Math.random()*256);i[o]=l,i[o+1]=l,i[o+2]=l,i[o+3]=255}return{data:new ImageData(i,e,n)}}static makeCacheKey(e){const n=_s.resolveDefaults(e);return`NoiseTexture,${n.width},${n.height},${n.cacheId}`}static resolveDefaults(e){return{width:e.width??128,height:e.height??128,cacheId:e.cacheId??0}}};f(_s,"z$__type__Props");let Xn=_s;class Sa{constructor(t){f(this,"usedMemory",0);f(this,"txConstructors",{});f(this,"textureKeyCache",new Map);f(this,"textureIdCache",new Map);f(this,"ctxTextureCache",new WeakMap);f(this,"textureRefCountMap",new WeakMap);f(this,"imageWorkerManager",null);f(this,"hasCreateImageBitmap",!!self.createImageBitmap);f(this,"hasWorker",!!self.Worker);f(this,"renderer");this.hasCreateImageBitmap&&this.hasWorker&&t>0&&(this.imageWorkerManager=new Ta(t)),this.hasCreateImageBitmap||console.warn("[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower."),this.registerTextureType("ImageTexture",Ol),this.registerTextureType("ColorTexture",Bl),this.registerTextureType("NoiseTexture",Xn),this.registerTextureType("SubTexture",Wi),this.registerTextureType("RenderTexture",zl)}registerTextureType(t,e){this.txConstructors[t]=e}loadTexture(t,e,n=null){const r=this.txConstructors[t];if(!r)throw new Error(`Texture type "${t}" is not registered`);let i;if((n==null?void 0:n.id)!==void 0&&this.textureIdCache.has(n.id)&&(i=this.textureIdCache.get(n.id)),!i){const o=n==null?void 0:n.id,l=(n==null?void 0:n.cacheKey)??r.makeCacheKey(e);l&&this.textureKeyCache.has(l)?i=this.textureKeyCache.get(l):i=new r(this,e),o&&this.addTextureIdToCache(o,l,i)}return n!=null&&n.preload&&this.getCtxTexture(i).load(),i}addTextureIdToCache(t,e,n){const{textureIdCache:r,textureRefCountMap:i}=this;r.set(t,n),i.has(n)?i.get(n).count++:(i.set(n,{cacheKey:e,count:1}),e&&this.textureKeyCache.set(e,n))}removeTextureIdFromCache(t){var i;const{textureIdCache:e,textureRefCountMap:n}=this,r=e.get(t);if(r){if(e.delete(t),n.has(r)){const o=n.get(r);H(o),o.count--,o.count===0&&(n.delete(r),o.cacheKey&&this.textureKeyCache.delete(o.cacheKey))}(i=this.ctxTextureCache.get(r))==null||i.free()}}getDebugInfo(){return{keyCacheSize:this.textureKeyCache.size,idCacheSize:this.textureIdCache.size}}getCtxTexture(t){if(this.ctxTextureCache.has(t))return this.ctxTextureCache.get(t);const e=this.renderer.createCtxTexture(t);return this.ctxTextureCache.set(t,e),e}}class Ca{constructor(){f(this,"data",{})}reset(){this.data={}}increment(t){this.data[t]||(this.data[t]=0),this.data[t]++}getData(){return{...this.data}}}class Ra{constructor(t){f(this,"memUsed",0);f(this,"textures",new Map);f(this,"threshold");f(this,"gcRequested",!1);this.threshold=t,t===0&&(this.setTextureMemUse=()=>{})}setTextureMemUse(t,e){if(this.textures.has(t)&&(this.memUsed-=this.textures.get(t)),e===0){this.textures.delete(t);return}else this.memUsed+=e,this.textures.set(t,e);this.memUsed>this.threshold&&(this.gcRequested=!0)}gc(){this.gcRequested=!1,this.textures.forEach((t,e)=>{e.renderable||e.free()})}}const Ia={isWhite:!0,a:1,r:255,g:255,b:255};function In(s){if(s===4294967295)return Ia;const t=(s>>>24&255)/255,e=s>>>16&255&255,n=s>>>8&255&255,r=s&255&255;return{isWhite:!1,a:t,r,g:n,b:e}}function qs({a:s,r:t,g:e,b:n}){return`rgba(${t},${e},${n},${s})`}class Ea extends $l{constructor(){super(...arguments);f(this,"image");f(this,"tintCache")}load(){this.textureSource.state==="freed"&&(this.textureSource.setState("loading"),this.onLoadRequest().then(e=>{this.textureSource.setState("loaded",e),this.updateMemSize()}).catch(e=>{this.textureSource.setState("failed",e)}))}free(){this.image=void 0,this.tintCache=void 0,this.textureSource.setState("freed"),this.memManager.setTextureMemUse(this,0)}updateMemSize(){const e=this.tintCache?8:4;if(this.textureSource.dimensions){const{width:n,height:r}=this.textureSource.dimensions;this.memManager.setTextureMemUse(this,n*r*e)}}hasImage(){return this.image!==void 0}getImage(e){var o;const n=this.image;if(H(n,"Attempt to get unloaded image texture"),e.isWhite)return this.tintCache&&(this.tintCache=void 0,this.updateMemSize()),n;const r=qs(e);if(((o=this.tintCache)==null?void 0:o.key)===r)return this.tintCache.image;const i=this.tintTexture(n,r);return this.tintCache={key:r,image:i},this.updateMemSize(),i}tintTexture(e,n){const{width:r,height:i}=e,o=document.createElement("canvas");o.width=r,o.height=i;const l=o.getContext("2d");return l&&(l.fillStyle=n,l.globalCompositeOperation="copy",l.fillRect(0,0,r,i),l.globalCompositeOperation="multiply",l.drawImage(e,0,0,r,i,0,0,r,i),l.globalCompositeOperation="destination-in",l.drawImage(e,0,0,r,i,0,0,r,i)),o}get renderable(){return this.textureSource.renderable}async onLoadRequest(){const{data:e}=await this.textureSource.getTextureData();if(e instanceof ImageData){const n=document.createElement("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");return r&&r.putImageData(e,0,0),this.image=n,{width:e.width,height:e.height}}else if(e instanceof ImageBitmap)return this.image=e,{width:e.width,height:e.height};return{width:0,height:0}}}function Ma(s){var t;return s.shader instanceof Zi&&s.shader.shType===Qi?((t=s.shaderProps)==null?void 0:t.radius)??0:0}class Fa extends Dl{constructor(e){super(e);f(this,"context");f(this,"canvas");f(this,"pixelRatio");f(this,"clearColor");f(this,"renderToTextureActive",!1);f(this,"activeRttNode",null);this.mode="canvas",this.shManager.renderer=this;const{canvas:n,pixelRatio:r,clearColor:i}=e;this.canvas=n,this.context=n.getContext("2d"),this.pixelRatio=r,this.clearColor=i?Hl(i):void 0}reset(){this.canvas.width=this.canvas.width;const e=this.context;if(this.clearColor){const[n,r,i,o]=this.clearColor;e.fillStyle=`rgba(${n}, ${r}, ${i}, ${o/255})`,e.fillRect(0,0,this.canvas.width,this.canvas.height)}e.scale(this.pixelRatio,this.pixelRatio)}render(){}addQuad(e){const n=this.context,{tx:r,ty:i,width:o,height:l,alpha:a,colorTl:u,colorTr:c,colorBr:h,ta:p,tb:m,tc:x,td:v,clippingRect:_}=e;let w=e.texture,R,E;if(w){if(w instanceof Wi&&(E=w.props,w=w.parentTexture),R=this.txManager.getCtxTexture(w),w.state==="freed"){R.load();return}if(w.state!=="loaded"||!R.hasImage())return}const C=In(u),A=p!==1,I=_.width!==0&&_.height!==0,F=u!==c||u!==h,K=e.shader?Ma(e):0;if((A||I||K)&&n.save(),I){const X=new Path2D,{x:Z,y:G,width:le,height:ne}=_;X.rect(Z,G,le,ne),n.clip(X)}if(A){const X=this.pixelRatio;n.setTransform(p,x,m,v,r*X,i*X),n.scale(X,X),n.translate(-r,-i)}if(K){const X=new Path2D;X.roundRect(r,i,o,l,K),n.clip(X)}if(R){const X=R.getImage(C);n.globalAlpha=a,E?n.drawImage(X,E.x,E.y,E.width,E.height,r,i,o,l):n.drawImage(X,r,i,o,l),n.globalAlpha=1}else if(F){let X=r,Z=i,G;u===c?(X=r,Z=i+l,G=In(h)):(X=r+o,Z=i,G=In(c));const le=n.createLinearGradient(r,i,X,Z);le.addColorStop(0,qs(C)),le.addColorStop(1,qs(G)),n.fillStyle=le,n.fillRect(r,i,o,l)}else n.fillStyle=qs(C),n.fillRect(r,i,o,l);(A||I||K)&&n.restore()}createCtxTexture(e){return new Ea(this.txMemManager,e)}getShaderManager(){return this.shManager}renderRTTNodes(){}removeRTTNode(e){}renderToTexture(e){}}const Aa=2e6;class La extends _t{constructor(e){super();f(this,"options");f(this,"animationManager");f(this,"txManager");f(this,"txMemManager");f(this,"fontManager");f(this,"textRenderers");f(this,"shManager");f(this,"renderer");f(this,"root");f(this,"boundsMargin");f(this,"deltaTime",0);f(this,"lastFrameTime",0);f(this,"currentFrameTime",0);f(this,"fpsNumFrames",0);f(this,"fpsElapsedTime",0);f(this,"renderRequested",!1);f(this,"contextSpy",null);this.options=e;const{canvas:n,clearColor:r,rootId:i,debug:o,appWidth:l,appHeight:a,boundsMargin:u,enableContextSpy:c,numImageWorkers:h,txMemByteThreshold:p,renderMode:m}=e;this.txManager=new Sa(h),this.txMemManager=new Ra(p),this.shManager=new na,this.animationManager=new ba,this.contextSpy=c?new Ca:null;let x=[0,0,0,0];u&&(x=Array.isArray(u)?u:[u,u,u,u]),this.boundsMargin=x,o!=null&&o.monitorTextureCache&&setInterval(()=>{H(this.txManager);const w=this.txManager.getDebugInfo();console.log("Texture ID Cache Size: ",w.idCacheSize),console.log("Texture Key Cache Size: ",w.keyCacheSize)},1e3);const v={stage:this,canvas:n,pixelRatio:e.devicePhysicalPixelRatio*e.deviceLogicalPixelRatio,clearColor:r??4278190080,bufferMemory:Aa,txManager:this.txManager,txMemManager:this.txMemManager,shManager:this.shManager,contextSpy:this.contextSpy};m==="canvas"?this.renderer=new Fa(v):this.renderer=new Hi(v),Ul(m),this.txManager.renderer=this.renderer,this.textRenderers=m==="webgl"?{canvas:new Yr(this),sdf:new fa(this)}:{canvas:new Yr(this)},this.fontManager=new ar(this.textRenderers);const _=new cr(this,{id:i,x:0,y:0,width:l,height:a,alpha:1,autosize:!1,clipping:!1,color:0,colorTop:0,colorBottom:0,colorLeft:0,colorRight:0,colorTl:0,colorTr:0,colorBl:0,colorBr:0,zIndex:0,zIndexLocked:0,scaleX:1,scaleY:1,mountX:0,mountY:0,mount:0,pivot:.5,pivotX:.5,pivotY:.5,rotation:0,parent:null,texture:null,textureOptions:null,shader:null,shaderProps:null,rtt:!1});this.root=_,_a(this)}updateAnimations(){const{animationManager:e}=this;this.root&&(this.lastFrameTime=this.currentFrameTime,this.currentFrameTime=wa(),this.deltaTime=this.lastFrameTime?this.currentFrameTime-this.lastFrameTime:100/6,this.emit("frameTick",{time:this.currentFrameTime,delta:this.deltaTime}),e.update(this.deltaTime))}hasSceneUpdates(){return!!this.root.updateType||this.renderRequested}drawFrame(){const{renderer:e,renderRequested:n}=this;H(e),this.root.updateType!==0&&this.root.update(this.deltaTime,this.root.clippingRect),e.reset(),e.txMemManager.gcRequested&&e.txMemManager.gc(),e.rttNodes.length>0&&e.renderRTTNodes(),this.addQuads(this.root),e==null||e.render(),this.calculateFps(),n&&(this.renderRequested=!1)}calculateFps(){var n,r;const{fpsUpdateInterval:e}=this.options;if(e&&(this.fpsNumFrames++,this.fpsElapsedTime+=this.deltaTime,this.fpsElapsedTime>=e)){const i=Math.round(this.fpsNumFrames*1e3/this.fpsElapsedTime);this.fpsNumFrames=0,this.fpsElapsedTime=0,this.emit("fpsUpdate",{fps:i,contextSpyData:((n=this.contextSpy)==null?void 0:n.getData())??null}),(r=this.contextSpy)==null||r.reset()}}addQuads(e){H(this.renderer&&e.globalTransform),e.isRenderable&&e.renderQuads(this.renderer);for(let n=0;n<e.children.length;n++){const r=e.children[n];r&&(r==null?void 0:r.worldAlpha)!==0&&this.addQuads(r)}}requestRender(){this.renderRequested=!0}resolveTextRenderer(e,n=null){let r=n,i=!1;if(r){const l=this.textRenderers[r];l?l.canRenderFont(e)||(console.warn(`Cannot use override text renderer '${r}' for font`,e),r=null,i=!0):(console.warn(`Text renderer override '${r}' not found.`),r=null,i=!0)}if(!r){for(const[l,a]of Object.entries(this.textRenderers))if(l!=="canvas"&&a.canRenderFont(e)){r=l;break}r||(r="canvas")}i&&console.warn(`Falling back to text renderer ${String(r)}`);const o=this.textRenderers[r];return H(o,"resolvedTextRenderer undefined"),o}}class Pa extends cr{constructor(e,n){super(e,n);f(this,"textRenderer");f(this,"trState");f(this,"_textRendererOverride",null);f(this,"onTextLoaded",()=>{const{contain:e}=this,n=this.trState.props.width,r=this.trState.props.height,i=this.trState.textW||0,o=this.trState.textH||0;e==="both"?(this.props.width=n,this.props.height=r):e==="width"?(this.props.width=n,this.props.height=o):e==="none"&&(this.props.width=i,this.props.height=o),this.updateLocalTransform(),this.stage.requestRender(),this.emit("loaded",{type:"text",dimensions:{width:this.trState.textW||0,height:this.trState.textH||0}})});f(this,"onTextFailed",(e,n)=>{this.emit("failed",{type:"text",error:n})});this._textRendererOverride=n.textRendererOverride;const{resolvedTextRenderer:r,textRendererState:i}=this.resolveTextRendererAndState({x:this.absX,y:this.absY,width:n.width,height:n.height,textAlign:n.textAlign,color:n.color,zIndex:n.zIndex,contain:n.contain,scrollable:n.scrollable,scrollY:n.scrollY,offsetY:n.offsetY,letterSpacing:n.letterSpacing,debug:n.debug,fontFamily:n.fontFamily,fontSize:n.fontSize,fontStretch:n.fontStretch,fontStyle:n.fontStyle,fontWeight:n.fontWeight,text:n.text,lineHeight:n.lineHeight,maxLines:n.maxLines,textBaseline:n.textBaseline,verticalAlign:n.verticalAlign,overflowSuffix:n.overflowSuffix});this.textRenderer=r,this.trState=i}get width(){return this.props.width}set width(e){this.props.width=e,this.textRenderer.set.width(this.trState,e),this.contain==="none"&&this.setUpdateType(N.Local)}get height(){return this.props.height}set height(e){this.props.height=e,this.textRenderer.set.height(this.trState,e),this.contain!=="both"&&this.setUpdateType(N.Local)}get color(){return this.trState.props.color}set color(e){this.textRenderer.set.color(this.trState,e)}get text(){return this.trState.props.text}set text(e){this.textRenderer.set.text(this.trState,e)}get textRendererOverride(){return this._textRendererOverride}set textRendererOverride(e){this._textRendererOverride=e,this.textRenderer.destroyState(this.trState);const{resolvedTextRenderer:n,textRendererState:r}=this.resolveTextRendererAndState(this.trState.props);this.textRenderer=n,this.trState=r}get fontSize(){return this.trState.props.fontSize}set fontSize(e){this.textRenderer.set.fontSize(this.trState,e)}get fontFamily(){return this.trState.props.fontFamily}set fontFamily(e){this.textRenderer.set.fontFamily(this.trState,e)}get fontStretch(){return this.trState.props.fontStretch}set fontStretch(e){this.textRenderer.set.fontStretch(this.trState,e)}get fontStyle(){return this.trState.props.fontStyle}set fontStyle(e){this.textRenderer.set.fontStyle(this.trState,e)}get fontWeight(){return this.trState.props.fontWeight}set fontWeight(e){this.textRenderer.set.fontWeight(this.trState,e)}get textAlign(){return this.trState.props.textAlign}set textAlign(e){this.textRenderer.set.textAlign(this.trState,e)}get contain(){return this.trState.props.contain}set contain(e){this.textRenderer.set.contain(this.trState,e)}get scrollable(){return this.trState.props.scrollable}set scrollable(e){this.textRenderer.set.scrollable(this.trState,e)}get scrollY(){return this.trState.props.scrollY}set scrollY(e){this.textRenderer.set.scrollY(this.trState,e)}get offsetY(){return this.trState.props.offsetY}set offsetY(e){this.textRenderer.set.offsetY(this.trState,e)}get letterSpacing(){return this.trState.props.letterSpacing}set letterSpacing(e){this.textRenderer.set.letterSpacing(this.trState,e)}get lineHeight(){return this.trState.props.lineHeight}set lineHeight(e){this.textRenderer.set.lineHeight&&this.textRenderer.set.lineHeight(this.trState,e)}get maxLines(){return this.trState.props.maxLines}set maxLines(e){this.textRenderer.set.maxLines&&this.textRenderer.set.maxLines(this.trState,e)}get textBaseline(){return this.trState.props.textBaseline}set textBaseline(e){this.textRenderer.set.textBaseline&&this.textRenderer.set.textBaseline(this.trState,e)}get verticalAlign(){return this.trState.props.verticalAlign}set verticalAlign(e){this.textRenderer.set.verticalAlign&&this.textRenderer.set.verticalAlign(this.trState,e)}get overflowSuffix(){return this.trState.props.overflowSuffix}set overflowSuffix(e){this.textRenderer.set.overflowSuffix&&this.textRenderer.set.overflowSuffix(this.trState,e)}get debug(){return this.trState.props.debug}set debug(e){this.textRenderer.set.debug(this.trState,e)}update(e,n){super.update(e,n),H(this.globalTransform),this.textRenderer.set.x(this.trState,this.globalTransform.tx),this.textRenderer.set.y(this.trState,this.globalTransform.ty)}checkRenderProps(){return this.trState.props.text!==""?!0:super.checkRenderProps()}onChangeIsRenderable(e){super.onChangeIsRenderable(e),this.textRenderer.setIsRenderable(this.trState,e)}renderQuads(e){var n;H(this.globalTransform),!(this.parentHasRenderTexture&&(!e.renderToTextureActive||this.parentRenderTexture!==e.activeRttNode))&&(this.parentHasRenderTexture&&((n=this.props.parent)!=null&&n.rtt)&&(this.globalTransform=Le.identity(),this.localTransform&&this.globalTransform.multiply(this.localTransform)),H(this.globalTransform),this.textRenderer.renderQuads(this.trState,this.globalTransform,this.clippingRect,this.worldAlpha,this.parentHasRenderTexture,this.framebufferDimensions))}destroy(){super.destroy(),this.textRenderer.destroyState(this.trState)}resolveTextRendererAndState(e){const n=this.stage.resolveTextRenderer(e,this._textRendererOverride),r=n.createState(e);return r.emitter.on("loaded",this.onTextLoaded),r.emitter.on("failed",this.onTextFailed),n.scheduleUpdateState(r),{resolvedTextRenderer:n,textRendererState:r}}}class Na extends jn{constructor(t,e,n){super(t,e,n,new Pa(n,{id:ur(),x:t.x,y:t.y,width:t.width,height:t.height,alpha:t.alpha,autosize:t.autosize,clipping:t.clipping,color:t.color,colorTop:t.colorTop,colorBottom:t.colorBottom,colorLeft:t.colorLeft,colorRight:t.colorRight,colorTl:t.colorTl,colorTr:t.colorTr,colorBl:t.colorBl,colorBr:t.colorBr,zIndex:t.zIndex,zIndexLocked:t.zIndexLocked,scaleX:t.scaleX,scaleY:t.scaleY,mountX:t.mountX,mountY:t.mountY,mount:t.mount,pivot:t.pivot,pivotX:t.pivotX,pivotY:t.pivotY,rotation:t.rotation,text:t.text,fontSize:t.fontSize,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontStretch:t.fontStretch,fontStyle:t.fontStyle,contain:t.contain,scrollable:t.scrollable,letterSpacing:t.letterSpacing,textAlign:t.textAlign,scrollY:t.scrollY,offsetY:t.offsetY,textRendererOverride:t.textRendererOverride,lineHeight:t.lineHeight,maxLines:t.maxLines,textBaseline:t.textBaseline,verticalAlign:t.verticalAlign,overflowSuffix:t.overflowSuffix,debug:t.debug,parent:null,texture:null,textureOptions:null,shader:null,shaderProps:null,rtt:!1}))}get text(){return this.coreNode.text}set text(t){this.coreNode.text=t}get textRendererOverride(){return this.coreNode.textRendererOverride}set textRendererOverride(t){this.coreNode.textRendererOverride=t}get fontSize(){return this.coreNode.fontSize}set fontSize(t){this.coreNode.fontSize=t}get fontFamily(){return this.coreNode.fontFamily}set fontFamily(t){this.coreNode.fontFamily=t}get fontWeight(){return this.coreNode.fontWeight}set fontWeight(t){this.coreNode.fontWeight=t}get fontStretch(){return this.coreNode.fontStretch}set fontStretch(t){this.coreNode.fontStretch=t}get fontStyle(){return this.coreNode.fontStyle}set fontStyle(t){this.coreNode.fontStyle=t}get textAlign(){return this.coreNode.textAlign}set textAlign(t){this.coreNode.textAlign=t}get contain(){return this.coreNode.contain}set contain(t){this.coreNode.contain=t}get scrollable(){return this.coreNode.scrollable}set scrollable(t){this.coreNode.scrollable=t}get scrollY(){return this.coreNode.scrollY}set scrollY(t){this.coreNode.scrollY=t}get offsetY(){return this.coreNode.offsetY}set offsetY(t){this.coreNode.offsetY=t}get letterSpacing(){return this.coreNode.letterSpacing}set letterSpacing(t){this.coreNode.letterSpacing=t}get lineHeight(){return this.coreNode.lineHeight}set lineHeight(t){this.coreNode.lineHeight=t}get maxLines(){return this.coreNode.maxLines}set maxLines(t){t&&(this.coreNode.maxLines=t)}get textBaseline(){return this.coreNode.textBaseline}set textBaseline(t){t&&(this.coreNode.textBaseline=t)}get verticalAlign(){return this.coreNode.verticalAlign}set verticalAlign(t){t&&(this.coreNode.verticalAlign=t)}get overflowSuffix(){return this.coreNode.overflowSuffix}set overflowSuffix(t){t&&(this.coreNode.overflowSuffix=t)}get debug(){return this.coreNode.debug}set debug(t){this.coreNode.debug=t}}class ka{constructor(){f(this,"root",null);f(this,"stage",null);f(this,"rendererMain",null)}async init(t,e,n){this.stage=new La({rootId:ur(),appWidth:e.appWidth,appHeight:e.appHeight,txMemByteThreshold:e.txMemByteThreshold,boundsMargin:e.boundsMargin,deviceLogicalPixelRatio:e.deviceLogicalPixelRatio,devicePhysicalPixelRatio:e.devicePhysicalPixelRatio,clearColor:e.clearColor,canvas:n,fpsUpdateInterval:e.fpsUpdateInterval,enableContextSpy:e.enableContextSpy,numImageWorkers:e.numImageWorkers,renderMode:e.renderMode,debug:{monitorTextureCache:!1}}),this.rendererMain=t,H(this.stage.root);const r=new jn(t.resolveNodeDefaults({}),this.rendererMain,this.stage,this.stage.root);this.root=r,r.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,r)),this.onCreateNode(r),e.coreExtensionModule&&await pa(e.coreExtensionModule,this.stage),this.stage.on("fpsUpdate",(i,o)=>{this.onFpsUpdate(o)}),this.stage.on("frameTick",(i,o)=>{this.onFrameTick(o)}),this.stage.on("idle",()=>{this.onIdle()})}createNode(t){H(this.rendererMain),H(this.stage);const e=new jn(t,this.rendererMain,this.stage);return e.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,e)),this.onCreateNode(e),e}createTextNode(t){H(this.rendererMain),H(this.stage);const e=new Na(t,this.rendererMain,this.stage);return e.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,e)),this.onCreateNode(e),e}destroyNode(t){t.destroy()}releaseTexture(t){const{stage:e}=this;H(e),e.txManager.removeTextureIdFromCache(t)}getRootNode(){return H(this.root),this.root}onCreateNode(t){throw new Error("Method not implemented.")}onBeforeDestroyNode(t){throw new Error("Method not implemented.")}onFpsUpdate(t){throw new Error("Method not implemented.")}onFrameTick(t){throw new Error("Method not implemented.")}onIdle(){throw new Error("Method not implemented.")}}let dt,hr;function Oa(s={},t="app"){const e=new ka;return dt=new ga(s,t,e),hr=dt.createShader.bind(dt),dt}class Ba extends Array{constructor(e){super();f(this,"_parent");this._parent=e}get selected(){return this[this._parent.selected||0]}get firstChild(){return this[0]}insert(e,n){if(n){const r=this.indexOf(n);this.splice(r,0,e)}else this.push(e);e.parent=this._parent}remove(e){const n=this.indexOf(e);n>=0&&this.splice(n,1)}}var za={BASE_URL:"/vue-demo-app/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};function $a(){return!!(za&&!1)}const Da=$a()||!1,Ee={debug:!1,animationsEnabled:!0,animationSettings:{duration:250,easing:"ease-in-out"},fontSettings:{fontFamily:"Ubuntu",fontSize:100},setActiveElement:()=>{}};function jr(s){return Ha(s)&&s.debug}function pt(s,t,...e){Da&&(Ee.debug||jr(t)||jr(e[0]))&&console.log(s,t,...e)}const Nt=s=>s instanceof Function;function Ha(s){return typeof s=="object"}function tn(s){return Array.isArray(s)}function Ua(s){return typeof s=="string"}function Wa(s){return typeof s=="number"}function Ya(s){return"destroy"in s&&typeof s.destroy=="function"}function En(s){return s instanceof gt}function ja(s,t){for(const e of t)if(e in s)return!0;return!1}function eo(s,t={}){if(tn(s))s.forEach(e=>{eo(e,t)});else if(s)for(const e in s)t[e]===void 0&&(t[e]=s[e]);return t}class Xr extends Array{constructor(e,n={}){var t=(...If)=>(super(...If),f(this,"onChange"),this);return tn(n)?t(...n):Ua(n)?t(n):t(...Object.entries(n).filter(([r,i])=>i).map(([r])=>r)),this.onChange=e,this}has(e){return this.indexOf(e)>=0}is(e){return this.indexOf(e)>=0}add(e){this.push(e),this.onChange()}toggle(e){this.has(e)?this.remove(e):this.add(e)}remove(e){const n=this.indexOf(e);n>=0&&(this.splice(n,1),this.onChange())}}const ht={Element:"element",TextNode:"textNode",Text:"text"};function Xa(s){const t=[];let e=!1,n=0;for(let C=0;C<s.children.length;C++){const A=s.children[C];if(A.type!==ht.Text&&A.flexItem!==!1){if(A.type===ht.TextNode&&A.text&&!(A.width||A.height))return!1;A.flexOrder!==void 0&&(e=!0),A.flexGrow!==void 0&&(n+=A.flexGrow),t.push(A)}}e&&t.sort((C,A)=>(C.flexOrder||0)-(A.flexOrder||0));const r=t.length,o=(s.flexDirection||"row")==="row",l=o?"width":"height",a=o?"height":"width",u=o?"marginLeft":"marginTop",c=o?"marginRight":"marginBottom",h=o?"x":"y",p=o?"y":"x",m=s[l]||0,x=s[a]||0,v=s.gap||0,_=s.justifyContent||"flexStart",w=s.alignItems;if(n){const C=t.reduce((I,F)=>I+(F.flexGrow?0:F[l]||0)+(F[u]||0)+(F[c]||0),0),A=(m-C-v*(r-1))/n;for(let I=0;I<t.length;I++){const F=t[I];F.flexGrow!==void 0&&F.flexGrow>0&&(F[l]=F.flexGrow*A)}}let R=0;["center","spaceBetween","spaceEvenly"].includes(_)&&(R=t.reduce((C,A)=>C+(A[l]||0)+(A[u]||0)+(A[c]||0),0));const E=x&&w?C=>{w==="flexStart"?C[p]=0:w==="center"?C[p]=(x-(C[a]||0))/2:w==="flexEnd"&&(C[p]=x-(C[a]||0))}:C=>C;if(_==="flexStart"){let C=0;for(let A=0;A<t.length;A++){const I=t[A];I[h]=C+(I[u]||0),C+=(I[l]||0)+v+(I[u]||0)+(I[c]||0),E(I)}if(s.flexBoundary!=="fixed"){const A=C-v;if(A!==s[l])return s[l]=A,!0}}else if(_==="flexEnd"){let C=m;for(let A=r-1;A>=0;A--){const I=t[A];I[h]=C-(I[l]||0)-(I[c]||0),C-=(I[l]||0)+v+(I[u]||0)+(I[c]||0),E(I)}if(s.flexBoundary!=="fixed"){const A=C-v;if(A!==s[l])return s[l]=A,!0}}else if(_==="center"){let C=(m-(R+v*(r-1)))/2;for(let A=0;A<t.length;A++){const I=t[A];I[h]=C+(I[u]||0),C+=(I[l]||0)+v+(I[u]||0)+(I[c]||0),E(I)}}else if(_==="spaceBetween"){const C=(m-R)/(r-1);let A=0;for(let I=0;I<t.length;I++){const F=t[I];F[h]=A+(F[u]||0),A+=(F[l]||0)+C+(F[u]||0)+(F[c]||0),E(F)}}else if(_==="spaceEvenly"){const C=(m-R)/(r+1);let A=C;for(let I=0;I<t.length;I++){const F=t[I];F[h]=A+(F[u]||0),A+=(F[l]||0)+C+(F[u]||0)+(F[c]||0),E(F)}}return!1}const Ds=new Set;let Mn=!0;function Vr(s){const t=[];for(const[e,n]of Object.entries(s))t.push({type:e,props:n});return hr("DynamicShader",{effects:t})}function ts(s=""){return{set(t){Wa(t)&&(t={width:t,color:255}),this.effects=this.effects?{...this.effects||{},[`border${s}`]:t}:{[`border${s}`]:t}},get(){var t;return(t=this.effects)==null?void 0:t[`border${s}`]}}}const Va=["alpha","color","colorTop","colorRight","colorLeft","colorBottom","colorTl","colorTr","colorBl","colorBr","height","fontSize","lineHeight","mount","mountX","mountY","pivot","pivotX","pivotY","rotation","scale","width","worldX","worldY","x","y","zIndex","zIndexLocked"],Ka=["absX","absY","autosize","clipping","contain","fontFamily","fontStretch","fontStyle","fontWeight","letterSpacing","maxLines","offsetY","overflowSuffix","rtt","scrollable","scrollY","src","text","textAlign","textBaseline","textOverflow","texture","verticalAlign","wordWrap"];class gt extends Object{constructor(t){super(),this.type=t==="text"?ht.TextNode:ht.Element,this.rendered=!1,this.lng={},this.children=new Ba(this)}get effects(){return this._effects}set effects(t){this._effects=t,this.rendered&&(this.shader=Vr(t))}get parent(){return this._parent}set parent(t){this._parent=t,this.rendered&&(this.lng.parent=(t==null?void 0:t.lng)??null)}set shader(t){tn(t)&&(t=hr(...t)),this.lng.shader=t}_sendToLightningAnimatable(t,e){if(this.transition&&this.rendered&&Ee.animationsEnabled&&(this.transition===!0||this.transition[t])){const n=this.transition===!0||this.transition[t]===!0?void 0:this.transition[t],r=this.animate({[t]:e},n);return Nt(this.onAnimationStarted)&&r.once("animating",i=>{var o;(o=this.onAnimationStarted)==null||o.call(this,i,t,e)}),Nt(this.onAnimationFinished)&&r.once("stopped",i=>{var o;(o=this.onAnimationFinished)==null||o.call(this,i,t,e)}),r.start()}this.lng[t]=e}animate(t,e){return H(this.rendered,"Node must be rendered before animating"),this.lng.animate(t,e||this.animationSettings)}chain(t,e){return this._animationRunning&&(this._animationQueue=[],this._animationRunning=!1),e?this._animationQueueSettings=e:this._animationQueueSettings||(this._animationQueueSettings=e||this.animationSettings),e=e||this._animationQueueSettings,this._animationQueue=this._animationQueue||[],this._animationQueue.push({props:t,animationSettings:e}),this}async start(){let t=this._animationQueue.shift();for(;t;)this._animationRunning=!0,await this.animate(t.props,t.animationSettings).start().waitUntilStopped(),t=this._animationQueue.shift();this._animationRunning=!1,this._animationQueueSettings=void 0}setFocus(){if(this.rendered){if(this.forwardFocus!==void 0)if(Nt(this.forwardFocus)){if(this.forwardFocus.call(this,this)!==!1)return}else{const t=typeof this.forwardFocus=="number"?this.forwardFocus:null;if(t!==null&&t<this.children.length){const e=this.children[t];En(e)&&e.setFocus();return}}queueMicrotask(()=>Ee.setActiveElement(this))}else this.autofocus=!0}isTextNode(){return this.type===ht.TextNode}_layoutOnLoad(){this.lng.on("loaded",(t,e)=>{const{dimensions:n}=e;this.parent.updateLayout(this,n)})}getText(){let t="";for(let e=0;e<this.children.length;e++)t+=this.children[e].text;return t}destroy(){this._queueDelete&&Ya(this.lng)&&this.lng.destroy()}set onEvents(t){this._events=t}get onEvents(){return this._events}set style(t){tn(t)?this._style=eo(t):this._style=t;for(const e in this._style)this[e]===void 0&&(this[e]=this._style[e])}get style(){return this._style}get hasChildren(){return this.children.length>0}getChildById(t){return this.children.find(e=>e.id===t)}searchChildrenById(t){for(let e=0;e<this.children.length;e++){const n=this.children[e];if(En(n)){if(n.id===t)return n;const r=n.searchChildrenById(t);if(r)return r}}}set states(t){this._states=new Xr(this._stateChanged.bind(this),t),this.rendered&&this._stateChanged()}get states(){return this._states=this._states||new Xr(this._stateChanged.bind(this)),this._states}get animationSettings(){return this._animationSettings||Ee.animationSettings}set animationSettings(t){this._animationSettings=t}requiresLayout(){return this.display==="flex"||this.onBeforeLayout}updateLayout(t,e){var n,r;if(this.hasChildren){pt("Layout: ",this);let i=!1;Nt(this.onBeforeLayout)&&(i=this.onBeforeLayout.call(this,this,t,e)||!1),this.display==="flex"?(Xa(this)||i)&&((n=this.parent)==null||n.updateLayout()):i&&((r=this.parent)==null||r.updateLayout()),Nt(this.onLayout)&&this.onLayout.call(this,this,t,e)}}_stateChanged(){if(pt("State Changed: ",this,this.states),this.forwardStates){const e=this.states.slice();this.children.forEach(n=>{n.states=e})}const t=this.states;if(this._undoStyles||this.style&&ja(this.style,t)){this._undoStyles=this._undoStyles||[];const e={};this._undoStyles.forEach(r=>{e[r]=this.style[r]});const n=t.reduce((r,i)=>{const o=this.style[i];return o&&(r={...r,...o}),r},{});this._undoStyles=Object.keys(n),n.transition!==void 0&&(this.transition=n.transition),Object.assign(this,e,n)}}render(){var r;const t=this,e=this.parent;if(!e){console.warn("Parent not set - no node created for: ",this);return}if(!e.rendered){console.warn("Parent not rendered yet: ",this);return}if(this.rendered){console.warn("Node already rendered: ",this);return}e.requiresLayout()&&!Ds.has(e)&&(Ds.add(e),Mn&&(Mn=!1,queueMicrotask(()=>{Mn=!0;const i=[...Ds];Ds.clear();for(let o=i.length-1;o>=0;o--)i[o].updateLayout()}))),this._states&&this._stateChanged();const n=t.lng;if(n.x=n.x||0,n.y=n.y||0,e.rendered&&(n.parent=e.lng),t._effects&&(n.shader=Vr(t._effects)),t.isTextNode()){const i=n;if(Ee.fontSettings)for(const o in Ee.fontSettings)i[o]===void 0&&(i[o]=Ee.fontSettings[o]);i.text=i.text||t.getText(),i.textAlign&&!i.contain&&console.warn("Text align requires contain: ",t.getText()),i.contain&&(i.width||(i.width=(e.width||0)-i.x-(i.marginRight||0)),i.contain==="both"&&!i.height&&!i.maxLines?i.height=(e.height||0)-i.y-(i.marginBottom||0):i.maxLines===1&&(i.height=i.height||i.lineHeight||i.fontSize)),pt("Rendering: ",this,n),t.lng=dt.createTextNode(n),e.requiresLayout()&&(!n.width||!n.height)&&t._layoutOnLoad()}else n.texture||(isNaN(n.width)&&(n.width=(e.width||0)-n.x),isNaN(n.height)&&(n.height=(e.height||0)-n.y),n.rtt&&!n.color&&(n.color=4294967295),!n.color&&!n.src&&(n.color=0)),pt("Rendering: ",this,n),t.lng=dt.createNode(n);if(t.rendered=!0,t.autosize&&e.requiresLayout()&&t._layoutOnLoad(),t.onFail&&t.lng.on("failed",t.onFail),t.onLoad&&t.lng.on("loaded",t.onLoad),Nt(this.onCreate)&&this.onCreate.call(this,t),t.onEvents&&t.onEvents.forEach(([i,o])=>{t.lng.on(i,(l,a)=>o(t,a))}),(r=t.lng)!=null&&r.div&&(t.lng.div.element=t),t.type===ht.Element)for(let i=0;i<t.children.length;i++){const o=t.children[i];H(o,"Child is undefined"),En(o)?o.render():o.text&&o.type===ht.Text&&console.warn("TextNode outside of <Text>: ",o)}t.autofocus&&t.setFocus()}}for(const s of Va)Object.defineProperty(gt.prototype,s,{get(){return this.lng[s]},set(t){this._sendToLightningAnimatable(s,t)}});for(const s of Ka)Object.defineProperty(gt.prototype,s,{get(){return this.lng[s]},set(t){this.lng[s]=t}});Object.defineProperties(gt.prototype,{borderRadius:{set(s){this.effects=this.effects?{...this.effects,radius:{radius:s}}:{radius:{radius:s}}},get(){var s,t;return(t=(s=this.effects)==null?void 0:s.radius)==null?void 0:t.radius}},border:ts(),borderLeft:ts("Left"),borderRight:ts("Right"),borderTop:ts("Top"),borderBottom:ts("Bottom"),linearGradient:{set(s={}){this.effects=this.effects?{...this.effects,linearGradient:s}:{linearGradient:s}},get(){var s;return(s=this.effects)==null?void 0:s.linearGradient}}});/**
* @vue/shared v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function to(s,t){const e=new Set(s.split(","));return n=>e.has(n)}const de={},Xt=[],ze=()=>{},Ga=()=>!1,fr=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&(s.charCodeAt(2)>122||s.charCodeAt(2)<97),so=s=>s.startsWith("onUpdate:"),Se=Object.assign,dr=(s,t)=>{const e=s.indexOf(t);e>-1&&s.splice(e,1)},qa=Object.prototype.hasOwnProperty,oe=(s,t)=>qa.call(s,t),Q=Array.isArray,Vt=s=>cn(s)==="[object Map]",no=s=>cn(s)==="[object Set]",se=s=>typeof s=="function",Fe=s=>typeof s=="string",Ft=s=>typeof s=="symbol",ge=s=>s!==null&&typeof s=="object",ro=s=>(ge(s)||se(s))&&se(s.then)&&se(s.catch),io=Object.prototype.toString,cn=s=>io.call(s),Qa=s=>cn(s).slice(8,-1),oo=s=>cn(s)==="[object Object]",pr=s=>Fe(s)&&s!=="NaN"&&s[0]!=="-"&&""+parseInt(s,10)===s,hs=to(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),un=s=>{const t=Object.create(null);return e=>t[e]||(t[e]=s(e))},Za=/-(\w)/g,ws=un(s=>s.replace(Za,(t,e)=>e?e.toUpperCase():"")),Ja=/\B([A-Z])/g,hn=un(s=>s.replace(Ja,"-$1").toLowerCase()),ec=un(s=>s.charAt(0).toUpperCase()+s.slice(1)),Fn=un(s=>s?`on${ec(s)}`:""),yt=(s,t)=>!Object.is(s,t),An=(s,...t)=>{for(let e=0;e<s.length;e++)s[e](...t)},lo=(s,t,e,n=!1)=>{Object.defineProperty(s,t,{configurable:!0,enumerable:!1,writable:n,value:e})},tc=s=>{const t=parseFloat(s);return isNaN(t)?s:t};let Kr;const ao=()=>Kr||(Kr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ms(s){if(Q(s)){const t={};for(let e=0;e<s.length;e++){const n=s[e],r=Fe(n)?ic(n):Ms(n);if(r)for(const i in r)t[i]=r[i]}return t}else if(Fe(s)||ge(s))return s}const sc=/;(?![^(]*\))/g,nc=/:([^]+)/,rc=/\/\*[^]*?\*\//g;function ic(s){const t={};return s.replace(rc,"").split(sc).forEach(e=>{if(e){const n=e.split(nc);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function gr(s){let t="";if(Fe(s))t=s;else if(Q(s))for(let e=0;e<s.length;e++){const n=gr(s[e]);n&&(t+=n+" ")}else if(ge(s))for(const e in s)s[e]&&(t+=e+" ");return t.trim()}const _f=s=>Fe(s)?s:s==null?"":Q(s)||ge(s)&&(s.toString===io||!se(s.toString))?JSON.stringify(s,co,2):String(s),co=(s,t)=>t&&t.__v_isRef?co(s,t.value):Vt(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[n,r],i)=>(e[Ln(n,i)+" =>"]=r,e),{})}:no(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>Ln(e))}:Ft(t)?Ln(t):ge(t)&&!Q(t)&&!oo(t)?String(t):t,Ln=(s,t="")=>{var e;return Ft(s)?`Symbol(${(e=s.description)!=null?e:t})`:s};/**
* @vue/reactivity v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let De;class oc{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=De,!t&&De&&(this.index=(De.scopes||(De.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const e=De;try{return De=this,t()}finally{De=e}}}on(){De=this}off(){De=this.parent}stop(t){if(this._active){let e,n;for(e=0,n=this.effects.length;e<n;e++)this.effects[e].stop();for(e=0,n=this.cleanups.length;e<n;e++)this.cleanups[e]();if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}function lc(s,t=De){t&&t.active&&t.effects.push(s)}function ac(){return De}let Et;class mr{constructor(t,e,n,r){this.fn=t,this.trigger=e,this.scheduler=n,this.active=!0,this.deps=[],this._dirtyLevel=5,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,lc(this,r)}get dirty(){if(this._dirtyLevel===2)return!1;if(this._dirtyLevel===3||this._dirtyLevel===4){this._dirtyLevel=1,wt();for(let t=0;t<this._depsLength;t++){const e=this.deps[t];if(e.computed){if(e.computed.effect._dirtyLevel===2)return!0;if(cc(e.computed),this._dirtyLevel>=5)break}}this._dirtyLevel===1&&(this._dirtyLevel=0),bt()}return this._dirtyLevel>=5}set dirty(t){this._dirtyLevel=t?5:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=mt,e=Et;try{return mt=!0,Et=this,this._runnings++,Gr(this),this.fn()}finally{qr(this),this._runnings--,Et=e,mt=t}}stop(){this.active&&(Gr(this),qr(this),this.onStop&&this.onStop(),this.active=!1)}}function cc(s){return s.value}function Gr(s){s._trackId++,s._depsLength=0}function qr(s){if(s.deps.length>s._depsLength){for(let t=s._depsLength;t<s.deps.length;t++)uo(s.deps[t],s);s.deps.length=s._depsLength}}function uo(s,t){const e=s.get(t);e!==void 0&&t._trackId!==e&&(s.delete(t),s.size===0&&s.cleanup())}let mt=!0,Vn=0;const ho=[];function wt(){ho.push(mt),mt=!1}function bt(){const s=ho.pop();mt=s===void 0?!0:s}function xr(){Vn++}function yr(){for(Vn--;!Vn&&Kn.length;)Kn.shift()()}function fo(s,t,e){if(t.get(s)!==s._trackId){t.set(s,s._trackId);const n=s.deps[s._depsLength];n!==t?(n&&uo(n,s),s.deps[s._depsLength++]=t):s._depsLength++}}const Kn=[];function po(s,t,e){xr();for(const n of s.keys()){if(!s.computed&&n.computed&&s.get(n)===n._trackId&&n._runnings>0){n._dirtyLevel=2;continue}let r;n._dirtyLevel<t&&(r??(r=s.get(n)===n._trackId))&&(n._shouldSchedule||(n._shouldSchedule=n._dirtyLevel===0),n.computed&&n._dirtyLevel===2&&(n._shouldSchedule=!0),n._dirtyLevel=t),n._shouldSchedule&&(r??(r=s.get(n)===n._trackId))&&(n.trigger(),(!n._runnings||n.allowRecurse)&&n._dirtyLevel!==3&&(n._shouldSchedule=!1,n.scheduler&&Kn.push(n.scheduler)))}yr()}const go=(s,t)=>{const e=new Map;return e.cleanup=s,e.computed=t,e},Gn=new WeakMap,Mt=Symbol(""),qn=Symbol("");function Ne(s,t,e){if(mt&&Et){let n=Gn.get(s);n||Gn.set(s,n=new Map);let r=n.get(e);r||n.set(e,r=go(()=>n.delete(e))),fo(Et,r)}}function et(s,t,e,n,r,i){const o=Gn.get(s);if(!o)return;let l=[];if(t==="clear")l=[...o.values()];else if(e==="length"&&Q(s)){const a=Number(n);o.forEach((u,c)=>{(c==="length"||!Ft(c)&&c>=a)&&l.push(u)})}else switch(e!==void 0&&l.push(o.get(e)),t){case"add":Q(s)?pr(e)&&l.push(o.get("length")):(l.push(o.get(Mt)),Vt(s)&&l.push(o.get(qn)));break;case"delete":Q(s)||(l.push(o.get(Mt)),Vt(s)&&l.push(o.get(qn)));break;case"set":Vt(s)&&l.push(o.get(Mt));break}xr();for(const a of l)a&&po(a,5);yr()}const uc=to("__proto__,__v_isRef,__isVue"),mo=new Set(Object.getOwnPropertyNames(Symbol).filter(s=>s!=="arguments"&&s!=="caller").map(s=>Symbol[s]).filter(Ft)),Qr=hc();function hc(){const s={};return["includes","indexOf","lastIndexOf"].forEach(t=>{s[t]=function(...e){const n=ce(this);for(let i=0,o=this.length;i<o;i++)Ne(n,"get",i+"");const r=n[t](...e);return r===-1||r===!1?n[t](...e.map(ce)):r}}),["push","pop","shift","unshift","splice"].forEach(t=>{s[t]=function(...e){wt(),xr();const n=ce(this)[t].apply(this,e);return yr(),bt(),n}}),s}function fc(s){Ft(s)||(s=String(s));const t=ce(this);return Ne(t,"has",s),t.hasOwnProperty(s)}class xo{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,n){const r=this._isReadonly,i=this._isShallow;if(e==="__v_isReactive")return!r;if(e==="__v_isReadonly")return r;if(e==="__v_isShallow")return i;if(e==="__v_raw")return n===(r?i?Cc:wo:i?_o:vo).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const o=Q(t);if(!r){if(o&&oe(Qr,e))return Reflect.get(Qr,e,n);if(e==="hasOwnProperty")return fc}const l=Reflect.get(t,e,n);return(Ft(e)?mo.has(e):uc(e))||(r||Ne(t,"get",e),i)?l:ke(l)?o&&pr(e)?l:l.value:ge(l)?r?To(l):dn(l):l}}class yo extends xo{constructor(t=!1){super(!1,t)}set(t,e,n,r){let i=t[e];if(!this._isShallow){const a=bs(i);if(!sn(n)&&!bs(n)&&(i=ce(i),n=ce(n)),!Q(t)&&ke(i)&&!ke(n))return a?!1:(i.value=n,!0)}const o=Q(t)&&pr(e)?Number(e)<t.length:oe(t,e),l=Reflect.set(t,e,n,r);return t===ce(r)&&(o?yt(n,i)&&et(t,"set",e,n):et(t,"add",e,n)),l}deleteProperty(t,e){const n=oe(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&et(t,"delete",e,void 0),r}has(t,e){const n=Reflect.has(t,e);return(!Ft(e)||!mo.has(e))&&Ne(t,"has",e),n}ownKeys(t){return Ne(t,"iterate",Q(t)?"length":Mt),Reflect.ownKeys(t)}}class dc extends xo{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const pc=new yo,gc=new dc,mc=new yo(!0);const vr=s=>s,fn=s=>Reflect.getPrototypeOf(s);function Hs(s,t,e=!1,n=!1){s=s.__v_raw;const r=ce(s),i=ce(t);e||(yt(t,i)&&Ne(r,"get",t),Ne(r,"get",i));const{has:o}=fn(r),l=n?vr:e?br:Ts;if(o.call(r,t))return l(s.get(t));if(o.call(r,i))return l(s.get(i));s!==r&&s.get(t)}function Us(s,t=!1){const e=this.__v_raw,n=ce(e),r=ce(s);return t||(yt(s,r)&&Ne(n,"has",s),Ne(n,"has",r)),s===r?e.has(s):e.has(s)||e.has(r)}function Ws(s,t=!1){return s=s.__v_raw,!t&&Ne(ce(s),"iterate",Mt),Reflect.get(s,"size",s)}function Zr(s){s=ce(s);const t=ce(this);return fn(t).has.call(t,s)||(t.add(s),et(t,"add",s,s)),this}function Jr(s,t){t=ce(t);const e=ce(this),{has:n,get:r}=fn(e);let i=n.call(e,s);i||(s=ce(s),i=n.call(e,s));const o=r.call(e,s);return e.set(s,t),i?yt(t,o)&&et(e,"set",s,t):et(e,"add",s,t),this}function ei(s){const t=ce(this),{has:e,get:n}=fn(t);let r=e.call(t,s);r||(s=ce(s),r=e.call(t,s)),n&&n.call(t,s);const i=t.delete(s);return r&&et(t,"delete",s,void 0),i}function ti(){const s=ce(this),t=s.size!==0,e=s.clear();return t&&et(s,"clear",void 0,void 0),e}function Ys(s,t){return function(n,r){const i=this,o=i.__v_raw,l=ce(o),a=t?vr:s?br:Ts;return!s&&Ne(l,"iterate",Mt),o.forEach((u,c)=>n.call(r,a(u),a(c),i))}}function js(s,t,e){return function(...n){const r=this.__v_raw,i=ce(r),o=Vt(i),l=s==="entries"||s===Symbol.iterator&&o,a=s==="keys"&&o,u=r[s](...n),c=e?vr:t?br:Ts;return!t&&Ne(i,"iterate",a?qn:Mt),{next(){const{value:h,done:p}=u.next();return p?{value:h,done:p}:{value:l?[c(h[0]),c(h[1])]:c(h),done:p}},[Symbol.iterator](){return this}}}}function it(s){return function(...t){return s==="delete"?!1:s==="clear"?void 0:this}}function xc(){const s={get(i){return Hs(this,i)},get size(){return Ws(this)},has:Us,add:Zr,set:Jr,delete:ei,clear:ti,forEach:Ys(!1,!1)},t={get(i){return Hs(this,i,!1,!0)},get size(){return Ws(this)},has:Us,add:Zr,set:Jr,delete:ei,clear:ti,forEach:Ys(!1,!0)},e={get(i){return Hs(this,i,!0)},get size(){return Ws(this,!0)},has(i){return Us.call(this,i,!0)},add:it("add"),set:it("set"),delete:it("delete"),clear:it("clear"),forEach:Ys(!0,!1)},n={get(i){return Hs(this,i,!0,!0)},get size(){return Ws(this,!0)},has(i){return Us.call(this,i,!0)},add:it("add"),set:it("set"),delete:it("delete"),clear:it("clear"),forEach:Ys(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{s[i]=js(i,!1,!1),e[i]=js(i,!0,!1),t[i]=js(i,!1,!0),n[i]=js(i,!0,!0)}),[s,e,t,n]}const[yc,vc,_c,wc]=xc();function _r(s,t){const e=t?s?wc:_c:s?vc:yc;return(n,r,i)=>r==="__v_isReactive"?!s:r==="__v_isReadonly"?s:r==="__v_raw"?n:Reflect.get(oe(e,r)&&r in n?e:n,r,i)}const bc={get:_r(!1,!1)},Tc={get:_r(!1,!0)},Sc={get:_r(!0,!1)};const vo=new WeakMap,_o=new WeakMap,wo=new WeakMap,Cc=new WeakMap;function Rc(s){switch(s){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ic(s){return s.__v_skip||!Object.isExtensible(s)?0:Rc(Qa(s))}function dn(s){return bs(s)?s:wr(s,!1,pc,bc,vo)}function bo(s){return wr(s,!1,mc,Tc,_o)}function To(s){return wr(s,!0,gc,Sc,wo)}function wr(s,t,e,n,r){if(!ge(s)||s.__v_raw&&!(t&&s.__v_isReactive))return s;const i=r.get(s);if(i)return i;const o=Ic(s);if(o===0)return s;const l=new Proxy(s,o===2?n:e);return r.set(s,l),l}function fs(s){return bs(s)?fs(s.__v_raw):!!(s&&s.__v_isReactive)}function bs(s){return!!(s&&s.__v_isReadonly)}function sn(s){return!!(s&&s.__v_isShallow)}function So(s){return s?!!s.__v_raw:!1}function ce(s){const t=s&&s.__v_raw;return t?ce(t):s}function Co(s){return Object.isExtensible(s)&&lo(s,"__v_skip",!0),s}const Ts=s=>ge(s)?dn(s):s,br=s=>ge(s)?To(s):s;class Ro{constructor(t,e,n,r){this.getter=t,this._setter=e,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new mr(()=>t(this._value),()=>Qs(this,this.effect._dirtyLevel===3?3:4)),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=n}get value(){const t=ce(this);return(!t._cacheable||t.effect.dirty)&&yt(t._value,t._value=t.effect.run())&&Qs(t,5),Io(t),t.effect._dirtyLevel>=2&&Qs(t,3),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function Ec(s,t,e=!1){let n,r;const i=se(s);return i?(n=s,r=ze):(n=s.get,r=s.set),new Ro(n,r,i||!r,e)}function Io(s){var t;mt&&Et&&(s=ce(s),fo(Et,(t=s.dep)!=null?t:s.dep=go(()=>s.dep=void 0,s instanceof Ro?s:void 0)))}function Qs(s,t=5,e,n){s=ce(s);const r=s.dep;r&&po(r,t)}function ke(s){return!!(s&&s.__v_isRef===!0)}function tt(s){return Eo(s,!1)}function Mc(s){return Eo(s,!0)}function Eo(s,t){return ke(s)?s:new Fc(s,t)}class Fc{constructor(t,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:ce(t),this._value=e?t:Ts(t)}get value(){return Io(this),this._value}set value(t){const e=this.__v_isShallow||sn(t)||bs(t);t=e?t:ce(t),yt(t,this._rawValue)&&(this._rawValue,this._rawValue=t,this._value=e?t:Ts(t),Qs(this,5))}}function _e(s){return ke(s)?s.value:s}const Ac={get:(s,t,e)=>_e(Reflect.get(s,t,e)),set:(s,t,e,n)=>{const r=s[t];return ke(r)&&!ke(e)?(r.value=e,!0):Reflect.set(s,t,e,n)}};function Mo(s){return fs(s)?s:new Proxy(s,Ac)}const Tr=tt(void 0),Lc=s=>Tr.value=s;Ee.setActiveElement=Lc;/**
* @vue/runtime-core v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function xt(s,t,e,n){try{return n?s(...n):s()}catch(r){pn(r,t,e)}}function Ge(s,t,e,n){if(se(s)){const r=xt(s,t,e,n);return r&&ro(r)&&r.catch(i=>{pn(i,t,e)}),r}if(Q(s)){const r=[];for(let i=0;i<s.length;i++)r.push(Ge(s[i],t,e,n));return r}}function pn(s,t,e,n=!0){const r=t?t.vnode:null;if(t){let i=t.parent;const o=t.proxy,l=`https://vuejs.org/error-reference/#runtime-${e}`;for(;i;){const u=i.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](s,o,l)===!1)return}i=i.parent}const a=t.appContext.config.errorHandler;if(a){wt(),xt(a,null,10,[s,o,l]),bt();return}}Pc(s,e,r,n)}function Pc(s,t,e,n=!0){console.error(s)}let Ss=!1,Qn=!1;const Ce=[];let Ke=0;const Kt=[];let lt=null,Ct=0;const Fo=Promise.resolve();let Sr=null;function Ao(s){const t=Sr||Fo;return s?t.then(this?s.bind(this):s):t}function Nc(s){let t=Ke+1,e=Ce.length;for(;t<e;){const n=t+e>>>1,r=Ce[n],i=Cs(r);i<s||i===s&&r.pre?t=n+1:e=n}return t}function Cr(s){(!Ce.length||!Ce.includes(s,Ss&&s.allowRecurse?Ke+1:Ke))&&(s.id==null?Ce.push(s):Ce.splice(Nc(s.id),0,s),Lo())}function Lo(){!Ss&&!Qn&&(Qn=!0,Sr=Fo.then(No))}function kc(s){const t=Ce.indexOf(s);t>Ke&&Ce.splice(t,1)}function Oc(s){Q(s)?Kt.push(...s):(!lt||!lt.includes(s,s.allowRecurse?Ct+1:Ct))&&Kt.push(s),Lo()}function si(s,t,e=Ss?Ke+1:0){for(;e<Ce.length;e++){const n=Ce[e];if(n&&n.pre){if(s&&n.id!==s.uid)continue;Ce.splice(e,1),e--,n()}}}function Po(s){if(Kt.length){const t=[...new Set(Kt)].sort((e,n)=>Cs(e)-Cs(n));if(Kt.length=0,lt){lt.push(...t);return}for(lt=t,Ct=0;Ct<lt.length;Ct++){const e=lt[Ct];e.active!==!1&&e()}lt=null,Ct=0}}const Cs=s=>s.id==null?1/0:s.id,Bc=(s,t)=>{const e=Cs(s)-Cs(t);if(e===0){if(s.pre&&!t.pre)return-1;if(t.pre&&!s.pre)return 1}return e};function No(s){Qn=!1,Ss=!0,Ce.sort(Bc);try{for(Ke=0;Ke<Ce.length;Ke++){const t=Ce[Ke];t&&t.active!==!1&&xt(t,null,14)}}finally{Ke=0,Ce.length=0,Po(),Ss=!1,Sr=null,(Ce.length||Kt.length)&&No()}}function zc(s,t,...e){if(s.isUnmounted)return;const n=s.vnode.props||de;let r=e;const i=t.startsWith("update:"),o=i&&t.slice(7);if(o&&o in n){const c=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:p}=n[c]||de;p&&(r=e.map(m=>Fe(m)?m.trim():m)),h&&(r=e.map(tc))}let l,a=n[l=Fn(t)]||n[l=Fn(ws(t))];!a&&i&&(a=n[l=Fn(hn(t))]),a&&Ge(a,s,6,r);const u=n[l+"Once"];if(u){if(!s.emitted)s.emitted={};else if(s.emitted[l])return;s.emitted[l]=!0,Ge(u,s,6,r)}}function ko(s,t,e=!1){const n=t.emitsCache,r=n.get(s);if(r!==void 0)return r;const i=s.emits;let o={},l=!1;if(!se(s)){const a=u=>{const c=ko(u,t,!0);c&&(l=!0,Se(o,c))};!e&&t.mixins.length&&t.mixins.forEach(a),s.extends&&a(s.extends),s.mixins&&s.mixins.forEach(a)}return!i&&!l?(ge(s)&&n.set(s,null),null):(Q(i)?i.forEach(a=>o[a]=null):Se(o,i),ge(s)&&n.set(s,o),o)}function gn(s,t){return!s||!fr(t)?!1:(t=t.slice(2).replace(/Once$/,""),oe(s,t[0].toLowerCase()+t.slice(1))||oe(s,hn(t))||oe(s,t))}let Re=null,Oo=null;function nn(s){const t=Re;return Re=s,Oo=s&&s.type.__scopeId||null,t}function Ut(s,t=Re,e){if(!t||s._n)return s;const n=(...r)=>{n._d&&di(-1);const i=nn(t);let o;try{o=s(...r)}finally{nn(i),n._d&&di(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function Pn(s){const{type:t,vnode:e,proxy:n,withProxy:r,propsOptions:[i],slots:o,attrs:l,emit:a,render:u,renderCache:c,props:h,data:p,setupState:m,ctx:x,inheritAttrs:v}=s,_=nn(s);let w,R;try{if(e.shapeFlag&4){const C=r||n,A=C;w=Ve(u.call(A,C,c,h,m,p,x)),R=l}else{const C=t;w=Ve(C.length>1?C(h,{attrs:l,slots:o,emit:a}):C(h,null)),R=t.props?l:$c(l)}}catch(C){xs.length=0,pn(C,s,1),w=me(vt)}let E=w;if(R&&v!==!1){const C=Object.keys(R),{shapeFlag:A}=E;C.length&&A&7&&(i&&C.some(so)&&(R=Dc(R,i)),E=Gt(E,R,!1,!0))}return e.dirs&&(E=Gt(E,null,!1,!0),E.dirs=E.dirs?E.dirs.concat(e.dirs):e.dirs),e.transition&&(E.transition=e.transition),w=E,nn(_),w}const $c=s=>{let t;for(const e in s)(e==="class"||e==="style"||fr(e))&&((t||(t={}))[e]=s[e]);return t},Dc=(s,t)=>{const e={};for(const n in s)(!so(n)||!(n.slice(9)in t))&&(e[n]=s[n]);return e};function Hc(s,t,e){const{props:n,children:r,component:i}=s,{props:o,children:l,patchFlag:a}=t,u=i.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&a>=0){if(a&1024)return!0;if(a&16)return n?ni(n,o,u):!!o;if(a&8){const c=t.dynamicProps;for(let h=0;h<c.length;h++){const p=c[h];if(o[p]!==n[p]&&!gn(u,p))return!0}}}else return(r||l)&&(!l||!l.$stable)?!0:n===o?!1:n?o?ni(n,o,u):!0:!!o;return!1}function ni(s,t,e){const n=Object.keys(t);if(n.length!==Object.keys(s).length)return!0;for(let r=0;r<n.length;r++){const i=n[r];if(t[i]!==s[i]&&!gn(e,i))return!0}return!1}function Uc({vnode:s,parent:t},e){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===s&&(n.el=s.el),n===s)(s=t.vnode).el=e,t=t.parent;else break}}const Wc=Symbol.for("v-ndc"),Yc=s=>s.__isSuspense;function jc(s,t){t&&t.pendingBranch?Q(s)?t.effects.push(...s):t.effects.push(s):Oc(s)}function mn(s,t,e=Me,n=!1){if(e){const r=e[s]||(e[s]=[]),i=t.__weh||(t.__weh=(...o)=>{wt();const l=As(e),a=Ge(t,e,s,o);return l(),bt(),a});return n?r.unshift(i):r.push(i),i}}const st=s=>(t,e=Me)=>{(!vn||s==="sp")&&mn(s,(...n)=>t(...n),e)},Xc=st("bm"),Vc=st("m"),Kc=st("bu"),Gc=st("u"),qc=st("bum"),Bo=st("um"),Qc=st("sp"),Zc=st("rtg"),Jc=st("rtc");function eu(s,t=Me){mn("ec",s,t)}function wf(s,t){if(Re===null)return s;const e=_n(Re),n=s.dirs||(s.dirs=[]);for(let r=0;r<t.length;r++){let[i,o,l,a=de]=t[r];i&&(se(i)&&(i={mounted:i,updated:i}),i.deep&&ft(o),n.push({dir:i,instance:e,value:o,oldValue:void 0,arg:l,modifiers:a}))}return s}function Tt(s,t,e,n){const r=s.dirs,i=t&&t.dirs;for(let o=0;o<r.length;o++){const l=r[o];i&&(l.oldValue=i[o].value);let a=l.dir[n];a&&(wt(),Ge(a,e,8,[s.el,l,s,t]),bt())}}function bf(s,t,e,n){let r;const i=e;if(Q(s)||Fe(s)){r=new Array(s.length);for(let o=0,l=s.length;o<l;o++)r[o]=t(s[o],o,void 0,i)}else if(typeof s=="number"){r=new Array(s);for(let o=0;o<s;o++)r[o]=t(o+1,o,void 0,i)}else if(ge(s))if(s[Symbol.iterator])r=Array.from(s,(o,l)=>t(o,l,void 0,i));else{const o=Object.keys(s);r=new Array(o.length);for(let l=0,a=o.length;l<a;l++){const u=o[l];r[l]=t(s[u],u,l,i)}}else r=[];return r}/*! #__NO_SIDE_EFFECTS__ */function At(s,t){return se(s)?Se({name:s.name},t,{setup:s}):s}const ds=s=>!!s.type.__asyncLoader;function zo(s,t,e={},n,r){if(Re.isCE||Re.parent&&ds(Re.parent)&&Re.parent.isCE)return me("slot",e,n);let i=s[t];i&&i._c&&(i._d=!1),Lt();const o=i&&$o(i(e)),l=nl(Be,{key:e.key||o&&o.key||`_${t}`},o||[],o&&s._===1?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),i&&i._c&&(i._d=!0),l}function $o(s){return s.some(t=>on(t)?!(t.type===vt||t.type===Be&&!$o(t.children)):!0)?s:null}const Zn=s=>s?il(s)?_n(s):Zn(s.parent):null,ps=Se(Object.create(null),{$:s=>s,$el:s=>s.vnode.el,$data:s=>s.data,$props:s=>s.props,$attrs:s=>s.attrs,$slots:s=>s.slots,$refs:s=>s.refs,$parent:s=>Zn(s.parent),$root:s=>Zn(s.root),$emit:s=>s.emit,$options:s=>Rr(s),$forceUpdate:s=>s.f||(s.f=()=>{s.effect.dirty=!0,Cr(s.update)}),$nextTick:s=>s.n||(s.n=Ao.bind(s.proxy)),$watch:s=>_u.bind(s)}),Nn=(s,t)=>s!==de&&!s.__isScriptSetup&&oe(s,t),tu={get({_:s},t){if(t==="__v_skip")return!0;const{ctx:e,setupState:n,data:r,props:i,accessCache:o,type:l,appContext:a}=s;let u;if(t[0]!=="$"){const m=o[t];if(m!==void 0)switch(m){case 1:return n[t];case 2:return r[t];case 4:return e[t];case 3:return i[t]}else{if(Nn(n,t))return o[t]=1,n[t];if(r!==de&&oe(r,t))return o[t]=2,r[t];if((u=s.propsOptions[0])&&oe(u,t))return o[t]=3,i[t];if(e!==de&&oe(e,t))return o[t]=4,e[t];Jn&&(o[t]=0)}}const c=ps[t];let h,p;if(c)return t==="$attrs"&&Ne(s.attrs,"get",""),c(s);if((h=l.__cssModules)&&(h=h[t]))return h;if(e!==de&&oe(e,t))return o[t]=4,e[t];if(p=a.config.globalProperties,oe(p,t))return p[t]},set({_:s},t,e){const{data:n,setupState:r,ctx:i}=s;return Nn(r,t)?(r[t]=e,!0):n!==de&&oe(n,t)?(n[t]=e,!0):oe(s.props,t)||t[0]==="$"&&t.slice(1)in s?!1:(i[t]=e,!0)},has({_:{data:s,setupState:t,accessCache:e,ctx:n,appContext:r,propsOptions:i}},o){let l;return!!e[o]||s!==de&&oe(s,o)||Nn(t,o)||(l=i[0])&&oe(l,o)||oe(n,o)||oe(ps,o)||oe(r.config.globalProperties,o)},defineProperty(s,t,e){return e.get!=null?s._.accessCache[t]=0:oe(e,"value")&&this.set(s,t,e.value,null),Reflect.defineProperty(s,t,e)}};function ri(s){return Q(s)?s.reduce((t,e)=>(t[e]=null,t),{}):s}let Jn=!0;function su(s){const t=Rr(s),e=s.proxy,n=s.ctx;Jn=!1,t.beforeCreate&&ii(t.beforeCreate,s,"bc");const{data:r,computed:i,methods:o,watch:l,provide:a,inject:u,created:c,beforeMount:h,mounted:p,beforeUpdate:m,updated:x,activated:v,deactivated:_,beforeDestroy:w,beforeUnmount:R,destroyed:E,unmounted:C,render:A,renderTracked:I,renderTriggered:F,errorCaptured:K,serverPrefetch:X,expose:Z,inheritAttrs:G,components:le,directives:ne,filters:ie}=t;if(u&&nu(u,n,null),o)for(const Y in o){const ee=o[Y];se(ee)&&(n[Y]=ee.bind(e))}if(r){const Y=r.call(e,e);ge(Y)&&(s.data=dn(Y))}if(Jn=!0,i)for(const Y in i){const ee=i[Y],xe=se(ee)?ee.bind(e,e):se(ee.get)?ee.get.bind(e,e):ze,ve=!se(ee)&&se(ee.set)?ee.set.bind(e):ze,we=He({get:xe,set:ve});Object.defineProperty(n,Y,{enumerable:!0,configurable:!0,get:()=>we.value,set:pe=>we.value=pe})}if(l)for(const Y in l)Do(l[Y],n,e,Y);if(a){const Y=se(a)?a.call(e):a;Reflect.ownKeys(Y).forEach(ee=>{Zs(ee,Y[ee])})}c&&ii(c,s,"c");function W(Y,ee){Q(ee)?ee.forEach(xe=>Y(xe.bind(e))):ee&&Y(ee.bind(e))}if(W(Xc,h),W(Vc,p),W(Kc,m),W(Gc,x),W(wu,v),W(bu,_),W(eu,K),W(Jc,I),W(Zc,F),W(qc,R),W(Bo,C),W(Qc,X),Q(Z))if(Z.length){const Y=s.exposed||(s.exposed={});Z.forEach(ee=>{Object.defineProperty(Y,ee,{get:()=>e[ee],set:xe=>e[ee]=xe})})}else s.exposed||(s.exposed={});A&&s.render===ze&&(s.render=A),G!=null&&(s.inheritAttrs=G),le&&(s.components=le),ne&&(s.directives=ne)}function nu(s,t,e=ze){Q(s)&&(s=er(s));for(const n in s){const r=s[n];let i;ge(r)?"default"in r?i=We(r.from||n,r.default,!0):i=We(r.from||n):i=We(r),ke(i)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):t[n]=i}}function ii(s,t,e){Ge(Q(s)?s.map(n=>n.bind(t.proxy)):s.bind(t.proxy),t,e)}function Do(s,t,e,n){const r=n.includes(".")?Zo(e,n):()=>e[n];if(Fe(s)){const i=t[s];se(i)&&ms(r,i)}else if(se(s))ms(r,s.bind(e));else if(ge(s))if(Q(s))s.forEach(i=>Do(i,t,e,n));else{const i=se(s.handler)?s.handler.bind(e):t[s.handler];se(i)&&ms(r,i,s)}}function Rr(s){const t=s.type,{mixins:e,extends:n}=t,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=s.appContext,l=i.get(t);let a;return l?a=l:!r.length&&!e&&!n?a=t:(a={},r.length&&r.forEach(u=>rn(a,u,o,!0)),rn(a,t,o)),ge(t)&&i.set(t,a),a}function rn(s,t,e,n=!1){const{mixins:r,extends:i}=t;i&&rn(s,i,e,!0),r&&r.forEach(o=>rn(s,o,e,!0));for(const o in t)if(!(n&&o==="expose")){const l=ru[o]||e&&e[o];s[o]=l?l(s[o],t[o]):t[o]}return s}const ru={data:oi,props:li,emits:li,methods:cs,computed:cs,beforeCreate:Ie,created:Ie,beforeMount:Ie,mounted:Ie,beforeUpdate:Ie,updated:Ie,beforeDestroy:Ie,beforeUnmount:Ie,destroyed:Ie,unmounted:Ie,activated:Ie,deactivated:Ie,errorCaptured:Ie,serverPrefetch:Ie,components:cs,directives:cs,watch:ou,provide:oi,inject:iu};function oi(s,t){return t?s?function(){return Se(se(s)?s.call(this,this):s,se(t)?t.call(this,this):t)}:t:s}function iu(s,t){return cs(er(s),er(t))}function er(s){if(Q(s)){const t={};for(let e=0;e<s.length;e++)t[s[e]]=s[e];return t}return s}function Ie(s,t){return s?[...new Set([].concat(s,t))]:t}function cs(s,t){return s?Se(Object.create(null),s,t):t}function li(s,t){return s?Q(s)&&Q(t)?[...new Set([...s,...t])]:Se(Object.create(null),ri(s),ri(t??{})):t}function ou(s,t){if(!s)return t;if(!t)return s;const e=Se(Object.create(null),s);for(const n in t)e[n]=Ie(s[n],t[n]);return e}function Ho(){return{app:null,config:{isNativeTag:Ga,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let lu=0;function au(s,t){return function(n,r=null){se(n)||(n=Se({},n)),r!=null&&!ge(r)&&(r=null);const i=Ho(),o=new WeakSet;let l=!1;const a=i.app={_uid:lu++,_component:n,_props:r,_container:null,_context:i,_instance:null,version:Ou,get config(){return i.config},set config(u){},use(u,...c){return o.has(u)||(u&&se(u.install)?(o.add(u),u.install(a,...c)):se(u)&&(o.add(u),u(a,...c))),a},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),a},component(u,c){return c?(i.components[u]=c,a):i.components[u]},directive(u,c){return c?(i.directives[u]=c,a):i.directives[u]},mount(u,c,h){if(!l){const p=me(n,r);return p.appContext=i,h===!0?h="svg":h===!1&&(h=void 0),c&&t?t(p,u):s(p,u,h),l=!0,a._container=u,u.__vue_app__=a,_n(p.component)}},unmount(){l&&(s(null,a._container),delete a._container.__vue_app__)},provide(u,c){return i.provides[u]=c,a},runWithContext(u){const c=gs;gs=a;try{return u()}finally{gs=c}}};return a}}let gs=null;function Zs(s,t){if(Me){let e=Me.provides;const n=Me.parent&&Me.parent.provides;n===e&&(e=Me.provides=Object.create(n)),e[s]=t}}function We(s,t,e=!1){const n=Me||Re;if(n||gs){const r=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:gs._context.provides;if(r&&s in r)return r[s];if(arguments.length>1)return e&&se(t)?t.call(n&&n.proxy):t}}const Uo={},Wo=()=>Object.create(Uo),Yo=s=>Object.getPrototypeOf(s)===Uo;function cu(s,t,e,n=!1){const r={},i=Wo();s.propsDefaults=Object.create(null),jo(s,t,r,i);for(const o in s.propsOptions[0])o in r||(r[o]=void 0);e?s.props=n?r:bo(r):s.type.props?s.props=r:s.props=i,s.attrs=i}function uu(s,t,e,n){const{props:r,attrs:i,vnode:{patchFlag:o}}=s,l=ce(r),[a]=s.propsOptions;let u=!1;if((n||o>0)&&!(o&16)){if(o&8){const c=s.vnode.dynamicProps;for(let h=0;h<c.length;h++){let p=c[h];if(gn(s.emitsOptions,p))continue;const m=t[p];if(a)if(oe(i,p))m!==i[p]&&(i[p]=m,u=!0);else{const x=ws(p);r[x]=tr(a,l,x,m,s,!1)}else m!==i[p]&&(i[p]=m,u=!0)}}}else{jo(s,t,r,i)&&(u=!0);let c;for(const h in l)(!t||!oe(t,h)&&((c=hn(h))===h||!oe(t,c)))&&(a?e&&(e[h]!==void 0||e[c]!==void 0)&&(r[h]=tr(a,l,h,void 0,s,!0)):delete r[h]);if(i!==l)for(const h in i)(!t||!oe(t,h))&&(delete i[h],u=!0)}u&&et(s.attrs,"set","")}function jo(s,t,e,n){const[r,i]=s.propsOptions;let o=!1,l;if(t)for(let a in t){if(hs(a))continue;const u=t[a];let c;r&&oe(r,c=ws(a))?!i||!i.includes(c)?e[c]=u:(l||(l={}))[c]=u:gn(s.emitsOptions,a)||(!(a in n)||u!==n[a])&&(n[a]=u,o=!0)}if(i){const a=ce(e),u=l||de;for(let c=0;c<i.length;c++){const h=i[c];e[h]=tr(r,a,h,u[h],s,!oe(u,h))}}return o}function tr(s,t,e,n,r,i){const o=s[e];if(o!=null){const l=oe(o,"default");if(l&&n===void 0){const a=o.default;if(o.type!==Function&&!o.skipFactory&&se(a)){const{propsDefaults:u}=r;if(e in u)n=u[e];else{const c=As(r);n=u[e]=a.call(null,t),c()}}else n=a}o[0]&&(i&&!l?n=!1:o[1]&&(n===""||n===hn(e))&&(n=!0))}return n}function Xo(s,t,e=!1){const n=t.propsCache,r=n.get(s);if(r)return r;const i=s.props,o={},l=[];let a=!1;if(!se(s)){const c=h=>{a=!0;const[p,m]=Xo(h,t,!0);Se(o,p),m&&l.push(...m)};!e&&t.mixins.length&&t.mixins.forEach(c),s.extends&&c(s.extends),s.mixins&&s.mixins.forEach(c)}if(!i&&!a)return ge(s)&&n.set(s,Xt),Xt;if(Q(i))for(let c=0;c<i.length;c++){const h=ws(i[c]);ai(h)&&(o[h]=de)}else if(i)for(const c in i){const h=ws(c);if(ai(h)){const p=i[c],m=o[h]=Q(p)||se(p)?{type:p}:Se({},p);if(m){const x=hi(Boolean,m.type),v=hi(String,m.type);m[0]=x>-1,m[1]=v<0||x<v,(x>-1||oe(m,"default"))&&l.push(h)}}}const u=[o,l];return ge(s)&&n.set(s,u),u}function ai(s){return s[0]!=="$"&&!hs(s)}function ci(s){return s===null?"null":typeof s=="function"?s.name||"":typeof s=="object"&&s.constructor&&s.constructor.name||""}function ui(s,t){return ci(s)===ci(t)}function hi(s,t){return Q(t)?t.findIndex(e=>ui(e,s)):se(t)&&ui(t,s)?0:-1}const Vo=s=>s[0]==="_"||s==="$stable",Ir=s=>Q(s)?s.map(Ve):[Ve(s)],hu=(s,t,e)=>{if(t._n)return t;const n=Ut((...r)=>Ir(t(...r)),e);return n._c=!1,n},Ko=(s,t,e)=>{const n=s._ctx;for(const r in s){if(Vo(r))continue;const i=s[r];if(se(i))t[r]=hu(r,i,n);else if(i!=null){const o=Ir(i);t[r]=()=>o}}},Go=(s,t)=>{const e=Ir(t);s.slots.default=()=>e},fu=(s,t)=>{const e=s.slots=Wo();if(s.vnode.shapeFlag&32){const n=t._;n?(Se(e,t),lo(e,"_",n,!0)):Ko(t,e)}else t&&Go(s,t)},du=(s,t,e)=>{const{vnode:n,slots:r}=s;let i=!0,o=de;if(n.shapeFlag&32){const l=t._;l?e&&l===1?i=!1:(Se(r,t),!e&&l===1&&delete r._):(i=!t.$stable,Ko(t,r)),o=t}else t&&(Go(s,t),o={default:1});if(i)for(const l in r)!Vo(l)&&o[l]==null&&delete r[l]};function sr(s,t,e,n,r=!1){if(Q(s)){s.forEach((p,m)=>sr(p,t&&(Q(t)?t[m]:t),e,n,r));return}if(ds(n)&&!r)return;const i=n.shapeFlag&4?_n(n.component):n.el,o=r?null:i,{i:l,r:a}=s,u=t&&t.r,c=l.refs===de?l.refs={}:l.refs,h=l.setupState;if(u!=null&&u!==a&&(Fe(u)?(c[u]=null,oe(h,u)&&(h[u]=null)):ke(u)&&(u.value=null)),se(a))xt(a,l,12,[o,c]);else{const p=Fe(a),m=ke(a);if(p||m){const x=()=>{if(s.f){const v=p?oe(h,a)?h[a]:c[a]:a.value;r?Q(v)&&dr(v,i):Q(v)?v.includes(i)||v.push(i):p?(c[a]=[i],oe(h,a)&&(h[a]=c[a])):(a.value=[i],s.k&&(c[s.k]=a.value))}else p?(c[a]=o,oe(h,a)&&(h[a]=o)):m&&(a.value=o,s.k&&(c[s.k]=o))};o?(x.id=-1,Ae(x,e)):x()}}}const Ae=jc;function pu(s){return gu(s)}function gu(s,t){const e=ao();e.__VUE__=!0;const{insert:n,remove:r,patchProp:i,createElement:o,createText:l,createComment:a,setText:u,setElementText:c,parentNode:h,nextSibling:p,setScopeId:m=ze,insertStaticContent:x}=s,v=(d,g,y,S=null,T=null,L=null,z=void 0,P=null,O=!!g.dynamicChildren)=>{if(d===g)return;d&&!ss(d,g)&&(S=b(d),pe(d,T,L,!0),d=null),g.patchFlag===-2&&(O=!1,g.dynamicChildren=null);const{type:M,ref:$,shapeFlag:V}=g;switch(M){case xn:_(d,g,y,S);break;case vt:w(d,g,y,S);break;case On:d==null&&R(g,y,S,z);break;case Be:le(d,g,y,S,T,L,z,P,O);break;default:V&1?A(d,g,y,S,T,L,z,P,O):V&6?ne(d,g,y,S,T,L,z,P,O):(V&64||V&128)&&M.process(d,g,y,S,T,L,z,P,O,D)}$!=null&&T&&sr($,d&&d.ref,L,g||d,!g)},_=(d,g,y,S)=>{if(d==null)n(g.el=l(g.children),y,S);else{const T=g.el=d.el;g.children!==d.children&&u(T,g.children)}},w=(d,g,y,S)=>{d==null?n(g.el=a(g.children||""),y,S):g.el=d.el},R=(d,g,y,S)=>{[d.el,d.anchor]=x(d.children,g,y,S,d.el,d.anchor)},E=({el:d,anchor:g},y,S)=>{let T;for(;d&&d!==g;)T=p(d),n(d,y,S),d=T;n(g,y,S)},C=({el:d,anchor:g})=>{let y;for(;d&&d!==g;)y=p(d),r(d),d=y;r(g)},A=(d,g,y,S,T,L,z,P,O)=>{g.type==="svg"?z="svg":g.type==="math"&&(z="mathml"),d==null?I(g,y,S,T,L,z,P,O):X(d,g,T,L,z,P,O)},I=(d,g,y,S,T,L,z,P)=>{let O,M;const{props:$,shapeFlag:V,transition:j,dirs:q}=d;if(O=d.el=o(d.type,L,$&&$.is,$),V&8?c(O,d.children):V&16&&K(d.children,O,null,S,T,kn(d,L),z,P),q&&Tt(d,null,S,"created"),F(O,d,d.scopeId,z,S),$){for(const fe in $)fe!=="value"&&!hs(fe)&&i(O,fe,null,$[fe],L,d.children,S,T,he);"value"in $&&i(O,"value",null,$.value,L),(M=$.onVnodeBeforeMount)&&Xe(M,S,d)}q&&Tt(d,null,S,"beforeMount");const re=mu(T,j);re&&j.beforeEnter(O),n(O,g,y),((M=$&&$.onVnodeMounted)||re||q)&&Ae(()=>{M&&Xe(M,S,d),re&&j.enter(O),q&&Tt(d,null,S,"mounted")},T)},F=(d,g,y,S,T)=>{if(y&&m(d,y),S)for(let L=0;L<S.length;L++)m(d,S[L]);if(T){let L=T.subTree;if(g===L){const z=T.vnode;F(d,z,z.scopeId,z.slotScopeIds,T.parent)}}},K=(d,g,y,S,T,L,z,P,O=0)=>{for(let M=O;M<d.length;M++){const $=d[M]=P?at(d[M]):Ve(d[M]);v(null,$,g,y,S,T,L,z,P)}},X=(d,g,y,S,T,L,z)=>{const P=g.el=d.el;let{patchFlag:O,dynamicChildren:M,dirs:$}=g;O|=d.patchFlag&16;const V=d.props||de,j=g.props||de;let q;if(y&&St(y,!1),(q=j.onVnodeBeforeUpdate)&&Xe(q,y,g,d),$&&Tt(g,d,y,"beforeUpdate"),y&&St(y,!0),M?Z(d.dynamicChildren,M,P,y,S,kn(g,T),L):z||ee(d,g,P,null,y,S,kn(g,T),L,!1),O>0){if(O&16)G(P,g,V,j,y,S,T);else if(O&2&&V.class!==j.class&&i(P,"class",null,j.class,T),O&4&&i(P,"style",V.style,j.style,T),O&8){const re=g.dynamicProps;for(let fe=0;fe<re.length;fe++){const ae=re[fe],be=V[ae],$e=j[ae];($e!==be||ae==="value")&&i(P,ae,be,$e,T,d.children,y,S,he)}}O&1&&d.children!==g.children&&c(P,g.children)}else!z&&M==null&&G(P,g,V,j,y,S,T);((q=j.onVnodeUpdated)||$)&&Ae(()=>{q&&Xe(q,y,g,d),$&&Tt(g,d,y,"updated")},S)},Z=(d,g,y,S,T,L,z)=>{for(let P=0;P<g.length;P++){const O=d[P],M=g[P],$=O.el&&(O.type===Be||!ss(O,M)||O.shapeFlag&70)?h(O.el):y;v(O,M,$,null,S,T,L,z,!0)}},G=(d,g,y,S,T,L,z)=>{if(y!==S){if(y!==de)for(const P in y)!hs(P)&&!(P in S)&&i(d,P,y[P],null,z,g.children,T,L,he);for(const P in S){if(hs(P))continue;const O=S[P],M=y[P];O!==M&&P!=="value"&&i(d,P,M,O,z,g.children,T,L,he)}"value"in S&&i(d,"value",y.value,S.value,z)}},le=(d,g,y,S,T,L,z,P,O)=>{const M=g.el=d?d.el:l(""),$=g.anchor=d?d.anchor:l("");let{patchFlag:V,dynamicChildren:j,slotScopeIds:q}=g;q&&(P=P?P.concat(q):q),d==null?(n(M,y,S),n($,y,S),K(g.children||[],y,$,T,L,z,P,O)):V>0&&V&64&&j&&d.dynamicChildren?(Z(d.dynamicChildren,j,y,T,L,z,P),(g.key!=null||T&&g===T.subTree)&&qo(d,g,!0)):ee(d,g,y,$,T,L,z,P,O)},ne=(d,g,y,S,T,L,z,P,O)=>{g.slotScopeIds=P,d==null?g.shapeFlag&512?T.ctx.activate(g,y,S,z,O):ie(g,y,S,T,L,z,O):U(d,g,O)},ie=(d,g,y,S,T,L,z)=>{const P=d.component=Fu(d,S,T);if(Jo(d)&&(P.ctx.renderer=D),Au(P),P.asyncDep){if(T&&T.registerDep(P,W,z),!d.el){const O=P.subTree=me(vt);w(null,O,g,y)}}else W(P,d,g,y,T,L,z)},U=(d,g,y)=>{const S=g.component=d.component;if(Hc(d,g,y))if(S.asyncDep&&!S.asyncResolved){Y(S,g,y);return}else S.next=g,kc(S.update),S.effect.dirty=!0,S.update();else g.el=d.el,S.vnode=g},W=(d,g,y,S,T,L,z)=>{const P=()=>{if(d.isMounted){let{next:$,bu:V,u:j,parent:q,vnode:re}=d;{const Pt=Qo(d);if(Pt){$&&($.el=re.el,Y(d,$,z)),Pt.asyncDep.then(()=>{d.isUnmounted||P()});return}}let fe=$,ae;St(d,!1),$?($.el=re.el,Y(d,$,z)):$=re,V&&An(V),(ae=$.props&&$.props.onVnodeBeforeUpdate)&&Xe(ae,q,$,re),St(d,!0);const be=Pn(d),$e=d.subTree;d.subTree=be,v($e,be,h($e.el),b($e),d,T,L),$.el=be.el,fe===null&&Uc(d,be.el),j&&Ae(j,T),(ae=$.props&&$.props.onVnodeUpdated)&&Ae(()=>Xe(ae,q,$,re),T)}else{let $;const{el:V,props:j}=g,{bm:q,m:re,parent:fe}=d,ae=ds(g);if(St(d,!1),q&&An(q),!ae&&($=j&&j.onVnodeBeforeMount)&&Xe($,fe,g),St(d,!0),V&&J){const be=()=>{d.subTree=Pn(d),J(V,d.subTree,d,T,null)};ae?g.type.__asyncLoader().then(()=>!d.isUnmounted&&be()):be()}else{const be=d.subTree=Pn(d);v(null,be,y,S,d,T,L),g.el=be.el}if(re&&Ae(re,T),!ae&&($=j&&j.onVnodeMounted)){const be=g;Ae(()=>Xe($,fe,be),T)}(g.shapeFlag&256||fe&&ds(fe.vnode)&&fe.vnode.shapeFlag&256)&&d.a&&Ae(d.a,T),d.isMounted=!0,g=y=S=null}},O=d.effect=new mr(P,ze,()=>Cr(M),d.scope),M=d.update=()=>{O.dirty&&O.run()};M.id=d.uid,St(d,!0),M()},Y=(d,g,y)=>{g.component=d;const S=d.vnode.props;d.vnode=g,d.next=null,uu(d,g.props,S,y),du(d,g.children,y),wt(),si(d),bt()},ee=(d,g,y,S,T,L,z,P,O=!1)=>{const M=d&&d.children,$=d?d.shapeFlag:0,V=g.children,{patchFlag:j,shapeFlag:q}=g;if(j>0){if(j&128){ve(M,V,y,S,T,L,z,P,O);return}else if(j&256){xe(M,V,y,S,T,L,z,P,O);return}}q&8?($&16&&he(M,T,L),V!==M&&c(y,V)):$&16?q&16?ve(M,V,y,S,T,L,z,P,O):he(M,T,L,!0):($&8&&c(y,""),q&16&&K(V,y,S,T,L,z,P,O))},xe=(d,g,y,S,T,L,z,P,O)=>{d=d||Xt,g=g||Xt;const M=d.length,$=g.length,V=Math.min(M,$);let j;for(j=0;j<V;j++){const q=g[j]=O?at(g[j]):Ve(g[j]);v(d[j],q,y,null,T,L,z,P,O)}M>$?he(d,T,L,!0,!1,V):K(g,y,S,T,L,z,P,O,V)},ve=(d,g,y,S,T,L,z,P,O)=>{let M=0;const $=g.length;let V=d.length-1,j=$-1;for(;M<=V&&M<=j;){const q=d[M],re=g[M]=O?at(g[M]):Ve(g[M]);if(ss(q,re))v(q,re,y,null,T,L,z,P,O);else break;M++}for(;M<=V&&M<=j;){const q=d[V],re=g[j]=O?at(g[j]):Ve(g[j]);if(ss(q,re))v(q,re,y,null,T,L,z,P,O);else break;V--,j--}if(M>V){if(M<=j){const q=j+1,re=q<$?g[q].el:S;for(;M<=j;)v(null,g[M]=O?at(g[M]):Ve(g[M]),y,re,T,L,z,P,O),M++}}else if(M>j)for(;M<=V;)pe(d[M],T,L,!0),M++;else{const q=M,re=M,fe=new Map;for(M=re;M<=j;M++){const Oe=g[M]=O?at(g[M]):Ve(g[M]);Oe.key!=null&&fe.set(Oe.key,M)}let ae,be=0;const $e=j-re+1;let Pt=!1,Pr=0;const Jt=new Array($e);for(M=0;M<$e;M++)Jt[M]=0;for(M=q;M<=V;M++){const Oe=d[M];if(be>=$e){pe(Oe,T,L,!0);continue}let je;if(Oe.key!=null)je=fe.get(Oe.key);else for(ae=re;ae<=j;ae++)if(Jt[ae-re]===0&&ss(Oe,g[ae])){je=ae;break}je===void 0?pe(Oe,T,L,!0):(Jt[je-re]=M+1,je>=Pr?Pr=je:Pt=!0,v(Oe,g[je],y,null,T,L,z,P,O),be++)}const Nr=Pt?xu(Jt):Xt;for(ae=Nr.length-1,M=$e-1;M>=0;M--){const Oe=re+M,je=g[Oe],kr=Oe+1<$?g[Oe+1].el:S;Jt[M]===0?v(null,je,y,kr,T,L,z,P,O):Pt&&(ae<0||M!==Nr[ae]?we(je,y,kr,2):ae--)}}},we=(d,g,y,S,T=null)=>{const{el:L,type:z,transition:P,children:O,shapeFlag:M}=d;if(M&6){we(d.component.subTree,g,y,S);return}if(M&128){d.suspense.move(g,y,S);return}if(M&64){z.move(d,g,y,D);return}if(z===Be){n(L,g,y);for(let V=0;V<O.length;V++)we(O[V],g,y,S);n(d.anchor,g,y);return}if(z===On){E(d,g,y);return}if(S!==2&&M&1&&P)if(S===0)P.beforeEnter(L),n(L,g,y),Ae(()=>P.enter(L),T);else{const{leave:V,delayLeave:j,afterLeave:q}=P,re=()=>n(L,g,y),fe=()=>{V(L,()=>{re(),q&&q()})};j?j(L,re,fe):fe()}else n(L,g,y)},pe=(d,g,y,S=!1,T=!1)=>{const{type:L,props:z,ref:P,children:O,dynamicChildren:M,shapeFlag:$,patchFlag:V,dirs:j,memoIndex:q}=d;if(P!=null&&sr(P,null,y,d,!0),q!=null&&(g.renderCache[q]=void 0),$&256){g.ctx.deactivate(d);return}const re=$&1&&j,fe=!ds(d);let ae;if(fe&&(ae=z&&z.onVnodeBeforeUnmount)&&Xe(ae,g,d),$&6)Qe(d.component,y,S);else{if($&128){d.suspense.unmount(y,S);return}re&&Tt(d,null,g,"beforeUnmount"),$&64?d.type.remove(d,g,y,T,D,S):M&&(L!==Be||V>0&&V&64)?he(M,g,y,!1,!0):(L===Be&&V&384||!T&&$&16)&&he(O,g,y),S&&nt(d)}(fe&&(ae=z&&z.onVnodeUnmounted)||re)&&Ae(()=>{ae&&Xe(ae,g,d),re&&Tt(d,null,g,"unmounted")},y)},nt=d=>{const{type:g,el:y,anchor:S,transition:T}=d;if(g===Be){rt(y,S);return}if(g===On){C(d);return}const L=()=>{r(y),T&&!T.persisted&&T.afterLeave&&T.afterLeave()};if(d.shapeFlag&1&&T&&!T.persisted){const{leave:z,delayLeave:P}=T,O=()=>z(y,L);P?P(d.el,L,O):O()}else L()},rt=(d,g)=>{let y;for(;d!==g;)y=p(d),r(d),d=y;r(g)},Qe=(d,g,y)=>{const{bum:S,scope:T,update:L,subTree:z,um:P,m:O,a:M}=d;fi(O),fi(M),S&&An(S),T.stop(),L&&(L.active=!1,pe(z,d,g,y)),P&&Ae(P,g),Ae(()=>{d.isUnmounted=!0},g),g&&g.pendingBranch&&!g.isUnmounted&&d.asyncDep&&!d.asyncResolved&&d.suspenseId===g.pendingId&&(g.deps--,g.deps===0&&g.resolve())},he=(d,g,y,S=!1,T=!1,L=0)=>{for(let z=L;z<d.length;z++)pe(d[z],g,y,S,T)},b=d=>d.shapeFlag&6?b(d.component.subTree):d.shapeFlag&128?d.suspense.next():p(d.anchor||d.el);let k=!1;const B=(d,g,y)=>{d==null?g._vnode&&pe(g._vnode,null,null,!0):v(g._vnode||null,d,g,null,null,null,y),k||(k=!0,si(),Po(),k=!1),g._vnode=d},D={p:v,um:pe,m:we,r:nt,mt:ie,mc:K,pc:ee,pbc:Z,n:b,o:s};let te,J;return{render:B,hydrate:te,createApp:au(B,te)}}function kn({type:s,props:t},e){return e==="svg"&&s==="foreignObject"||e==="mathml"&&s==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:e}function St({effect:s,update:t},e){s.allowRecurse=t.allowRecurse=e}function mu(s,t){return(!s||s&&!s.pendingBranch)&&t&&!t.persisted}function qo(s,t,e=!1){const n=s.children,r=t.children;if(Q(n)&&Q(r))for(let i=0;i<n.length;i++){const o=n[i];let l=r[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=r[i]=at(r[i]),l.el=o.el),!e&&l.patchFlag!==-2&&qo(o,l)),l.type===xn&&(l.el=o.el)}}function xu(s){const t=s.slice(),e=[0];let n,r,i,o,l;const a=s.length;for(n=0;n<a;n++){const u=s[n];if(u!==0){if(r=e[e.length-1],s[r]<u){t[n]=r,e.push(n);continue}for(i=0,o=e.length-1;i<o;)l=i+o>>1,s[e[l]]<u?i=l+1:o=l;u<s[e[i]]&&(i>0&&(t[n]=e[i-1]),e[i]=n)}}for(i=e.length,o=e[i-1];i-- >0;)e[i]=o,o=t[o];return e}function Qo(s){const t=s.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Qo(t)}function fi(s){if(s)for(let t=0;t<s.length;t++)s[t].active=!1}const yu=Symbol.for("v-scx"),vu=()=>We(yu);function Tf(s,t){return Er(s,null,t)}const Xs={};function ms(s,t,e){return Er(s,t,e)}function Er(s,t,{immediate:e,deep:n,flush:r,once:i,onTrack:o,onTrigger:l}=de){if(t&&i){const I=t;t=(...F)=>{I(...F),A()}}const a=Me,u=I=>n===!0?I:ft(I,n===!1?1:void 0);let c,h=!1,p=!1;if(ke(s)?(c=()=>s.value,h=sn(s)):fs(s)?(c=()=>u(s),h=!0):Q(s)?(p=!0,h=s.some(I=>fs(I)||sn(I)),c=()=>s.map(I=>{if(ke(I))return I.value;if(fs(I))return u(I);if(se(I))return xt(I,a,2)})):se(s)?t?c=()=>xt(s,a,2):c=()=>(m&&m(),Ge(s,a,3,[x])):c=ze,t&&n){const I=c;c=()=>ft(I())}let m,x=I=>{m=E.onStop=()=>{xt(I,a,4),m=E.onStop=void 0}},v;if(vn)if(x=ze,t?e&&Ge(t,a,3,[c(),p?[]:void 0,x]):c(),r==="sync"){const I=vu();v=I.__watcherHandles||(I.__watcherHandles=[])}else return ze;let _=p?new Array(s.length).fill(Xs):Xs;const w=()=>{if(!(!E.active||!E.dirty))if(t){const I=E.run();(n||h||(p?I.some((F,K)=>yt(F,_[K])):yt(I,_)))&&(m&&m(),Ge(t,a,3,[I,_===Xs?void 0:p&&_[0]===Xs?[]:_,x]),_=I)}else E.run()};w.allowRecurse=!!t;let R;r==="sync"?R=w:r==="post"?R=()=>Ae(w,a&&a.suspense):(w.pre=!0,a&&(w.id=a.uid),R=()=>Cr(w));const E=new mr(c,ze,R),C=ac(),A=()=>{E.stop(),C&&dr(C.effects,E)};return t?e?w():_=E.run():r==="post"?Ae(E.run.bind(E),a&&a.suspense):E.run(),v&&v.push(A),A}function _u(s,t,e){const n=this.proxy,r=Fe(s)?s.includes(".")?Zo(n,s):()=>n[s]:s.bind(n,n);let i;se(t)?i=t:(i=t.handler,e=t);const o=As(this),l=Er(r,i.bind(n),e);return o(),l}function Zo(s,t){const e=t.split(".");return()=>{let n=s;for(let r=0;r<e.length&&n;r++)n=n[e[r]];return n}}function ft(s,t=1/0,e){if(t<=0||!ge(s)||s.__v_skip||(e=e||new Set,e.has(s)))return s;if(e.add(s),t--,ke(s))ft(s.value,t,e);else if(Q(s))for(let n=0;n<s.length;n++)ft(s[n],t,e);else if(no(s)||Vt(s))s.forEach(n=>{ft(n,t,e)});else if(oo(s)){for(const n in s)ft(s[n],t,e);for(const n of Object.getOwnPropertySymbols(s))Object.prototype.propertyIsEnumerable.call(s,n)&&ft(s[n],t,e)}return s}const Jo=s=>s.type.__isKeepAlive;function wu(s,t){el(s,"a",t)}function bu(s,t){el(s,"da",t)}function el(s,t,e=Me){const n=s.__wdc||(s.__wdc=()=>{let r=e;for(;r;){if(r.isDeactivated)return;r=r.parent}return s()});if(mn(t,n,e),e){let r=e.parent;for(;r&&r.parent;)Jo(r.parent.vnode)&&Tu(n,t,e,r),r=r.parent}}function Tu(s,t,e,n){const r=mn(t,s,n,!0);Bo(()=>{dr(n[t],r)},e)}function tl(s,t){s.shapeFlag&6&&s.component?tl(s.component.subTree,t):s.shapeFlag&128?(s.ssContent.transition=t.clone(s.ssContent),s.ssFallback.transition=t.clone(s.ssFallback)):s.transition=t}const Su=s=>s.__isTeleport,Be=Symbol.for("v-fgt"),xn=Symbol.for("v-txt"),vt=Symbol.for("v-cmt"),On=Symbol.for("v-stc"),xs=[];let Ue=null;function Lt(s=!1){xs.push(Ue=s?null:[])}function Cu(){xs.pop(),Ue=xs[xs.length-1]||null}let Rs=1;function di(s){Rs+=s}function sl(s){return s.dynamicChildren=Rs>0?Ue||Xt:null,Cu(),Rs>0&&Ue&&Ue.push(s),s}function Fs(s,t,e,n,r,i){return sl(Pe(s,t,e,n,r,i,!0))}function nl(s,t,e,n,r){return sl(me(s,t,e,n,r,!0))}function on(s){return s?s.__v_isVNode===!0:!1}function ss(s,t){return s.type===t.type&&s.key===t.key}const rl=({key:s})=>s??null,Js=({ref:s,ref_key:t,ref_for:e})=>(typeof s=="number"&&(s=""+s),s!=null?Fe(s)||ke(s)||se(s)?{i:Re,r:s,k:t,f:!!e}:s:null);function Pe(s,t=null,e=null,n=0,r=null,i=s===Be?0:1,o=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:s,props:t,key:t&&rl(t),ref:t&&Js(t),scopeId:Oo,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Re};return l?(Mr(a,e),i&128&&s.normalize(a)):e&&(a.shapeFlag|=Fe(e)?8:16),Rs>0&&!o&&Ue&&(a.patchFlag>0||i&6)&&a.patchFlag!==32&&Ue.push(a),a}const me=Ru;function Ru(s,t=null,e=null,n=0,r=null,i=!1){if((!s||s===Wc)&&(s=vt),on(s)){const l=Gt(s,t,!0);return e&&Mr(l,e),Rs>0&&!i&&Ue&&(l.shapeFlag&6?Ue[Ue.indexOf(s)]=l:Ue.push(l)),l.patchFlag=-2,l}if(ku(s)&&(s=s.__vccOpts),t){t=Iu(t);let{class:l,style:a}=t;l&&!Fe(l)&&(t.class=gr(l)),ge(a)&&(So(a)&&!Q(a)&&(a=Se({},a)),t.style=Ms(a))}const o=Fe(s)?1:Yc(s)?128:Su(s)?64:ge(s)?4:se(s)?2:0;return Pe(s,t,e,n,r,o,i,!0)}function Iu(s){return s?So(s)||Yo(s)?Se({},s):s:null}function Gt(s,t,e=!1,n=!1){const{props:r,ref:i,patchFlag:o,children:l,transition:a}=s,u=t?yn(r||{},t):r,c={__v_isVNode:!0,__v_skip:!0,type:s.type,props:u,key:u&&rl(u),ref:t&&t.ref?e&&i?Q(i)?i.concat(Js(t)):[i,Js(t)]:Js(t):i,scopeId:s.scopeId,slotScopeIds:s.slotScopeIds,children:l,target:s.target,targetAnchor:s.targetAnchor,staticCount:s.staticCount,shapeFlag:s.shapeFlag,patchFlag:t&&s.type!==Be?o===-1?16:o|16:o,dynamicProps:s.dynamicProps,dynamicChildren:s.dynamicChildren,appContext:s.appContext,dirs:s.dirs,transition:a,component:s.component,suspense:s.suspense,ssContent:s.ssContent&&Gt(s.ssContent),ssFallback:s.ssFallback&&Gt(s.ssFallback),el:s.el,anchor:s.anchor,ctx:s.ctx,ce:s.ce};return a&&n&&tl(c,a.clone(c)),c}function us(s=" ",t=0){return me(xn,null,s,t)}function Sf(s="",t=!1){return t?(Lt(),nl(vt,null,s)):me(vt,null,s)}function Ve(s){return s==null||typeof s=="boolean"?me(vt):Q(s)?me(Be,null,s.slice()):typeof s=="object"?at(s):me(xn,null,String(s))}function at(s){return s.el===null&&s.patchFlag!==-1||s.memo?s:Gt(s)}function Mr(s,t){let e=0;const{shapeFlag:n}=s;if(t==null)t=null;else if(Q(t))e=16;else if(typeof t=="object")if(n&65){const r=t.default;r&&(r._c&&(r._d=!1),Mr(s,r()),r._c&&(r._d=!0));return}else{e=32;const r=t._;!r&&!Yo(t)?t._ctx=Re:r===3&&Re&&(Re.slots._===1?t._=1:(t._=2,s.patchFlag|=1024))}else se(t)?(t={default:t,_ctx:Re},e=32):(t=String(t),n&64?(e=16,t=[us(t)]):e=8);s.children=t,s.shapeFlag|=e}function yn(...s){const t={};for(let e=0;e<s.length;e++){const n=s[e];for(const r in n)if(r==="class")t.class!==n.class&&(t.class=gr([t.class,n.class]));else if(r==="style")t.style=Ms([t.style,n.style]);else if(fr(r)){const i=t[r],o=n[r];o&&i!==o&&!(Q(i)&&i.includes(o))&&(t[r]=i?[].concat(i,o):o)}else r!==""&&(t[r]=n[r])}return t}function Xe(s,t,e,n=null){Ge(s,t,7,[e,n])}const Eu=Ho();let Mu=0;function Fu(s,t,e){const n=s.type,r=(t?t.appContext:s.appContext)||Eu,i={uid:Mu++,vnode:s,type:n,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new oc(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Xo(n,r),emitsOptions:ko(n,r),emit:null,emitted:null,propsDefaults:de,inheritAttrs:n.inheritAttrs,ctx:de,data:de,props:de,attrs:de,slots:de,refs:de,setupState:de,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=zc.bind(null,i),s.ce&&s.ce(i),i}let Me=null,ln,nr;{const s=ao(),t=(e,n)=>{let r;return(r=s[e])||(r=s[e]=[]),r.push(n),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};ln=t("__VUE_INSTANCE_SETTERS__",e=>Me=e),nr=t("__VUE_SSR_SETTERS__",e=>vn=e)}const As=s=>{const t=Me;return ln(s),s.scope.on(),()=>{s.scope.off(),ln(t)}},pi=()=>{Me&&Me.scope.off(),ln(null)};function il(s){return s.vnode.shapeFlag&4}let vn=!1;function Au(s,t=!1){t&&nr(t);const{props:e,children:n}=s.vnode,r=il(s);cu(s,e,r,t),fu(s,n);const i=r?Lu(s,t):void 0;return t&&nr(!1),i}function Lu(s,t){const e=s.type;s.accessCache=Object.create(null),s.proxy=new Proxy(s.ctx,tu);const{setup:n}=e;if(n){const r=s.setupContext=n.length>1?Nu(s):null,i=As(s);wt();const o=xt(n,s,0,[s.props,r]);if(bt(),i(),ro(o)){if(o.then(pi,pi),t)return o.then(l=>{gi(s,l,t)}).catch(l=>{pn(l,s,0)});s.asyncDep=o}else gi(s,o,t)}else ol(s,t)}function gi(s,t,e){se(t)?s.type.__ssrInlineRender?s.ssrRender=t:s.render=t:ge(t)&&(s.setupState=Mo(t)),ol(s,e)}let mi;function ol(s,t,e){const n=s.type;if(!s.render){if(!t&&mi&&!n.render){const r=n.template||Rr(s).template;if(r){const{isCustomElement:i,compilerOptions:o}=s.appContext.config,{delimiters:l,compilerOptions:a}=n,u=Se(Se({isCustomElement:i,delimiters:l},o),a);n.render=mi(r,u)}}s.render=n.render||ze}{const r=As(s);wt();try{su(s)}finally{bt(),r()}}}const Pu={get(s,t){return Ne(s,"get",""),s[t]}};function Nu(s){const t=e=>{s.exposed=e||{}};return{attrs:new Proxy(s.attrs,Pu),slots:s.slots,emit:s.emit,expose:t}}function _n(s){return s.exposed?s.exposeProxy||(s.exposeProxy=new Proxy(Mo(Co(s.exposed)),{get(t,e){if(e in t)return t[e];if(e in ps)return ps[e](s)},has(t,e){return e in t||e in ps}})):s.proxy}function ku(s){return se(s)&&"__vccOpts"in s}const He=(s,t)=>Ec(s,t,vn);function ll(s,t,e){const n=arguments.length;return n===2?ge(t)&&!Q(t)?on(t)?me(s,null,[t]):me(s,t):me(s,null,t):(n>3?e=Array.prototype.slice.call(arguments,2):n===3&&on(e)&&(e=[e]),me(s,t,e))}const Ou="3.4.29",Bu="comment",Fr={createElement(s){const t=new gt(s);return Co(t),t},createText(s){return{type:ht.Text,text:s,parent:void 0,skipFocus:!0}},createComment(s){return{type:Bu,text:s,parent:void 0,skipFocus:!0}},setText(s,t){pt("Replace Text: ",s,t),s.text=t;const e=s.parent;H(e),e.text=e.getText()},setElementText(s,t){pt("SetElementText: ",s,t),s.text=t},setProperty(s,t,e=!0,n=!0){s[t]=n},insert(s,t,e){pt("INSERT: ",t,s,e),t.children.insert(s,e),s._queueDelete=!1,s instanceof gt?t.rendered&&s.render():t.isTextNode()&&(t.text=t.getText())},isTextNode(s){return s.isTextNode()},remove(s){pt("REMOVE: ",s),s.parent.children.remove(s),s._queueDelete=!0,s instanceof gt&&queueMicrotask(()=>s.destroy())},querySelector(s){},setScopeId(s,t){return s.id=t},parentNode(s){return s.parent},nextSibling(s){const t=s.parent.children||[],e=t.indexOf(s)+1;if(e<t.length)return t[e]}},zu=Fr.setProperty,$u=async function(s,t){const e=Oa(Ee.rendererOptions,t);await e.init();const n=Fr.createElement("App");return n.lng=e.root,n.rendered=!0,{app:Du(s),rootNode:n,renderer:e}},{render:Cf,createApp:Du}=pu(Se({patchProp:zu},Fr));/*!
  * vue-router v4.3.3
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Wt=typeof document<"u";function Hu(s){return s.__esModule||s[Symbol.toStringTag]==="Module"}const ue=Object.assign;function Bn(s,t){const e={};for(const n in t){const r=t[n];e[n]=Ye(r)?r.map(s):s(r)}return e}const ys=()=>{},Ye=Array.isArray,al=/#/g,Uu=/&/g,Wu=/\//g,Yu=/=/g,ju=/\?/g,cl=/\+/g,Xu=/%5B/g,Vu=/%5D/g,ul=/%5E/g,Ku=/%60/g,hl=/%7B/g,Gu=/%7C/g,fl=/%7D/g,qu=/%20/g;function Ar(s){return encodeURI(""+s).replace(Gu,"|").replace(Xu,"[").replace(Vu,"]")}function Qu(s){return Ar(s).replace(hl,"{").replace(fl,"}").replace(ul,"^")}function rr(s){return Ar(s).replace(cl,"%2B").replace(qu,"+").replace(al,"%23").replace(Uu,"%26").replace(Ku,"`").replace(hl,"{").replace(fl,"}").replace(ul,"^")}function Zu(s){return rr(s).replace(Yu,"%3D")}function Ju(s){return Ar(s).replace(al,"%23").replace(ju,"%3F")}function eh(s){return s==null?"":Ju(s).replace(Wu,"%2F")}function Is(s){try{return decodeURIComponent(""+s)}catch{}return""+s}const th=/\/$/,sh=s=>s.replace(th,"");function zn(s,t,e="/"){let n,r={},i="",o="";const l=t.indexOf("#");let a=t.indexOf("?");return l<a&&l>=0&&(a=-1),a>-1&&(n=t.slice(0,a),i=t.slice(a+1,l>-1?l:t.length),r=s(i)),l>-1&&(n=n||t.slice(0,l),o=t.slice(l,t.length)),n=oh(n??t,e),{fullPath:n+(i&&"?")+i+o,path:n,query:r,hash:Is(o)}}function nh(s,t){const e=t.query?s(t.query):"";return t.path+(e&&"?")+e+(t.hash||"")}function xi(s,t){return!t||!s.toLowerCase().startsWith(t.toLowerCase())?s:s.slice(t.length)||"/"}function rh(s,t,e){const n=t.matched.length-1,r=e.matched.length-1;return n>-1&&n===r&&qt(t.matched[n],e.matched[r])&&dl(t.params,e.params)&&s(t.query)===s(e.query)&&t.hash===e.hash}function qt(s,t){return(s.aliasOf||s)===(t.aliasOf||t)}function dl(s,t){if(Object.keys(s).length!==Object.keys(t).length)return!1;for(const e in s)if(!ih(s[e],t[e]))return!1;return!0}function ih(s,t){return Ye(s)?yi(s,t):Ye(t)?yi(t,s):s===t}function yi(s,t){return Ye(t)?s.length===t.length&&s.every((e,n)=>e===t[n]):s.length===1&&s[0]===t}function oh(s,t){if(s.startsWith("/"))return s;if(!s)return t;const e=t.split("/"),n=s.split("/"),r=n[n.length-1];(r===".."||r===".")&&n.push("");let i=e.length-1,o,l;for(o=0;o<n.length;o++)if(l=n[o],l!==".")if(l==="..")i>1&&i--;else break;return e.slice(0,i).join("/")+"/"+n.slice(o).join("/")}var Es;(function(s){s.pop="pop",s.push="push"})(Es||(Es={}));var vs;(function(s){s.back="back",s.forward="forward",s.unknown=""})(vs||(vs={}));function lh(s){if(!s)if(Wt){const t=document.querySelector("base");s=t&&t.getAttribute("href")||"/",s=s.replace(/^\w+:\/\/[^\/]+/,"")}else s="/";return s[0]!=="/"&&s[0]!=="#"&&(s="/"+s),sh(s)}const ah=/^[^#]+#/;function ch(s,t){return s.replace(ah,"#")+t}function uh(s,t){const e=document.documentElement.getBoundingClientRect(),n=s.getBoundingClientRect();return{behavior:t.behavior,left:n.left-e.left-(t.left||0),top:n.top-e.top-(t.top||0)}}const wn=()=>({left:window.scrollX,top:window.scrollY});function hh(s){let t;if("el"in s){const e=s.el,n=typeof e=="string"&&e.startsWith("#"),r=typeof e=="string"?n?document.getElementById(e.slice(1)):document.querySelector(e):e;if(!r)return;t=uh(r,s)}else t=s;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function vi(s,t){return(history.state?history.state.position-t:-1)+s}const ir=new Map;function fh(s,t){ir.set(s,t)}function dh(s){const t=ir.get(s);return ir.delete(s),t}let ph=()=>location.protocol+"//"+location.host;function pl(s,t){const{pathname:e,search:n,hash:r}=t,i=s.indexOf("#");if(i>-1){let l=r.includes(s.slice(i))?s.slice(i).length:1,a=r.slice(l);return a[0]!=="/"&&(a="/"+a),xi(a,"")}return xi(e,s)+n+r}function gh(s,t,e,n){let r=[],i=[],o=null;const l=({state:p})=>{const m=pl(s,location),x=e.value,v=t.value;let _=0;if(p){if(e.value=m,t.value=p,o&&o===x){o=null;return}_=v?p.position-v.position:0}else n(m);r.forEach(w=>{w(e.value,x,{delta:_,type:Es.pop,direction:_?_>0?vs.forward:vs.back:vs.unknown})})};function a(){o=e.value}function u(p){r.push(p);const m=()=>{const x=r.indexOf(p);x>-1&&r.splice(x,1)};return i.push(m),m}function c(){const{history:p}=window;p.state&&p.replaceState(ue({},p.state,{scroll:wn()}),"")}function h(){for(const p of i)p();i=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:a,listen:u,destroy:h}}function _i(s,t,e,n=!1,r=!1){return{back:s,current:t,forward:e,replaced:n,position:window.history.length,scroll:r?wn():null}}function mh(s){const{history:t,location:e}=window,n={value:pl(s,e)},r={value:t.state};r.value||i(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(a,u,c){const h=s.indexOf("#"),p=h>-1?(e.host&&document.querySelector("base")?s:s.slice(h))+a:ph()+s+a;try{t[c?"replaceState":"pushState"](u,"",p),r.value=u}catch(m){console.error(m),e[c?"replace":"assign"](p)}}function o(a,u){const c=ue({},t.state,_i(r.value.back,a,r.value.forward,!0),u,{position:r.value.position});i(a,c,!0),n.value=a}function l(a,u){const c=ue({},r.value,t.state,{forward:a,scroll:wn()});i(c.current,c,!0);const h=ue({},_i(n.value,a,null),{position:c.position+1},u);i(a,h,!1),n.value=a}return{location:n,state:r,push:l,replace:o}}function xh(s){s=lh(s);const t=mh(s),e=gh(s,t.state,t.location,t.replace);function n(i,o=!0){o||e.pauseListeners(),history.go(i)}const r=ue({location:"",base:s,go:n,createHref:ch.bind(null,s)},t,e);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function yh(s){return s=location.host?s||location.pathname+location.search:"",s.includes("#")||(s+="#"),xh(s)}function vh(s){return typeof s=="string"||s&&typeof s=="object"}function gl(s){return typeof s=="string"||typeof s=="symbol"}const ot={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},ml=Symbol("");var wi;(function(s){s[s.aborted=4]="aborted",s[s.cancelled=8]="cancelled",s[s.duplicated=16]="duplicated"})(wi||(wi={}));function Qt(s,t){return ue(new Error,{type:s,[ml]:!0},t)}function Ze(s,t){return s instanceof Error&&ml in s&&(t==null||!!(s.type&t))}const bi="[^/]+?",_h={sensitive:!1,strict:!1,start:!0,end:!0},wh=/[.+*?^${}()[\]/\\]/g;function bh(s,t){const e=ue({},_h,t),n=[];let r=e.start?"^":"";const i=[];for(const u of s){const c=u.length?[]:[90];e.strict&&!u.length&&(r+="/");for(let h=0;h<u.length;h++){const p=u[h];let m=40+(e.sensitive?.25:0);if(p.type===0)h||(r+="/"),r+=p.value.replace(wh,"\\$&"),m+=40;else if(p.type===1){const{value:x,repeatable:v,optional:_,regexp:w}=p;i.push({name:x,repeatable:v,optional:_});const R=w||bi;if(R!==bi){m+=10;try{new RegExp(`(${R})`)}catch(C){throw new Error(`Invalid custom RegExp for param "${x}" (${R}): `+C.message)}}let E=v?`((?:${R})(?:/(?:${R}))*)`:`(${R})`;h||(E=_&&u.length<2?`(?:/${E})`:"/"+E),_&&(E+="?"),r+=E,m+=20,_&&(m+=-8),v&&(m+=-20),R===".*"&&(m+=-50)}c.push(m)}n.push(c)}if(e.strict&&e.end){const u=n.length-1;n[u][n[u].length-1]+=.7000000000000001}e.strict||(r+="/?"),e.end?r+="$":e.strict&&(r+="(?:/|$)");const o=new RegExp(r,e.sensitive?"":"i");function l(u){const c=u.match(o),h={};if(!c)return null;for(let p=1;p<c.length;p++){const m=c[p]||"",x=i[p-1];h[x.name]=m&&x.repeatable?m.split("/"):m}return h}function a(u){let c="",h=!1;for(const p of s){(!h||!c.endsWith("/"))&&(c+="/"),h=!1;for(const m of p)if(m.type===0)c+=m.value;else if(m.type===1){const{value:x,repeatable:v,optional:_}=m,w=x in u?u[x]:"";if(Ye(w)&&!v)throw new Error(`Provided param "${x}" is an array but it is not repeatable (* or + modifiers)`);const R=Ye(w)?w.join("/"):w;if(!R)if(_)p.length<2&&(c.endsWith("/")?c=c.slice(0,-1):h=!0);else throw new Error(`Missing required param "${x}"`);c+=R}}return c||"/"}return{re:o,score:n,keys:i,parse:l,stringify:a}}function Th(s,t){let e=0;for(;e<s.length&&e<t.length;){const n=t[e]-s[e];if(n)return n;e++}return s.length<t.length?s.length===1&&s[0]===80?-1:1:s.length>t.length?t.length===1&&t[0]===80?1:-1:0}function xl(s,t){let e=0;const n=s.score,r=t.score;for(;e<n.length&&e<r.length;){const i=Th(n[e],r[e]);if(i)return i;e++}if(Math.abs(r.length-n.length)===1){if(Ti(n))return 1;if(Ti(r))return-1}return r.length-n.length}function Ti(s){const t=s[s.length-1];return s.length>0&&t[t.length-1]<0}const Sh={type:0,value:""},Ch=/[a-zA-Z0-9_]/;function Rh(s){if(!s)return[[]];if(s==="/")return[[Sh]];if(!s.startsWith("/"))throw new Error(`Invalid path "${s}"`);function t(m){throw new Error(`ERR (${e})/"${u}": ${m}`)}let e=0,n=e;const r=[];let i;function o(){i&&r.push(i),i=[]}let l=0,a,u="",c="";function h(){u&&(e===0?i.push({type:0,value:u}):e===1||e===2||e===3?(i.length>1&&(a==="*"||a==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:c,repeatable:a==="*"||a==="+",optional:a==="*"||a==="?"})):t("Invalid state to consume buffer"),u="")}function p(){u+=a}for(;l<s.length;){if(a=s[l++],a==="\\"&&e!==2){n=e,e=4;continue}switch(e){case 0:a==="/"?(u&&h(),o()):a===":"?(h(),e=1):p();break;case 4:p(),e=n;break;case 1:a==="("?e=2:Ch.test(a)?p():(h(),e=0,a!=="*"&&a!=="?"&&a!=="+"&&l--);break;case 2:a===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+a:e=3:c+=a;break;case 3:h(),e=0,a!=="*"&&a!=="?"&&a!=="+"&&l--,c="";break;default:t("Unknown state");break}}return e===2&&t(`Unfinished custom RegExp for param "${u}"`),h(),o(),r}function Ih(s,t,e){const n=bh(Rh(s.path),e),r=ue(n,{record:s,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf==!t.record.aliasOf&&t.children.push(r),r}function Eh(s,t){const e=[],n=new Map;t=Ri({strict:!1,end:!0,sensitive:!1},t);function r(c){return n.get(c)}function i(c,h,p){const m=!p,x=Mh(c);x.aliasOf=p&&p.record;const v=Ri(t,c),_=[x];if("alias"in c){const E=typeof c.alias=="string"?[c.alias]:c.alias;for(const C of E)_.push(ue({},x,{components:p?p.record.components:x.components,path:C,aliasOf:p?p.record:x}))}let w,R;for(const E of _){const{path:C}=E;if(h&&C[0]!=="/"){const A=h.record.path,I=A[A.length-1]==="/"?"":"/";E.path=h.record.path+(C&&I+C)}if(w=Ih(E,h,v),p?p.alias.push(w):(R=R||w,R!==w&&R.alias.push(w),m&&c.name&&!Ci(w)&&o(c.name)),yl(w)&&a(w),x.children){const A=x.children;for(let I=0;I<A.length;I++)i(A[I],w,p&&p.children[I])}p=p||w}return R?()=>{o(R)}:ys}function o(c){if(gl(c)){const h=n.get(c);h&&(n.delete(c),e.splice(e.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=e.indexOf(c);h>-1&&(e.splice(h,1),c.record.name&&n.delete(c.record.name),c.children.forEach(o),c.alias.forEach(o))}}function l(){return e}function a(c){const h=Lh(c,e);e.splice(h,0,c),c.record.name&&!Ci(c)&&n.set(c.record.name,c)}function u(c,h){let p,m={},x,v;if("name"in c&&c.name){if(p=n.get(c.name),!p)throw Qt(1,{location:c});v=p.record.name,m=ue(Si(h.params,p.keys.filter(R=>!R.optional).concat(p.parent?p.parent.keys.filter(R=>R.optional):[]).map(R=>R.name)),c.params&&Si(c.params,p.keys.map(R=>R.name))),x=p.stringify(m)}else if(c.path!=null)x=c.path,p=e.find(R=>R.re.test(x)),p&&(m=p.parse(x),v=p.record.name);else{if(p=h.name?n.get(h.name):e.find(R=>R.re.test(h.path)),!p)throw Qt(1,{location:c,currentLocation:h});v=p.record.name,m=ue({},h.params,c.params),x=p.stringify(m)}const _=[];let w=p;for(;w;)_.unshift(w.record),w=w.parent;return{name:v,path:x,params:m,matched:_,meta:Ah(_)}}return s.forEach(c=>i(c)),{addRoute:i,resolve:u,removeRoute:o,getRoutes:l,getRecordMatcher:r}}function Si(s,t){const e={};for(const n of t)n in s&&(e[n]=s[n]);return e}function Mh(s){return{path:s.path,redirect:s.redirect,name:s.name,meta:s.meta||{},aliasOf:void 0,beforeEnter:s.beforeEnter,props:Fh(s),children:s.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in s?s.components||null:s.component&&{default:s.component}}}function Fh(s){const t={},e=s.props||!1;if("component"in s)t.default=e;else for(const n in s.components)t[n]=typeof e=="object"?e[n]:e;return t}function Ci(s){for(;s;){if(s.record.aliasOf)return!0;s=s.parent}return!1}function Ah(s){return s.reduce((t,e)=>ue(t,e.meta),{})}function Ri(s,t){const e={};for(const n in s)e[n]=n in t?t[n]:s[n];return e}function Lh(s,t){let e=0,n=t.length;for(;e!==n;){const i=e+n>>1;xl(s,t[i])<0?n=i:e=i+1}const r=Ph(s);return r&&(n=t.lastIndexOf(r,n-1)),n}function Ph(s){let t=s;for(;t=t.parent;)if(yl(t)&&xl(s,t)===0)return t}function yl({record:s}){return!!(s.name||s.components&&Object.keys(s.components).length||s.redirect)}function Nh(s){const t={};if(s===""||s==="?")return t;const n=(s[0]==="?"?s.slice(1):s).split("&");for(let r=0;r<n.length;++r){const i=n[r].replace(cl," "),o=i.indexOf("="),l=Is(o<0?i:i.slice(0,o)),a=o<0?null:Is(i.slice(o+1));if(l in t){let u=t[l];Ye(u)||(u=t[l]=[u]),u.push(a)}else t[l]=a}return t}function Ii(s){let t="";for(let e in s){const n=s[e];if(e=Zu(e),n==null){n!==void 0&&(t+=(t.length?"&":"")+e);continue}(Ye(n)?n.map(i=>i&&rr(i)):[n&&rr(n)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+e,i!=null&&(t+="="+i))})}return t}function kh(s){const t={};for(const e in s){const n=s[e];n!==void 0&&(t[e]=Ye(n)?n.map(r=>r==null?null:""+r):n==null?n:""+n)}return t}const Oh=Symbol(""),Ei=Symbol(""),bn=Symbol(""),Lr=Symbol(""),or=Symbol("");function ns(){let s=[];function t(n){return s.push(n),()=>{const r=s.indexOf(n);r>-1&&s.splice(r,1)}}function e(){s=[]}return{add:t,list:()=>s.slice(),reset:e}}function ct(s,t,e,n,r,i=o=>o()){const o=n&&(n.enterCallbacks[r]=n.enterCallbacks[r]||[]);return()=>new Promise((l,a)=>{const u=p=>{p===!1?a(Qt(4,{from:e,to:t})):p instanceof Error?a(p):vh(p)?a(Qt(2,{from:t,to:p})):(o&&n.enterCallbacks[r]===o&&typeof p=="function"&&o.push(p),l())},c=i(()=>s.call(n&&n.instances[r],t,e,u));let h=Promise.resolve(c);s.length<3&&(h=h.then(u)),h.catch(p=>a(p))})}function $n(s,t,e,n,r=i=>i()){const i=[];for(const o of s)for(const l in o.components){let a=o.components[l];if(!(t!=="beforeRouteEnter"&&!o.instances[l]))if(Bh(a)){const c=(a.__vccOpts||a)[t];c&&i.push(ct(c,e,n,o,l,r))}else{let u=a();i.push(()=>u.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${l}" at "${o.path}"`));const h=Hu(c)?c.default:c;o.components[l]=h;const m=(h.__vccOpts||h)[t];return m&&ct(m,e,n,o,l,r)()}))}}return i}function Bh(s){return typeof s=="object"||"displayName"in s||"props"in s||"__vccOpts"in s}function Mi(s){const t=We(bn),e=We(Lr),n=He(()=>{const a=_e(s.to);return t.resolve(a)}),r=He(()=>{const{matched:a}=n.value,{length:u}=a,c=a[u-1],h=e.matched;if(!c||!h.length)return-1;const p=h.findIndex(qt.bind(null,c));if(p>-1)return p;const m=Fi(a[u-2]);return u>1&&Fi(c)===m&&h[h.length-1].path!==m?h.findIndex(qt.bind(null,a[u-2])):p}),i=He(()=>r.value>-1&&Hh(e.params,n.value.params)),o=He(()=>r.value>-1&&r.value===e.matched.length-1&&dl(e.params,n.value.params));function l(a={}){return Dh(a)?t[_e(s.replace)?"replace":"push"](_e(s.to)).catch(ys):Promise.resolve()}return{route:n,href:He(()=>n.value.href),isActive:i,isExactActive:o,navigate:l}}const zh=At({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Mi,setup(s,{slots:t}){const e=dn(Mi(s)),{options:n}=We(bn),r=He(()=>({[Ai(s.activeClass,n.linkActiveClass,"router-link-active")]:e.isActive,[Ai(s.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:e.isExactActive}));return()=>{const i=t.default&&t.default(e);return s.custom?i:ll("a",{"aria-current":e.isExactActive?s.ariaCurrentValue:null,href:e.href,onClick:e.navigate,class:r.value},i)}}}),$h=zh;function Dh(s){if(!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)&&!s.defaultPrevented&&!(s.button!==void 0&&s.button!==0)){if(s.currentTarget&&s.currentTarget.getAttribute){const t=s.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return s.preventDefault&&s.preventDefault(),!0}}function Hh(s,t){for(const e in t){const n=t[e],r=s[e];if(typeof n=="string"){if(n!==r)return!1}else if(!Ye(r)||r.length!==n.length||n.some((i,o)=>i!==r[o]))return!1}return!0}function Fi(s){return s?s.aliasOf?s.aliasOf.path:s.path:""}const Ai=(s,t,e)=>s??t??e,Uh=At({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(s,{attrs:t,slots:e}){const n=We(or),r=He(()=>s.route||n.value),i=We(Ei,0),o=He(()=>{let u=_e(i);const{matched:c}=r.value;let h;for(;(h=c[u])&&!h.components;)u++;return u}),l=He(()=>r.value.matched[o.value]);Zs(Ei,He(()=>o.value+1)),Zs(Oh,l),Zs(or,r);const a=tt();return ms(()=>[a.value,l.value,s.name],([u,c,h],[p,m,x])=>{c&&(c.instances[h]=u,m&&m!==c&&u&&u===p&&(c.leaveGuards.size||(c.leaveGuards=m.leaveGuards),c.updateGuards.size||(c.updateGuards=m.updateGuards))),u&&c&&(!m||!qt(c,m)||!p)&&(c.enterCallbacks[h]||[]).forEach(v=>v(u))},{flush:"post"}),()=>{const u=r.value,c=s.name,h=l.value,p=h&&h.components[c];if(!p)return Li(e.default,{Component:p,route:u});const m=h.props[c],x=m?m===!0?u.params:typeof m=="function"?m(u):m:null,_=ll(p,ue({},x,t,{onVnodeUnmounted:w=>{w.component.isUnmounted&&(h.instances[c]=null)},ref:a}));return Li(e.default,{Component:_,route:u})||_}}});function Li(s,t){if(!s)return null;const e=s(t);return e.length===1?e[0]:e}const vl=Uh;function Wh(s){const t=Eh(s.routes,s),e=s.parseQuery||Nh,n=s.stringifyQuery||Ii,r=s.history,i=ns(),o=ns(),l=ns(),a=Mc(ot);let u=ot;Wt&&s.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=Bn.bind(null,b=>""+b),h=Bn.bind(null,eh),p=Bn.bind(null,Is);function m(b,k){let B,D;return gl(b)?(B=t.getRecordMatcher(b),D=k):D=b,t.addRoute(D,B)}function x(b){const k=t.getRecordMatcher(b);k&&t.removeRoute(k)}function v(){return t.getRoutes().map(b=>b.record)}function _(b){return!!t.getRecordMatcher(b)}function w(b,k){if(k=ue({},k||a.value),typeof b=="string"){const g=zn(e,b,k.path),y=t.resolve({path:g.path},k),S=r.createHref(g.fullPath);return ue(g,y,{params:p(y.params),hash:Is(g.hash),redirectedFrom:void 0,href:S})}let B;if(b.path!=null)B=ue({},b,{path:zn(e,b.path,k.path).path});else{const g=ue({},b.params);for(const y in g)g[y]==null&&delete g[y];B=ue({},b,{params:h(g)}),k.params=h(k.params)}const D=t.resolve(B,k),te=b.hash||"";D.params=c(p(D.params));const J=nh(n,ue({},b,{hash:Qu(te),path:D.path})),d=r.createHref(J);return ue({fullPath:J,hash:te,query:n===Ii?kh(b.query):b.query||{}},D,{redirectedFrom:void 0,href:d})}function R(b){return typeof b=="string"?zn(e,b,a.value.path):ue({},b)}function E(b,k){if(u!==b)return Qt(8,{from:k,to:b})}function C(b){return F(b)}function A(b){return C(ue(R(b),{replace:!0}))}function I(b){const k=b.matched[b.matched.length-1];if(k&&k.redirect){const{redirect:B}=k;let D=typeof B=="function"?B(b):B;return typeof D=="string"&&(D=D.includes("?")||D.includes("#")?D=R(D):{path:D},D.params={}),ue({query:b.query,hash:b.hash,params:D.path!=null?{}:b.params},D)}}function F(b,k){const B=u=w(b),D=a.value,te=b.state,J=b.force,d=b.replace===!0,g=I(B);if(g)return F(ue(R(g),{state:typeof g=="object"?ue({},te,g.state):te,force:J,replace:d}),k||B);const y=B;y.redirectedFrom=k;let S;return!J&&rh(n,D,B)&&(S=Qt(16,{to:y,from:D}),we(D,D,!0,!1)),(S?Promise.resolve(S):Z(y,D)).catch(T=>Ze(T)?Ze(T,2)?T:ve(T):ee(T,y,D)).then(T=>{if(T){if(Ze(T,2))return F(ue({replace:d},R(T.to),{state:typeof T.to=="object"?ue({},te,T.to.state):te,force:J}),k||y)}else T=le(y,D,!0,d,te);return G(y,D,T),T})}function K(b,k){const B=E(b,k);return B?Promise.reject(B):Promise.resolve()}function X(b){const k=rt.values().next().value;return k&&typeof k.runWithContext=="function"?k.runWithContext(b):b()}function Z(b,k){let B;const[D,te,J]=Yh(b,k);B=$n(D.reverse(),"beforeRouteLeave",b,k);for(const g of D)g.leaveGuards.forEach(y=>{B.push(ct(y,b,k))});const d=K.bind(null,b,k);return B.push(d),he(B).then(()=>{B=[];for(const g of i.list())B.push(ct(g,b,k));return B.push(d),he(B)}).then(()=>{B=$n(te,"beforeRouteUpdate",b,k);for(const g of te)g.updateGuards.forEach(y=>{B.push(ct(y,b,k))});return B.push(d),he(B)}).then(()=>{B=[];for(const g of J)if(g.beforeEnter)if(Ye(g.beforeEnter))for(const y of g.beforeEnter)B.push(ct(y,b,k));else B.push(ct(g.beforeEnter,b,k));return B.push(d),he(B)}).then(()=>(b.matched.forEach(g=>g.enterCallbacks={}),B=$n(J,"beforeRouteEnter",b,k,X),B.push(d),he(B))).then(()=>{B=[];for(const g of o.list())B.push(ct(g,b,k));return B.push(d),he(B)}).catch(g=>Ze(g,8)?g:Promise.reject(g))}function G(b,k,B){l.list().forEach(D=>X(()=>D(b,k,B)))}function le(b,k,B,D,te){const J=E(b,k);if(J)return J;const d=k===ot,g=Wt?history.state:{};B&&(D||d?r.replace(b.fullPath,ue({scroll:d&&g&&g.scroll},te)):r.push(b.fullPath,te)),a.value=b,we(b,k,B,d),ve()}let ne;function ie(){ne||(ne=r.listen((b,k,B)=>{if(!Qe.listening)return;const D=w(b),te=I(D);if(te){F(ue(te,{replace:!0}),D).catch(ys);return}u=D;const J=a.value;Wt&&fh(vi(J.fullPath,B.delta),wn()),Z(D,J).catch(d=>Ze(d,12)?d:Ze(d,2)?(F(d.to,D).then(g=>{Ze(g,20)&&!B.delta&&B.type===Es.pop&&r.go(-1,!1)}).catch(ys),Promise.reject()):(B.delta&&r.go(-B.delta,!1),ee(d,D,J))).then(d=>{d=d||le(D,J,!1),d&&(B.delta&&!Ze(d,8)?r.go(-B.delta,!1):B.type===Es.pop&&Ze(d,20)&&r.go(-1,!1)),G(D,J,d)}).catch(ys)}))}let U=ns(),W=ns(),Y;function ee(b,k,B){ve(b);const D=W.list();return D.length?D.forEach(te=>te(b,k,B)):console.error(b),Promise.reject(b)}function xe(){return Y&&a.value!==ot?Promise.resolve():new Promise((b,k)=>{U.add([b,k])})}function ve(b){return Y||(Y=!b,ie(),U.list().forEach(([k,B])=>b?B(b):k()),U.reset()),b}function we(b,k,B,D){const{scrollBehavior:te}=s;if(!Wt||!te)return Promise.resolve();const J=!B&&dh(vi(b.fullPath,0))||(D||!B)&&history.state&&history.state.scroll||null;return Ao().then(()=>te(b,k,J)).then(d=>d&&hh(d)).catch(d=>ee(d,b,k))}const pe=b=>r.go(b);let nt;const rt=new Set,Qe={currentRoute:a,listening:!0,addRoute:m,removeRoute:x,hasRoute:_,getRoutes:v,resolve:w,options:s,push:C,replace:A,go:pe,back:()=>pe(-1),forward:()=>pe(1),beforeEach:i.add,beforeResolve:o.add,afterEach:l.add,onError:W.add,isReady:xe,install(b){const k=this;b.component("RouterLink",$h),b.component("RouterView",vl),b.config.globalProperties.$router=k,Object.defineProperty(b.config.globalProperties,"$route",{enumerable:!0,get:()=>_e(a)}),Wt&&!nt&&a.value===ot&&(nt=!0,C(r.location).catch(te=>{}));const B={};for(const te in ot)Object.defineProperty(B,te,{get:()=>a.value[te],enumerable:!0});b.provide(bn,k),b.provide(Lr,bo(B)),b.provide(or,a);const D=b.unmount;rt.add(b),b.unmount=function(){rt.delete(b),rt.size<1&&(u=ot,ne&&ne(),ne=null,a.value=ot,nt=!1,Y=!1),D()}}};function he(b){return b.reduce((k,B)=>k.then(()=>X(B)),Promise.resolve())}return Qe}function Yh(s,t){const e=[],n=[],r=[],i=Math.max(t.matched.length,s.matched.length);for(let o=0;o<i;o++){const l=t.matched[o];l&&(s.matched.find(u=>qt(u,l))?n.push(l):e.push(l));const a=s.matched[o];a&&(t.matched.find(u=>qt(u,a))||r.push(a))}return[e,n,r]}function jh(){return We(bn)}function Xh(){return We(Lr)}const Vh=["texture","width","height","x","y"],Kh=At({__name:"Icon",props:["name"],setup(s){function t(o,l){const a=dt.createTexture("ImageTexture",{src:o});return l.reduce((u,c)=>{const{x:h,y:p,width:m,height:x}=c;return u[c.name]=dt.createTexture("SubTexture",{texture:a,x:h,y:p,width:m,height:x}),u},{})}const e=s,n="/vue-demo-app/",r=tt([{name:"experiment",width:81,height:100,x:0,y:0},{name:"trending",width:100,height:56,x:81,y:0},{name:"tv",width:100,height:68,x:181,y:0},{name:"movie",width:94,height:100,x:282,y:0}]),i=t(n+"assets/icons_white.png",r.value);return(o,l)=>(Lt(),Fs("view",yn(e,{texture:_e(i)[e.name],width:_e(i)[e.name].props.width,height:_e(i)[e.name].props.height,x:(100-(_e(i)[e.name].props.width||0))/2,y:(100-(_e(i)[e.name].props.height||0))/2}),null,16,Vh))}}),Gh={y:-16},Vs=At({__name:"NavButton",props:["icon"],setup(s){const t=s,e={zIndex:102,height:70,width:100,borderRadius:8,focus:{color:1111638783},active:{width:328,height:70}},n={fontSize:38,x:116,y:18,height:50,alpha:0,active:{alpha:1}};return(r,i)=>(Lt(),Fs("view",yn({style:e},t,{forwardStates:!0}),[Pe("view",Gh,[me(Kh,{scale:.5,name:t.icon},null,8,["name"])]),Pe("text",{style:n},[zo(r.$slots,"default")])],16))}});function qh(){if(!this||this.selected===void 0||this.children.length===0)return!1;let s=this.children[this.selected];for(;s!=null&&s.skipFocus;)this.selected++,s=this.children[this.selected];return s instanceof gt?(s.setFocus(),!0):!1}function Pi(s){return function(){var i,o,l;const t=this.children.length,e=this.wrap,n=this.selected||0;if(t===0)return!1;if(s==="right"||s==="down")do if(this.selected=(this.selected||0)%t+1,this.selected>=t){if(!e){this.selected=void 0;break}this.selected=0}while((i=this.children[this.selected])!=null&&i.skipFocus);else if(s==="left"||s==="up")do if(this.selected=(this.selected||0)%t-1,this.selected<0){if(!e){this.selected=void 0;break}this.selected=t-1}while((o=this.children[this.selected])!=null&&o.skipFocus);if(this.selected===void 0&&(this.selected=n,(l=this.children[this.selected])!=null&&l.states.has("focus")))return!1;const r=this.children[this.selected];if(this.onSelectedChanged&&this.onSelectedChanged.call(this,this,r,this.selected,n),this.plinko&&n!==void 0){const u=this.children[n].selected||0;r.selected=u<r.children.length?u:r.children.length-1}return r.setFocus(),!0}}function Ni(...s){const t=s.filter(e=>typeof e=="function");if(t.length!==0)return t.length===1?t[0]:function(...e){let n;for(const r of t)if(n=r.apply(this,e),n===!0)return n;return n}}function Qh(s=0){return(t,e,n=0,r)=>{if(t.children.length===0)return;const i=t.flexDirection==="row"?"width":"height",o=t.flexDirection==="row"?"x":"y",l=t.gap||0,a=t.scroll||"auto",[u,c]=Zh(t);let h=t[o]??0;const p=(e==null?void 0:e[o])??0,m=(e==null?void 0:e[i])??0,x=r===void 0?"none":n>r?"positive":"negative";let v=h;if(a==="auto")t.scrollIndex!=null&&t.scrollIndex>=0?t.selected>=t.scrollIndex&&(x==="positive"?v=h-m-l:v=h+m+l):(Math.abs(h)+c<u.position+u.size||p<Math.abs(h))&&(v=-p+s);else if(a==="always"||a==="edge"&&x==="negative"&&Math.abs(h)>p)v=-p+s;else if(a==="edge"&&x==="positive"&&Math.abs(h)+c<p+m)v=h-m-l;else if(a==="edge"&&x==="none"){let _=0,w,R;for(;_<t.children.length&&Math.abs(h)+c<p+m;)w=t.children[_++],R=w[i]??0,h-=R+l;v=h}o==="x"&&t.x!==v?t.x=v:o==="y"&&t.y!==v&&(t.y=v)}}function Zh(s){let t,e;return s.flexDirection==="row"?(t={position:s.children[s.children.length-1].x??0,size:s.children[s.children.length-1].width??0},e=s.width??0):(t={position:s.children[s.children.length-1].y??0,size:s.children[s.children.length-1].height??0},e=s.height??0),[t,e]}const Jh=["onUp","onDown","forwardFocus","selected"],ef=At({__name:"Column",props:{selected:{type:Number,default:0},scrollIndex:Number,onUp:Function,onDown:Function,onLayout:Function,onSelectedChanged:Function,scroll:String,style:Object},setup(s){const t=s,e=Ni(t.onUp,Pi("up")),n=Ni(t.onDown,Pi("down")),r=o=>{t.onSelectedChanged&&t.onSelectedChanged(o),t.scroll!=="none"&&Qh(t.x)(o)},i={display:"flex",flexBoundary:"fixed",flexDirection:"column",gap:30,transition:{y:{easing:"ease-in-out",duration:250}}};return(o,l)=>(Lt(),Fs("node",{onUp:_e(e),onDown:_e(n),forwardFocus:_e(qh),selected:t.selected,selectedChanged:r,style:Ms([i,t.style])},[zo(o.$slots,"default")],44,Jh))}}),ki={Column:{flexDirection:"column",display:"flex",width:140,height:600,y:360,gap:20,zIndex:101,transition:{x:{duration:250,easing:"ease-in-out"}},x:8,focus:{width:500,x:24}},Gradient:{zIndex:99,color:255,src:"./assets/sidenav.png",alpha:0,width:1200,height:1080,focus:{alpha:1},transition:{alpha:!0}}},tf=Pe("view",{flexItem:!1,width:300,height:150,x:30,y:15,zIndex:105},[Pe("text",{x:0,y:40,fontSize:28,fontFamily:"Roboto",color:4143380070},"Built With:"),Pe("view",{x:120,y:10,src:"./assets/vue.png",width:80,height:80}),Pe("view",{x:0,y:106,src:"./assets/tmdb.png",width:80,height:41}),Pe("text",{x:90,y:110,contain:"width",width:160,fontSize:12,color:4143380070}," This product uses the TMDB API but is not endorsed or certified by TMDB. ")],-1),sf=At({__name:"NavDrawer",props:{focusPage:Function},setup(s){const t=s,e=tt(null),n=jh(),r=Xh();function i(){e.value.states.add("focus"),this.children.forEach(a=>{var u;return(u=a.states)==null?void 0:u.add("active")}),this.children.selected.setFocus()}function o(){e.value.states.remove("focus"),this.selected=0,this.children.forEach(a=>{var u;return(u=a.states)==null?void 0:u.remove("active")})}function l(a){if(r.path===a)return t.focusPage();n.push(a)}return(a,u)=>(Lt(),Fs(Be,null,[tf,me(ef,yn(a.$attrs,{ref:"column",onFocus:i,onBlur:o,style:_e(ki).Column,scroll:"none"}),{default:Ut(()=>[me(Vs,{icon:"trending",onEnter:u[0]||(u[0]=c=>l("/browse/all"))},{default:Ut(()=>[us(" Trending ")]),_:1}),me(Vs,{icon:"movie",onEnter:u[1]||(u[1]=c=>l("/browse/movie"))},{default:Ut(()=>[us(" Movies ")]),_:1}),me(Vs,{icon:"tv",onEnter:u[2]||(u[2]=c=>l("/browse/tv"))},{default:Ut(()=>[us("TV")]),_:1}),me(Vs,{icon:"experiment",onEnter:u[3]||(u[3]=c=>l("/examples"))},{default:Ut(()=>[us(" Examples ")]),_:1})]),_:1},16,["style"]),Pe("view",{skipFocus:"",ref_key:"backdrop",ref:e,style:Ms(_e(ki).Gradient)},null,4)],64))}});function Ks(s){return typeof s=="function"}const Oi={ArrowLeft:"Left",ArrowRight:"Right",ArrowUp:"Up",ArrowDown:"Down",Enter:"Enter",l:"Last"," ":"Space",Backspace:"Back",Escape:"Escape"},_l=tt(),nf=s=>{_l.value=s},rf=s=>{let t=[];ms(()=>Tr.value,(n,r)=>{let i=n;const o=[];for(;i;)i.states.has("focus")||(i.states.add("focus"),Ks(i.onFocus)&&i.onFocus.call(i,n,r)),o.push(i),i=i.parent;t.forEach(l=>{o.includes(l)||(l.states.remove("focus"),Ks(l.onBlur)&&l.onBlur.call(l,n,r))}),t=o,nf(o)});const e=n=>{if(n){const r=Oi[n.key]||Oi[n.keyCode],i=_l.value||[];let o;for(const l of i){if(o=o||l,r){const a=l[`on${r}`];if(Ks(a)&&a.call(l,n,l,o)===!0)break}else console.log(`Unhandled key event: ${n.key||n.keyCode}`);if(Ks(l.onKeyPress)&&l.onKeyPress.call(l,n,r,l,o)===!0)break}return!1}};document.addEventListener("keydown",e)},of=tt(""),lf=["onLast","onMenu"],af={width:1920,height:1080,zIndex:-5},cf=["src"],uf=Pe("node",{src:"./assets/hero-mask-inverted.png",color:255,width:1920,height:1080},null,-1),hf=At({__name:"App",setup(s){rf();const t=tt(1),e=tt(null);tt({});let n;const r={alpha:t.value,color:4294967295,transition:{alpha:{duration:250,easing:"ease-in-out"}}};function i(){const l=e.value.$refs.column.$el;return l.states.has("focus")?!1:(n=Tr.value,l.setFocus())}function o(){return e.value.$refs.column.$el.states.has("focus")&&(n==null?void 0:n.setFocus())}return(l,a)=>(Lt(),Fs("node",{ref:"{window.APP}",onLast:()=>l.history.back(),onMenu:()=>l.navigate("/"),style:{width:1920,height:1080},onBackspace:i,onLeft:i,onRight:o},[me(_e(vl)),me(sf,{ref_key:"navDrawer",ref:e,focusPage:()=>_e(n).setFocus()},null,8,["focusPage"]),Pe("node",af,[Pe("node",{ref:"bg1",src:_e(of),style:r},null,8,cf),Pe("node",{ref:"bg2",style:r,alpha:0},null,512),uf])],40,lf))}}),ff=new URL("AppCoreExtensions-DgJ_jCQm.js",import.meta.url).href,df="modulepreload",pf=function(s){return"/vue-demo-app/"+s},Bi={},wl=function(t,e,n){let r=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));r=Promise.all(e.map(l=>{if(l=pf(l),l in Bi)return;Bi[l]=!0;const a=l.endsWith(".css"),u=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const c=document.createElement("link");if(c.rel=a?"stylesheet":df,a||(c.as="script",c.crossOrigin=""),c.href=l,o&&c.setAttribute("nonce",o),document.head.appendChild(c),a)return new Promise((h,p)=>{c.addEventListener("load",h),c.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}return r.then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},zi=()=>wl(()=>import("./Browse-FdAM41ZU.js"),__vite__mapDeps([0,1,2])),gf=()=>wl(()=>import("./Entity-B9pSSdqM.js"),__vite__mapDeps([3,1,2])),mf=[{path:"/",component:zi},{path:"/browse/:filter",component:zi,props:!0},{path:"/entity/:type/:id",component:gf}],xf=Wh({history:yh(),routes:mf});Ee.debug=!0;Ee.animationsEnabled=!0;Ee.fontSettings.fontFamily="Roboto";Ee.fontSettings.color=4143380223;Ee.fontSettings.fontSize=32;Ee.rendererOptions={coreExtensionModule:ff,fpsUpdateInterval:0,enableInspector:!0};$u(hf).then(({app:s,rootNode:t})=>{s.use(xf),s.mount(t)});export{qh as A,Be as F,ef as _,Tf as a,wf as b,Fs as c,At as d,me as e,Pe as f,nl as g,Sf as h,Ut as i,of as j,jh as k,bf as l,Tr as m,Ms as n,Lt as o,zo as p,yn as q,tt as r,Xh as s,us as t,_e as u,_f as v,ms as w,Ni as x,Qh as y,Pi as z};
//# sourceMappingURL=main-B_FQazcE.js.map
