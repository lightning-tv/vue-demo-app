const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Browse-R8C2otfY.js","assets/styles-jGhVqJSJ.js","assets/Entity-MifboOO8.js"])))=>i.map(i=>d[i]);
var rl=Object.defineProperty;var nl=(s,t,e)=>t in s?rl(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var u=(s,t,e)=>nl(s,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=e(n);fetch(n.href,i)}})();var il={BASE_URL:"/vue-demo-app/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};function ol(s,t){const e={alpha:!0,antialias:!1,depth:!1,stencil:!0,desynchronized:!1,powerPreference:"high-performance",premultipliedAlpha:!0,preserveDrawingBuffer:!1},r=s.getContext("webgl",e)||s.getContext("experimental-webgl",e);if(!r)throw new Error("Unable to create WebGL context");return t?new Proxy(r,{get(n,i){const o=n[i];return typeof o=="function"?(t.increment(String(i)),o.bind(n)):o}}):r}function z(s,t){if(!In()&&!s)throw new Error(t||"Assertion failed")}function ii(s,t,e){const r=Math.trunc(s>>>24),n=Math.trunc(s>>>16&255),i=Math.trunc(s>>>8&255),o=Math.trunc(s&255),a=Math.trunc(t>>>24),l=Math.trunc(t>>>16&255),c=Math.trunc(t>>>8&255),f=Math.trunc(t&255),h=Math.round(a*e+r*(1-e)),d=Math.round(l*e+n*(1-e)),g=Math.round(c*e+i*(1-e)),x=Math.round(f*e+o*(1-e));return(h<<24|d<<16|g<<8|x)>>>0}function al(s,t){const e=s>>>24,r=s>>>16&255,n=s>>>8&255,i=Math.trunc((s&255)*t);return(e<<24|r<<16|n<<8|i)>>>0}let fo=!0;function ll(s){fo=s==="webgl"}function $s(s,t,e=!1){const r=(s&255)/255*t,n=fo?r:1,i=Math.trunc((s>>>24)*n),o=Math.trunc((s>>>16&255)*n),a=Math.trunc((s>>>8&255)*n),l=Math.trunc(r*255);return e?(l<<24|a<<16|o<<8|i)>>>0:(i<<24|o<<16|a<<8|l)>>>0}function nn(s,t){return Object.prototype.hasOwnProperty.call(s,t)}function In(){return il&&!0}let cl=1;function ul(){return cl++}class vt{constructor(){u(this,"eventListeners",{})}on(t,e){let r=this.eventListeners[t];r||(r=[]),r.push(e),this.eventListeners[t]=r}off(t,e){const r=this.eventListeners[t];if(!r)return;if(!e){delete this.eventListeners[t];return}const n=r.indexOf(e);n>=0&&r.splice(n,1)}once(t,e){const r=(n,i)=>{this.off(t,r),e(n,i)};this.on(t,r)}emit(t,e){const r=this.eventListeners[t];r&&[...r].forEach(n=>{n(this,e)})}removeAllListeners(){this.eventListeners={}}}const fl=/^(data|ftps?|https?):/,Os=s=>{const t=s>>>24,e=s>>>16&255,r=s>>>8&255,n=s&255;return[t/255,e/255,r/255,n/255]},hl=s=>{const t=s>>>24,e=s>>>16&255,r=s>>>8&255,n=s&255;return[t,e,r,n]};function dl(s){return(s&255)/255}function Ur(s){const t=Math.floor(s[0]*255),e=Math.floor(s[1]*255),r=Math.floor(s[2]*255),n=Math.floor(s[3]*255);return`rgba(${t},${e},${r},${n.toFixed(4)})`}function zs(s,t,e,r,n){return n?(n.x1=s,n.y1=t,n.x2=e,n.y2=r,n):{x1:s,y1:t,x2:e,y2:r}}function $r(s,t){return s.x1<t.x2&&s.x2>t.x1&&s.y1<t.y2&&s.y2>t.y1}function pl(s,t){return t?(t.x=s.x1,t.y=s.y1,t.width=s.x2-s.x1,t.height=s.y2-s.y1,t):{x:s.x1,y:s.y1,width:s.x2-s.x1,height:s.y2-s.y1}}function ho(s,t,e){const r=Math.max(s.x,t.x),n=Math.max(s.y,t.y),i=Math.min(s.x+s.width,t.x+t.width)-r,o=Math.min(s.y+s.height,t.y+t.height)-n;return i>0&&o>0?e?(e.x=r,e.y=n,e.width=i,e.height=o,e):{x:r,y:n,width:i,height:o}:e?(e.x=0,e.y=0,e.width=0,e.height=0,e):{x:0,y:0,width:0,height:0}}function po(s,t){return t?(t.x=s.x,t.y=s.y,t.width=s.width,t.height=s.height,t):{x:s.x,y:s.y,width:s.width,height:s.height}}function gl(s,t){return s===t?!0:s===null||t===null?!1:s.x===t.x&&s.y===t.y&&s.width===t.width&&s.height===t.height}function oi(s,t){return s.x1<=t.x2&&s.y1<=t.y2&&s.x2>=t.x1&&s.y2>=t.y1}function ml(s){return s.x1<s.x2&&s.y1<s.y2}function xl(s){if(self.location.protocol==="file:"&&!fl.test(s)){const e=self.location.pathname.split("/");e.pop();const r=e.join("/"),n=self.location.protocol+"//"+r;return s.charAt(0)==="."&&(s=s.slice(1)),s.charAt(0)==="/"&&(s=s.slice(1)),n+"/"+s}return new URL(s,self.location.href).href}class Pe{constructor(){u(this,"ta");u(this,"tb");u(this,"tx");u(this,"tc");u(this,"td");u(this,"ty");u(this,"_floatArr",null);u(this,"mutation");this.ta=0,this.tb=0,this.tx=0,this.tc=0,this.td=0,this.ty=0,this.mutation=!0}static get temp(){return yl}static multiply(t,e,r){const n=t.ta*e.ta+t.tb*e.tc,i=t.ta*e.tb+t.tb*e.td,o=t.ta*e.tx+t.tb*e.ty+t.tx,a=t.tc*e.ta+t.td*e.tc,l=t.tc*e.tb+t.td*e.td,c=t.tc*e.tx+t.td*e.ty+t.ty;return r||(r=new Pe),r.ta=n,r.tb=i,r.tx=o,r.tc=a,r.td=l,r.ty=c,r.mutation=!0,r}static identity(t){return t||(t=new Pe),t.ta=1,t.tb=0,t.tx=0,t.tc=0,t.td=1,t.ty=0,t.mutation=!0,t}static translate(t,e,r){return r||(r=new Pe),r.ta=1,r.tb=0,r.tx=t,r.tc=0,r.td=1,r.ty=e,r.mutation=!0,r}static scale(t,e,r){return r||(r=new Pe),r.ta=t,r.tb=0,r.tx=0,r.tc=0,r.td=e,r.ty=0,r.mutation=!0,r}static rotate(t,e){const r=Math.cos(t),n=Math.sin(t);return e||(e=new Pe),e.ta=r,e.tb=-n,e.tx=0,e.tc=n,e.td=r,e.ty=0,e.mutation=!0,e}static copy(t,e){return e||(e=new Pe),e.ta=t.ta,e.tc=t.tc,e.tb=t.tb,e.td=t.td,e.tx=t.tx,e.ty=t.ty,e.mutation=!0,e}translate(t,e){return this.tx=this.ta*t+this.tb*e+this.tx,this.ty=this.tc*t+this.td*e+this.ty,this.mutation=!0,this}scale(t,e){return this.ta=this.ta*t,this.tb=this.tb*e,this.tc=this.tc*t,this.td=this.td*e,this.mutation=!0,this}rotate(t){if(t===0||!(t%Math.PI*2))return this;const e=Math.cos(t),r=Math.sin(t),n=this.ta*e+this.tb*r,i=this.tb*e-this.ta*r,o=this.tc*e+this.td*r,a=this.td*e-this.tc*r;return this.ta=n,this.tb=i,this.tc=o,this.td=a,this.mutation=!0,this}multiply(t){return Pe.multiply(this,t,this)}getFloatArr(){return this._floatArr||(this._floatArr=new Float32Array(9)),this.mutation&&(this._floatArr[0]=this.ta,this._floatArr[1]=this.tc,this._floatArr[2]=0,this._floatArr[3]=this.tb,this._floatArr[4]=this.td,this._floatArr[5]=0,this._floatArr[6]=this.tx,this._floatArr[7]=this.ty,this._floatArr[8]=1,this.mutation=!1),this._floatArr}}const yl=new Pe,Hs=0,Gs=2,Vs=4,Ws=6,Xs=1,Ys=3,js=5,Ks=7;class pr{constructor(t){u(this,"data");this.data=new Float32Array(8),t&&(this.data[Hs]=t[Hs],this.data[Gs]=t[Gs],this.data[Vs]=t[Vs],this.data[Ws]=t[Ws],this.data[Xs]=t[Xs],this.data[Ys]=t[Ys],this.data[js]=t[js],this.data[Ks]=t[Ks])}static translate(t,e,r,n,i,o,a,l,c){return c||(c=new pr),c.data[Hs]=t,c.data[Gs]=r,c.data[Vs]=i,c.data[Ws]=a,c.data[Xs]=e,c.data[Ys]=n,c.data[js]=o,c.data[Ks]=l,c}get x1(){return this.data[Hs]}get x2(){return this.data[Gs]}get x3(){return this.data[Vs]}get x4(){return this.data[Ws]}get y1(){return this.data[Xs]}get y2(){return this.data[Ys]}get y3(){return this.data[js]}get y4(){return this.data[Ks]}}const ai=s=>s&&!(s&s-1),go=(s,t,e,r)=>{const n=3*s,i=3*(e-s)-n,o=1-n-i,a=3*t,l=3*(r-t)-a,c=1-a-l;return function(f){if(f>=1)return 1;if(f<=0)return 0;let h=.5,d,g,x;for(let T=0;T<20;T++){if(d=h*(h*(h*o+i)+n),x=f-d,x>-1e-8&&x<1e-8)return h*(h*(h*c+l)+a);if(g=h*(h*(3*o)+2*i)+n,g>1e-10&&g<1e-10)break;h+=x/g}let y=0,v=1;for(let T=0;T<20;T++){if(h=.5*(y+v),d=h*(h*(h*o+i)+n),x=f-d,x>-1e-8&&x<1e-8)return h*(h*(h*c+l)+a);x<0?v=h:y=h}}},or={},_l={ease:[.25,.1,.25,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1],"ease-in-sine":[.12,0,.39,0],"ease-out-sine":[.12,0,.39,0],"ease-in-out-sine":[.37,0,.63,1],"ease-in-cubic":[.32,0,.67,0],"ease-out-cubic":[.33,1,.68,1],"ease-in-out-cubic":[.65,0,.35,1],"ease-in-circ":[.55,0,1,.45],"ease-out-circ":[0,.55,.45,1],"ease-in-out-circ":[.85,0,.15,1],"ease-in-back":[.36,0,.66,-.56],"ease-out-back":[.34,1.56,.64,1],"ease-in-out-back":[.68,-.6,.32,1.6]},ar=s=>s,vl=s=>{const t=/-?\d*\.?\d+/g,e=s.match(t);if(e){const[r,n,i,o]=e,a=parseFloat(r||"0.42"),l=parseFloat(n||"0"),c=parseFloat(i||"1"),f=parseFloat(o||"1"),h=go(a,l,c,f);return or[s]=h,h}return console.warn("Unknown cubic-bezier timing: "+s),ar},Tl=s=>{if(s==="linear")return ar;if(or[s]!==void 0)return or[s]||ar;if(s==="step-start")return()=>1;if(s==="step-end")return e=>e===1?1:0;const t=_l[s];if(t!==void 0){const[e,r,n,i]=t,o=go(e,r,n,i);return or[s]=o,o}return s.startsWith("cubic-bezier")?vl(s):(console.warn("Unknown timing function: "+s),ar)};function li(s){return(s/1024/1024).toFixed(2)}class bl extends vt{constructor(e,r,n){super();u(this,"node");u(this,"props");u(this,"settings");u(this,"progress",0);u(this,"delayFor",0);u(this,"timingFunction");u(this,"propValuesMap",{});u(this,"dynPropValuesMap");this.node=e,this.props=r;for(const a in r)if(a!=="shaderProps")this.propValuesMap.props===void 0&&(this.propValuesMap.props={}),this.propValuesMap.props[a]={start:e[a],target:r[a]};else if(e.shader.type!=="DynamicShader"){this.propValuesMap.shaderProps={};for(const l in r.shaderProps)this.propValuesMap.shaderProps[l]={start:e.shader.props[l],target:r.shaderProps[l]}}else{const l=Object.keys(r.shaderProps),c=l.length;this.dynPropValuesMap={};for(let f=0;f<c;f++){const h=l[f],d=r.shaderProps[h];this.dynPropValuesMap[h]={};const g=Object.entries(d),x=g.length;for(let y=0;y<x;y++){const[v,T]=g[y];this.dynPropValuesMap[h][v]={start:e.shader.props[h][v],target:T}}}}const i=n.easing||"linear",o=n.delay??0;this.settings={duration:n.duration??0,delay:o,easing:i,loop:n.loop??!1,repeat:n.repeat??0,repeatDelay:n.repeatDelay??0,stopMethod:n.stopMethod??!1},this.timingFunction=Tl(i),this.delayFor=o}reset(){this.progress=0,this.delayFor=this.settings.delay||0,this.update(0)}restoreValues(e,r){const n=Object.entries(r),i=n.length;for(let o=0;o<i;o++){const[a,l]=n[o];e[a]=l.start}}restore(){if(this.reset(),this.propValuesMap.props!==void 0&&this.restoreValues(this.node,this.propValuesMap.props),this.propValuesMap.shaderProps!==void 0&&this.restoreValues(this.node.shader.props,this.propValuesMap.shaderProps),this.dynPropValuesMap!==void 0){const e=Object.keys(this.dynPropValuesMap),r=e.length;if(r>0)for(let n=0;n<r;n++){const i=e[n];this.restoreValues(this.node.shader.props[i],this.dynPropValuesMap[i])}}}reverseValues(e){const r=Object.entries(e),n=r.length;for(let i=0;i<n;i++){const[o,a]=r[i];e[o]={start:a.target,target:a.start}}}reverse(){if(this.progress=0,this.propValuesMap.props!==void 0&&this.reverseValues(this.propValuesMap.props),this.propValuesMap.shaderProps!==void 0&&this.reverseValues(this.propValuesMap.shaderProps),this.dynPropValuesMap!==void 0){const e=Object.keys(this.dynPropValuesMap),r=e.length;if(r>0)for(let n=0;n<r;n++){const i=e[n];this.reverseValues(this.dynPropValuesMap[i])}}this.settings.loop||(this.settings.stopMethod=!1)}applyEasing(e,r,n){return(this.timingFunction(e)||e)*(n-r)+r}updateValue(e,r,n,i){if(this.progress===1)return r;if(this.progress===0)return n;const o=r;if(e.indexOf("color")!==-1){if(n===o)return n;if(i){const a=this.timingFunction(this.progress)||this.progress;return ii(n,o,a)}return ii(n,o,this.progress)}return i?this.applyEasing(this.progress,n,o):n+(o-n)*this.progress}updateValues(e,r,n){const i=Object.entries(r),o=i.length;for(let a=0;a<o;a++){const[l,c]=i[a];e[l]=this.updateValue(l,c.target,c.start,n)}}update(e){const{duration:r,loop:n,easing:i,stopMethod:o}=this.settings,{delayFor:a}=this;if(r===0&&a===0){this.emit("finished",{});return}if(this.delayFor>0){if(this.delayFor-=e,this.delayFor>=0)return;e=-this.delayFor,this.delayFor=0}if(r===0){this.emit("finished",{});return}if(this.progress===0&&this.emit("animating",{}),this.progress+=e/r,this.progress>1&&(this.progress=n?0:1,o)){this.emit("finished",{});return}if(this.propValuesMap.props!==void 0&&this.updateValues(this.node,this.propValuesMap.props,i),this.propValuesMap.shaderProps!==void 0&&this.updateValues(this.node.shader.props,this.propValuesMap.shaderProps,i),this.dynPropValuesMap!==void 0){const l=Object.keys(this.dynPropValuesMap),c=l.length;if(c>0)for(let f=0;f<c;f++){const h=l[f];this.updateValues(this.node.shader.props[h],this.dynPropValuesMap[h],i)}}this.progress===1&&this.emit("finished",{})}}class wl extends vt{constructor(e,r){super();u(this,"manager");u(this,"animation");u(this,"stoppedPromise");u(this,"stoppedResolve",null);u(this,"state");this.manager=e,this.animation=r,this.state="stopped",this.stoppedPromise=Promise.resolve(),this.onAnimating=this.onAnimating.bind(this),this.onFinished=this.onFinished.bind(this)}start(){return this.state!=="running"&&(this.makeStoppedPromise(),this.registerAnimation(),this.state="running"),this}stop(){return this.unregisterAnimation(),this.stoppedResolve!==null&&(this.stoppedResolve(),this.stoppedResolve=null,this.emit("stopped",this)),this.animation.reset(),this.state="stopped",this}pause(){return this.unregisterAnimation(),this.state="paused",this}restore(){return this.stoppedResolve=null,this.animation.restore(),this}waitUntilStopped(){return this.stoppedPromise}registerAnimation(){this.animation.once("finished",this.onFinished),this.animation.on("animating",this.onAnimating),this.manager.registerAnimation(this.animation)}unregisterAnimation(){this.manager.unregisterAnimation(this.animation),this.animation.off("finished",this.onFinished),this.animation.off("animating",this.onAnimating)}makeStoppedPromise(){this.stoppedResolve===null&&(this.stoppedPromise=new Promise(e=>{this.stoppedResolve=e}))}onFinished(){z(this.stoppedResolve);const{loop:e,stopMethod:r}=this.animation.settings;if(r==="reverse"){this.animation.once("finished",this.onFinished),this.animation.reverse();return}e||(this.unregisterAnimation(),this.stoppedResolve(),this.stoppedResolve=null,this.emit("stopped",this),this.state="stopped")}onAnimating(){this.emit("animating",this)}}var Ve;(function(s){s[s.Init=0]="Init",s[s.OutOfBounds=2]="OutOfBounds",s[s.InBounds=4]="InBounds",s[s.InViewport=8]="InViewport"})(Ve||(Ve={}));const Bs=new Map;Bs.set(Ve.Init,"init");Bs.set(Ve.OutOfBounds,"outOfBounds");Bs.set(Ve.InBounds,"inBounds");Bs.set(Ve.InViewport,"inViewport");var N;(function(s){s[s.Children=1]="Children",s[s.ScaleRotate=2]="ScaleRotate",s[s.Local=4]="Local",s[s.Global=8]="Global",s[s.Clipping=16]="Clipping",s[s.CalculatedZIndex=32]="CalculatedZIndex",s[s.ZIndexSortedChildren=64]="ZIndexSortedChildren",s[s.PremultipliedColors=128]="PremultipliedColors",s[s.WorldAlpha=256]="WorldAlpha",s[s.RenderState=512]="RenderState",s[s.IsRenderable=1024]="IsRenderable",s[s.RenderTexture=2048]="RenderTexture",s[s.ParentRenderTexture=4096]="ParentRenderTexture",s[s.None=0]="None",s[s.All=8191]="All"})(N||(N={}));class on extends vt{constructor(e,r){super();u(this,"stage");u(this,"children",[]);u(this,"_id",ul());u(this,"props");u(this,"updateType",N.All);u(this,"globalTransform");u(this,"scaleRotateTransform");u(this,"localTransform");u(this,"renderCoords");u(this,"renderBound");u(this,"strictBound");u(this,"preloadBound");u(this,"clippingRect",{x:0,y:0,width:0,height:0,valid:!1});u(this,"isRenderable",!1);u(this,"renderState",Ve.Init);u(this,"worldAlpha",1);u(this,"premultipliedColorTl",0);u(this,"premultipliedColorTr",0);u(this,"premultipliedColorBl",0);u(this,"premultipliedColorBr",0);u(this,"calcZIndex",0);u(this,"hasRTTupdates",!1);u(this,"parentHasRenderTexture",!1);u(this,"onTextureLoaded",(e,r)=>{var n,i;this.autosizeNode(r),this.stage.requestRender(),this.parentHasRenderTexture&&this.setRTTUpdates(1),this.emit("loaded",{type:"texture",dimensions:r}),((i=(n=this.props.textureOptions)==null?void 0:n.resizeMode)==null?void 0:i.type)==="contain"&&this.setUpdateType(N.Local)});u(this,"onTextureFailed",(e,r)=>{this.emit("failed",{type:"texture",error:r})});u(this,"onTextureFreed",()=>{this.emit("freed",{type:"texture"})});this.stage=e,this.props={...r,parent:null,texture:null,src:null,rtt:!1},this.parent=r.parent,this.texture=r.texture,this.src=r.src,this.rtt=r.rtt,this.updateScaleRotateTransform()}loadTexture(){const{texture:e}=this.props;z(e),queueMicrotask(()=>{this.textureOptions.preload&&e.ctxTexture.load(),e.state==="loaded"?(z(e.dimensions),this.onTextureLoaded(e,e.dimensions)):e.state==="failed"?(z(e.error),this.onTextureFailed(e,e.error)):e.state==="freed"&&this.onTextureFreed(e),e.on("loaded",this.onTextureLoaded),e.on("failed",this.onTextureFailed),e.on("freed",this.onTextureFreed)})}unloadTexture(){this.texture&&(this.texture.off("loaded",this.onTextureLoaded),this.texture.off("failed",this.onTextureFailed),this.texture.off("freed",this.onTextureFreed),this.texture.setRenderableOwner(this,!1))}autosizeNode(e){this.autosize&&(this.width=e.width,this.height=e.height)}setUpdateType(e){this.updateType|=e;const r=this.props.parent;r&&!(r.updateType&N.Children)&&r.setUpdateType(N.Children),this.parentHasRenderTexture&&this.setRTTUpdates(e)}sortChildren(){this.children.sort((e,r)=>e.calcZIndex-r.calcZIndex)}updateScaleRotateTransform(){const{rotation:e,scaleX:r,scaleY:n}=this.props;if(e===0&&r===1&&n===1){this.scaleRotateTransform=void 0;return}this.scaleRotateTransform=Pe.rotate(e,this.scaleRotateTransform).scale(r,n)}updateLocalTransform(){var c,f;const{x:e,y:r,width:n,height:i}=this.props,o=this.props.mountX*n,a=this.props.mountY*i;if(this.scaleRotateTransform){const h=this.props.pivotX*n,d=this.props.pivotY*i;this.localTransform=Pe.translate(e-o+h,r-a+d,this.localTransform).multiply(this.scaleRotateTransform).translate(-h,-d)}else this.localTransform=Pe.translate(e-o,r-a,this.localTransform);const l=this.props.texture;if(l&&l.dimensions&&((f=(c=this.props.textureOptions)==null?void 0:c.resizeMode)==null?void 0:f.type)==="contain"){let h=1,d=1,g=0,x=0;const{width:y,height:v}=l.dimensions,T=y/v,w=n/i;if(T>w){const E=n/y,C=v*E;x=(i-C)/2,d=C/i}else{const E=i/v,C=y*E;g=(n-C)/2,h=C/n}this.localTransform.translate(g,x).scale(h,d)}this.setUpdateType(N.Global)}update(e,r){var o;this.updateType&N.ScaleRotate&&(this.updateScaleRotateTransform(),this.setUpdateType(N.Local)),this.updateType&N.Local&&(this.updateLocalTransform(),this.setUpdateType(N.Global));const n=this.props.parent;let i=N.None;if(this.updateType&N.ParentRenderTexture){let a=this.parent;for(;a;)a.rtt&&(this.parentHasRenderTexture=!0),a=a.parent}this.updateType^N.All&&this.updateType&N.RenderTexture&&this.children.forEach(a=>{a.setUpdateType(N.All)}),this.updateType&N.Global&&(z(this.localTransform),this.globalTransform=Pe.copy((n==null?void 0:n.globalTransform)||this.localTransform,this.globalTransform),this.parentHasRenderTexture&&((o=this.props.parent)!=null&&o.rtt)&&(this.globalTransform=Pe.identity()),n&&this.globalTransform.multiply(this.localTransform),this.calculateRenderCoords(),this.updateBoundingRect(),this.setUpdateType(N.Clipping|N.RenderState|N.Children),i|=N.Global),this.updateType&N.Clipping&&(this.calculateClippingRect(r),this.setUpdateType(N.Children),i|=N.Clipping),this.updateType&N.WorldAlpha&&(n?this.worldAlpha=n.worldAlpha*this.props.alpha:this.worldAlpha=this.props.alpha,this.setUpdateType(N.Children|N.PremultipliedColors|N.IsRenderable),i|=N.WorldAlpha),this.updateType&N.PremultipliedColors&&(this.premultipliedColorTl=$s(this.props.colorTl,this.worldAlpha,!0),this.props.colorTl===this.props.colorTr&&this.props.colorBl===this.props.colorBr&&this.props.colorTl===this.props.colorBl?this.premultipliedColorTr=this.premultipliedColorBl=this.premultipliedColorBr=this.premultipliedColorTl:(this.premultipliedColorTr=$s(this.props.colorTr,this.worldAlpha,!0),this.premultipliedColorBl=$s(this.props.colorBl,this.worldAlpha,!0),this.premultipliedColorBr=$s(this.props.colorBr,this.worldAlpha,!0))),this.updateType&N.RenderState&&(this.updateRenderState(r),this.setUpdateType(N.IsRenderable)),this.updateType&N.IsRenderable&&this.updateIsRenderable(),n&&this.updateType&N.CalculatedZIndex&&(this.calculateZIndex(),n.setUpdateType(N.ZIndexSortedChildren)),this.updateType&N.Children&&this.children.length&&!this.rtt&&this.children.forEach(a=>{a.setUpdateType(i),a.updateType!==0&&a.update(e,this.clippingRect)}),this.updateType&N.ZIndexSortedChildren&&this.sortChildren(),this.updateType=0}checkRenderProps(){return this.props.texture?!0:!this.props.width||!this.props.height?!1:!!(this.props.shader!==this.stage.defShaderCtr||this.props.clipping||this.props.color!==0||this.props.colorTop!==0||this.props.colorBottom!==0||this.props.colorLeft!==0||this.props.colorRight!==0||this.props.colorTl!==0||this.props.colorTr!==0||this.props.colorBl!==0||this.props.colorBr!==0)}checkRenderBounds(e){z(this.renderBound);const r=e.width||this.stage.root.width,n=e.height||this.stage.root.height;if(this.strictBound=zs(e.x,e.y,e.x+r,e.y+n,this.strictBound),oi(this.renderBound,this.strictBound))return Ve.InViewport;const i=this.stage.boundsMargin;return this.preloadBound=zs(this.strictBound.x1-i[3],this.strictBound.y1-i[0],this.strictBound.x2+i[1],this.strictBound.y2+i[2],this.preloadBound),oi(this.renderBound,this.preloadBound)?Ve.InBounds:Ve.OutOfBounds}updateRenderState(e){const r=this.checkRenderBounds(e);if(r===this.renderState)return;const n=this.renderState;this.renderState=r;const i=Bs.get(r);z(i),this.emit(i,{previous:n,current:r})}updateIsRenderable(){let e;this.worldAlpha===0||!this.checkRenderProps()?e=!1:e=this.renderState>Ve.OutOfBounds,this.isRenderable!==e&&(this.isRenderable=e,this.onChangeIsRenderable(e))}onChangeIsRenderable(e){var r;(r=this.texture)==null||r.setRenderableOwner(this,e)}calculateRenderCoords(){const{width:e,height:r,globalTransform:n}=this;z(n);const{tx:i,ty:o,ta:a,tb:l,tc:c,td:f}=n;if(l===0&&c===0){const h=i,d=i+e*a,g=o,x=o+r*f;this.renderCoords=pr.translate(h,g,d,g,d,x,h,x,this.renderCoords)}else this.renderCoords=pr.translate(i,o,i+e*a,o+e*c,i+e*a+r*l,o+e*c+r*f,i+r*l,o+r*f,this.renderCoords)}updateBoundingRect(){const{renderCoords:e,globalTransform:r}=this;z(r),z(e);const{tb:n,tc:i}=r,{x1:o,y1:a,x3:l,y3:c}=e;if(n===0||i===0)this.renderBound=zs(o,a,l,c,this.renderBound);else{const{x2:f,x4:h,y2:d,y4:g}=e;this.renderBound=zs(Math.min(o,f,l,h),Math.min(a,d,c,g),Math.max(o,f,l,h),Math.max(a,d,c,g),this.renderBound)}}calculateClippingRect(e){z(this.globalTransform);const{clippingRect:r,props:n,globalTransform:i}=this,{clipping:o}=n,a=i.tb!==0||i.tc!==0;o&&!a?(r.x=i.tx,r.y=i.ty,r.width=this.width*i.ta,r.height=this.height*i.td,r.valid=!0):r.valid=!1,e.valid&&r.valid?ho(e,r,r):e.valid&&(po(e,r),r.valid=!0)}calculateZIndex(){var o,a;const e=this.props,r=e.zIndex||0,n=((o=e.parent)==null?void 0:o.zIndex)||0;let i=r;(a=e.parent)!=null&&a.zIndexLocked&&(i=r<n?r:n),this.calcZIndex=i}destroy(){this.unloadTexture(),this.clippingRect.valid=!1,this.isRenderable=!1,delete this.renderCoords,delete this.renderBound,delete this.strictBound,delete this.preloadBound,delete this.globalTransform,delete this.scaleRotateTransform,delete this.localTransform,this.props.texture=null,this.props.shader=this.stage.defShaderCtr;const e=[...this.children];for(let r=0;r<e.length;r++)e[r].destroy();this.parent=null,this.rtt&&this.stage.renderer.removeRTTNode(this),this.removeAllListeners()}renderQuads(e){const{texture:r,width:n,height:i,textureOptions:o,rtt:a,shader:l}=this.props;if(this.parentHasRenderTexture&&(!e.renderToTextureActive||this.parentRenderTexture!==e.activeRttNode))return;const{premultipliedColorTl:c,premultipliedColorTr:f,premultipliedColorBl:h,premultipliedColorBr:d}=this,{zIndex:g,worldAlpha:x,globalTransform:y,clippingRect:v,renderCoords:T}=this;z(y),z(T),e.addQuad({width:n,height:i,colorTl:c,colorTr:f,colorBl:h,colorBr:d,texture:r,textureOptions:o,zIndex:g,shader:l.shader,shaderProps:l.getResolvedProps(),alpha:x,clippingRect:v,tx:y.tx,ty:y.ty,ta:y.ta,tb:y.tb,tc:y.tc,td:y.td,renderCoords:T,rtt:a,parentHasRenderTexture:this.parentHasRenderTexture,framebufferDimensions:this.framebufferDimensions})}get id(){return this._id}get x(){return this.props.x}set x(e){this.props.x!==e&&(this.props.x=e,this.setUpdateType(N.Local))}get absX(){var e,r,n;return this.props.x+(((e=this.props.parent)==null?void 0:e.absX)||((n=(r=this.props.parent)==null?void 0:r.globalTransform)==null?void 0:n.tx)||0)}get absY(){var e;return this.props.y+(((e=this.props.parent)==null?void 0:e.absY)??0)}get y(){return this.props.y}set y(e){this.props.y!==e&&(this.props.y=e,this.setUpdateType(N.Local))}get width(){return this.props.width}set width(e){this.props.width!==e&&(this.props.width=e,this.setUpdateType(N.Local),this.props.rtt&&(this.texture=this.stage.txManager.loadTexture("RenderTexture",{width:this.width,height:this.height}),this.textureOptions.preload=!0,this.setUpdateType(N.RenderTexture)))}get height(){return this.props.height}set height(e){this.props.height!==e&&(this.props.height=e,this.setUpdateType(N.Local),this.props.rtt&&(this.texture=this.stage.txManager.loadTexture("RenderTexture",{width:this.width,height:this.height}),this.textureOptions.preload=!0,this.setUpdateType(N.RenderTexture)))}get scale(){return this.scaleX}set scale(e){this.scaleX=e,this.scaleY=e}get scaleX(){return this.props.scaleX}set scaleX(e){this.props.scaleX!==e&&(this.props.scaleX=e,this.setUpdateType(N.ScaleRotate))}get scaleY(){return this.props.scaleY}set scaleY(e){this.props.scaleY!==e&&(this.props.scaleY=e,this.setUpdateType(N.ScaleRotate))}get mount(){return this.props.mount}set mount(e){(this.props.mountX!==e||this.props.mountY!==e)&&(this.props.mountX=e,this.props.mountY=e,this.props.mount=e,this.setUpdateType(N.Local))}get mountX(){return this.props.mountX}set mountX(e){this.props.mountX!==e&&(this.props.mountX=e,this.setUpdateType(N.Local))}get mountY(){return this.props.mountY}set mountY(e){this.props.mountY!==e&&(this.props.mountY=e,this.setUpdateType(N.Local))}get pivot(){return this.props.pivot}set pivot(e){(this.props.pivotX!==e||this.props.pivotY!==e)&&(this.props.pivotX=e,this.props.pivotY=e,this.props.pivot=e,this.setUpdateType(N.Local))}get pivotX(){return this.props.pivotX}set pivotX(e){this.props.pivotX!==e&&(this.props.pivotX=e,this.setUpdateType(N.Local))}get pivotY(){return this.props.pivotY}set pivotY(e){this.props.pivotY!==e&&(this.props.pivotY=e,this.setUpdateType(N.Local))}get rotation(){return this.props.rotation}set rotation(e){this.props.rotation!==e&&(this.props.rotation=e,this.setUpdateType(N.ScaleRotate))}get alpha(){return this.props.alpha}set alpha(e){this.props.alpha=e,this.setUpdateType(N.PremultipliedColors|N.WorldAlpha)}get autosize(){return this.props.autosize}set autosize(e){this.props.autosize=e}get clipping(){return this.props.clipping}set clipping(e){this.props.clipping=e,this.setUpdateType(N.Clipping)}get color(){return this.props.color}set color(e){this.colorTop=e,this.colorBottom=e,this.colorLeft=e,this.colorRight=e,this.props.color=e,this.setUpdateType(N.PremultipliedColors)}get colorTop(){return this.props.colorTop}set colorTop(e){(this.props.colorTl!==e||this.props.colorTr!==e)&&(this.colorTl=e,this.colorTr=e),this.props.colorTop=e,this.setUpdateType(N.PremultipliedColors)}get colorBottom(){return this.props.colorBottom}set colorBottom(e){(this.props.colorBl!==e||this.props.colorBr!==e)&&(this.colorBl=e,this.colorBr=e),this.props.colorBottom=e,this.setUpdateType(N.PremultipliedColors)}get colorLeft(){return this.props.colorLeft}set colorLeft(e){(this.props.colorTl!==e||this.props.colorBl!==e)&&(this.colorTl=e,this.colorBl=e),this.props.colorLeft=e,this.setUpdateType(N.PremultipliedColors)}get colorRight(){return this.props.colorRight}set colorRight(e){(this.props.colorTr!==e||this.props.colorBr!==e)&&(this.colorTr=e,this.colorBr=e),this.props.colorRight=e,this.setUpdateType(N.PremultipliedColors)}get colorTl(){return this.props.colorTl}set colorTl(e){this.props.colorTl=e,this.setUpdateType(N.PremultipliedColors)}get colorTr(){return this.props.colorTr}set colorTr(e){this.props.colorTr=e,this.setUpdateType(N.PremultipliedColors)}get colorBl(){return this.props.colorBl}set colorBl(e){this.props.colorBl=e,this.setUpdateType(N.PremultipliedColors)}get colorBr(){return this.props.colorBr}set colorBr(e){this.props.colorBr=e,this.setUpdateType(N.PremultipliedColors)}get zIndexLocked(){return this.props.zIndexLocked||0}set zIndexLocked(e){this.props.zIndexLocked=e,this.setUpdateType(N.CalculatedZIndex|N.Children),this.children.forEach(r=>{r.setUpdateType(N.CalculatedZIndex)})}get zIndex(){return this.props.zIndex}set zIndex(e){this.props.zIndex=e,this.setUpdateType(N.CalculatedZIndex|N.Children),this.children.forEach(r=>{r.setUpdateType(N.CalculatedZIndex)})}get parent(){return this.props.parent}set parent(e){const r=this.props.parent;if(r!==e){if(this.props.parent=e,r){const n=r.children.indexOf(this);z(n!==-1,"CoreNode.parent: Node not found in old parent's children!"),r.children.splice(n,1),r.setUpdateType(N.Children|N.ZIndexSortedChildren)}e&&(e.children.push(this),this.setUpdateType(N.All),e.setUpdateType(N.Children|N.ZIndexSortedChildren),(e.rtt||e.parentHasRenderTexture)&&this.setRTTUpdates(N.All)),this.updateScaleRotateTransform()}}get rtt(){return this.props.rtt}set rtt(e){var r,n;if(this.props.rtt===!0&&(this.props.rtt=e,e===!1&&this.texture!==null)){this.unloadTexture(),this.setUpdateType(N.All),this.children.forEach(i=>{i.parentHasRenderTexture=!1}),(r=this.stage.renderer)==null||r.removeRTTNode(this);return}e!==!1&&(this.texture=this.stage.txManager.loadTexture("RenderTexture",{width:this.width,height:this.height}),this.textureOptions.preload=!0,this.props.rtt=!0,this.hasRTTupdates=!0,this.setUpdateType(N.All),this.children.forEach(i=>{i.setUpdateType(N.All)}),(n=this.stage.renderer)==null||n.renderToTexture(this))}get shader(){return this.props.shader}set shader(e){this.props.shader!==e&&(this.props.shader=e,this.setUpdateType(N.IsRenderable))}get src(){return this.props.src}set src(e){if(this.props.src!==e){if(this.props.src=e,!e){this.texture=null;return}this.texture=this.stage.txManager.loadTexture("ImageTexture",{src:e})}}get framebufferDimensions(){return this.parentHasRenderTexture&&!this.rtt&&this.parent?this.parent.framebufferDimensions:{width:this.width,height:this.height}}get parentRenderTexture(){let e=this.parent;for(;e;){if(e.rtt)return e;e=e.parent}return null}get texture(){return this.props.texture}set texture(e){if(this.props.texture===e)return;const r=this.props.texture;r&&(r.setRenderableOwner(this,!1),this.unloadTexture()),this.props.texture=e,e&&(e.setRenderableOwner(this,this.isRenderable),this.loadTexture()),this.setUpdateType(N.IsRenderable)}set textureOptions(e){this.props.textureOptions=e}get textureOptions(){return this.props.textureOptions}setRTTUpdates(e){var r;this.hasRTTupdates=!0,(r=this.parent)==null||r.setRTTUpdates(e)}animate(e,r){const n=new bl(this,e,r);return new wl(this.stage.animationManager,n)}flush(){}}const qs={alpha:s=>s===1?null:{prop:"opacity",value:`${s}`},x:s=>({prop:"left",value:`${s}px`}),y:s=>({prop:"top",value:`${s}px`}),width:s=>s===0?null:{prop:"width",value:`${s}px`},height:s=>s===0?null:{prop:"height",value:`${s}px`},zIndex:()=>"zIndex",fontFamily:()=>"font-family",fontSize:()=>"font-size",fontStyle:()=>"font-style",fontWeight:()=>"font-weight",fontStretch:()=>"font-stretch",lineHeight:()=>"line-height",letterSpacing:()=>"letter-spacing",textAlign:()=>"text-align",overflowSuffix:()=>"overflow-suffix",maxLines:()=>"max-lines",contain:()=>"contain",verticalAlign:()=>"vertical-align",clipping:s=>s===!1?null:{prop:"overflow",value:s?"hidden":"visible"},rotation:s=>s===0?null:{prop:"transform",value:`rotate(${s}rad)`},scale:s=>s===1?null:{prop:"transform",value:`scale(${s})`},scaleX:s=>s===1?null:{prop:"transform",value:`scaleX(${s})`},scaleY:s=>s===1?null:{prop:"transform",value:`scaleY(${s})`},color:s=>s===0?null:{prop:"color",value:mo(s)}},mo=s=>{const t=(s&255)/255,e=s>>8&255,r=s>>16&255;return`rgba(${s>>24&255},${r},${e},${t})`},ci={id:"id"};class Rl{constructor(t,e){u(this,"root",null);u(this,"canvas",null);u(this,"height",1080);u(this,"width",1920);u(this,"scaleX",1);u(this,"scaleY",1);if(In())return;if(!e)throw new Error("settings is required");this.height=Math.ceil(e.appHeight??1080/(e.deviceLogicalPixelRatio??1)),this.width=Math.ceil(e.appWidth??1900/(e.deviceLogicalPixelRatio??1)),this.scaleX=e.deviceLogicalPixelRatio??1,this.scaleY=e.deviceLogicalPixelRatio??1,this.canvas=t,this.root=document.createElement("div"),this.setRootPosition(),document.body.appendChild(this.root),new MutationObserver(this.setRootPosition.bind(this)).observe(t,{attributes:!0,childList:!1,subtree:!1}),new ResizeObserver(this.setRootPosition.bind(this)).observe(t),window.addEventListener("resize",this.setRootPosition.bind(this)),console.warn("Inspector is enabled, this will impact performance")}setRootPosition(){if(this.root===null||this.canvas===null)return;const t=this.canvas.getBoundingClientRect(),e=document.documentElement.scrollTop+t.top,r=document.documentElement.scrollLeft+t.left;this.root.id="root",this.root.style.left=`${r}px`,this.root.style.top=`${e}px`,this.root.style.width=`${this.width}px`,this.root.style.height=`${this.height}px`,this.root.style.position="absolute",this.root.style.transformOrigin="0 0 0",this.root.style.transform=`scale(${this.scaleX}, ${this.scaleY})`,this.root.style.overflow="hidden",this.root.style.zIndex="65534"}createDiv(t,e){const r=document.createElement("div");r.style.position="absolute",r.id=t.toString();for(const n in e)this.updateNodeProperty(r,n,e[n]);return r}createNode(t){const e=this.createDiv(t.id,t.props);return e.node=t,t.div=e,this.createProxy(t,e)}createTextNode(t){const e=this.createDiv(t.id,t.props);return e.node=t,t.div=e,this.createProxy(t,e)}createProxy(t,e){return new Proxy(t,{set:(r,n,i)=>(this.updateNodeProperty(e,n,i),Reflect.set(r,n,i)),get:(r,n,i)=>(n==="destroy"&&this.destroyNode(r.id),n==="animate"?(o,a)=>{const l=r.animate(o,a);return new Proxy(l,{get:(c,f,h)=>(f==="start"&&this.animateNode(e,o,a),Reflect.get(c,f,h))})}:Reflect.get(r,n,i))})}destroyNode(t){const e=document.getElementById(t.toString());e==null||e.remove()}updateNodeProperty(t,e,r){var n;if(!(this.root===null||r===void 0||r===null)){if(e==="parent"){const i=r.id;if(i===1){this.root.appendChild(t);return}const o=document.getElementById(i.toString());o==null||o.appendChild(t);return}if(e==="text"){t.innerHTML=String(r),t.style.visibility="hidden";return}if(e==="src"&&r){t.setAttribute("data-src",String(r));return}if(qs[e]){const i=(n=qs[e])==null?void 0:n.call(qs,r);if(i===null)return;if(typeof i=="string"){t.style.setProperty(i,String(r));return}typeof i=="object"&&t.style.setProperty(i.prop,i.value);return}if(ci[e]){const i=ci[e];if(!i)return;t.setAttribute(String(i),String(r));return}if(e==="data"){for(const i in r){const o=r[i];o===void 0?t.removeAttribute(`data-${i}`):t.setAttribute(`data-${i}`,String(o))}return}}}animateNode(t,e,r){const{duration:n=1e3,delay:i=0}=r,{x:o,y:a,width:l,height:c,alpha:f=1,rotation:h=0,scale:d=1,color:g}=e;function x(){setTimeout(()=>{t.style.top=`${a}px`,t.style.left=`${o}px`,t.style.width=`${l}px`,t.style.height=`${c}px`,t.style.opacity=`${f}`,t.style.rotate=`${h}rad`,t.style.scale=`${d}`,t.style.color=mo(g)},n)}setTimeout(x,i)}}const Sl=s=>{let t=!1;const e=()=>{if(s.updateFrameTime(),s.updateAnimations(),!s.hasSceneUpdates()){s.calculateFps(),setTimeout(e,16.666666666666668),t||(s.txMemManager.checkCleanup()&&s.txMemManager.cleanup(),s.eventBus.emit("idle"),t=!0),s.flushFrameEvents();return}t=!1,s.drawFrame(),s.flushFrameEvents(),requestAnimationFrame(e)};requestAnimationFrame(e)},El=()=>performance?performance.now():Date.now();class xo{constructor(t,e){u(this,"textureSource");u(this,"memManager");this.memManager=t,this.textureSource=e}setTextureMemUse(t){this.memManager.setTextureMemUse(this.textureSource,t)}get renderable(){return this.textureSource.renderable}}class yo{constructor(t){u(this,"options");u(this,"mode");u(this,"stage");u(this,"txManager");u(this,"txMemManager");u(this,"shManager");u(this,"rttNodes",[]);this.options=t,this.stage=t.stage,this.txManager=t.txManager,this.txMemManager=t.txMemManager,this.shManager=t.shManager}}class Cl{}class _o{static makeCacheKey(t){return!1}static resolveDefaults(t){return{}}}function ui(s,t,e){const r=s.createShader(t);if(!r)throw new Error;if(s.shaderSource(r,e),s.compileShader(r),s.getShaderParameter(r,s.COMPILE_STATUS))return r;console.log(s.getShaderInfoLog(r)),s.deleteShader(r)}function Al(s,t,e){const r=s.createProgram();if(!r)throw new Error;if(s.attachShader(r,t),s.attachShader(r,e),s.linkProgram(r),s.getProgramParameter(r,s.LINK_STATUS))return r;console.log(s.getProgramInfoLog(r)),s.deleteProgram(r)}class Tt extends _o{constructor(e){super();u(this,"boundBufferCollection",null);u(this,"buffersBound",!1);u(this,"program");u(this,"vao");u(this,"renderer");u(this,"glw");u(this,"attributeBuffers");u(this,"attributeLocations");u(this,"attributeNames");u(this,"uniformLocations");u(this,"uniformTypes");u(this,"supportsIndexedTextures");const r=this.renderer=e.renderer,n=this.glw=this.renderer.glw;this.supportsIndexedTextures=e.supportsIndexedTextures||!1;const i=n.isWebGl2(),o=i&&e.webgl2Extensions||!i&&e.webgl1Extensions||[],a=i?"2.0":"1.0";o.forEach(y=>{if(!n.getExtension(y))throw new Error(`Shader "${this.constructor.name}" requires extension "${y}" for WebGL ${a} but wasn't found`)});const l=e.shaderSources||this.constructor.shaderSources;if(l)i&&(l!=null&&l.webGl2)&&(l.fragment=l.webGl2.fragment,l.vertex=l.webGl2.vertex,delete l.webGl2);else throw new Error(`Shader "${this.constructor.name}" is missing shaderSources.`);const c=r.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS,f=l.vertex instanceof Function?l.vertex(c):l.vertex,h=l.fragment instanceof Function?l.fragment(c):l.fragment,d=ui(n,n.VERTEX_SHADER,f),g=ui(n,n.FRAGMENT_SHADER,h);if(!d||!g)throw new Error;const x=Al(n,d,g);if(!x)throw new Error;if(this.program=x,i){const y=n.createVertexArray();if(!y)throw new Error;this.vao=y,n.bindVertexArray(this.vao)}this.attributeLocations={},this.attributeBuffers={},this.attributeNames=[],[...e.attributes].forEach(y=>{const v=n.getAttribLocation(this.program,y);if(v<0)throw new Error(`${this.constructor.name}: Vertex shader must have an attribute "${y}"!`);const T=n.createBuffer();if(!T)throw new Error(`${this.constructor.name}: Could not create buffer for attribute "${y}"`);this.attributeLocations[y]=v,this.attributeBuffers[y]=T,this.attributeNames.push(y)}),this.uniformLocations={},this.uniformTypes={},e.uniforms.forEach(y=>{const v=n.getUniformLocation(this.program,y.name);if(this.uniformTypes[y.name]=y.uniform,!v){console.warn(`Shader "${this.constructor.name}" could not get uniform location for "${y.name}"`);return}this.uniformLocations[y.name]=v})}bindBufferAttribute(e,r,n){const{glw:i}=this;i.enableVertexAttribArray(e),i.vertexAttribPointer(r,e,n.size,n.type,n.normalized,n.stride,n.offset)}disableAttribute(e){this.glw.disableVertexAttribArray(e)}disableAttributes(){for(const e in this.attributeLocations)this.disableAttribute(this.attributeLocations[e]);this.boundBufferCollection=null}canBatchShaderProps(e,r){return!1}bindRenderOp(e,r){this.bindBufferCollection(e.buffers),e.textures.length>0&&this.bindTextures(e.textures);const{glw:n,parentHasRenderTexture:i,renderToTexture:o}=e;if(!(o&&i)){if(i){const{width:a,height:l}=e.framebufferDimensions||{};this.setUniform("u_pixelRatio",1),this.setUniform("u_resolution",new Float32Array([a??0,l??0]))}else this.setUniform("u_pixelRatio",e.options.pixelRatio),this.setUniform("u_resolution",new Float32Array([n.canvas.width,n.canvas.height]));if(r){if(nn(r,"$dimensions")){let a=r.$dimensions;a||(a=e.dimensions),this.setUniform("u_dimensions",[a.width,a.height])}if(nn(r,"$alpha")){let a=r.$alpha;a||(a=e.alpha),this.setUniform("u_alpha",a)}this.bindProps(r)}}}setUniform(e,...r){this.glw.setUniform(this.uniformTypes[e],this.uniformLocations[e],...r)}bindBufferCollection(e){if(this.boundBufferCollection!==e){for(const r in this.attributeLocations){const n=e.getBuffer(r),i=e.getAttributeInfo(r);z(n,`Buffer for "${r}" not found`),z(i),this.bindBufferAttribute(this.attributeLocations[r],n,i)}this.boundBufferCollection=e}}bindProps(e){}bindTextures(e){}attach(){this.glw.useProgram(this.program),this.glw.useProgram(this.program),this.glw.isWebGl2()&&this.vao&&this.glw.bindVertexArray(this.vao)}detach(){this.disableAttributes()}}u(Tt,"shaderSources");class vo extends Cl{constructor(e,r,n,i,o,a,l,c,f,h,d,g,x){super();u(this,"glw");u(this,"options");u(this,"buffers");u(this,"shader");u(this,"shaderProps");u(this,"alpha");u(this,"clippingRect");u(this,"dimensions");u(this,"bufferIdx");u(this,"zIndex");u(this,"renderToTexture");u(this,"parentHasRenderTexture");u(this,"framebufferDimensions");u(this,"length",0);u(this,"numQuads",0);u(this,"textures",[]);u(this,"maxTextures");this.glw=e,this.options=r,this.buffers=n,this.shader=i,this.shaderProps=o,this.alpha=a,this.clippingRect=l,this.dimensions=c,this.bufferIdx=f,this.zIndex=h,this.renderToTexture=d,this.parentHasRenderTexture=g,this.framebufferDimensions=x,this.maxTextures=i.supportsIndexedTextures?e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS):1}addTexture(e){const{textures:r,maxTextures:n}=this,i=r.findIndex(a=>a===e);if(i!==-1)return i;const o=r.length;return o>=n?4294967295:(this.textures.push(e),o)}draw(){const{glw:e,shader:r,shaderProps:n,options:i}=this,{shManager:o}=i;o.useShader(r),r.bindRenderOp(this,n);const a=this.bufferIdx/24*6*2;if(this.clippingRect.valid){const{x:l,y:c,width:f,height:h}=this.clippingRect,d=i.pixelRatio,g=i.canvas.height,x=Math.round(l*d),y=Math.round(f*d),v=Math.round(h*d),T=Math.round(g-v-c*d);e.setScissorTest(!0),e.scissor(x,T,y,v)}else e.setScissorTest(!1);e.drawElements(e.TRIANGLES,6*this.numQuads,e.UNSIGNED_SHORT,a)}}function Il(s){const t={MAX_RENDERBUFFER_SIZE:0,MAX_TEXTURE_SIZE:0,MAX_VIEWPORT_DIMS:0,MAX_VERTEX_TEXTURE_IMAGE_UNITS:0,MAX_TEXTURE_IMAGE_UNITS:0,MAX_COMBINED_TEXTURE_IMAGE_UNITS:0,MAX_VERTEX_ATTRIBS:0,MAX_VARYING_VECTORS:0,MAX_VERTEX_UNIFORM_VECTORS:0,MAX_FRAGMENT_UNIFORM_VECTORS:0};return Object.keys(t).forEach(r=>{t[r]=s.getParameter(s[r])}),t}function Ml(s){const t={ANGLE_instanced_arrays:null,WEBGL_compressed_texture_s3tc:null,WEBGL_compressed_texture_astc:null,WEBGL_compressed_texture_etc:null,WEBGL_compressed_texture_etc1:null,WEBGL_compressed_texture_pvrtc:null,WEBKIT_WEBGL_compressed_texture_pvrtc:null,WEBGL_compressed_texture_s3tc_srgb:null,OES_vertex_array_object:null};return Object.keys(t).forEach(r=>{t[r]=s.getExtension(r)}),t}function Pl(s,t){const e=~~(t/80),r=new Uint16Array(e*6);for(let i=0,o=0;i<e;i+=6,o+=4)r[i]=o,r[i+1]=o+1,r[i+2]=o+2,r[i+3]=o+2,r[i+4]=o+1,r[i+5]=o+3;const n=s.createBuffer();s.elementArrayBufferData(n,r,s.STATIC_DRAW)}function Ll(s){return s!==null&&typeof s=="object"&&s.constructor&&s.constructor.name==="HTMLImageElement"}const zr=new Uint8Array([0,0,0,0]);class gr extends xo{constructor(e,r,n){super(r,n);u(this,"glw");u(this,"_nativeCtxTexture",null);u(this,"_state","freed");u(this,"_w",0);u(this,"_h",0);this.glw=e}get ctxTexture(){return this._state==="freed"&&this.load(),z(this._nativeCtxTexture),this._nativeCtxTexture}get w(){return this._w}get h(){return this._h}load(){this._state==="loading"||this._state==="loaded"||(this._state="loading",this.textureSource.setState("loading"),this._nativeCtxTexture=this.createNativeCtxTexture(),this.onLoadRequest().then(({width:e,height:r})=>{this._state!=="freed"&&(this._state="loaded",this._w=e,this._h=r,this.textureSource.setState("loaded",{width:e,height:r}))}).catch(e=>{this._state!=="freed"&&(this._state="failed",this.textureSource.setState("failed",e),console.error(e))}))}async onLoadRequest(){var o;const{glw:e}=this;e.texImage2D(0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null),this.setTextureMemUse(zr.byteLength);const r=await((o=this.textureSource)==null?void 0:o.getTextureData());if(!this._nativeCtxTexture)return z(this._state==="freed"),{width:0,height:0};let n=0,i=0;if(z(this._nativeCtxTexture),e.activeTexture(0),r.data instanceof ImageBitmap||r.data instanceof ImageData||Ll(r.data)){const a=r.data;n=a.width,i=a.height,e.bindTexture(this._nativeCtxTexture),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!!r.premultiplyAlpha),e.texImage2D(0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,a),this.setTextureMemUse(n*i*4),(e.isWebGl2()||ai(n)&&ai(i))&&e.generateMipmap()}else if(r.data===null)n=0,i=0,e.bindTexture(this._nativeCtxTexture),e.texImage2D(0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,zr),this.setTextureMemUse(zr.byteLength);else if("mipmaps"in r.data&&r.data.mipmaps){const{mipmaps:a,width:l=0,height:c=0,type:f,glInternalFormat:h}=r.data,d=f==="ktx"?new DataView(a[0]??new ArrayBuffer(0)):a[0];e.bindTexture(this._nativeCtxTexture),e.compressedTexImage2D(0,h,l,c,0,d),e.texParameteri(e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_MIN_FILTER,e.LINEAR),this.setTextureMemUse(d.byteLength)}else console.error("WebGlCoreCtxTexture.onLoadRequest: Unexpected textureData returned",r);return{width:n,height:i}}free(){if(this._state==="freed"||(this._state="freed",this.textureSource.setState("freed"),this._w=0,this._h=0,!this._nativeCtxTexture))return;const{glw:e}=this;e.deleteTexture(this._nativeCtxTexture),this.setTextureMemUse(0),this._nativeCtxTexture=null}createNativeCtxTexture(){const{glw:e}=this,r=e.createTexture();if(!r)throw new Error("Could not create WebGL Texture");return e.activeTexture(0),e.bindTexture(r),e.texParameteri(e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),r}}class ts extends vt{constructor(e){super();u(this,"txManager");u(this,"dimensions",null);u(this,"error",null);u(this,"state","freed");u(this,"renderableOwners",new Set);u(this,"renderable",!1);u(this,"lastRenderableChangeTime",0);this.txManager=e}setRenderableOwner(e,r){var i,o;const n=this.renderableOwners.size;if(r){this.renderableOwners.add(e);const a=this.renderableOwners.size;a>n&&a===1&&(this.renderable=!0,this.lastRenderableChangeTime=this.txManager.frameTime,(i=this.onChangeIsRenderable)==null||i.call(this,!0))}else{this.renderableOwners.delete(e);const a=this.renderableOwners.size;a<n&&a===0&&(this.renderable=!1,this.lastRenderableChangeTime=this.txManager.frameTime,(o=this.onChangeIsRenderable)==null||o.call(this,!1))}}get ctxTexture(){const e=this.txManager.renderer.createCtxTexture(this);return Object.defineProperty(this,"ctxTexture",{value:e}),e}setState(e,...r){if(this.state!==e){if(this.state=e,e==="loaded"){const n=r;this.dimensions=n[0]}else if(e==="failed"){const n=r;this.error=n[0]}this.emit(e,...r)}}static makeCacheKey(e){return!1}static resolveDefaults(e){return{}}}const ws=class ws extends ts{constructor(e,r){super(e);u(this,"props");this.props=ws.resolveDefaults(r||{})}get color(){return this.props.color}set color(e){this.props.color=e}async getTextureData(){const e=new Uint32Array([this.color]),r=new Uint8ClampedArray(e.buffer);return{data:new ImageData(r,1,1),premultiplyAlpha:!0}}static makeCacheKey(e){return`ColorTexture,${ws.resolveDefaults(e).color}`}static resolveDefaults(e){return{color:e.color||4294967295}}};u(ws,"z$__type__Props");let mr=ws;const wr=class wr extends ts{constructor(e,r){super(e);u(this,"props");u(this,"parentTexture");u(this,"onParentTxLoaded",()=>{this.setState("loaded",{width:this.props.width,height:this.props.height})});u(this,"onParentTxFailed",(e,r)=>{this.setState("failed",r)});this.props=wr.resolveDefaults(r||{}),this.parentTexture=this.props.texture,queueMicrotask(()=>{const n=this.parentTexture;n.state==="loaded"?this.onParentTxLoaded(n,n.dimensions):n.state==="failed"&&this.onParentTxFailed(n,n.error),n.on("loaded",this.onParentTxLoaded),n.on("failed",this.onParentTxFailed)})}onChangeIsRenderable(e){this.parentTexture.setRenderableOwner(this,e)}async getTextureData(){return{data:this.props}}static makeCacheKey(e){return!1}static resolveDefaults(e){return{texture:e.texture,x:e.x||0,y:e.y||0,width:e.width||0,height:e.height||0}}};u(wr,"z$__type__Props");let Kt=wr;class Fl extends gr{constructor(t,e,r){super(t,e,r)}async onLoadRequest(){var e,r;const t=await this.textureSource.getTextureData();return{width:((e=t.data)==null?void 0:e.width)||0,height:((r=t.data)==null?void 0:r.height)||0}}}class To extends Tt{constructor(t){super({renderer:t,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"}]})}bindTextures(t){const{glw:e}=this;e.activeTexture(0),e.bindTexture(t[0].ctxTexture)}}u(To,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;
      attribute vec4 a_color;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;


      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
        vec2 normalized = a_position * u_pixelRatio;
        vec2 screenSpace = vec2(2.0 / u_resolution.x, -2.0 / u_resolution.y);

        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;

        gl_Position = vec4(normalized.x * screenSpace.x - 1.0, normalized.y * -abs(screenSpace.y) + 1.0, 0.0, 1.0);
        gl_Position.y = -sign(screenSpace.y) * gl_Position.y;
      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform sampler2D u_texture;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
          vec4 color = texture2D(u_texture, v_textureCoordinate);
          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);
      }
    `});class bo extends Tt{constructor(e){super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color","a_textureIndex"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_textures[0]",uniform:"uniform1iv"}]});u(this,"supportsIndexedTextures",!0)}bindTextures(e){const{renderer:r,glw:n}=this;if(e.length>r.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS)throw new Error(`DefaultShaderBatched: Cannot bind more than ${r.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS} textures`);e.forEach((o,a)=>{n.activeTexture(a),n.bindTexture(o.ctxTexture)});const i=Array.from(Array(e.length).keys());this.setUniform("u_textures[0]",i)}}u(bo,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_textureCoordinate;
      attribute vec2 a_position;
      attribute vec4 a_color;
      attribute float a_textureIndex;
      attribute float a_depth;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;
      varying float v_textureIndex;

      void main(){
        vec2 normalized = a_position * u_pixelRatio / u_resolution;
        vec2 zero_two = normalized * 2.0;
        vec2 clip_space = zero_two - 1.0;

        // pass to fragment
        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;
        v_textureIndex = a_textureIndex;

        // flip y
        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
      }
    `,fragment:e=>`
      #define txUnits ${e}
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform sampler2D u_image;
      uniform sampler2D u_textures[txUnits];

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;
      varying float v_textureIndex;

      vec4 sampleFromTexture(sampler2D textures[${e}], int idx, vec2 uv) {
        ${Array.from(Array(e).keys()).map(r=>`
          ${r!==0?"else ":""}if (idx == ${r}) {
            return texture2D(textures[${r}], uv);
          }
        `).join("")}
        return texture2D(textures[0], uv);
      }

      void main(){
        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);
      }
    `});class Se{constructor(t){u(this,"priority",1);u(this,"name","");u(this,"ref");u(this,"target");u(this,"passParameters","");u(this,"declaredUniforms","");u(this,"uniformInfo",{});const{ref:e,target:r,props:n={}}=t;this.ref=e,this.target=r;const i={},o=[];let a="";const l=this.constructor.uniforms||{};for(const c in l){const f=l[c],h=f.type,d=`${e}_${c}`;let g="";f.size&&(g=`[${f.size(n)}]`),o.push(d),a+=`uniform ${h} ${d}${g};`,i[c]={name:d,uniform:l[c].method}}this.passParameters=o.join(","),this.declaredUniforms=a,this.uniformInfo=i}static getEffectKey(t){return""}static getMethodParameters(t,e){const r=[];for(const n in t){const i=t[n];let o="";i.size&&(o=`[${i.size(e)}]`),r.push(`${i.type} ${n}${o}`)}return r.join(",")}static resolveDefaults(t){return{}}static makeEffectKey(t){return!1}}u(Se,"uniforms",{}),u(Se,"methods"),u(Se,"onShaderMask"),u(Se,"onColorize"),u(Se,"onEffectMask");const Hr=new Map,Ol=(s,t)=>{const e=JSON.stringify(s);if(Hr.has(e))return Hr.get(e);s=s??[];const r=[],n=s.length;let i=0;for(;i<n;i++){const{name:o,type:a,props:l}=s[i],c={name:o,type:a,props:{}},f=t[a],h=f.resolveDefaults(l),d=f.uniforms,g=Object.keys(d),x=g.length;let y=0;for(;y<x;y++){const v=g[y],T=d[v],w={value:h[v],programValue:void 0,updateOnBind:T.updateOnBind||!1,hasValidator:T.validator!==void 0,hasProgramValueUpdater:T.updateProgramValue!==void 0},E=w.hasValidator&&T.validator(h[v],h)||h[v];h[v]!==E&&(w.validatedValue=E),w.hasProgramValueUpdater&&T.updateProgramValue(w),w.programValue===void 0&&(w.programValue=w.value),c.props[v]=w}r.push(c)}return Hr.set(e,r),r},et=class et extends Tt{constructor(e,r,n){const i=et.createShader(r,n);super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_alpha",uniform:"uniform1f"},...i.uniforms],shaderSources:{vertex:i.vertex,fragment:i.fragment}});u(this,"effects",[]);this.effects=i.effects}bindTextures(e){const{glw:r}=this;r.activeTexture(0),r.bindTexture(e[0].ctxTexture)}bindProps(e){var o;const r=e.effects,n=r.length;let i=0;for(;i<n;i++){const a=r[i],l=this.effects[i].uniformInfo,c=Object.keys(a.props),f=c.length;let h=0;for(;h<f;h++){const d=c[h];if(a.props[d].updateOnBind===!0){const x=(o=this.renderer.shManager.getRegisteredEffects()[a.type])==null?void 0:o.uniforms[d];x==null||x.updateProgramValue(a.props[d],e)}this.setUniform(l[d].name,a.props[d].programValue)}}}canBatchShaderProps(e,r){if(e.$dimensions.width!==r.$dimensions.width||e.$dimensions.height!==r.$dimensions.height||e.effects.length!==r.effects.length)return!1;const n=e.effects.length;let i=0;for(;i<n;i++){const o=e.effects[i],a=r.effects[i];if(o.type!==a.type)return!1;for(const l in o.props)if(a.props&&!a.props[l]||o.props[l].value!==a.props[l].value)return!1}return!0}static createShader(e,r){const n={},i={};let o="";const a=[],l=[],c=e.effects.map(x=>{const y=r[x.type],v=y.getEffectKey(x.props||{});n[v]=n[v]?++n[v]:1;const T=n[v];T===1&&l.push({key:v,type:x.type,props:x.props});const w=new y({ref:`${v}${T===1?"":T}`,target:v,props:x.props});return o+=w.declaredUniforms,a.push(...Object.values(w.uniformInfo)),w});let f="";l==null||l.forEach(x=>{const y=r[x.type],v=y.resolveDefaults(x.props??{}),T=[];for(const O in y.methods){let Q=O;const q=y.methods[O];i[O]&&i[O]!==q&&(Q=et.resolveMethodDuplicate(O,q,i)),i[Q]=q.replace("function",Q),T.push({m:O,cm:Q})}let w=y.onShaderMask instanceof Function?y.onShaderMask(v):y.onShaderMask,E=y.onColorize instanceof Function?y.onColorize(v):y.onColorize,C=y.onEffectMask instanceof Function?y.onEffectMask(v):y.onEffectMask;T.forEach(O=>{const{m:Q,cm:q}=O,j=new RegExp(`\\$${Q}`,"g");w&&(w=w.replace(j,q)),E&&(E=E.replace(j,q)),C&&(C=C.replace(j,q))});const F=y.getMethodParameters(y.uniforms,v),I=F.length>0?`, ${F}`:"";w&&(f+=`
        float fx_${x.key}_onShaderMask(float shaderMask ${I}) {
          ${w}
        }
        `),E&&(f+=`
          vec4 fx_${x.key}_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor${I}) {
            ${E}
          }
        `),C&&(f+=`
          vec4 fx_${x.key}_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor${I}) {
            ${C}
          }
        `)});let h="";for(const x in i)h+=i[x];let d="mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))",g=`

    `;for(let x=0;x<c.length;x++){const y=c[x],v=y.passParameters.length>0?`, ${y.passParameters}`:"",T=r[y.name];T.onShaderMask&&(g+=`
        shaderMask = fx_${y.target}_onShaderMask(shaderMask ${v});
        `),T.onColorize&&(g+=`
        maskColor = fx_${y.target}_onColorize(shaderMask, maskColor, shaderColor${v});
        `),T.onEffectMask&&(d=`fx_${y.target}_onEffectMask(shaderMask, maskColor, shaderColor${v})`);const w=c[x+1];(w===void 0||r[w.name].onEffectMask)&&(g+=`
          shaderColor = ${d};
        `)}return{effects:c,uniforms:a,fragment:et.fragment(o,h,f,g),vertex:et.vertex()}}static resolveMethodDuplicate(e,r,n,i=0){const o=e+(i>0?i:"");return n[o]&&n[o]!==r?this.resolveMethodDuplicate(e,r,n,++i):o}static resolveDefaults(e,r){return z(r),{effects:Ol(e.effects??[],r),$dimensions:{width:0,height:0},$alpha:0}}static makeCacheKey(e,r){var i;let n="";return(i=e.effects)==null||i.forEach(o=>{const l=r[o.type].getEffectKey(o.props||{});n+=`,${l}`}),`DynamicShader${n}`}};u(et,"z$__type__Props"),u(et,"vertex",()=>`
    # ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    # else
    precision mediump float;
    # endif

    attribute vec2 a_textureCoordinate;
    attribute vec2 a_position;
    attribute vec4 a_color;
    attribute float a_textureIndex;

    uniform vec2 u_resolution;
    uniform float u_pixelRatio;

    varying vec4 v_color;
    varying vec2 v_textureCoordinate;
    varying float v_textureIndex;

    void main(){
      vec2 normalized = a_position * u_pixelRatio / u_resolution;
      vec2 zero_two = normalized * 2.0;
      vec2 clip_space = zero_two - 1.0;

      // pass to fragment
      v_color = a_color;
      v_textureCoordinate = a_textureCoordinate;
      v_textureIndex = a_textureIndex;

      // flip y
      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
    }
  `),u(et,"fragment",(e,r,n,i)=>`
    # ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    # else
    precision mediump float;
    # endif

    #define PI 3.14159265359

    uniform vec2 u_resolution;
    uniform vec2 u_dimensions;
    uniform float u_alpha;
    uniform float u_radius;
    uniform sampler2D u_texture;
    uniform float u_pixelRatio;

    ${e}

    varying vec4 v_color;
    varying vec2 v_textureCoordinate;

    ${r}

    ${n}

    void main() {
      vec2 p = v_textureCoordinate.xy * u_dimensions - u_dimensions * 0.5;
      vec2 d = abs(p) - (u_dimensions) * 0.5;
      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));

      vec4 shaderColor = vec4(0.0);
      float shaderMask = lng_DefaultMask;

      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;

      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));

      ${i}

      gl_FragColor = shaderColor * u_alpha;
    }
  `);let Wt=et;class an extends Tt{constructor(t){super({renderer:t,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_radius",uniform:"uniform1f"}]})}static resolveDefaults(t){return{radius:t.radius||10,$dimensions:{width:0,height:0}}}bindTextures(t){const{glw:e}=this;e.activeTexture(0),e.bindTexture(t[0].ctxTexture)}bindProps(t){const e=Math.min(t.$dimensions.width,t.$dimensions.height)/(2*t.radius);this.setUniform("u_radius",t.radius*Math.min(e,1))}canBatchShaderProps(t,e){return t.radius===e.radius&&t.$dimensions.width===e.$dimensions.width&&t.$dimensions.height===e.$dimensions.height}}u(an,"z$__type__Props"),u(an,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;
      attribute vec4 a_color;
      attribute float a_textureIndex;
      attribute float a_depth;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
        vec2 normalized = a_position * u_pixelRatio / u_resolution;
        vec2 zero_two = normalized * 2.0;
        vec2 clip_space = zero_two - 1.0;

        // pass to fragment
        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;

        // flip y
        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform vec2 u_dimensions;
      uniform float u_radius;
      uniform sampler2D u_texture;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      float boxDist(vec2 p, vec2 size, float radius){
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }

      float fillMask(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }

      void main() {
        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;
        vec2 halfDimensions = u_dimensions * 0.5;

        float d = boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);
        gl_FragColor = mix(vec4(0.0), color, fillMask(d));
      }
    `});const Bl=new Float32Array([1,0,0,0,1,0,0,0,1]),Rr=class Rr extends Tt{constructor(t){super({renderer:t,attributes:["a_position","a_textureCoordinate"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_transform",uniform:"uniformMatrix3fv"},{name:"u_scrollY",uniform:"uniform1f"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_color",uniform:"uniform4fv"},{name:"u_size",uniform:"uniform1f"},{name:"u_distanceRange",uniform:"uniform1f"},{name:"u_debug",uniform:"uniform1i"}]})}bindTextures(t){const{glw:e}=this;e.activeTexture(0),e.bindTexture(t[0].ctxTexture)}bindProps(t){const e=Rr.resolveDefaults(t);for(const r in e)if(r==="transform")this.setUniform("u_transform",!1,e[r]);else if(r==="scrollY")this.setUniform("u_scrollY",e[r]);else if(r==="color"){const n=Os(e.color);this.setUniform("u_color",n)}else r==="size"?this.setUniform("u_size",e[r]):r==="distanceRange"?this.setUniform("u_distanceRange",e[r]):r==="debug"&&this.setUniform("u_debug",e[r]?1:0)}static resolveDefaults(t={}){return{transform:t.transform??Bl,scrollY:t.scrollY??0,color:t.color??4294967295,size:t.size??16,distanceRange:t.distanceRange??1,debug:t.debug??!1}}};u(Rr,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif
      // an attribute is an input (in) to a vertex shader.
      // It will receive data from a buffer
      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;

      uniform vec2 u_resolution;
      uniform mat3 u_transform;
      uniform float u_scrollY;
      uniform float u_pixelRatio;
      uniform float u_size;

      varying vec2 v_texcoord;

      void main() {
        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);
        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;

        // Calculate screen space with pixel ratio
        vec2 screenSpace = (transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1);

        gl_Position = vec4(screenSpace, 0.0, 1.0);
        v_texcoord = a_textureCoordinate;

      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif
      uniform vec4 u_color;
      uniform sampler2D u_texture;
      uniform float u_distanceRange;
      uniform float u_pixelRatio;
      uniform int u_debug;

      varying vec2 v_texcoord;

      float median(float r, float g, float b) {
          return max(min(r, g), min(max(r, g), b));
      }

      void main() {
          vec3 sample = texture2D(u_texture, v_texcoord).rgb;
          if (u_debug == 1) {
            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);
            return;
          }
          float scaledDistRange = u_distanceRange * u_pixelRatio;
          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);
          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;

          // Build the final color.
          // IMPORTANT: We must premultiply the color by the alpha value before returning it.
          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);
      }
    `});let ln=Rr;const ss=s=>{s.programValue===void 0&&(s.programValue=new Float32Array(4));const t=s.value,e=s.programValue;e[0]=(t>>>24)/255,e[1]=(t>>>16&255)/255,e[2]=(t>>>8&255)/255,e[3]=(t&255)/255},Nl=s=>{const t=s.validatedValue||s.value;if(s.programValue instanceof Float32Array){const e=s.programValue;e[0]=t[0],e[1]=t[1]}else s.programValue=new Float32Array(t)},Dl=s=>{const t=s.validatedValue||s.value;if(s.programValue instanceof Float32Array){const e=s.programValue;e[0]=t[0],e[1]=t[1],e[2]=t[1],e[3]=t[1]}else s.programValue=new Float32Array(t)},wo=s=>{const t=s.validatedValue||s.value;if(s.programValue instanceof Float32Array){const e=t.length,r=s.programValue;for(let n=0;n<e;n++)r[n]=t[n]}else s.programValue=new Float32Array(t)},Mn=s=>{const t=Array.isArray(s);if(t){if(t&&s.length===4)return s;if(t&&s.length===2)return[s[0],s[1],s[0],s[1]];if(t&&s.length===3)return[s[0],s[1],s[2],s[0]]}else return[s,s,s,s];return[s[0],s[0],s[0],s[0]]},Ro=(s,t)=>{s.programValue===void 0&&(s.programValue=new Float32Array(4));const e=s.programValue,r=s.validatedValue||s.value;if(t===void 0&&s.$dimensions===void 0){e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3];return}let n=s.$dimensions;if(t!==void 0){const{$dimensions:d}=t;if(n!==void 0&&(n.width===d.width||n.height===d.height))return;n===void 0&&(n={width:d==null?void 0:d.width,height:d==null?void 0:d.height},s.$dimensions=n)}const{width:i,height:o}=n,[a,l,c,f]=r,h=Math.min(Math.min(Math.min(i/Math.max(i,a+l),i/Math.max(i,c+f)),Math.min(o/Math.max(o,a+c),o/Math.max(o,l+f))),1);e[0]=a*h,e[1]=l*h,e[2]=c*h,e[3]=f*h};class Dt extends Se{constructor(){super(...arguments);u(this,"name","radius")}static getEffectKey(){return"radius"}static resolveDefaults(e){return{radius:e.radius??10}}}u(Dt,"z$__type__Props"),u(Dt,"uniforms",{radius:{value:0,method:"uniform4fv",type:"vec4",updateOnBind:!0,validator:Mn,updateProgramValue:Ro}}),u(Dt,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,boxDist:`
      float function(vec2 p, vec2 size, float radius) {
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }
    `}),u(Dt,"onShaderMask",`
  vec2 halfDimensions = u_dimensions * 0.5;
  float r = radius[0] * step(v_textureCoordinate.x, 0.5) * step(v_textureCoordinate.y, 0.5);
  r = r + radius[1] * step(0.5, v_textureCoordinate.x) * step(v_textureCoordinate.y, 0.5);
  r = r + radius[2] * step(0.5, v_textureCoordinate.x) * step(0.5, v_textureCoordinate.y);
  r = r + radius[3] * step(v_textureCoordinate.x, 0.5) * step(0.5, v_textureCoordinate.y);
  return $boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);
  `),u(Dt,"onEffectMask",`
  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));
  `);class as extends Se{constructor(){super(...arguments);u(this,"name","border")}static getEffectKey(){return"border"}static resolveDefaults(e){return{width:e.width??10,color:e.color??4294967295}}}u(as,"z$__type__Props"),u(as,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:ss,method:"uniform4fv",type:"vec4"}}),u(as,"onEffectMask",`
  float intR = shaderMask + 1.0;
  float mask = clamp(intR + width, 0.0, 1.0) - clamp(intR, 0.0, 1.0);
  return mix(shaderColor, mix(shaderColor, maskColor, maskColor.a), mask);
  `),u(as,"onColorize",`
    return color;
  `);const ut=class ut extends Se{constructor(){super(...arguments);u(this,"name","linearGradient")}static getEffectKey(e){return`linearGradient${e.colors.length}`}static resolveDefaults(e){const r=e.colors??[4278190080,4294967295];let n=e.stops||[];if(n.length===0||n.length!==r.length){const i=r.length;let o=0;const a=n;for(;o<i;o++)n[o]?(a[o]=n[o],n[o-1]===void 0&&a[o-2]!==void 0&&(a[o-1]=a[o-2]+(n[o]-a[o-2])/2)):a[o]=o*(1/(r.length-1));n=a}return{colors:r,stops:n,angle:e.angle??0}}};u(ut,"z$__type__Props"),u(ut,"uniforms",{angle:{value:0,method:"uniform1f",type:"float"},colors:{value:4294967295,validator:e=>e.reduce((r,n)=>r.concat(Os(n)),[]),updateProgramValue:wo,size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),u(ut,"methods",{fromLinear:`
      vec4 function(vec4 linearRGB) {
        vec4 higher = vec4(1.055)*pow(linearRGB, vec4(1.0/2.4)) - vec4(0.055);
        vec4 lower = linearRGB * vec4(12.92);
        return mix(higher, lower, 1.0);
      }
    `,toLinear:`
      vec4 function(vec4 sRGB) {
        vec4 higher = pow((sRGB + vec4(0.055))/vec4(1.055), vec4(2.4));
        vec4 lower = sRGB/vec4(12.92);
        return mix(higher, lower, 1.0);
      }
    `,calcPoint:`
      vec2 function(float d, float angle) {
        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);
      }
    `}),u(ut,"ColorLoop",e=>{let r="";for(let n=2;n<e;n++)r+=`colorOut = mix(colorOut, colors[${n}], clamp((dist - stops[${n-1}]) / (stops[${n}] - stops[${n-1}]), 0.0, 1.0));`;return r}),u(ut,"onColorize",e=>{const r=e.colors.length||1;return`
      float a = angle - (PI / 180.0 * 90.0);
      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));
      vec2 f = $calcPoint(lineDist * 0.5, a);
      vec2 t = $calcPoint(lineDist * 0.5, a + PI);
      vec2 gradVec = t - f;
      float dist = dot(v_textureCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);

      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);
      vec4 colorOut = $fromLinear(mix($toLinear(colors[0]), $toLinear(colors[1]), stopCalc));
      ${ut.ColorLoop(r)}
      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));
    `});let cn=ut;class un extends Se{constructor(){super(...arguments);u(this,"name","grayscale")}static getEffectKey(){return"grayscale"}static resolveDefaults(e){return{amount:e.amount??1}}}u(un,"uniforms",{amount:{value:1,method:"uniform1f",type:"float"}}),u(un,"onColorize",`
    float grayness = 0.2 * maskColor.r + 0.6 * maskColor.g + 0.2 * maskColor.b;
    return vec4(amount * vec3(grayness) + (1.0 - amount) * maskColor.rgb, maskColor.a);
  `);class kt extends Se{constructor(){super(...arguments);u(this,"name","borderRight")}static getEffectKey(){return"borderRight"}static resolveDefaults(e){return{width:e.width??10,color:e.color??4294967295}}}u(kt,"z$__type__Props"),u(kt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:ss,method:"uniform4fv",type:"vec4"}}),u(kt,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),u(kt,"onEffectMask",`
  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),u(kt,"onColorize",`
    return color;
  `);class Ut extends Se{constructor(){super(...arguments);u(this,"name","borderTop")}static getEffectKey(){return"borderTop"}static resolveDefaults(e){return{width:e.width??10,color:e.color??4294967295}}}u(Ut,"z$__type__Props"),u(Ut,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:ss,method:"uniform4fv",type:"vec4"}}),u(Ut,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),u(Ut,"onEffectMask",`
  vec2 pos = vec2(0.0, width * 0.5);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),u(Ut,"onColorize",`
    return color;
  `);class $t extends Se{constructor(){super(...arguments);u(this,"name","borderBottom")}static getEffectKey(){return"borderBottom"}static resolveDefaults(e){return{width:e.width??10,color:e.color??4294967295}}}u($t,"z$__type__Props"),u($t,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:ss,method:"uniform4fv",type:"vec4"}}),u($t,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),u($t,"onEffectMask",`
  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),u($t,"onColorize",`
    return color;
  `);class zt extends Se{constructor(){super(...arguments);u(this,"name","borderLeft")}static getEffectKey(){return"borderLeft"}static resolveDefaults(e){return{width:e.width??10,color:e.color??4294967295}}}u(zt,"z$__type__Props"),u(zt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:ss,method:"uniform4fv",type:"vec4"}}),u(zt,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),u(zt,"onEffectMask",`
  vec2 pos = vec2(width * 0.5, 0.0);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),u(zt,"onColorize",`
    return color;
  `);class ls extends Se{constructor(){super(...arguments);u(this,"name","glitch")}static getEffectKey(e){return"glitch"}static resolveDefaults(e){return{amplitude:e.amplitude??.2,narrowness:e.narrowness??4,blockiness:e.blockiness??2,minimizer:e.minimizer??8,time:e.time??Date.now()}}}u(ls,"z$__type__Props"),u(ls,"uniforms",{amplitude:{value:0,method:"uniform1f",type:"float"},narrowness:{value:0,method:"uniform1f",type:"float"},blockiness:{value:0,method:"uniform1f",type:"float"},minimizer:{value:0,method:"uniform1f",type:"float"},time:{value:0,method:"uniform1f",updateOnBind:!0,updateProgramValue:e=>{const r=e.value=(Date.now()-e.value)%1e3;e.programValue=r},type:"float"}}),u(ls,"methods",{rand:`
      float function(vec2 p, float time) {
        float t = floor(time * 20.) / 10.;
        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);
      }
    `,noise:`
      float function(vec2 uv, float blockiness, float time) {
        vec2 lv = fract(uv);
        vec2 id = floor(uv);

        float n1 = rand(id, time);
        float n2 = rand(id+vec2(1,0), time);
        float n3 = rand(id+vec2(0,1), time);
        float n4 = rand(id+vec2(1,1), time);
        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);
        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);
      }
    `,fbm:`
      float function(vec2 uv, int count, float blockiness, float complexity, float time) {
        float val = 0.0;
        float amp = 0.5;
        const int MAX_ITERATIONS = 10;

        for(int i = 0; i < MAX_ITERATIONS; i++) {
          if(i >= count) {break;}
          val += amp * noise(uv, blockiness, time);
          amp *= 0.5;
          uv *= complexity;
        }
        return val;
      }
    `}),u(ls,"onColorize",`
    vec2 uv = v_textureCoordinate.xy;
    float aspect = u_dimensions.x / u_dimensions.y;
    vec2 a = vec2(uv.x * aspect , uv.y);
    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));

    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);
    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);
    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);
    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);

    vec3 f = vec3(colR, colG, colB);
    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);
  `);class lr extends Se{constructor(){super(...arguments);u(this,"name","fadeOut")}static getEffectKey(){return"fadeOut"}static resolveDefaults(e){return{fade:e.fade??10}}}u(lr,"z$__type__Props"),u(lr,"uniforms",{fade:{value:0,method:"uniform4fv",type:"vec4",validator:Mn,updateProgramValue:Dl}}),u(lr,"onColorize",`
  vec2 point = v_textureCoordinate.xy * u_dimensions.xy;
  vec2 pos1;
  vec2 pos2;
  vec2 d;
  float c;
  vec4 result = maskColor;


  if(fade[0] > 0.0) {
    pos1 = vec2(point.x, point.y);
    pos2 = vec2(point.x, point.y + fade[0]);
    d = pos2 - pos1;
    c = dot(pos1, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[1] > 0.0) {
    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_textureCoordinate.y);
    pos2 = vec2(point.x - u_dimensions.x, v_textureCoordinate.y);
    d = pos1 - pos2;
    c = dot(pos2, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[2] > 0.0) {
    pos1 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y - fade[2]);
    pos2 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y);
    d = pos1 - pos2;
    c = dot(pos2, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[3] > 0.0) {
    pos1 = vec2(point.x, point.y);
    pos2 = vec2(point.x + fade[3], point.y);
    d = pos2 - pos1;
    c = dot(pos1, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  return result;
  `);const Ct=class Ct extends Se{constructor(){super(...arguments);u(this,"name","radialGradient")}static getEffectKey(e){return`radialGradient${e.colors.length}`}static resolveDefaults(e){const r=e.colors??[4278190080,4294967295];let n=e.stops||[];if(n.length===0||n.length!==r.length){const i=r.length;let o=0;const a=n;for(;o<i;o++)n[o]?(a[o]=n[o],n[o-1]===void 0&&a[o-2]!==void 0&&(a[o-1]=a[o-2]+(n[o]-a[o-2])/2)):a[o]=o*(1/(r.length-1));n=a}return{colors:r,stops:n,width:e.width??0,height:e.height??e.width??0,pivot:e.pivot??[.5,.5]}}};u(Ct,"z$__type__Props"),u(Ct,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},pivot:{value:[.5,.5],updateProgramValue:Nl,method:"uniform2fv",type:"vec2"},colors:{value:4294967295,validator:e=>e.reduce((r,n)=>r.concat(Os(n)),[]),updateProgramValue:wo,size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),u(Ct,"ColorLoop",e=>{let r="";for(let n=2;n<e;n++)r+=`colorOut = mix(colorOut, colors[${n}], clamp((dist - stops[${n-1}]) / (stops[${n}] - stops[${n-1}]), 0.0, 1.0));`;return r}),u(Ct,"onColorize",e=>{const r=e.colors.length||1;return`
      vec2 point = v_textureCoordinate.xy * u_dimensions;
      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);

      float dist = length((point - projection) / vec2(width, height));

      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);
      vec4 colorOut = mix(colors[0], colors[1], stopCalc);
      ${Ct.ColorLoop(r)}
      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));
    `});let fn=Ct;class Ht extends Se{constructor(){super(...arguments);u(this,"name","radialProgress")}static getEffectKey(){return"radialProgress"}static resolveDefaults(e){return{width:e.width??10,progress:e.progress??.5,offset:e.offset??0,range:e.range??Math.PI*2,rounded:e.rounded??!1,radius:e.radius??1,color:e.color??4294967295}}}u(Ht,"z$__type__Props"),u(Ht,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},progress:{value:.5,method:"uniform1f",type:"float"},offset:{value:0,method:"uniform1f",type:"float"},range:{value:0,method:"uniform1f",type:"float"},rounded:{value:0,method:"uniform1f",type:"float",validator:e=>e?1:0},radius:{value:1,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:ss,method:"uniform4fv",type:"vec4"}}),u(Ht,"methods",{rotateUV:`
    vec2 function(vec2 uv, float d) {
      float s = sin(d);
      float c = cos(d);
      mat2 rotMatrix = mat2(c, -s, s, c);
      return uv * rotMatrix;
    }
    `,drawDot:`
    float function(vec2 uv, vec2 p, float r) {
      uv += p;
      float circle = length(uv) - r;
      return clamp(-circle, 0.0, 1.0);
    }
    `}),u(Ht,"onEffectMask",`
    float outerRadius = radius * u_dimensions.y * 0.5;

    float endAngle = range * progress - 0.0005;

    vec2 uv = v_textureCoordinate.xy * u_dimensions.xy - u_dimensions * 0.5;

    uv = $rotateUV(uv, -(offset));
    float linewidth = width * u_pixelRatio;
    float circle = length(uv) - (outerRadius - linewidth) ;
    circle = abs(circle) - linewidth;
    circle = clamp(-circle, 0.0, 1.0);

    float angle = (atan(uv.x, -uv.y) / 3.14159265359 * 0.5);
    float p = endAngle / (PI * 2.);

    circle *= step(fract(angle), fract(p));

    circle = rounded < 1. ? circle : max(circle, $drawDot(uv, vec2(0, outerRadius - linewidth), linewidth));
    circle = rounded < 1. ? circle : max(circle, $drawDot($rotateUV(uv, -(endAngle)), vec2(0, outerRadius - linewidth), linewidth));

    return mix(shaderColor, maskColor, circle);
  `),u(Ht,"onColorize",`
    return color;
  `);class Gt extends Se{constructor(){super(...arguments);u(this,"name","holePunch")}static getEffectKey(){return"holePunch"}static resolveDefaults(e){return{x:e.x||0,y:e.y||0,width:e.width||50,height:e.height||50,radius:e.radius??0}}}u(Gt,"z$__type__Props"),u(Gt,"uniforms",{x:{value:0,method:"uniform1f",type:"float"},y:{value:0,method:"uniform1f",type:"float"},width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},radius:{value:0,method:"uniform4fv",type:"vec4",updateOnBind:!0,validator:Mn,updateProgramValue:Ro}}),u(Gt,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,boxDist:`
      float function(vec2 p, vec2 size, float radius) {
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }
    `}),u(Gt,"onShaderMask",`
  vec2 halfDimensions = u_dimensions * 0.5;
  vec2 size = vec2(width, height) * 0.5;
  vec2 basePos = v_textureCoordinate.xy * u_dimensions.xy - vec2(x, y);
  vec2 pos = basePos - size;
  float r = radius[0] * step(pos.x, 0.5) * step(pos.y, 0.5);
  r = r + radius[1] * step(0.5, pos.x) * step(pos.y, 0.5);
  r = r + radius[2] * step(0.5, pos.x) * step(0.5, pos.y);
  r = r + radius[3] * step(pos.x, 0.5) * step(0.5, pos.y);
  return $boxDist(pos, size, r);
  `),u(Gt,"onEffectMask",`
  return mix(maskColor, vec4(0.0), $fillMask(shaderMask));
  `);const So="RoundedRectangle";class Pn extends _o{constructor(e){super();u(this,"shType");this.shType=e,e!==So&&console.warn("Unsupported shader:",e)}bindRenderOp(){}bindProps(){}attach(){}detach(){}}class kl{constructor(t,e,r,n){u(this,"type");u(this,"shader");u(this,"resolvedProps");u(this,"props");this.type=t,this.shader=e,this.resolvedProps=r;const i=Object.keys(r),o=i.length,a={};for(let l=0;l<o;l++){const c=i[l];Object.defineProperty(a,c,{get:()=>this.resolvedProps[c],set:f=>{this.resolvedProps[c]=f,n.requestRender()}})}this.props=a}getResolvedProps(){return this.resolvedProps}}class Ul{constructor(t,e,r){u(this,"shader");u(this,"resolvedProps");u(this,"props");u(this,"type");this.shader=t,this.type="DynamicShader",this.resolvedProps=e;const n=r.getRegisteredEffects(),i={},o=e.effects,a=o.length;for(let l=0;l<a;l++){const{name:c,props:f,type:h}=o[l];if(c===void 0)continue;const d={},g=Object.keys(f),x=g.length;for(let y=0;y<x;y++){const v=g[y];Object.defineProperty(d,v,{get:()=>this.resolvedProps.effects[l].props[v].value,set:T=>{var E,C;const w=this.resolvedProps.effects[l].props[v];w.value=T,w.hasValidator&&(T=w.validatedValue=(E=n[h].uniforms[v])==null?void 0:E.validator(T,f)),w.hasProgramValueUpdater?(C=n[h].uniforms[v])==null||C.updateProgramValue(w):w.programValue=T,r.renderer.stage.requestRender()}})}Object.defineProperty(i,c,{get:()=>d})}this.props=i}getResolvedProps(){return this.resolvedProps}}class $l{constructor(){u(this,"shCache",new Map);u(this,"shConstructors",{});u(this,"attachedShader",null);u(this,"effectConstructors",{});u(this,"renderer");this.registerShaderType("DefaultShader",To),this.registerShaderType("DefaultShaderBatched",bo),this.registerShaderType("RoundedRectangle",an),this.registerShaderType("DynamicShader",Wt),this.registerShaderType("SdfShader",ln),this.registerEffectType("border",as),this.registerEffectType("borderBottom",$t),this.registerEffectType("borderLeft",zt),this.registerEffectType("borderRight",kt),this.registerEffectType("borderTop",Ut),this.registerEffectType("fadeOut",lr),this.registerEffectType("linearGradient",cn),this.registerEffectType("radialGradient",fn),this.registerEffectType("grayscale",un),this.registerEffectType("glitch",ls),this.registerEffectType("radius",Dt),this.registerEffectType("radialProgress",Ht),this.registerEffectType("holePunch",Gt)}registerShaderType(t,e){this.shConstructors[t]=e}registerEffectType(t,e){this.effectConstructors[t]=e}getRegisteredEffects(){return this.effectConstructors}getRegisteredShaders(){return this.shConstructors}loadShader(t,e){if(!this.renderer)throw new Error("Renderer is not been defined");const r=this.shConstructors[t];if(!r)throw new Error(`Shader type "${t}" is not registered`);if(this.renderer.mode==="canvas"&&r.prototype instanceof Tt)return this._createShaderCtr(t,new Pn(t),e);if(t==="DynamicShader")return this.loadDynamicShader(e);const n=r.resolveDefaults(e),i=r.makeCacheKey(n)||r.name;if(i&&this.shCache.has(i))return this._createShaderCtr(t,this.shCache.get(i),n);const o=new r(this.renderer,e);return i&&this.shCache.set(i,o),this._createShaderCtr(t,o,n)}loadDynamicShader(t){if(!this.renderer)throw new Error("Renderer is not been defined");const e=Wt.resolveDefaults(t,this.effectConstructors),r=Wt.makeCacheKey(e,this.effectConstructors);if(r&&this.shCache.has(r))return this._createDynShaderCtr(this.shCache.get(r),e);const n=new Wt(this.renderer,t,this.effectConstructors);return r&&this.shCache.set(r,n),this._createDynShaderCtr(n,e)}_createShaderCtr(t,e,r){return new kl(t,e,r,this.renderer.stage)}_createDynShaderCtr(t,e){return new Ul(t,e,this)}useShader(t){this.attachedShader!==t&&(this.attachedShader&&this.attachedShader.detach(),t.attach(),this.attachedShader=t)}}class Eo{constructor(t){u(this,"config");this.config=t}getBuffer(t){var e;return(e=this.config.find(r=>r.attributes[t]))==null?void 0:e.buffer}getAttributeInfo(t){var e;return(e=this.config.find(r=>r.attributes[t]))==null?void 0:e.attributes[t]}}function zl(s){return self.WebGL2RenderingContext&&s instanceof self.WebGL2RenderingContext}class Hl{constructor(t){u(this,"gl");u(this,"activeTextureUnit",0);u(this,"texture2dUnits");u(this,"texture2dParams",new WeakMap);u(this,"scissorEnabled");u(this,"scissorX");u(this,"scissorY");u(this,"scissorWidth");u(this,"scissorHeight");u(this,"blendEnabled");u(this,"blendSrcRgb");u(this,"blendDstRgb");u(this,"blendSrcAlpha");u(this,"blendDstAlpha");u(this,"boundArrayBuffer");u(this,"boundElementArrayBuffer");u(this,"curProgram");u(this,"programUniforms",new WeakMap);u(this,"canvas");u(this,"MAX_RENDERBUFFER_SIZE");u(this,"MAX_TEXTURE_SIZE");u(this,"MAX_VIEWPORT_DIMS");u(this,"MAX_VERTEX_TEXTURE_IMAGE_UNITS");u(this,"MAX_TEXTURE_IMAGE_UNITS");u(this,"MAX_COMBINED_TEXTURE_IMAGE_UNITS");u(this,"MAX_VERTEX_ATTRIBS");u(this,"MAX_VARYING_VECTORS");u(this,"MAX_VERTEX_UNIFORM_VECTORS");u(this,"MAX_FRAGMENT_UNIFORM_VECTORS");u(this,"TEXTURE_MAG_FILTER");u(this,"TEXTURE_MIN_FILTER");u(this,"TEXTURE_WRAP_S");u(this,"TEXTURE_WRAP_T");u(this,"LINEAR");u(this,"CLAMP_TO_EDGE");u(this,"RGBA");u(this,"UNSIGNED_BYTE");u(this,"UNPACK_PREMULTIPLY_ALPHA_WEBGL");u(this,"UNPACK_FLIP_Y_WEBGL");u(this,"FLOAT");u(this,"TRIANGLES");u(this,"UNSIGNED_SHORT");u(this,"ONE");u(this,"ONE_MINUS_SRC_ALPHA");u(this,"VERTEX_SHADER");u(this,"FRAGMENT_SHADER");u(this,"STATIC_DRAW");u(this,"COMPILE_STATUS");u(this,"LINK_STATUS");u(this,"DYNAMIC_DRAW");u(this,"COLOR_ATTACHMENT0");this.gl=t,this.activeTextureUnit=t.getParameter(t.ACTIVE_TEXTURE)-t.TEXTURE0;const e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.texture2dUnits=new Array(e).fill(void 0).map((n,i)=>(this.activeTexture(i),t.getParameter(t.TEXTURE_BINDING_2D))),this.activeTexture(this.activeTextureUnit),this.scissorEnabled=t.isEnabled(t.SCISSOR_TEST);const r=t.getParameter(t.SCISSOR_BOX);this.scissorX=r[0],this.scissorY=r[1],this.scissorWidth=r[2],this.scissorHeight=r[3],this.blendEnabled=t.isEnabled(t.BLEND),this.blendSrcRgb=t.getParameter(t.BLEND_SRC_RGB),this.blendDstRgb=t.getParameter(t.BLEND_DST_RGB),this.blendSrcAlpha=t.getParameter(t.BLEND_SRC_ALPHA),this.blendDstAlpha=t.getParameter(t.BLEND_DST_ALPHA),this.boundArrayBuffer=t.getParameter(t.ARRAY_BUFFER_BINDING),this.boundElementArrayBuffer=t.getParameter(t.ELEMENT_ARRAY_BUFFER_BINDING),this.curProgram=t.getParameter(t.CURRENT_PROGRAM),this.canvas=t.canvas,this.MAX_RENDERBUFFER_SIZE=t.MAX_RENDERBUFFER_SIZE,this.MAX_TEXTURE_SIZE=t.MAX_TEXTURE_SIZE,this.MAX_VIEWPORT_DIMS=t.MAX_VIEWPORT_DIMS,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=t.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.MAX_TEXTURE_IMAGE_UNITS=t.MAX_TEXTURE_IMAGE_UNITS,this.MAX_COMBINED_TEXTURE_IMAGE_UNITS=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS,this.MAX_VERTEX_ATTRIBS=t.MAX_VERTEX_ATTRIBS,this.MAX_VARYING_VECTORS=t.MAX_VARYING_VECTORS,this.MAX_VERTEX_UNIFORM_VECTORS=t.MAX_VERTEX_UNIFORM_VECTORS,this.MAX_FRAGMENT_UNIFORM_VECTORS=t.MAX_FRAGMENT_UNIFORM_VECTORS,this.TEXTURE_MAG_FILTER=t.TEXTURE_MAG_FILTER,this.TEXTURE_MIN_FILTER=t.TEXTURE_MIN_FILTER,this.TEXTURE_WRAP_S=t.TEXTURE_WRAP_S,this.TEXTURE_WRAP_T=t.TEXTURE_WRAP_T,this.LINEAR=t.LINEAR,this.CLAMP_TO_EDGE=t.CLAMP_TO_EDGE,this.RGBA=t.RGBA,this.UNSIGNED_BYTE=t.UNSIGNED_BYTE,this.UNPACK_PREMULTIPLY_ALPHA_WEBGL=t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.UNPACK_FLIP_Y_WEBGL=t.UNPACK_FLIP_Y_WEBGL,this.FLOAT=t.FLOAT,this.TRIANGLES=t.TRIANGLES,this.UNSIGNED_SHORT=t.UNSIGNED_SHORT,this.ONE=t.ONE,this.ONE_MINUS_SRC_ALPHA=t.ONE_MINUS_SRC_ALPHA,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=t.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.TRIANGLES=t.TRIANGLES,this.UNSIGNED_SHORT=t.UNSIGNED_SHORT,this.VERTEX_SHADER=t.VERTEX_SHADER,this.FRAGMENT_SHADER=t.FRAGMENT_SHADER,this.STATIC_DRAW=t.STATIC_DRAW,this.COMPILE_STATUS=t.COMPILE_STATUS,this.LINK_STATUS=t.LINK_STATUS,this.DYNAMIC_DRAW=t.DYNAMIC_DRAW,this.COLOR_ATTACHMENT0=t.COLOR_ATTACHMENT0}isWebGl2(){return zl(this.gl)}activeTexture(t){const{gl:e}=this;this.activeTextureUnit!==t&&(e.activeTexture(t+e.TEXTURE0),this.activeTextureUnit=t)}bindTexture(t){const{gl:e,activeTextureUnit:r,texture2dUnits:n}=this;n[r]!==t&&(n[r]=t,e.bindTexture(this.gl.TEXTURE_2D,t))}_getActiveTexture(){const{activeTextureUnit:t,texture2dUnits:e}=this;return e[t]}texParameteri(t,e){const{gl:r,texture2dParams:n}=this,i=this._getActiveTexture();if(!i)throw new Error("No active texture");let o=n.get(i);o||(o={},n.set(i,o)),o[t]!==e&&(o[t]=e,r.texParameteri(r.TEXTURE_2D,t,e))}texImage2D(t,e,r,n,i,o,a,l){const{gl:c}=this;o?c.texImage2D(c.TEXTURE_2D,t,e,r,n,i,o,a,l):c.texImage2D(c.TEXTURE_2D,t,e,r,n,i)}compressedTexImage2D(t,e,r,n,i,o){const{gl:a}=this;a.compressedTexImage2D(a.TEXTURE_2D,t,e,r,n,i,o)}pixelStorei(t,e){const{gl:r}=this;r.pixelStorei(t,e)}generateMipmap(){const{gl:t}=this;t.generateMipmap(t.TEXTURE_2D)}createTexture(){const{gl:t}=this;return t.createTexture()}deleteTexture(t){const{gl:e}=this;t&&this.texture2dParams.delete(t),e.deleteTexture(t)}viewport(t,e,r,n){const{gl:i}=this;i.viewport(t,e,r,n)}clearColor(t,e,r,n){const{gl:i}=this;i.clearColor(t,e,r,n)}setScissorTest(t){const{gl:e,scissorEnabled:r}=this;t!==r&&(t?e.enable(e.SCISSOR_TEST):e.disable(e.SCISSOR_TEST),this.scissorEnabled=t)}scissor(t,e,r,n){const{gl:i,scissorX:o,scissorY:a,scissorWidth:l,scissorHeight:c}=this;(t!==o||e!==a||r!==l||n!==c)&&(i.scissor(t,e,r,n),this.scissorX=t,this.scissorY=e,this.scissorWidth=r,this.scissorHeight=n)}setBlend(t){const{gl:e,blendEnabled:r}=this;t!==r&&(t?e.enable(e.BLEND):e.disable(e.BLEND),this.blendEnabled=t)}blendFunc(t,e){const{gl:r,blendSrcRgb:n,blendDstRgb:i,blendSrcAlpha:o,blendDstAlpha:a}=this;(t!==n||e!==i||t!==o||e!==a)&&(r.blendFunc(t,e),this.blendSrcRgb=t,this.blendDstRgb=e,this.blendSrcAlpha=t,this.blendDstAlpha=e)}createBuffer(){const{gl:t}=this;return t.createBuffer()}createFramebuffer(){const{gl:t}=this;return t.createFramebuffer()}bindFramebuffer(t){const{gl:e}=this;e.bindFramebuffer(e.FRAMEBUFFER,t)}framebufferTexture2D(t,e,r){const{gl:n}=this;n.framebufferTexture2D(n.FRAMEBUFFER,t,n.TEXTURE_2D,e,r)}clear(){const{gl:t}=this;t.clear(t.COLOR_BUFFER_BIT)}arrayBufferData(t,e,r){const{gl:n,boundArrayBuffer:i}=this;i!==t&&(n.bindBuffer(n.ARRAY_BUFFER,t),this.boundArrayBuffer=t),n.bufferData(n.ARRAY_BUFFER,e,r)}elementArrayBufferData(t,e,r){const{gl:n,boundElementArrayBuffer:i}=this;i!==t&&(n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t),this.boundElementArrayBuffer=t),n.bufferData(n.ELEMENT_ARRAY_BUFFER,e,r)}vertexAttribPointer(t,e,r,n,i,o,a){const{gl:l,boundArrayBuffer:c}=this;c!==t&&(l.bindBuffer(l.ARRAY_BUFFER,t),this.boundArrayBuffer=t),l.vertexAttribPointer(e,r,n,i,o,a)}useProgram(t){const{gl:e,curProgram:r}=this;r!==t&&(e.useProgram(t),this.curProgram=t)}setUniform(t,e,...r){const{gl:n,programUniforms:i}=this;let o=i.get(this.curProgram);o||(o=new Map,i.set(this.curProgram,o));const a=o.get(e);(!a||!Gl(a,r))&&(o.set(e,r),n[t](e,...r))}getParameter(t){const{gl:e}=this;return e.getParameter(t)}drawElements(t,e,r,n){const{gl:i}=this;i.drawElements(t,e,r,n)}getExtension(t){const{gl:e}=this;return e.getExtension(t)}createVertexArray(){const{gl:t}=this;return z(t instanceof WebGL2RenderingContext),t.createVertexArray()}bindVertexArray(t){const{gl:e}=this;z(e instanceof WebGL2RenderingContext),e.bindVertexArray(t)}getAttribLocation(t,e){const{gl:r}=this;return r.getAttribLocation(t,e)}getUniformLocation(t,e){const{gl:r}=this;return r.getUniformLocation(t,e)}enableVertexAttribArray(t){const{gl:e}=this;e.enableVertexAttribArray(t)}disableVertexAttribArray(t){const{gl:e}=this;e.disableVertexAttribArray(t)}createShader(t){const{gl:e}=this;return e.createShader(t)}compileShader(t){const{gl:e}=this;e.compileShader(t)}attachShader(t,e){const{gl:r}=this;r.attachShader(t,e)}linkProgram(t){const{gl:e}=this;e.linkProgram(t)}deleteProgram(t){const{gl:e}=this;e.deleteProgram(t)}getShaderParameter(t,e){const{gl:r}=this;return r.getShaderParameter(t,e)}getShaderInfoLog(t){const{gl:e}=this;return e.getShaderInfoLog(t)}createProgram(){const{gl:t}=this;return t.createProgram()}getProgramParameter(t,e){const{gl:r}=this;return r.getProgramParameter(t,e)}getProgramInfoLog(t){const{gl:e}=this;return e.getProgramInfoLog(t)}shaderSource(t,e){const{gl:r}=this;r.shaderSource(t,e)}deleteShader(t){const{gl:e}=this;e.deleteShader(t)}}function Gl(s,t){return s.length!==t.length?!1:s.every((e,r)=>Array.isArray(e)||e instanceof Float32Array?!1:e===t[r])}const Sr=class Sr extends ts{constructor(e,r){super(e);u(this,"props");this.props=Sr.resolveDefaults(r||{})}get width(){return this.props.width}set width(e){this.props.width=e}get height(){return this.props.height}set height(e){this.props.height=e}async getTextureData(){return{data:null,premultiplyAlpha:null}}static resolveDefaults(e){return{width:e.width||256,height:e.height||256}}};u(Sr,"z$__type__Props");let Es=Sr;class fi extends gr{constructor(e,r,n){super(e,r,n);u(this,"framebuffer");const i=e.createFramebuffer();z(i,"Unable to create framebuffer"),this.framebuffer=i}async onLoadRequest(){const{glw:e}=this,r=this._nativeCtxTexture=this.createNativeCtxTexture(),{width:n,height:i}=this.textureSource;return e.texImage2D(0,e.RGBA,n,i,0,e.RGBA,e.UNSIGNED_BYTE,null),this.setTextureMemUse(n*i*4),e.bindFramebuffer(this.framebuffer),e.framebufferTexture2D(e.COLOR_ATTACHMENT0,r,0),e.bindFramebuffer(null),{width:n,height:i}}}function Vl(s){return/\.(ktx|pvr)$/.test(s)}const Wl=async s=>{const e=await(await fetch(s)).arrayBuffer();return s.indexOf(".ktx")!==-1?Xl(e):Yl(e)},Xl=async s=>{const t=new DataView(s),e=t.getUint32(12)===16909060,r=[],n={glInternalFormat:t.getUint32(28,e),pixelWidth:t.getUint32(36,e),pixelHeight:t.getUint32(40,e),numberOfMipmapLevels:t.getUint32(56,e),bytesOfKeyValueData:t.getUint32(60,e)};let i=64;i+=n.bytesOfKeyValueData;for(let o=0;o<n.numberOfMipmapLevels;o++){const a=t.getUint32(i);i+=4,r.push(t.buffer.slice(i,a)),i+=a}return{data:{glInternalFormat:n.glInternalFormat,mipmaps:r,width:n.pixelWidth||0,height:n.pixelHeight||0,type:"ktx"},premultiplyAlpha:!1}},Yl=async s=>{const a=s,l=new Int32Array(a,0,13),c=l[12]+52,f=new Uint8Array(a,c),h=[],d={pixelWidth:l[7],pixelHeight:l[6],numberOfMipmapLevels:l[11]||0};let g=0,x=d.pixelWidth||0,y=d.pixelHeight||0;for(let v=0;v<d.numberOfMipmapLevels;v++){const T=(x+3>>2)*(y+3>>2)*8,w=new Uint8Array(a,f.byteOffset+g,T);h.push(w),g+=T,x=x>>1,y=y>>1}return{data:{glInternalFormat:36196,mipmaps:h,width:d.pixelWidth||0,height:d.pixelHeight||0,type:"pvr"},premultiplyAlpha:!1}},Rs=class Rs extends ts{constructor(e,r){super(e);u(this,"props");this.props=Rs.resolveDefaults(r)}hasAlphaChannel(e){return e.indexOf("image/png")!==-1}async getTextureData(){const{src:e,premultiplyAlpha:r}=this.props;if(!e)return{data:null};if(typeof e!="string")return e instanceof ImageData?{data:e,premultiplyAlpha:r}:{data:e(),premultiplyAlpha:r};if(Vl(e))return Wl(e);const n=xl(e);if(this.txManager.imageWorkerManager)return await this.txManager.imageWorkerManager.getImage(n,r);if(this.txManager.hasCreateImageBitmap){const o=await(await fetch(n)).blob(),a=r??this.hasAlphaChannel(o.type);return{data:await createImageBitmap(o,{premultiplyAlpha:a?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}),premultiplyAlpha:a}}else{const i=new Image;return e.substr(0,5)!=="data:"&&(i.crossOrigin="Anonymous"),i.src=n,await new Promise((o,a)=>{i.onload=()=>o(),i.onerror=()=>a(new Error("Failed to load image"))}).catch(o=>{console.error(o)}),{data:i,premultiplyAlpha:r??!0}}}static makeCacheKey(e){const r=Rs.resolveDefaults(e),n=r.key||r.src;return typeof n!="string"?!1:`ImageTexture,${n},${r.premultiplyAlpha??"true"}`}static resolveDefaults(e){return{src:e.src??"",premultiplyAlpha:e.premultiplyAlpha??!0,key:e.key??null}}};u(Rs,"z$__type__Props");let xr=Rs;const jl=24;class Ln extends yo{constructor(e){super(e);u(this,"glw");u(this,"system");u(this,"quadBuffer");u(this,"fQuadBuffer");u(this,"uiQuadBuffer");u(this,"renderOps",[]);u(this,"curBufferIdx",0);u(this,"curRenderOp",null);u(this,"rttNodes",[]);u(this,"activeRttNode",null);u(this,"defShaderCtrl");u(this,"defaultShader");u(this,"quadBufferCollection");u(this,"defaultTexture");u(this,"quadBufferUsage",0);u(this,"renderToTextureActive",!1);this.quadBuffer=new ArrayBuffer(this.stage.options.quadBufferSize),this.fQuadBuffer=new Float32Array(this.quadBuffer),this.uiQuadBuffer=new Uint32Array(this.quadBuffer),this.mode="webgl";const{canvas:r,clearColor:n,bufferMemory:i}=e;this.defaultTexture=new mr(this.txManager),this.defaultTexture.setRenderableOwner(this,!0),this.defaultTexture.once("loaded",()=>{this.stage.requestRender()});const o=ol(r,e.contextSpy),a=this.glw=new Hl(o),l=Os(n);a.viewport(0,0,r.width,r.height),a.clearColor(l[0],l[1],l[2],l[3]),a.setBlend(!0),a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA),Pl(a,i),this.system={parameters:Il(this.glw),extensions:Ml(this.glw)},this.shManager.renderer=this,this.defShaderCtrl=this.shManager.loadShader("DefaultShader"),this.defaultShader=this.defShaderCtrl.shader;const c=a.createBuffer();z(c);const f=6*Float32Array.BYTES_PER_ELEMENT;this.quadBufferCollection=new Eo([{buffer:c,attributes:{a_position:{name:"a_position",size:2,type:a.FLOAT,normalized:!1,stride:f,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:a.FLOAT,normalized:!1,stride:f,offset:2*Float32Array.BYTES_PER_ELEMENT},a_color:{name:"a_color",size:4,type:a.UNSIGNED_BYTE,normalized:!0,stride:f,offset:4*Float32Array.BYTES_PER_ELEMENT},a_textureIndex:{name:"a_textureIndex",size:1,type:a.FLOAT,normalized:!1,stride:f,offset:5*Float32Array.BYTES_PER_ELEMENT}}}])}reset(){const{glw:e}=this;this.curBufferIdx=0,this.curRenderOp=null,this.renderOps.length=0,e.setScissorTest(!1),e.clear()}getShaderManager(){return this.shManager}createCtxTexture(e){return e instanceof Kt?new Fl(this.glw,this.txMemManager,e):e instanceof Es?new fi(this.glw,this.txMemManager,e):new gr(this.glw,this.txMemManager,e)}addQuad(e){const{fQuadBuffer:r,uiQuadBuffer:n}=this,{width:i,height:o,colorTl:a,colorTr:l,colorBl:c,colorBr:f,textureOptions:h,shader:d,shaderProps:g,alpha:x,clippingRect:y,tx:v,ty:T,ta:w,tb:E,tc:C,td:F,renderCoords:I,rtt:O,parentHasRenderTexture:Q,framebufferDimensions:q}=e;let{texture:j}=e;if(g&&nn(g,"$dimensions")){const _e=g.$dimensions;_e.width=i,_e.height=o}j=j??this.defaultTexture,z(j instanceof ts,"Invalid texture type");let{curBufferIdx:R,curRenderOp:ie}=this;const re={width:i,height:o},oe=d||this.defaultShader;z(oe instanceof Tt),this.reuseRenderOp(e)||(this.newRenderOp(oe,g,x,re,y,R,O,Q,q),ie=this.curRenderOp,z(ie));const X=(h==null?void 0:h.flipX)??!1;let V=(h==null?void 0:h.flipY)??!1;j instanceof Es&&(V=!V);let H=0,K=0,fe=1,le=1;if(j instanceof Kt){const{x:_e,y:we,width:he,height:b}=j.props,{width:L=0,height:B=0}=j.parentTexture.dimensions||{width:0,height:0};H=_e/L,fe=H+he/L,K=we/B,le=K+b/B,j=j.parentTexture}const ye=(h==null?void 0:h.resizeMode)??!1;if(j instanceof xr&&ye&&j.dimensions){const{width:_e,height:we}=j.dimensions;if(ye.type==="cover"){const he=i/_e,b=o/we,L=Math.max(he,b),B=1/L;if(L&&he&&he<L){const $=B*i;H=(1-$/_e)*(ye.clipX??.5),fe=H+$/_e}if(L&&b&&b<L){const $=B*o;K=(1-$/we)*(ye.clipY??.5),le=K+$/we}}}X&&([H,fe]=[fe,H]),V&&([K,le]=[le,K]);const pe=j.ctxTexture;z(pe instanceof gr);const Te=this.addTexture(pe,R);if(ie=this.curRenderOp,z(ie),I){const{x1:_e,y1:we,x2:he,y2:b,x3:L,y3:B,x4:$,y4:te}=I;r[R++]=_e,r[R++]=we,r[R++]=H,r[R++]=K,n[R++]=a,r[R++]=Te,r[R++]=he,r[R++]=b,r[R++]=fe,r[R++]=K,n[R++]=l,r[R++]=Te,r[R++]=$,r[R++]=te,r[R++]=H,r[R++]=le,n[R++]=c,r[R++]=Te,r[R++]=L,r[R++]=B,r[R++]=fe,r[R++]=le,n[R++]=f,r[R++]=Te}else if(E!==0||C!==0)r[R++]=v,r[R++]=T,r[R++]=H,r[R++]=K,n[R++]=a,r[R++]=Te,r[R++]=v+i*w,r[R++]=T+i*C,r[R++]=fe,r[R++]=K,n[R++]=l,r[R++]=Te,r[R++]=v+o*E,r[R++]=T+o*F,r[R++]=H,r[R++]=le,n[R++]=c,r[R++]=Te,r[R++]=v+i*w+o*E,r[R++]=T+i*C+o*F,r[R++]=fe,r[R++]=le,n[R++]=f,r[R++]=Te;else{const _e=v+i*w,we=T+o*F;r[R++]=v,r[R++]=T,r[R++]=H,r[R++]=K,n[R++]=a,r[R++]=Te,r[R++]=_e,r[R++]=T,r[R++]=fe,r[R++]=K,n[R++]=l,r[R++]=Te,r[R++]=v,r[R++]=we,r[R++]=H,r[R++]=le,n[R++]=c,r[R++]=Te,r[R++]=_e,r[R++]=we,r[R++]=fe,r[R++]=le,n[R++]=f,r[R++]=Te}ie.length+=jl,ie.numQuads++,this.curBufferIdx=R}newRenderOp(e,r,n,i,o,a,l,c,f){const h=new vo(this.glw,this.options,this.quadBufferCollection,e,r,n,o,i,a,0,l,c,f);this.curRenderOp=h,this.renderOps.push(h)}addTexture(e,r,n){const{curRenderOp:i}=this;z(i);const o=i.addTexture(e);if(o===4294967295){if(n)throw new Error("Unable to add texture to render op");const{shader:a,shaderProps:l,dimensions:c,clippingRect:f,alpha:h}=i;return this.newRenderOp(a,l,h,c,f,r),this.addTexture(e,r,!0)}return o}reuseRenderOp(e){var c;const{shader:r,shaderProps:n,parentHasRenderTexture:i,rtt:o,clippingRect:a}=e,l=r||this.defaultShader;return!(((c=this.curRenderOp)==null?void 0:c.shader)!==l||!gl(this.curRenderOp.clippingRect,a)||i||o||this.curRenderOp.shader!==this.defaultShader&&(!n||!this.curRenderOp.shader.canBatchShaderProps(this.curRenderOp.shaderProps,n)))}addRenderOp(e){this.renderOps.push(e),this.curRenderOp=null}render(e="screen"){const{glw:r,quadBuffer:n}=this,i=new Float32Array(n,0,this.curBufferIdx),o=this.quadBufferCollection.getBuffer("a_position")??null;r.arrayBufferData(o,i,r.STATIC_DRAW),this.renderOps.forEach((a,l)=>{a.draw()}),this.quadBufferUsage=this.curBufferIdx*i.BYTES_PER_ELEMENT}renderToTexture(e){for(let r=0;r<this.rttNodes.length;r++)if(this.rttNodes[r]===e)return;this.rttNodes.unshift(e)}renderRTTNodes(){const{glw:e}=this;this.stage;for(let r=0;r<this.rttNodes.length;r++){const n=this.rttNodes[r];if(!n||!n.hasRTTupdates)continue;this.activeRttNode=n,z(n.texture,"RTT node missing texture");const i=n.texture.ctxTexture;z(i instanceof fi),this.renderToTextureActive=!0,e.bindFramebuffer(i.framebuffer),e.viewport(0,0,i.w,i.h),e.clear();for(let o=0;o<n.children.length;o++){const a=n.children[o];a&&(a.update(this.stage.deltaTime,{x:0,y:0,width:0,height:0,valid:!1}),this.stage.addQuads(a),a.hasRTTupdates=!1)}this.render(),this.renderOps.length=0,n.hasRTTupdates=!1}e.bindFramebuffer(null),e.viewport(0,0,this.glw.canvas.width,this.glw.canvas.height),this.renderToTextureActive=!1}removeRTTNode(e){const r=this.rttNodes.indexOf(e);r!==-1&&this.rttNodes.splice(r,1)}getBufferInfo(){return{totalAvailable:this.stage.options.quadBufferSize,totalUsed:this.quadBufferUsage}}getDefShaderCtr(){return this.defShaderCtrl}}class Kl{constructor(){u(this,"activeAnimations",new Set)}registerAnimation(t){this.activeAnimations.add(t)}unregisterAnimation(t){this.activeAnimations.delete(t)}update(t){this.activeAnimations.forEach(e=>{e.update(t)})}}function ql(){function s(e){return e.indexOf("image/png")!==-1}function t(e,r){return new Promise(function(n,i){var o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="blob",o.onload=function(){if(o.status!==200)return i(new Error("Failed to load image: "+o.statusText));var a=o.response,l=r!==void 0?r:s(a.type);createImageBitmap(a,{premultiplyAlpha:l?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}).then(function(c){n({data:c,premultiplyAlpha:r})}).catch(function(c){i(c)})},o.onerror=function(){i(new Error("Network error occurred while trying to fetch the image."))},o.send()})}self.onmessage=e=>{var r=e.data.src,n=e.data.id,i=e.data.premultiplyAlpha;t(r,i).then(function(o){self.postMessage({id:n,src:r,data:o})}).catch(function(o){self.postMessage({id:n,src:r,error:o.message})})}}class Ql{constructor(t){u(this,"imageWorkersEnabled",!0);u(this,"messageManager",{});u(this,"workers",[]);u(this,"workerIndex",0);u(this,"nextId",0);this.workers=this.createWorkers(t),this.workers.forEach(e=>{e.onmessage=this.handleMessage.bind(this)})}handleMessage(t){const{id:e,data:r,error:n}=t.data,i=this.messageManager[e];if(i){const[o,a]=i;delete this.messageManager[e],n?a(new Error(n)):o(r)}}createWorkers(t=1){const e=`(${ql.toString()})()`,r=new Blob([e.replace('"use strict";',"")],{type:"application/javascript"}),n=(self.URL?URL:webkitURL).createObjectURL(r),i=[];for(let o=0;o<t;o++)i.push(new Worker(n));return i}getNextWorker(){const t=this.workers[this.workerIndex];return this.workerIndex=(this.workerIndex+1)%this.workers.length,t}getImage(t,e){return new Promise((r,n)=>{try{if(this.workers){const i=this.nextId++;this.messageManager[i]=[r,n];const o=this.getNextWorker();o&&o.postMessage({id:i,src:t,premultiplyAlpha:e})}}catch(i){n(i)}})}}const Ss=class Ss extends ts{constructor(e,r){super(e);u(this,"props");this.props=Ss.resolveDefaults(r)}async getTextureData(){const{width:e,height:r}=this.props,n=e*r*4,i=new Uint8ClampedArray(n);for(let o=0;o<n;o+=4){const a=Math.floor(Math.random()*256);i[o]=a,i[o+1]=a,i[o+2]=a,i[o+3]=255}return{data:new ImageData(i,e,r)}}static makeCacheKey(e){if(e.cacheId===void 0)return!1;const r=Ss.resolveDefaults(e);return`NoiseTexture,${r.width},${r.height},${r.cacheId}`}static resolveDefaults(e){return{width:e.width??128,height:e.height??128,cacheId:e.cacheId??0}}};u(Ss,"z$__type__Props");let hn=Ss;class Zl{constructor(t){u(this,"keyCache",new Map);u(this,"inverseKeyCache",new WeakMap);u(this,"txConstructors",{});u(this,"imageWorkerManager",null);u(this,"hasCreateImageBitmap",!!self.createImageBitmap);u(this,"hasWorker",!!self.Worker);u(this,"renderer");u(this,"frameTime",0);this.hasCreateImageBitmap&&this.hasWorker&&t>0&&(this.imageWorkerManager=new Ql(t)),this.hasCreateImageBitmap||console.warn("[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower."),this.registerTextureType("ImageTexture",xr),this.registerTextureType("ColorTexture",mr),this.registerTextureType("NoiseTexture",hn),this.registerTextureType("SubTexture",Kt),this.registerTextureType("RenderTexture",Es)}registerTextureType(t,e){this.txConstructors[t]=e}loadTexture(t,e){let r;const n=this.txConstructors[t];if(!n)throw new Error(`Texture type "${t}" is not registered`);if(!r){const i=n.makeCacheKey(e);i&&this.keyCache.has(i)?r=this.keyCache.get(i):(r=new n(this,e),i&&this.initTextureToCache(r,i))}return r}initTextureToCache(t,e){const{keyCache:r,inverseKeyCache:n}=this;r.set(e,t),n.set(t,e)}removeTextureFromCache(t){const{inverseKeyCache:e,keyCache:r}=this,n=e.get(t);n&&r.delete(n)}}function Jl(s,t){var e=0,r,n;t=t||{};function i(){var o=r,a=arguments.length,l,c;e:for(;o;){if(o.args.length!==arguments.length){o=o.next;continue}for(c=0;c<a;c++)if(o.args[c]!==arguments[c]){o=o.next;continue e}return o!==r&&(o===n&&(n=o.prev),o.prev.next=o.next,o.next&&(o.next.prev=o.prev),o.next=r,o.prev=null,r.prev=o,r=o),o.val}for(l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return o={args:l,val:s.apply(null,l)},r?(r.prev=o,o.next=r):n=o,e===t.maxSize?(n=n.prev,n.next=null):e++,r=o,o.val}return i.clear=function(){r=null,n=null,e=0},i}const ec={normal:400,bold:700,bolder:900,lighter:100},hi=s=>typeof s=="number"?s:ec[s]||400;function tc(s,t,e,r,n){let i=hi(e);for(const o of s){const a=o[t];if(!a)continue;if(a.size===1)return console.warn(`TrFontManager: Only one font face found for family: '${t}' - will be used for all weights and styles`),a.values().next().value;const l=new Map;for(const f of a){const h=hi(f.descriptors.weight);if(h===i&&f.descriptors.style===r&&f.descriptors.stretch===n)return f;l.set(h,f)}const c=`TrFontManager: No exact match: '${t} Weight: ${i} Style: ${r} Stretch: ${n}'`;if(console.error(c),i===400&&l.has(500))return l.get(500);if(i===500&&l.has(400))return l.get(400);if(i<400){for(;i>0;){if(l.has(i))return l.get(i);i-=100}i=600}for(;i<1e3;){if(l.has(i))return l.get(i);i+=100}for(i=500;i>0;){if(l.has(i))return l.get(i);i-=100}}}const sc=Jl(tc);class Fn{constructor(t){u(this,"textRenderers");this.textRenderers=t}addFontFace(t){for(const e in this.textRenderers){const r=this.textRenderers[e];r&&r.isFontFaceSupported(t)&&r.addFontFace(t)}}static resolveFontFace(t,e){const{fontFamily:r,fontWeight:n,fontStyle:i,fontStretch:o}=e;return sc(t,r,n,i,o)}}const rc={x:(s,t)=>{s.props.x=t},y:(s,t)=>{s.props.y=t},width:(s,t)=>{s.props.width=t},height:(s,t)=>{s.props.height=t},color:(s,t)=>{s.props.color=t},zIndex:(s,t)=>{s.props.zIndex=t},fontFamily:(s,t)=>{s.props.fontFamily=t},fontWeight:(s,t)=>{s.props.fontWeight=t},fontStyle:(s,t)=>{s.props.fontStyle=t},fontStretch:(s,t)=>{s.props.fontStretch=t},fontSize:(s,t)=>{s.props.fontSize=t},text:(s,t)=>{s.props.text=t},textAlign:(s,t)=>{s.props.textAlign=t},contain:(s,t)=>{s.props.contain=t},offsetY:(s,t)=>{s.props.offsetY=t},scrollable:(s,t)=>{s.props.scrollable=t},scrollY:(s,t)=>{s.props.scrollY=t},letterSpacing:(s,t)=>{s.props.letterSpacing=t},lineHeight:(s,t)=>{s.props.lineHeight=t},maxLines:(s,t)=>{s.props.maxLines=t},textBaseline:(s,t)=>{s.props.textBaseline=t},verticalAlign:(s,t)=>{s.props.verticalAlign=t},overflowSuffix:(s,t)=>{s.props.overflowSuffix=t},debug:(s,t)=>{s.props.debug=t}};class Co{constructor(t){u(this,"stage");u(this,"set");this.stage=t;const e={...rc,...this.getPropertySetters()};this.set=Object.freeze(Object.fromEntries(Object.entries(e).map(([r,n])=>[r,(i,o)=>{i.props[r]!==o&&(n(i,o),this.stage.requestRender())}])))}setStatus(t,e,r){t.status!==e&&(t.status=e,t.emitter.emit(e,r))}setIsRenderable(t,e){t.isRenderable=e}destroyState(t){this.setStatus(t,"destroyed"),t.emitter.removeAllListeners()}scheduleUpdateState(t){t.updateScheduled||(t.updateScheduled=!0,queueMicrotask(()=>{t.status!=="destroyed"&&(t.updateScheduled=!1,this.updateState(t))}))}}class Ao extends vt{constructor(e){super();u(this,"fontFamily");u(this,"descriptors");u(this,"loaded",!1);u(this,"metrics",null);const{fontFamily:r,descriptors:n,metrics:i}=e;i&&(this.metrics={ascender:i.ascender/i.unitsPerEm,descender:i.descender/i.unitsPerEm,lineGap:i.lineGap/i.unitsPerEm}),this.fontFamily=r,this.descriptors={style:"normal",weight:"normal",stretch:"normal",...n}}static convertToCssFontFaceDescriptors(e){return{style:e.style,weight:typeof e.weight=="number"?`${e.weight}`:e.weight,stretch:e.stretch,unicodeRange:e.unicodeRange,featureSettings:e.featureSettings,display:e.display}}}const nc={LINE_FEED:10,CARRIAGE_RETURN:13,SPACE:32,TAB:9,ZERO_WIDTH_SPACE:8203,ZERO_WIDTH_NON_JOINER:8204,ZERO_WIDTH_JOINER:8205,LEFT_TO_RIGHT_MARK:8206,RIGHT_TO_LEFT_MARK:8207,LEFT_TO_RIGHT_EMBEDDING:8234,RIGHT_TO_LEFT_EMBEDDING:8235,POP_DIRECTIONAL_FORMATTING:8236,LEFT_TO_RIGHT_OVERRIDE:8237,RIGHT_TO_LEFT_OVERRIDE:8238,LINE_SEPARATOR:8232,PARAGRAPH_SEPARATOR:8233,OBJECT_REPLACEMENT_CHARACTER:65532,REPLACEMENT_CHARACTER:65533,ZERO_WIDTH_NO_BREAK_SPACE:65279,LEFT_TO_RIGHT_ISOLATE:8294,RIGHT_TO_LEFT_ISOLATE:8295,FIRST_STRONG_ISOLATE:8296,POP_DIRECTIONAL_ISOLATE:8297,INHIBIT_SYMMETRIC_SWAPPING:8298,ACTIVATE_SYMMETRIC_SWAPPING:8299,INHIBIT_ARABIC_FORM_SHAPING:8300,ACTIVATE_ARABIC_FORM_SHAPING:8301,NATIONAL_DIGIT_SHAPES:8302,NOMINAL_DIGIT_SHAPES:8303,LEFT_TO_RIGHT_BOUNDARY:8206,RIGHT_TO_LEFT_BOUNDARY:8207};class ic{}class oc extends ic{constructor(e,r){super();u(this,"data");u(this,"glyphMap");u(this,"kernings");this.data=e,this.glyphMap=r;const n=this.kernings={};e.kernings.forEach(i=>{const o=i.second,a=n[o]=n[o]||{};a[i.first]=i.amount}),this.kernings=n}*shapeText(e,r){var o;let n,i;for(;(n=r.peek())&&!n.done;){const a=n.value,l=this.glyphMap.get(a);if(r.next(),l!==void 0){const c=i!==void 0?(((o=this.kernings[l.id])==null?void 0:o[i])||0)+e.letterSpacing:0;i=l.id,yield{mapped:!0,glyphId:l.id,codepoint:a,cluster:r.lastIndex,xAdvance:l.xadvance+c,yAdvance:0,xOffset:l.xoffset+c,yOffset:l.yoffset,xBearing:0,yBearing:0,width:l.width,height:l.height}}else a===nc.LINE_FEED&&(i=void 0),yield{mapped:!1,codepoint:a,cluster:r.lastIndex}}}}class ds extends Ao{constructor(e,r){super(r);u(this,"type");u(this,"texture");u(this,"maxCharHeight",0);u(this,"data");u(this,"shaper");u(this,"glyphMap",new Map);const{atlasUrl:n,atlasDataUrl:i,stage:o}=r;this.type=e;const a=o.renderer;z(a instanceof Ln,"SDF Font Faces can only be used with the WebGL Renderer"),this.texture=o.txManager.loadTexture("ImageTexture",{src:n,premultiplyAlpha:!1}),this.texture.on("loaded",()=>{this.checkLoaded(),o.requestRender()}),this.texture.ctxTexture.load(),fetch(i).then(async l=>{var f;this.data=await l.json(),z(this.data);let c=0;if(this.data.chars.forEach(h=>{this.glyphMap.set(h.id,h);const d=h.yoffset+h.height;d>c&&(c=d)}),this.maxCharHeight=c,this.shaper=new oc(this.data,this.glyphMap),!this.metrics)if((f=this.data)!=null&&f.lightningMetrics){const{ascender:h,descender:d,lineGap:g,unitsPerEm:x}=this.data.lightningMetrics;this.metrics={ascender:h/x,descender:d/x,lineGap:g/x}}else throw new Error(`Font metrics not found in ${this.type} font ${this.fontFamily}. Make sure you are using the latest version of the Lightning 3 \`msdf-generator\` tool to generate your SDF fonts.`);this.checkLoaded()}).catch(console.error)}getAtlasEntry(e){const r=this.glyphMap.get(e);if(r===void 0)throw new Error(`Glyph ${e} not found in font ${this.fontFamily}`);return{x:r.x,y:r.y,width:r.width,height:r.height}}checkLoaded(){this.loaded||this.texture.state==="loaded"&&this.data&&(this.loaded=!0,this.emit("loaded"))}}const ac=24;function lc(s,t,e,r,n,i,o,a,l){const c=Math.min(Math.max(o.firstLineIdx,0),a.length),f=0,{metrics:h}=e;z(h,"Font metrics not loaded"),z(e.data,"Font data not loaded");const d=(h.ascender-h.descender)*s;let g=0;r==="middle"?g=(t-d)/2:r==="bottom"&&(g=t-d);const x=n/i,y=e.data.common.base,T=h.ascender*s-y,w=x+T+c*t+g;if(!(l&&w>=l/i))return{sdfX:f,sdfY:w,lineIndex:c}}class cs{constructor(t,e=0){u(this,"iterator");u(this,"peekBuffer",[]);u(this,"_lastIndex");this.iterator=t,this.iterator=t,this._lastIndex=e-1,this.peekBuffer=[]}next(){const t=this.peekBuffer.length>0?this.peekBuffer.pop():this.iterator.next();return t.done?this._lastIndex=-1:this._lastIndex++,t}peek(){if(this.peekBuffer.length>0)return this.peekBuffer[0];const t=this.iterator.next();return this.peekBuffer.push(t),t}get lastIndex(){return this._lastIndex}}function*us(s,t=0){let e=t;for(;e<s.length;){const r=s.codePointAt(e);if(r===void 0)throw new Error("Invalid Unicode code point");yield r,e+=r<=65535?1:2}}function cc(s,t,e){const r=e.shapeText(t,new cs(us(s,0),0));let n=0;for(const i of r)i.mapped&&(n+=i.xAdvance);return n}function uc(s,t,e,r,n,i,o,a,l,c,f,h,d,g,x,y,v,T,w){z(x,"Font face must be loaded"),z(x.loaded,"Font face must be loaded"),z(x.data,"Font face must be loaded"),z(x.shaper,"Font face must be loaded");const E=a/x.data.info.size,C=l/E,F=i/E,I=c/E,O=d[s],Q=(O==null?void 0:O.codepointIndex)||0,q=(O==null?void 0:O.maxX)||0,j=(O==null?void 0:O.maxY)||0;let R=q,ie=j,re=t,oe=e,X=0;const V={codepointIndex:-1,bufferOffset:-1,xStart:-1},H=x.shaper,K={letterSpacing:I};let fe=H.shapeText(K,new cs(us(r,Q),Q)),le,ye=-1;const pe=[],Te=o/E,_e=cc(T,K,H);let we=!0;for(;we;){const he=(w===0||s+1<w)&&(h!=="both"||v||oe+C+x.maxCharHeight<=Te),b=he?F:F-_e;let L=0;const B=oe+x.maxCharHeight>=g.y1,$=oe<=g.y2,te=B&&$;for(;(le=fe.next())&&!le.done;){const ee=le.value;if(s===d.length)d.push({codepointIndex:ee.cluster,maxY:ie,maxX:R});else if(s>d.length)throw new Error("Unexpected lineCache length");if(ee.codepoint===32||ee.codepoint===10?V.codepointIndex!==-1&&(V.codepointIndex=-1,L=re):V.codepointIndex===-1&&(V.codepointIndex=ee.cluster,V.bufferOffset=X,V.xStart=L),ee.mapped){const p=re+ee.xOffset+ee.width;if(h!=="none"&&p>=b&&V.codepointIndex!==-1&&V.xStart>0)if(he){fe=H.shapeText(K,new cs(us(r,V.codepointIndex),V.codepointIndex)),X=V.bufferOffset;break}else fe=H.shapeText(K,new cs(us(T,0),0)),re=V.xStart,X=V.bufferOffset,h="none";else{const m=re+ee.xOffset,_=oe+ee.yOffset;if(te){ye===-1&&(ye=X);const A=x.getAtlasEntry(ee.glyphId),S=A.x/x.data.common.scaleW,M=A.y/x.data.common.scaleH,U=A.width/x.data.common.scaleW,D=A.height/x.data.common.scaleH;f[X++]=m,f[X++]=_,f[X++]=S,f[X++]=M,f[X++]=m+ee.width,f[X++]=_,f[X++]=S+U,f[X++]=M,f[X++]=m,f[X++]=_+ee.height,f[X++]=S,f[X++]=M+D,f[X++]=m+ee.width,f[X++]=_+ee.height,f[X++]=S+U,f[X++]=M+D}ie=Math.max(ie,_+ee.height),R=Math.max(R,m+ee.width),re+=ee.xAdvance}}else if(ee.codepoint===10){if(he)break;fe=H.shapeText(K,new cs(us(T,0),0)),h="none"}}ye!==-1&&(pe.push({bufferStart:ye,bufferEnd:X}),ye=-1),re=0,oe+=C,s++,V.codepointIndex=-1,L=0,!y&&h==="both"&&oe>g.y2||le&&le.done?we=!1:he||(we=!1)}if(n==="center"){const he=h==="none"?R:F;for(let b=0;b<pe.length;b++){const L=pe[b],B=f[L.bufferEnd-4]-f[L.bufferStart],$=(he-B)/2;for(let te=L.bufferStart;te<L.bufferEnd;te+=4)f[te]+=$}}else if(n==="right"){const he=h==="none"?R:F;for(let b=0;b<pe.length;b++){const L=pe[b],B=L.bufferEnd===L.bufferStart?0:f[L.bufferEnd-4]-f[L.bufferStart],$=he-B;for(let te=L.bufferStart;te<L.bufferEnd;te+=4)f[te]+=$}}return z(le),{bufferNumFloats:X,bufferNumQuads:X/16,layoutNumCharacters:le.done?r.length-Q:le.value.cluster-Q+1,fullyProcessed:!!le.done,maxX:R,maxY:ie,numLines:d.length}}function fc(s,t){return Math.ceil(s/t)*t}function hc(s,t){return Math.floor(s/t)*t}function dc(s,t,e,r,n,i,o,a){const{screen:l,sdf:c}=s;if(!ml(o))l.x1=0,l.y1=0,l.x2=0,l.y2=0,c.x1=0,c.y1=0,c.x2=0,c.y2=0,s.numLines=0,s.firstLineIdx=0;else{const f=o.x1-t,h=f+(o.x2-o.x1),d=o.y1-e+r,g=hc(d-i,n||1),x=fc(d+(o.y2-o.y1)+i,n||1);l.x1=f,l.y1=g,l.x2=h,l.y2=x,c.x1=f/a,c.y1=g/a,c.x2=h/a,c.y2=x/a,s.numLines=Math.ceil((x-g)/n),s.firstLineIdx=n?Math.floor(g/n):0}s.valid=!0}function Io(s,t){return t*(s.ascender-s.descender+s.lineGap)}const pc={x:0,y:0,width:0,height:0};class gc extends Co{constructor(e){super(e);u(this,"ssdfFontFamilies",{});u(this,"msdfFontFamilies",{});u(this,"fontFamilyArray",[this.ssdfFontFamilies,this.msdfFontFamilies]);u(this,"sdfShader");u(this,"rendererBounds");this.sdfShader=this.stage.shManager.loadShader("SdfShader").shader,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(e,r)=>{e.props.fontFamily=r,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontWeight:(e,r)=>{e.props.fontWeight=r,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontStyle:(e,r)=>{e.props.fontStyle=r,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontStretch:(e,r)=>{e.props.fontStretch=r,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontSize:(e,r)=>{e.props.fontSize=r,this.invalidateLayoutCache(e)},text:(e,r)=>{e.props.text=r,this.invalidateLayoutCache(e)},textAlign:(e,r)=>{e.props.textAlign=r,this.invalidateLayoutCache(e)},color:(e,r)=>{e.props.color=r},x:(e,r)=>{e.props.x=r,e.elementBounds.valid&&(this.setElementBoundsX(e),!e.renderWindow.valid&&$r(e.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(e))},y:(e,r)=>{e.props.y=r,e.elementBounds.valid&&(this.setElementBoundsY(e),!e.renderWindow.valid&&$r(e.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(e))},contain:(e,r)=>{e.props.contain=r,this.invalidateLayoutCache(e)},width:(e,r)=>{e.props.width=r,e.props.contain!=="none"&&this.invalidateLayoutCache(e)},height:(e,r)=>{e.props.height=r,e.props.contain==="both"&&this.invalidateLayoutCache(e)},offsetY:(e,r)=>{e.props.offsetY=r,this.invalidateLayoutCache(e)},scrollable:(e,r)=>{e.props.scrollable=r,this.invalidateLayoutCache(e)},scrollY:(e,r)=>{e.props.scrollY=r,this.scheduleUpdateState(e)},letterSpacing:(e,r)=>{e.props.letterSpacing=r,this.invalidateLayoutCache(e)},lineHeight:(e,r)=>{e.props.lineHeight=r,e.resLineHeight=void 0,this.invalidateLayoutCache(e)},maxLines:(e,r)=>{e.props.maxLines=r,this.invalidateLayoutCache(e)},textBaseline:(e,r)=>{e.props.textBaseline=r,this.invalidateLayoutCache(e)},verticalAlign:(e,r)=>{e.props.verticalAlign=r,this.invalidateLayoutCache(e)},overflowSuffix:(e,r)=>{e.props.overflowSuffix=r,this.invalidateLayoutCache(e)},debug:(e,r)=>{e.props.debug=r}}}canRenderFont(e){const{fontFamily:r}=e;return r in this.ssdfFontFamilies||r in this.msdfFontFamilies||r==="$$SDF_FAILURE_TEST$$"}isFontFaceSupported(e){return e instanceof ds}addFontFace(e){z(e instanceof ds);const r=e.fontFamily,n=e.type==="ssdf"?this.ssdfFontFamilies:e.type==="msdf"?this.msdfFontFamilies:void 0;if(!n){console.warn(`Invalid font face type: ${e.type}`);return}let i=n[r];i||(i=new Set,n[r]=i),i.add(e)}createState(e){return{props:e,status:"initialState",updateScheduled:!1,emitter:new vt,lineCache:[],forceFullLayoutCalc:!1,renderWindow:{screen:{x1:0,y1:0,x2:0,y2:0},sdf:{x1:0,y1:0,x2:0,y2:0},firstLineIdx:0,numLines:0,valid:!1},elementBounds:{x1:0,y1:0,x2:0,y2:0,valid:!1},clippingRect:{x:0,y:0,width:0,height:0,valid:!1},bufferNumFloats:0,bufferNumQuads:0,vertexBuffer:void 0,webGlBuffers:null,bufferUploaded:!1,textH:void 0,textW:void 0,distanceRange:0,trFontFace:void 0,isRenderable:!1,resLineHeight:void 0,debugData:{updateCount:0,layoutCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,drawCount:0,bufferSize:0}}}updateState(e){let{trFontFace:r}=e;const{textH:n,lineCache:i,debugData:o,forceFullLayoutCalc:a}=e;if(o.updateCount++,e.status==="initialState"&&this.setStatus(e,"loading"),!r){if(r=this.resolveFontFace(e.props),e.trFontFace=r,!r){const H=`SdfTextRenderer: Could not resolve font face for family: '${e.props.fontFamily}'`;console.error(H),this.setStatus(e,"failed",new Error(H));return}r.texture.setRenderableOwner(e,!0)}if(!r.loaded){r.once("loaded",()=>{this.scheduleUpdateState(e)});return}z(r.data,"Font face data should be loaded"),z(r.metrics,"Font face metrics should be loaded");const{text:l,fontSize:c,x:f,y:h,contain:d,width:g,height:x,verticalAlign:y,scrollable:v,overflowSuffix:T,maxLines:w}=e.props,E=d==="both"&&v?e.props.scrollY:0,{renderWindow:C}=e,F=r.data.info.size,I=c/F;let O=e.resLineHeight;if(O===void 0){const H=e.props.lineHeight;H===void 0?O=Io(r.metrics,c):O=H,e.resLineHeight=O}const Q=O/I;e.distanceRange=I*r.data.distanceField.distanceRange;const q=l.length*ac;let j=e.vertexBuffer;(!j||j.length<q)&&(j=new Float32Array(q*2));const R=e.elementBounds;if(R.valid||(this.setElementBoundsX(e),this.setElementBoundsY(e),R.valid=!0),!a&&C.valid){const H=C.screen;if(f+H.x1<=R.x1&&f+H.x2>=R.x2&&h-E+H.y1<=R.y1&&h-E+H.y2>=R.y2){this.setStatus(e,"loaded");return}C.valid=!1,this.setStatus(e,"loading")}const{offsetY:ie,textAlign:re}=e.props;if(!C.valid){if(!$r(R,this.rendererBounds))return;dc(C,f,h,E,O,d==="both"?R.y2-R.y1:0,R,I)}const oe=lc(F,Q,r,y,ie,I,C,i,n);if(!oe){this.setStatus(e,"loaded");return}const{letterSpacing:X}=e.props,V=uc(oe.lineIndex,oe.sdfX,oe.sdfY,l,re,g,x,c,O,X,j,d,i,C.sdf,r,a,v,T,w);e.bufferUploaded=!1,e.bufferNumFloats=V.bufferNumFloats,e.bufferNumQuads=V.bufferNumQuads,e.vertexBuffer=j,e.renderWindow=C,o.lastLayoutNumCharacters=V.layoutNumCharacters,o.bufferSize=j.byteLength,V.fullyProcessed&&(e.textW=V.maxX*I,e.textH=V.numLines*Q*I),this.setStatus(e,"loaded")}renderQuads(e,r,n,i,o,a){var R,ie;if(!e.vertexBuffer)return;const l=this.stage.renderer;z(l instanceof Ln);const{fontSize:c,color:f,contain:h,scrollable:d,zIndex:g,debug:x}=e.props,y=h==="both"&&d?e.props.scrollY:0,{textW:v=0,textH:T=0,distanceRange:w,vertexBuffer:E,bufferUploaded:C,trFontFace:F,elementBounds:I}=e;let{webGlBuffers:O}=e;if(!O){const re=l.glw,oe=4*Float32Array.BYTES_PER_ELEMENT,X=re.createBuffer();z(X),e.webGlBuffers=new Eo([{buffer:X,attributes:{a_position:{name:"a_position",size:2,type:re.FLOAT,normalized:!1,stride:oe,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:re.FLOAT,normalized:!1,stride:oe,offset:2*Float32Array.BYTES_PER_ELEMENT}}}]),e.bufferUploaded=!1,z(e.webGlBuffers),O=e.webGlBuffers}if(!C){const re=l.glw,oe=(O==null?void 0:O.getBuffer("a_textureCoordinate"))??null;re.arrayBufferData(oe,E,re.STATIC_DRAW),e.bufferUploaded=!0}if(z(F),d&&h==="both"){z(I.valid);const re=pl(I,pc);n.valid?(e.clippingRect.valid=!0,n=ho(n,re,e.clippingRect)):(e.clippingRect.valid=!0,n=po(re,e.clippingRect))}const Q=new vo(l.glw,l.options,O,this.sdfShader,{transform:r.getFloatArr(),color:al(f,i),size:c/(((R=F.data)==null?void 0:R.info.size)||0),scrollY:y,distanceRange:w,debug:x.sdfShaderDebug},i,n,{height:T,width:v},0,g,!1,o,a),q=(ie=e.trFontFace)==null?void 0:ie.texture;z(q);const j=q.ctxTexture;Q.addTexture(j),Q.length=e.bufferNumFloats,Q.numQuads=e.bufferNumQuads,l.addRenderOp(Q)}setIsRenderable(e,r){var n;super.setIsRenderable(e,r),(n=e.trFontFace)==null||n.texture.setRenderableOwner(e,r)}destroyState(e){var r;super.destroyState(e),(r=e.trFontFace)==null||r.texture.setRenderableOwner(e,!1)}resolveFontFace(e){return Fn.resolveFontFace(this.fontFamilyArray,e)}releaseFontFace(e){e.resLineHeight=void 0,e.trFontFace&&(e.trFontFace.texture.setRenderableOwner(e,!1),e.trFontFace=void 0)}invalidateLayoutCache(e){e.renderWindow.valid=!1,e.elementBounds.valid=!1,e.textH=void 0,e.textW=void 0,e.lineCache=[],this.setStatus(e,"loading"),this.scheduleUpdateState(e)}setElementBoundsX(e){const{x:r,contain:n,width:i}=e.props,{elementBounds:o}=e;o.x1=r,o.x2=n!=="none"?r+i:1/0}setElementBoundsY(e){const{y:r,contain:n,height:i}=e.props,{elementBounds:o}=e;o.y1=r,o.y2=n==="both"?r+i:1/0}}class Gr extends Ao{constructor(e){super(e);u(this,"fontFace");u(this,"fontUrl");const{fontFamily:r,fontUrl:n}=e,i=n.replace(/\(|\)/g,""),o=this.descriptors,a={style:o.style,weight:typeof o.weight=="number"?`${o.weight}`:o.weight,stretch:o.stretch,unicodeRange:o.unicodeRange,featureSettings:o.featureSettings,display:o.display},l=new FontFace(r,`url(${i})`,a);l.load().then(()=>{this.loaded=!0,this.emit("loaded")}).catch(console.error),this.fontFace=l,this.fontUrl=n}}function mc(s,t,e){if(t.metrics)return t.metrics;const r=s.measureText("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz");console.warn(`Font metrics not provided for Canvas Web font ${t.fontFamily}. Using fallback values. It is HIGHLY recommended you use the latest version of the Lightning 3 \`msdf-generator\` tool to extract the default metrics for the font and provide them in the Canvas Web font definition.`);let n;return r.actualBoundingBoxDescent&&r.actualBoundingBoxAscent?n={ascender:r.actualBoundingBoxAscent/e,descender:-r.actualBoundingBoxDescent/e,lineGap:.2}:n={ascender:.8,descender:-.2,lineGap:.2},t.metrics=n,n}const di=2048;function pi(s,t,e,r,n){const i=s!=="bottom"?.5*t:0;return e*(r-1)+i+Math.max(e,t)+(n||0)}class xc{constructor(t,e){u(this,"_canvas");u(this,"_context");u(this,"_settings");this._canvas=t,this._context=e,this._settings=this.mergeDefaults({})}set settings(t){this._settings=this.mergeDefaults(t)}get settings(){return this._settings}getPrecision(){return this._settings.precision}setFontProperties(){this._context.font=this._getFontSetting(),this._context.textBaseline=this._settings.textBaseline}_getFontSetting(){const t=[this._settings.fontFamily],e=[];for(let r=0,n=t.length;r<n;r++)t[r]==="serif"||t[r]==="sans-serif"?e.push(t[r]):e.push(`"${t[r]}"`);return`${this._settings.fontStyle} ${this._settings.fontSize*this.getPrecision()}px ${e.join(",")}`}_load(){if(document.fonts){const t=this._getFontSetting();try{if(!document.fonts.check(t,this._settings.text))return document.fonts.load(t,this._settings.text).catch(e=>{console.warn("[Lightning] Font load error",e,t)}).then(()=>{document.fonts.check(t,this._settings.text)||console.warn("[Lightning] Font not found",t)})}catch{console.warn("[Lightning] Can't check font loading for "+t)}}}calculateRenderInfo(){const t={},e=this.getPrecision(),r=this._settings.paddingLeft*e,n=this._settings.paddingRight*e,i=this._settings.fontSize*e;let o=this._settings.offsetY===null?null:this._settings.offsetY*e;const a=this._settings.w*e,l=this._settings.h*e;let c=this._settings.wordWrapWidth*e;const f=this._settings.cutSx*e,h=this._settings.cutEx*e,d=this._settings.cutSy*e,g=this._settings.cutEy*e,x=(this._settings.letterSpacing||0)*e,y=this._settings.textIndent*e,v=this._settings.trFontFace;this.setFontProperties(),z(v);const T=mc(this._context,v,i),w=Io(T,i)*e,E=this._settings.lineHeight!==null?this._settings.lineHeight*e:w,C=this._settings.maxHeight,F=C!==null&&E>0?Math.floor(C/E):0,I=this._settings.maxLines,O=F>0&&I>0?Math.min(F,I):Math.max(F,I);let Q=a||2048/this.getPrecision(),q=Q-r;if(q<10&&(Q+=10-q,q=10),c||(c=q),this._settings.textOverflow&&!this._settings.wordWrap){let X;switch(this._settings.textOverflow){case"clip":X="";break;case"ellipsis":X=this._settings.overflowSuffix;break;default:X=this._settings.textOverflow}this._settings.text=this.wrapWord(this._settings.text,c-y,X)}let j;if(this._settings.wordWrap)j=this.wrapText(this._settings.text,c,x,y);else{j={l:this._settings.text.split(/(?:\r\n|\r|\n)/),n:[]};const X=j.l.length;for(let V=0;V<X-1;V++)j.n.push(V)}let R=j.l;if(O&&R.length>O){const X=R.slice(0,O);let V=null;if(this._settings.overflowSuffix){const ye=this._settings.overflowSuffix?this.measureText(this._settings.overflowSuffix):0,pe=this.wrapText(X[X.length-1],c-ye,x,y);X[X.length-1]=`${pe.l[0]}${this._settings.overflowSuffix}`,V=[pe.l.length>1?pe.l[1]:""]}else V=[""];let H;const K=R.length;let fe=0;const le=j.n.length;for(H=O;H<K;H++)V[fe]+=`${V[fe]?" ":""}${R[H]}`,H+1<le&&j.n[H+1]&&fe++;t.remainingText=V.join(`
`),t.moreTextLines=!0,R=X}else t.moreTextLines=!1,t.remainingText="";let ie=0;const re=[];for(let X=0;X<R.length;X++){const V=this.measureText(R[X],x)+(X===0?y:0);re.push(V),ie=Math.max(ie,V)}t.lineWidths=re,a||(Q=ie+r+n,q=ie);let oe;return l?oe=l:oe=pi(this._settings.textBaseline,i,E,R.length,o),o===null&&(o=i),t.w=Q,t.h=oe,t.lines=R,t.precision=e,Q||(Q=1),oe||(oe=1),(f||h)&&(Q=Math.min(Q,h-f)),(d||g)&&(oe=Math.min(oe,g-d)),t.width=Q,t.innerWidth=q,t.height=oe,t.fontSize=i,t.cutSx=f,t.cutSy=d,t.cutEx=h,t.cutEy=g,t.lineHeight=E,t.defLineHeight=w,t.lineWidths=re,t.offsetY=o,t.paddingLeft=r,t.paddingRight=n,t.letterSpacing=x,t.textIndent=y,t.metrics=T,t}draw(t,e){const r=this.getPrecision(),n=(e==null?void 0:e.lines)||t.lines,i=(e==null?void 0:e.lineWidths)||t.lineWidths,o=e?pi(this._settings.textBaseline,t.fontSize,t.lineHeight,e.lines.length,this._settings.offsetY===null?null:this._settings.offsetY*r):t.height;this._canvas.width=Math.min(Math.ceil(t.width+this._settings.textRenderIssueMargin),di),this._canvas.height=Math.min(Math.ceil(o),di),this.setFontProperties(),t.fontSize>=128&&(this._context.globalAlpha=.01,this._context.fillRect(0,0,.01,.01),this._context.globalAlpha=1),(t.cutSx||t.cutSy)&&this._context.translate(-t.cutSx,-t.cutSy);let a,l;const c=[],{metrics:f}=t,h=f?f.ascender*t.fontSize:t.fontSize,d=(f.ascender-f.descender)*t.fontSize;for(let x=0,y=n.length;x<y;x++)a=x===0?t.textIndent:0,l=x*t.lineHeight+h,this._settings.verticalAlign=="middle"?l+=(t.lineHeight-d)/2:this._settings.verticalAlign=="bottom"&&(l+=t.lineHeight-d),this._settings.textAlign==="right"?a+=t.innerWidth-i[x]:this._settings.textAlign==="center"&&(a+=(t.innerWidth-i[x])/2),a+=t.paddingLeft,c.push({text:n[x],x:a,y:l,w:i[x]});if(this._settings.highlight){const x=this._settings.highlightColor,y=this._settings.highlightHeight*r||t.fontSize*1.5,v=this._settings.highlightOffset*r,T=this._settings.highlightPaddingLeft!==null?this._settings.highlightPaddingLeft*r:t.paddingLeft,w=this._settings.highlightPaddingRight!==null?this._settings.highlightPaddingRight*r:t.paddingRight;this._context.fillStyle=Ur(x);for(let E=0;E<c.length;E++){const C=c[E];this._context.fillRect(C.x-T,C.y-t.offsetY+v,C.w+w+T,y)}}let g=null;this._settings.shadow&&(g=[this._context.shadowColor,this._context.shadowOffsetX,this._context.shadowOffsetY,this._context.shadowBlur],this._context.shadowColor=Ur(this._settings.shadowColor),this._context.shadowOffsetX=this._settings.shadowOffsetX*r,this._context.shadowOffsetY=this._settings.shadowOffsetY*r,this._context.shadowBlur=this._settings.shadowBlur*r),this._context.fillStyle=Ur(this._settings.textColor);for(let x=0,y=c.length;x<y;x++){const v=c[x];if(t.letterSpacing===0)this._context.fillText(v.text,v.x,v.y);else{const T=v.text.split("");let w=v.x;for(let E=0,C=T.length;E<C;E++)this._context.fillText(T[E],w,v.y),w+=this.measureText(T[E],t.letterSpacing)}}g&&(this._context.shadowColor=g[0],this._context.shadowOffsetX=g[1],this._context.shadowOffsetY=g[2],this._context.shadowBlur=g[3]),(t.cutSx||t.cutSy)&&this._context.translate(t.cutSx,t.cutSy)}wrapWord(t,e,r){const n=this._context.measureText(r).width,i=t.length,o=this._context.measureText(t).width;if(o<=e)return t;let a=Math.floor(e*i/o),l=this._context.measureText(t.substring(0,a)).width+n;if(l>e)for(;a>0&&(l=this._context.measureText(t.substring(0,a)).width+n,l>e);)a-=1;else for(;a<i;)if(l=this._context.measureText(t.substring(0,a)).width+n,l<e)a+=1;else{a-=1;break}return t.substring(0,a)+(e>=n?r:"")}wrapText(t,e,r,n=0){const i=t.split(/\r?\n/g);let o=[];const a=[];for(let l=0;l<i.length;l++){const c=[];let f="",h=e-n;const d=i[l].split(" ");for(let g=0;g<d.length;g++){const x=this.measureText(d[g],r),y=x+this.measureText(" ",r);g===0||y>h?(g>0&&(c.push(f),f=""),f+=d[g],h=e-x-(g===0?n:0)):(h-=y,f+=` ${d[g]}`)}c.push(f),f="",o=o.concat(c),l<i.length-1&&a.push(o.length)}return{l:o,n:a}}measureText(t,e=0){return e?t.split("").reduce((r,n)=>r+this._context.measureText(n).width+e,0):this._context.measureText(t).width}mergeDefaults(t){return{text:"",w:0,h:0,fontStyle:"normal",fontSize:40,fontFamily:null,trFontFace:null,wordWrap:!0,wordWrapWidth:0,wordBreak:!1,textOverflow:"",lineHeight:null,textBaseline:"alphabetic",textAlign:"left",verticalAlign:"top",offsetY:null,maxLines:0,maxHeight:null,overflowSuffix:"...",textColor:[1,1,1,1],paddingLeft:0,paddingRight:0,shadow:!1,shadowColor:[0,0,0,1],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:5,highlight:!1,highlightHeight:0,highlightColor:[0,0,0,1],highlightOffset:0,highlightPaddingLeft:0,highlightPaddingRight:0,letterSpacing:0,textIndent:0,cutSx:0,cutEx:0,cutSy:0,cutEy:0,advancedRenderer:!1,fontBaselineRatio:0,precision:1,textRenderIssueMargin:0,...t}}}const gi=typeof self>"u"?globalThis:self;var uo;const mi=((uo=gi.document)==null?void 0:uo.fonts)||gi.fonts;function yc(s){const{fontFamily:t,fontStyle:e,fontWeight:r,fontStretch:n,fontSize:i}=s;return[e,r,n,`${i}px`,t].join(" ")}class xi extends Co{constructor(e){super(e);u(this,"canvas");u(this,"context");u(this,"fontFamilies",{});u(this,"fontFamilyArray",[this.fontFamilies]);u(this,"loadFont",e=>{const r=yc(e.props),n=Fn.resolveFontFace(this.fontFamilyArray,e.props);if(z(n,`Could not resolve font face for ${r}`),e.fontInfo={fontFace:n,cssString:r,loaded:!1},!e.fontInfo.loaded){mi.load(r).then(this.onFontLoaded.bind(this,e,r)).catch(this.onFontLoadError.bind(this,e,r));return}});typeof OffscreenCanvas<"u"?this.canvas=new OffscreenCanvas(0,0):this.canvas=document.createElement("canvas");let r=this.canvas.getContext("2d",{willReadFrequently:!0});r||(this.canvas=document.createElement("canvas"),r=this.canvas.getContext("2d",{willReadFrequently:!0})),z(r),this.context=r,this.addFontFace(new Gr({fontFamily:"sans-serif",descriptors:{},fontUrl:""}))}getPropertySetters(){return{fontFamily:(e,r)=>{e.props.fontFamily=r,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontWeight:(e,r)=>{e.props.fontWeight=r,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontStyle:(e,r)=>{e.props.fontStyle=r,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontStretch:(e,r)=>{e.props.fontStretch=r,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontSize:(e,r)=>{e.props.fontSize=r,e.fontInfo=void 0,this.invalidateLayoutCache(e)},text:(e,r)=>{e.props.text=r,this.invalidateLayoutCache(e)},textAlign:(e,r)=>{e.props.textAlign=r,this.invalidateLayoutCache(e)},color:(e,r)=>{e.props.color=r,this.invalidateLayoutCache(e)},x:(e,r)=>{e.props.x=r},y:(e,r)=>{e.props.y=r},contain:(e,r)=>{e.props.contain=r,this.invalidateLayoutCache(e)},width:(e,r)=>{e.props.width=r,e.props.contain!=="none"&&this.invalidateLayoutCache(e)},height:(e,r)=>{e.props.height=r,e.props.contain==="both"&&this.invalidateLayoutCache(e)},offsetY:(e,r)=>{e.props.offsetY=r,this.invalidateLayoutCache(e)},scrollY:(e,r)=>{e.props.scrollY=r},letterSpacing:(e,r)=>{e.props.letterSpacing=r,this.invalidateLayoutCache(e)},lineHeight:(e,r)=>{e.props.lineHeight=r,this.invalidateLayoutCache(e)},maxLines:(e,r)=>{e.props.maxLines=r,this.invalidateLayoutCache(e)},textBaseline:(e,r)=>{e.props.textBaseline=r,this.invalidateLayoutCache(e)},verticalAlign:(e,r)=>{e.props.verticalAlign=r,this.invalidateLayoutCache(e)},overflowSuffix:(e,r)=>{e.props.overflowSuffix=r,this.invalidateLayoutCache(e)}}}canRenderFont(e){return!0}isFontFaceSupported(e){return e instanceof Gr}addFontFace(e){z(e instanceof Gr),e.fontFamily!=="sans-serif"&&mi.add(e.fontFace);const{fontFamilies:r}=this,n=e.fontFace.family;let i=r[n];i||(i=new Set,r[n]=i),i.add(e)}createState(e,r){return{node:r,props:e,status:"initialState",updateScheduled:!1,emitter:new vt,textureNode:void 0,lightning2TextRenderer:new xc(this.canvas,this.context),renderInfo:void 0,forceFullLayoutCalc:!1,textW:0,textH:0,fontInfo:void 0,isRenderable:!1,debugData:{updateCount:0,layoutCount:0,drawCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,bufferSize:0}}}updateState(e){if(e.status==="initialState"&&this.setStatus(e,"loading"),e.status!=="loaded"){if(!e.fontInfo)return this.loadFont(e);e.fontInfo.loaded&&(e.renderInfo||(e.renderInfo=this.calculateRenderInfo(e),e.textH=e.renderInfo.lineHeight*e.renderInfo.lines.length,e.textW=e.renderInfo.width,this.renderSingleCanvasPage(e)))}}renderSingleCanvasPage(e){z(e.renderInfo);const r=e.node,n=this.stage.txManager.loadTexture("ImageTexture",{src:(function(i,o){return z(o),i.draw(o,{lines:o.lines,lineWidths:o.lineWidths}),this.canvas.width===0||this.canvas.height===0?null:this.context.getImageData(0,0,this.canvas.width,this.canvas.height)}).bind(this,e.lightning2TextRenderer,e.renderInfo)});if(e.textureNode)e.textureNode.texture=n;else{const i=this.stage.createNode({parent:r,texture:n,autosize:!0,alpha:dl(e.props.color)});e.textureNode=i}this.setStatus(e,"loaded")}calculateRenderInfo(e){var r;return e.lightning2TextRenderer.settings={text:e.props.text,textAlign:e.props.textAlign,fontFamily:e.props.fontFamily,trFontFace:(r=e.fontInfo)==null?void 0:r.fontFace,fontSize:e.props.fontSize,fontStyle:[e.props.fontStretch,e.props.fontStyle,e.props.fontWeight].join(" "),textColor:Os(e.props.color),offsetY:e.props.offsetY,wordWrap:e.props.contain!=="none",wordWrapWidth:e.props.contain==="none"?void 0:e.props.width,letterSpacing:e.props.letterSpacing,lineHeight:e.props.lineHeight??null,maxLines:e.props.maxLines,maxHeight:e.props.contain==="both"?e.props.height-e.props.offsetY:null,textBaseline:e.props.textBaseline,verticalAlign:e.props.verticalAlign,overflowSuffix:e.props.overflowSuffix,w:e.props.contain!=="none"?e.props.width:void 0},e.renderInfo=e.lightning2TextRenderer.calculateRenderInfo(),e.renderInfo}renderQuads(){}destroyState(e){e.status!=="destroyed"&&(super.destroyState(e),e.textureNode&&(e.textureNode.destroy(),delete e.textureNode),delete e.renderInfo)}invalidateLayoutCache(e){e.renderInfo=void 0,this.setStatus(e,"loading"),this.scheduleUpdateState(e)}onFontLoaded(e,r){var n;r!==((n=e.fontInfo)==null?void 0:n.cssString)||!e.fontInfo||(e.fontInfo.loaded=!0,this.scheduleUpdateState(e))}onFontLoadError(e,r,n){var i;r!==((i=e.fontInfo)==null?void 0:i.cssString)||!e.fontInfo||(e.fontInfo.loaded=!0,console.error(`CanvasTextRenderer: Error loading font '${e.fontInfo.cssString}'`,n),this.scheduleUpdateState(e))}}class _c{constructor(){u(this,"data",{})}reset(){this.data={}}increment(t){this.data[t]||(this.data[t]=0),this.data[t]++}getData(){return{...this.data}}}class vc{constructor(t,e){u(this,"stage");u(this,"memUsed",0);u(this,"loadedTextures",new Map);u(this,"criticalThreshold");u(this,"targetThreshold");u(this,"cleanupInterval");u(this,"debugLogging");u(this,"lastCleanupTime",0);u(this,"criticalCleanupRequested",!1);u(this,"frameTime",0);this.stage=t;const{criticalThreshold:r}=e;this.criticalThreshold=Math.round(r);const n=Math.max(0,Math.min(1,e.targetThresholdLevel));if(this.targetThreshold=Math.round(r*n),this.cleanupInterval=e.cleanupInterval,this.debugLogging=e.debugLogging,e.debugLogging){let i=0;setInterval(()=>{i!==this.memUsed&&(i=this.memUsed,console.log(`[TextureMemoryManager] Memory used: ${li(this.memUsed)} mb / ${li(this.criticalThreshold)} mb (${(this.memUsed/this.criticalThreshold*100).toFixed(1)}%)`))},1e3)}r===0&&(this.setTextureMemUse=()=>{})}setTextureMemUse(t,e){if(this.loadedTextures.has(t)&&(this.memUsed-=this.loadedTextures.get(t)),e===0){this.loadedTextures.delete(t);return}else this.memUsed+=e,this.loadedTextures.set(t,e);this.memUsed>this.criticalThreshold&&(this.criticalCleanupRequested=!0)}checkCleanup(){return this.criticalCleanupRequested||this.memUsed>this.targetThreshold&&this.frameTime-this.lastCleanupTime>=this.cleanupInterval}cleanup(){const t=this.criticalCleanupRequested;this.lastCleanupTime=this.frameTime,this.criticalCleanupRequested=!1,t&&this.stage.queueFrameEvent("criticalCleanup",{memUsed:this.memUsed,criticalThreshold:this.criticalThreshold}),this.debugLogging&&console.log(`[TextureMemoryManager] Cleaning up textures. Critical: ${t}`);const e=[...this.loadedTextures.keys()].sort((i,o)=>{const a=i.renderable,l=o.renderable;return a===l?i.lastRenderableChangeTime-o.lastRenderableChangeTime:a?1:l?-1:0}),r=this.targetThreshold,n=this.stage.txManager;for(const i of e)if(i.renderable||(i.ctxTexture.free(),n.removeTextureFromCache(i),this.memUsed<=r))break;this.memUsed>=this.criticalThreshold&&(this.stage.queueFrameEvent("criticalCleanupFailed",{memUsed:this.memUsed,criticalThreshold:this.criticalThreshold}),console.warn(`[TextureMemoryManager] Memory usage above critical threshold after cleanup: ${this.memUsed}`))}getMemoryInfo(){let t=0;const e=[...this.loadedTextures.keys()].reduce((r,n)=>(t+=n.renderable?1:0,r+(n.renderable?this.loadedTextures.get(n):0)),0);return{criticalThreshold:this.criticalThreshold,targetThreshold:this.targetThreshold,renderableMemUsed:e,memUsed:this.memUsed,renderableTexturesLoaded:t,loadedTextures:this.loadedTextures.size}}}const Tc={isWhite:!0,a:1,r:255,g:255,b:255};function Vr(s){if(s===4294967295)return Tc;const t=(s>>>24&255)/255,e=s>>>16&255&255,r=s>>>8&255&255,n=s&255&255;return{isWhite:!1,a:t,r:n,g:r,b:e}}function cr({a:s,r:t,g:e,b:r}){return`rgba(${t},${e},${r},${s})`}class bc extends xo{constructor(){super(...arguments);u(this,"image");u(this,"tintCache")}load(){this.textureSource.state==="freed"&&(this.textureSource.setState("loading"),this.onLoadRequest().then(e=>{this.textureSource.setState("loaded",e),this.updateMemSize()}).catch(e=>{this.textureSource.setState("failed",e)}))}free(){this.image=void 0,this.tintCache=void 0,this.textureSource.setState("freed"),this.setTextureMemUse(0)}updateMemSize(){const e=this.tintCache?8:4;if(this.textureSource.dimensions){const{width:r,height:n}=this.textureSource.dimensions;this.setTextureMemUse(r*n*e)}}hasImage(){return this.image!==void 0}getImage(e){var o;const r=this.image;if(z(r,"Attempt to get unloaded image texture"),e.isWhite)return this.tintCache&&(this.tintCache=void 0,this.updateMemSize()),r;const n=cr(e);if(((o=this.tintCache)==null?void 0:o.key)===n)return this.tintCache.image;const i=this.tintTexture(r,n);return this.tintCache={key:n,image:i},this.updateMemSize(),i}tintTexture(e,r){const{width:n,height:i}=e,o=document.createElement("canvas");o.width=n,o.height=i;const a=o.getContext("2d");return a&&(a.fillStyle=r,a.globalCompositeOperation="copy",a.fillRect(0,0,n,i),a.globalCompositeOperation="multiply",a.drawImage(e,0,0,n,i,0,0,n,i),a.globalCompositeOperation="destination-in",a.drawImage(e,0,0,n,i,0,0,n,i)),o}async onLoadRequest(){const{data:e}=await this.textureSource.getTextureData();if(e instanceof ImageData){const r=document.createElement("canvas");r.width=e.width,r.height=e.height;const n=r.getContext("2d");return n&&n.putImageData(e,0,0),this.image=r,{width:e.width,height:e.height}}else if(e instanceof ImageBitmap)return this.image=e,{width:e.width,height:e.height};return{width:0,height:0}}}function wc(s){var t;return s.shader instanceof Pn&&s.shader.shType===So?((t=s.shaderProps)==null?void 0:t.radius)??0:0}class Rc extends yo{constructor(e){super(e);u(this,"context");u(this,"canvas");u(this,"pixelRatio");u(this,"clearColor");u(this,"renderToTextureActive",!1);u(this,"activeRttNode",null);u(this,"defShaderCtr");this.mode="canvas",this.shManager.renderer=this;const{canvas:r,pixelRatio:n,clearColor:i}=e;this.canvas=r,this.context=r.getContext("2d"),this.pixelRatio=n,this.clearColor=i?hl(i):void 0,this.defShaderCtr={type:"DefaultShader",props:{},shader:new Pn("DefaultShader"),getResolvedProps:()=>()=>({})}}reset(){this.canvas.width=this.canvas.width;const e=this.context;if(this.clearColor){const[r,n,i,o]=this.clearColor;e.fillStyle=`rgba(${r}, ${n}, ${i}, ${o/255})`,e.fillRect(0,0,this.canvas.width,this.canvas.height)}e.scale(this.pixelRatio,this.pixelRatio)}render(){}addQuad(e){const r=this.context,{tx:n,ty:i,width:o,height:a,alpha:l,colorTl:c,colorTr:f,colorBr:h,ta:d,tb:g,tc:x,td:y,clippingRect:v}=e;let T=e.texture,w,E;if(T){if(T instanceof Kt&&(E=T.props,T=T.parentTexture),w=T.ctxTexture,T.state==="freed"){w.load();return}if(T.state!=="loaded"||!w.hasImage())return}const C=Vr(c),F=d!==1,I=v.width!==0&&v.height!==0,O=c!==f||c!==h,Q=e.shader?wc(e):0;if((F||I||Q)&&r.save(),I){const q=new Path2D,{x:j,y:R,width:ie,height:re}=v;q.rect(j,R,ie,re),r.clip(q)}if(F){const q=this.pixelRatio;r.setTransform(d,x,g,y,n*q,i*q),r.scale(q,q),r.translate(-n,-i)}if(Q){const q=new Path2D;q.roundRect(n,i,o,a,Q),r.clip(q)}if(w){const q=w.getImage(C);r.globalAlpha=l,E?r.drawImage(q,E.x,E.y,E.width,E.height,n,i,o,a):r.drawImage(q,n,i,o,a),r.globalAlpha=1}else if(O){let q=n,j=i,R;c===f?(q=n,j=i+a,R=Vr(h)):(q=n+o,j=i,R=Vr(f));const ie=r.createLinearGradient(n,i,q,j);ie.addColorStop(0,cr(C)),ie.addColorStop(1,cr(R)),r.fillStyle=ie,r.fillRect(n,i,o,a)}else r.fillStyle=cr(C),r.fillRect(n,i,o,a);(F||I||Q)&&r.restore()}createCtxTexture(e){return new bc(this.txMemManager,e)}getShaderManager(){return this.shManager}getDefShaderCtr(){return this.defShaderCtr}renderRTTNodes(){}removeRTTNode(e){}renderToTexture(e){}getBufferInfo(){return null}}class Sc extends on{constructor(e,r){super(e,r);u(this,"textRenderer");u(this,"trState");u(this,"_textRendererOverride",null);u(this,"onTextLoaded",()=>{const{contain:e}=this,r=this.trState.props.width,n=this.trState.props.height,i=this.trState.textW||0,o=this.trState.textH||0;e==="both"?(this.props.width=r,this.props.height=n):e==="width"?(this.props.width=r,this.props.height=o):e==="none"&&(this.props.width=i,this.props.height=o),this.updateLocalTransform(),this.stage.requestRender(),this.emit("loaded",{type:"text",dimensions:{width:this.trState.textW||0,height:this.trState.textH||0}})});u(this,"onTextFailed",(e,r)=>{this.emit("failed",{type:"text",error:r})});this._textRendererOverride=r.textRendererOverride;const{resolvedTextRenderer:n,textRendererState:i}=this.resolveTextRendererAndState({x:this.absX,y:this.absY,width:r.width,height:r.height,textAlign:r.textAlign,color:r.color,zIndex:r.zIndex,contain:r.contain,scrollable:r.scrollable,scrollY:r.scrollY,offsetY:r.offsetY,letterSpacing:r.letterSpacing,debug:r.debug,fontFamily:r.fontFamily,fontSize:r.fontSize,fontStretch:r.fontStretch,fontStyle:r.fontStyle,fontWeight:r.fontWeight,text:r.text,lineHeight:r.lineHeight,maxLines:r.maxLines,textBaseline:r.textBaseline,verticalAlign:r.verticalAlign,overflowSuffix:r.overflowSuffix});this.textRenderer=n,this.trState=i}get width(){return this.props.width}set width(e){this.props.width=e,this.textRenderer.set.width(this.trState,e),this.contain==="none"&&this.setUpdateType(N.Local)}get height(){return this.props.height}set height(e){this.props.height=e,this.textRenderer.set.height(this.trState,e),this.contain!=="both"&&this.setUpdateType(N.Local)}get color(){return this.trState.props.color}set color(e){this.textRenderer.set.color(this.trState,e)}get text(){return this.trState.props.text}set text(e){this.textRenderer.set.text(this.trState,e)}get textRendererOverride(){return this._textRendererOverride}set textRendererOverride(e){this._textRendererOverride=e,this.textRenderer.destroyState(this.trState);const{resolvedTextRenderer:r,textRendererState:n}=this.resolveTextRendererAndState(this.trState.props);this.textRenderer=r,this.trState=n}get fontSize(){return this.trState.props.fontSize}set fontSize(e){this.textRenderer.set.fontSize(this.trState,e)}get fontFamily(){return this.trState.props.fontFamily}set fontFamily(e){this.textRenderer.set.fontFamily(this.trState,e)}get fontStretch(){return this.trState.props.fontStretch}set fontStretch(e){this.textRenderer.set.fontStretch(this.trState,e)}get fontStyle(){return this.trState.props.fontStyle}set fontStyle(e){this.textRenderer.set.fontStyle(this.trState,e)}get fontWeight(){return this.trState.props.fontWeight}set fontWeight(e){this.textRenderer.set.fontWeight(this.trState,e)}get textAlign(){return this.trState.props.textAlign}set textAlign(e){this.textRenderer.set.textAlign(this.trState,e)}get contain(){return this.trState.props.contain}set contain(e){this.textRenderer.set.contain(this.trState,e)}get scrollable(){return this.trState.props.scrollable}set scrollable(e){this.textRenderer.set.scrollable(this.trState,e)}get scrollY(){return this.trState.props.scrollY}set scrollY(e){this.textRenderer.set.scrollY(this.trState,e)}get offsetY(){return this.trState.props.offsetY}set offsetY(e){this.textRenderer.set.offsetY(this.trState,e)}get letterSpacing(){return this.trState.props.letterSpacing}set letterSpacing(e){this.textRenderer.set.letterSpacing(this.trState,e)}get lineHeight(){return this.trState.props.lineHeight}set lineHeight(e){this.textRenderer.set.lineHeight&&this.textRenderer.set.lineHeight(this.trState,e)}get maxLines(){return this.trState.props.maxLines}set maxLines(e){this.textRenderer.set.maxLines&&this.textRenderer.set.maxLines(this.trState,e)}get textBaseline(){return this.trState.props.textBaseline}set textBaseline(e){this.textRenderer.set.textBaseline&&this.textRenderer.set.textBaseline(this.trState,e)}get verticalAlign(){return this.trState.props.verticalAlign}set verticalAlign(e){this.textRenderer.set.verticalAlign&&this.textRenderer.set.verticalAlign(this.trState,e)}get overflowSuffix(){return this.trState.props.overflowSuffix}set overflowSuffix(e){this.textRenderer.set.overflowSuffix&&this.textRenderer.set.overflowSuffix(this.trState,e)}get debug(){return this.trState.props.debug}set debug(e){this.textRenderer.set.debug(this.trState,e)}update(e,r){super.update(e,r),z(this.globalTransform),this.textRenderer.set.x(this.trState,this.globalTransform.tx),this.textRenderer.set.y(this.trState,this.globalTransform.ty)}checkRenderProps(){return this.trState.props.text!==""?!0:super.checkRenderProps()}onChangeIsRenderable(e){super.onChangeIsRenderable(e),this.textRenderer.setIsRenderable(this.trState,e)}renderQuads(e){var r;if(z(this.globalTransform),!this.textRenderer.renderQuads){super.renderQuads(e);return}this.parentHasRenderTexture&&(!e.renderToTextureActive||this.parentRenderTexture!==e.activeRttNode)||(this.parentHasRenderTexture&&((r=this.props.parent)!=null&&r.rtt)&&(this.globalTransform=Pe.identity(),this.localTransform&&this.globalTransform.multiply(this.localTransform)),z(this.globalTransform),this.textRenderer.renderQuads(this.trState,this.globalTransform,this.clippingRect,this.worldAlpha,this.parentHasRenderTexture,this.framebufferDimensions))}destroy(){super.destroy(),this.textRenderer.destroyState(this.trState)}resolveTextRendererAndState(e){const r=this.stage.resolveTextRenderer(e,this._textRendererOverride),n=r.createState(e,this);return n.emitter.on("loaded",this.onTextLoaded),n.emitter.on("failed",this.onTextFailed),r.scheduleUpdateState(n),{resolvedTextRenderer:r,textRendererState:n}}}function Ec(s){const t={boolean:!0,string:!0,number:!0,undefined:!0},e=Object.keys(s);for(let r=0;r<e.length;r++){const n=e[r];if(!n)continue;const i=s[n],o=typeof i;o==="string"&&i.length>2048&&(console.warn(`Custom Data value for ${n} is too long, it will be truncated to 2048 characters`),s[n]=i.substring(0,2048)),t[o]||(console.warn(`Custom Data value for ${n} is not a boolean, string, or number, it will be ignored`),delete s[n])}return s}const Cc=2e6;class Ac{constructor(t){u(this,"options");u(this,"animationManager");u(this,"txManager");u(this,"txMemManager");u(this,"fontManager");u(this,"textRenderers");u(this,"shManager");u(this,"renderer");u(this,"root");u(this,"boundsMargin");u(this,"defShaderCtr");u(this,"eventBus");u(this,"deltaTime",0);u(this,"lastFrameTime",0);u(this,"currentFrameTime",0);u(this,"fpsNumFrames",0);u(this,"fpsElapsedTime",0);u(this,"renderRequested",!1);u(this,"frameEventQueue",[]);u(this,"contextSpy",null);this.options=t;const{canvas:e,clearColor:r,appWidth:n,appHeight:i,boundsMargin:o,enableContextSpy:a,numImageWorkers:l,textureMemory:c,renderMode:f}=t;this.eventBus=t.eventBus,this.txManager=new Zl(l),this.txMemManager=new vc(this,c),this.shManager=new $l,this.animationManager=new Kl,this.contextSpy=a?new _c:null;let h=[0,0,0,0];o&&(h=Array.isArray(o)?o:[o,o,o,o]),this.boundsMargin=h;const d={stage:this,canvas:e,pixelRatio:t.devicePhysicalPixelRatio*t.deviceLogicalPixelRatio,clearColor:r??4278190080,bufferMemory:Cc,txManager:this.txManager,txMemManager:this.txMemManager,shManager:this.shManager,contextSpy:this.contextSpy};f==="canvas"?this.renderer=new Rc(d):this.renderer=new Ln(d),this.defShaderCtr=this.renderer.getDefShaderCtr(),ll(f),this.txManager.renderer=this.renderer,this.textRenderers=f==="webgl"?{canvas:new xi(this),sdf:new gc(this)}:{canvas:new xi(this)},this.fontManager=new Fn(this.textRenderers);const g=new on(this,{x:0,y:0,width:n,height:i,alpha:1,autosize:!1,clipping:!1,color:0,colorTop:0,colorBottom:0,colorLeft:0,colorRight:0,colorTl:0,colorTr:0,colorBl:0,colorBr:0,zIndex:0,zIndexLocked:0,scaleX:1,scaleY:1,mountX:0,mountY:0,mount:0,pivot:.5,pivotX:.5,pivotY:.5,rotation:0,parent:null,texture:null,textureOptions:{},shader:this.defShaderCtr,rtt:!1,src:null,scale:1});this.root=g,Sl(this)}updateFrameTime(){const t=El();this.lastFrameTime=this.currentFrameTime,this.currentFrameTime=t,this.deltaTime=this.lastFrameTime?t-this.lastFrameTime:100/6,this.txManager.frameTime=t,this.txMemManager.frameTime=t,this.eventBus.emit("frameTick",{time:this.currentFrameTime,delta:this.deltaTime})}updateAnimations(){const{animationManager:t}=this;this.root&&t.update(this.deltaTime)}hasSceneUpdates(){return!!this.root.updateType||this.renderRequested}drawFrame(){const{renderer:t,renderRequested:e}=this;z(t),this.root.updateType!==0&&this.root.update(this.deltaTime,this.root.clippingRect),t.reset(),this.txMemManager.criticalCleanupRequested&&this.txMemManager.cleanup(),t.rttNodes.length>0&&t.renderRTTNodes(),this.addQuads(this.root),t==null||t.render(),this.calculateFps(),e&&(this.renderRequested=!1)}queueFrameEvent(t,e){this.frameEventQueue.push([t,e])}flushFrameEvents(){for(const[t,e]of this.frameEventQueue)this.eventBus.emit(t,e);this.frameEventQueue=[]}calculateFps(){var e,r;const{fpsUpdateInterval:t}=this.options;if(t&&(this.fpsNumFrames++,this.fpsElapsedTime+=this.deltaTime,this.fpsElapsedTime>=t)){const n=Math.round(this.fpsNumFrames*1e3/this.fpsElapsedTime);this.fpsNumFrames=0,this.fpsElapsedTime=0,this.queueFrameEvent("fpsUpdate",{fps:n,contextSpyData:((e=this.contextSpy)==null?void 0:e.getData())??null}),(r=this.contextSpy)==null||r.reset()}}addQuads(t){z(this.renderer&&t.globalTransform),t.isRenderable&&t.renderQuads(this.renderer);for(let e=0;e<t.children.length;e++){const r=t.children[e];r&&(r==null?void 0:r.worldAlpha)!==0&&this.addQuads(r)}}requestRender(){this.renderRequested=!0}resolveTextRenderer(t,e=null){let r=e,n=!1;if(r){const o=this.textRenderers[r];o?o.canRenderFont(t)||(console.warn(`Cannot use override text renderer '${r}' for font`,t),r=null,n=!0):(console.warn(`Text renderer override '${r}' not found.`),r=null,n=!0)}if(!r){for(const[o,a]of Object.entries(this.textRenderers))if(o!=="canvas"&&a.canRenderFont(t)){r=o;break}r||(r="canvas")}n&&console.warn(`Falling back to text renderer ${String(r)}`);const i=this.textRenderers[r];return z(i,"resolvedTextRenderer undefined"),i}createShaderCtr(t,e){return this.shManager.loadShader(t,e)}createNode(t){const e=this.resolveNodeDefaults(t);return new on(this,e)}createTextNode(t){const e=t.fontSize??16,r={...this.resolveNodeDefaults(t),text:t.text??"",textRendererOverride:t.textRendererOverride??null,fontSize:e,fontFamily:t.fontFamily??"sans-serif",fontStyle:t.fontStyle??"normal",fontWeight:t.fontWeight??"normal",fontStretch:t.fontStretch??"normal",textAlign:t.textAlign??"left",contain:t.contain??"none",scrollable:t.scrollable??!1,scrollY:t.scrollY??0,offsetY:t.offsetY??0,letterSpacing:t.letterSpacing??0,lineHeight:t.lineHeight,maxLines:t.maxLines??0,textBaseline:t.textBaseline??"alphabetic",verticalAlign:t.verticalAlign??"middle",overflowSuffix:t.overflowSuffix??"...",debug:t.debug??{},shaderProps:null};return new Sc(this,r)}resolveNodeDefaults(t){const e=t.color??4294967295,r=t.colorTl??t.colorTop??t.colorLeft??e,n=t.colorTr??t.colorTop??t.colorRight??e,i=t.colorBl??t.colorBottom??t.colorLeft??e,o=t.colorBr??t.colorBottom??t.colorRight??e,a=Ec(t.data??{});return{x:t.x??0,y:t.y??0,width:t.width??0,height:t.height??0,alpha:t.alpha??1,autosize:t.autosize??!1,clipping:t.clipping??!1,color:e,colorTop:t.colorTop??e,colorBottom:t.colorBottom??e,colorLeft:t.colorLeft??e,colorRight:t.colorRight??e,colorBl:i,colorBr:o,colorTl:r,colorTr:n,zIndex:t.zIndex??0,zIndexLocked:t.zIndexLocked??0,parent:t.parent??null,texture:t.texture??null,textureOptions:t.textureOptions??{},shader:t.shader??this.defShaderCtr,src:t.src??null,scale:t.scale??null,scaleX:t.scaleX??t.scale??1,scaleY:t.scaleY??t.scale??1,mount:t.mount??0,mountX:t.mountX??t.mount??0,mountY:t.mountY??t.mount??0,pivot:t.pivot??.5,pivotX:t.pivotX??t.pivot??.5,pivotY:t.pivotY??t.pivot??.5,rotation:t.rotation??0,rtt:t.rtt??!1,data:a}}}class Ic extends vt{constructor(e,r){var y,v,T,w;super();u(this,"root");u(this,"canvas");u(this,"settings");u(this,"stage");u(this,"inspector",null);const n={criticalThreshold:((y=e.textureMemory)==null?void 0:y.criticalThreshold)||124e6,targetThresholdLevel:((v=e.textureMemory)==null?void 0:v.targetThresholdLevel)||.5,cleanupInterval:((T=e.textureMemory)==null?void 0:T.cleanupInterval)||3e4,debugLogging:((w=e.textureMemory)==null?void 0:w.debugLogging)||!1},i={appWidth:e.appWidth||1920,appHeight:e.appHeight||1080,textureMemory:n,boundsMargin:e.boundsMargin||0,deviceLogicalPixelRatio:e.deviceLogicalPixelRatio||1,devicePhysicalPixelRatio:e.devicePhysicalPixelRatio||window.devicePixelRatio,clearColor:e.clearColor??0,fpsUpdateInterval:e.fpsUpdateInterval||0,numImageWorkers:e.numImageWorkers!==void 0?e.numImageWorkers:2,enableContextSpy:e.enableContextSpy??!1,enableInspector:e.enableInspector??!1,renderMode:e.renderMode??"webgl",quadBufferSize:e.quadBufferSize??4*1024*1024};this.settings=i;const{appWidth:o,appHeight:a,deviceLogicalPixelRatio:l,devicePhysicalPixelRatio:c,enableInspector:f}=i,h=o*l,d=a*l,g=document.createElement("canvas");this.canvas=g,g.width=h*c,g.height=d*c,g.style.width=`${h}px`,g.style.height=`${d}px`,this.stage=new Ac({appWidth:this.settings.appWidth,appHeight:this.settings.appHeight,boundsMargin:this.settings.boundsMargin,clearColor:this.settings.clearColor,canvas:this.canvas,deviceLogicalPixelRatio:this.settings.deviceLogicalPixelRatio,devicePhysicalPixelRatio:this.settings.devicePhysicalPixelRatio,enableContextSpy:this.settings.enableContextSpy,fpsUpdateInterval:this.settings.fpsUpdateInterval,numImageWorkers:this.settings.numImageWorkers,renderMode:this.settings.renderMode,textureMemory:n,eventBus:this,quadBufferSize:this.settings.quadBufferSize}),this.root=this.stage.root;let x;if(typeof r=="string"?x=document.getElementById(r):x=r,!x)throw new Error("Could not find target element");x.appendChild(g),f&&!In()&&(this.inspector=new Rl(g,i))}createNode(e){z(this.stage,"Stage is not initialized");const r=this.stage.createNode(e);return this.inspector?this.inspector.createNode(r):r}createTextNode(e){const r=this.stage.createTextNode(e);return this.inspector?this.inspector.createTextNode(r):r}destroyNode(e){return this.inspector&&this.inspector.destroyNode(e.id),e.destroy()}createTexture(e,r){return this.stage.txManager.loadTexture(e,r)}createShader(e,r){return this.stage.shManager.loadShader(e,r)}createDynamicShader(e){return this.stage.shManager.loadDynamicShader({effects:e})}createEffect(e,r,n){return{name:n,type:e,props:r}}getNodeById(e){var i;const r=(i=this.stage)==null?void 0:i.root;if(!r)return null;const n=o=>{if(o.id===e)return o;for(const a of o.children){const l=n(a);if(l)return l}return null};return n(r)}toggleFreeze(){throw new Error("Not implemented")}advanceFrame(){throw new Error("Not implemented")}getBufferInfo(){return this.stage.renderer.getBufferInfo()}rerender(){throw new Error("Not implemented")}}let dt,On;function Mc(s={},t="app"){return dt=new Ic(s,t),On=dt.createShader.bind(dt),dt}var Pc={BASE_URL:"/vue-demo-app/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};function Lc(){return!!(Pc&&!1)}const Fc=Lc()||!1,Le={debug:!1,animationsEnabled:!0,animationSettings:{duration:250,easing:"ease-in-out"},fontSettings:{fontFamily:"Ubuntu",fontSize:100},setActiveElement:()=>{}};function yi(s){return Oc(s)&&s.debug}function pt(s,t,...e){Fc&&(Le.debug||yi(t)||yi(e[0]))&&console.log(s,t,...e)}const Bt=s=>s instanceof Function;function Oc(s){return typeof s=="object"}function Cs(s){return Array.isArray(s)}function _i(s){return typeof s=="string"}function Bc(s){return typeof s=="number"}function Nc(s){return"destroy"in s&&typeof s.destroy=="function"}function Qs(s){return s instanceof gt}function Dc(s,t){for(const e of t)if(e in s)return!0;return!1}function Mo(s,t={}){if(Cs(s))s.forEach(e=>{Mo(e,t)});else if(s)for(const e in s)t[e]===void 0&&(t[e]=s[e]);return t}class vi extends Array{constructor(e,r={}){var t=(...Nd)=>(super(...Nd),u(this,"onChange"),this);return Cs(r)?t(...r):_i(r)?t(r):t(...Object.entries(r).filter(([n,i])=>i).map(([n])=>n)),this.onChange=e,this}has(e){return this.indexOf(e)>=0}is(e){return this.indexOf(e)>=0}add(e){this.has(e)||(this.push(e),this.onChange())}toggle(e,r){r===!0?this.add(e):r===!1?this.remove(e):this.has(e)?this.remove(e):this.add(e)}merge(e){if(Cs(e))this.length=0,this.push(...e);else if(_i(e))this.length=0,this.push(e);else for(const r in e)this.toggle(r,e[r]);return this}remove(e){const r=this.indexOf(e);r>=0&&(this.splice(r,1),this.onChange())}}const ft={Element:"element",TextNode:"textNode",Text:"text"};function kc(s){const t=[];let e=!1,r=0;for(let C=0;C<s.children.length;C++){const F=s.children[C];if(F._type!==ft.Text&&F.flexItem!==!1){if(F._type===ft.TextNode&&F.text&&!(F.width||F.height))return!1;F.flexOrder!==void 0&&(e=!0),F.flexGrow!==void 0&&(r+=F.flexGrow),t.push(F)}}e&&t.sort((C,F)=>(C.flexOrder||0)-(F.flexOrder||0));const n=t.length,o=(s.flexDirection||"row")==="row",a=o?"width":"height",l=o?"height":"width",c=o?"marginLeft":"marginTop",f=o?"marginRight":"marginBottom",h=o?"x":"y",d=o?"y":"x",g=s[a]||0,x=s[l]||0,y=s.gap||0,v=s.justifyContent||"flexStart",T=s.alignItems;if(r){const C=t.reduce((I,O)=>I+(O.flexGrow?0:O[a]||0)+(O[c]||0)+(O[f]||0),0),F=(g-C-y*(n-1))/r;for(let I=0;I<t.length;I++){const O=t[I];O.flexGrow!==void 0&&O.flexGrow>0&&(O[a]=O.flexGrow*F)}}let w=0;["center","spaceBetween","spaceEvenly"].includes(v)&&(w=t.reduce((C,F)=>C+(F[a]||0)+(F[c]||0)+(F[f]||0),0));const E=x&&T?C=>{T==="flexStart"?C[d]=0:T==="center"?C[d]=(x-(C[l]||0))/2:T==="flexEnd"&&(C[d]=x-(C[l]||0))}:C=>C;if(v==="flexStart"){let C=0;for(let F=0;F<t.length;F++){const I=t[F];I[h]=C+(I[c]||0),C+=(I[a]||0)+y+(I[c]||0)+(I[f]||0),E(I)}if(s.flexBoundary!=="fixed"){const F=C-y;if(F!==s[a])return s[a]=F,!0}}else if(v==="flexEnd"){let C=g;for(let F=n-1;F>=0;F--){const I=t[F];I[h]=C-(I[a]||0)-(I[f]||0),C-=(I[a]||0)+y+(I[c]||0)+(I[f]||0),E(I)}if(s.flexBoundary!=="fixed"){const F=C-y;if(F!==s[a])return s[a]=F,!0}}else if(v==="center"){let C=(g-(w+y*(n-1)))/2;for(let F=0;F<t.length;F++){const I=t[F];I[h]=C+(I[c]||0),C+=(I[a]||0)+y+(I[c]||0)+(I[f]||0),E(I)}}else if(v==="spaceBetween"){const C=(g-w)/(n-1);let F=0;for(let I=0;I<t.length;I++){const O=t[I];O[h]=F+(O[c]||0),F+=(O[a]||0)+C+(O[c]||0)+(O[f]||0),E(O)}}else if(v==="spaceEvenly"){const C=(g-w)/(n+1);let F=C;for(let I=0;I<t.length;I++){const O=t[I];O[h]=F+(O[c]||0),F+=(O[a]||0)+C+(O[c]||0)+(O[f]||0),E(O)}}return!1}const dn={ArrowLeft:"Left",ArrowRight:"Right",ArrowUp:"Up",ArrowDown:"Down",Enter:"Enter",l:"Last"," ":"Space",Backspace:"Back",Escape:"Escape"},Po={Enter:"EnterHold"},Ti=(s,t)=>{for(const[e,r]of Object.entries(s))r!=null&&(Array.isArray(r)?r.forEach(n=>{t[n]=e}):t[r]=e)};let bi;const Uc=s=>{$c(s,bi),bi=s,Le.setActiveElement(s)};let yr=[];const $c=(s,t)=>{var n,i;let e=s;const r=[];for(;e;)(!e.states.has("focus")||e===s)&&(e.states.add("focus"),(n=e.onFocus)==null||n.call(e,s,t),(i=e.onFocusChanged)==null||i.call(e,!0,s,t)),r.push(e),e=e.parent;return yr.forEach(o=>{var a,l;r.includes(o)||(o.states.remove("focus"),(a=o.onBlur)==null||a.call(o,s,t),(l=o.onFocusChanged)==null||l.call(o,!1,s,t))}),yr=r,r},pn=(s,t,e)=>{let r;for(const n of yr){if(r=r||n,t){const o=n[`on${t}`];if((o==null?void 0:o.call(n,s,n,r))===!0)break}else console.log(`Unhandled key event: ${s.key||s.keyCode}`);const i=e?n.onKeyHold:n.onKeyPress;if((i==null?void 0:i.call(n,s,t,n,r))===!0)break}return!1},zc=150,ot={},Hc=(s,t)=>{delete ot[s.key||s.keyCode],pn(s,t,!0)},Gc=(s,t,e)=>{if(t){const r=t.key||t.keyCode,n=Po[r],i=dn[r];n?(ot[r]&&clearTimeout(ot[r]),ot[r]=window.setTimeout(()=>Hc(t,n),s)):pn(t,i,!1)}if(e){const r=e.key||e.keyCode,n=dn[r];ot[r]&&(clearTimeout(ot[r]),delete ot[r],pn(e,n,!1))}},Vc=({userKeyMap:s,keyHoldOptions:t,ownerContext:e=r=>{r()}}={})=>{s&&Ti(s,dn),t!=null&&t.userKeyHoldMap&&Ti(t.userKeyHoldMap,Po);const r=(t==null?void 0:t.holdThreshold)||zc,n=Gc.bind(null,r),i=a=>e(()=>{n(a,void 0)}),o=a=>e(()=>{n(void 0,a)});return document.addEventListener("keyup",o),document.addEventListener("keydown",i),{cleanup:()=>{document.removeEventListener("keydown",i),document.removeEventListener("keyup",o);for(const[a,l]of Object.entries(ot))l&&clearTimeout(l)},focusPath:()=>yr}},Zs=new Set;let Wr=!0;function wi(s){const t=[];let e=0;for(const[r,n]of Object.entries(s))t.push({name:`effect${e}`,type:r,props:n}),e++;return On("DynamicShader",{effects:t})}function ns(s=""){return{set(t){Bc(t)&&(t={width:t,color:255}),this.effects=this.effects?{...this.effects||{},[`border${s}`]:t}:{[`border${s}`]:t}},get(){var t;return(t=this.effects)==null?void 0:t[`border${s}`]}}}const Wc=["alpha","color","colorTop","colorRight","colorLeft","colorBottom","colorTl","colorTr","colorBl","colorBr","height","fontSize","lineHeight","mount","mountX","mountY","pivot","pivotX","pivotY","rotation","scale","scaleX","scaleY","width","worldX","worldY","x","y","zIndex","zIndexLocked"],Xc=["absX","absY","autosize","clipping","contain","data","fontFamily","fontStretch","fontStyle","fontWeight","letterSpacing","maxLines","offsetY","overflowSuffix","rtt","scrollable","scrollY","src","text","textAlign","textBaseline","textOverflow","texture","textureOptions","verticalAlign","wordWrap"];class gt extends Object{constructor(t){super(),this._type=t==="text"?ft.TextNode:ft.Element,this.rendered=!1,this.lng={},this.children=[]}get effects(){return this._effects}set effects(t){this._effects=t,this.rendered&&(this.shader=wi(t))}get parent(){return this._parent}set parent(t){this._parent=t,this.rendered&&(this.lng.parent=(t==null?void 0:t.lng)??null)}insertChild(t,e){if(t.parent=this,e){this.removeChild(t);const r=this.children.indexOf(e);if(r>=0){this.children.splice(r,0,t);return}}this.children.push(t)}removeChild(t){const e=this.children.indexOf(t);e>=0&&this.children.splice(e,1)}get selectedNode(){const t=this.selected||0;for(let e=t;e<this.children.length;e++){const r=this.children[e];if(Qs(r))return this.selected=e,r}}set shader(t){let e=t;Cs(t)&&(e=On(...t)),this.lng.shader=e}_sendToLightningAnimatable(t,e){if(this.transition&&this.rendered&&Le.animationsEnabled&&(this.transition===!0||this.transition[t])){const r=this.transition===!0||this.transition[t]===!0?void 0:this.transition[t],n=this.animate({[t]:e},r);return Bt(this.onAnimationStarted)&&n.once("animating",i=>{var o;(o=this.onAnimationStarted)==null||o.call(this,i,t,e)}),Bt(this.onAnimationFinished)&&n.once("stopped",i=>{var o;(o=this.onAnimationFinished)==null||o.call(this,i,t,e)}),n.start()}this.lng[t]=e}animate(t,e){return z(this.rendered,"Node must be rendered before animating"),this.lng.animate(t,e||this.animationSettings)}chain(t,e){return this._animationRunning&&(this._animationQueue=[],this._animationRunning=!1),e?this._animationQueueSettings=e:this._animationQueueSettings||(this._animationQueueSettings=e||this.animationSettings),e=e||this._animationQueueSettings,this._animationQueue=this._animationQueue||[],this._animationQueue.push({props:t,animationSettings:e}),this}async start(){let t=this._animationQueue.shift();for(;t;)this._animationRunning=!0,await this.animate(t.props,t.animationSettings).start().waitUntilStopped(),t=this._animationQueue.shift();this._animationRunning=!1,this._animationQueueSettings=void 0}setFocus(){if(!this.skipFocus)if(this.rendered){if(this.forwardFocus!==void 0)if(Bt(this.forwardFocus)){if(this.forwardFocus.call(this,this)!==!1)return}else{const t=typeof this.forwardFocus=="number"?this.forwardFocus:null,e=this.children;if(t!==null&&t<e.length){const r=e[t];Qs(r)&&r.setFocus();return}}queueMicrotask(()=>Uc(this))}else this._autofocus=!0}isTextNode(){return this._type===ft.TextNode}_layoutOnLoad(){this.lng.on("loaded",(t,e)=>{const{dimensions:r}=e;this.parent.updateLayout(this,r)})}getText(){let t="";for(let e=0;e<this.children.length;e++)t+=this.children[e].text;return t}destroy(){this._queueDelete&&Nc(this.lng)&&(this.lng.destroy(),this.parent&&this.parent.requiresLayout()&&this.parent.updateLayout())}set onEvents(t){this._events=t}get onEvents(){return this._events}set style(t){Cs(t)?this._style=Mo(t):this._style=t;for(const e in this._style)this[e]===void 0&&(this[e]=this._style[e])}get style(){return this._style}get hasChildren(){return this.children.length>0}getChildById(t){return this.children.find(e=>e.id===t)}searchChildrenById(t){for(let e=0;e<this.children.length;e++){const r=this.children[e];if(Qs(r)){if(r.id===t)return r;const n=r.searchChildrenById(t);if(n)return n}}}set states(t){this._states=this._states?this._states.merge(t):new vi(this._stateChanged.bind(this),t),this.rendered&&this._stateChanged()}get states(){return this._states=this._states||new vi(this._stateChanged.bind(this)),this._states}get animationSettings(){return this._animationSettings||Le.animationSettings}set animationSettings(t){this._animationSettings=t}set hidden(t){this.alpha=t?0:1}get hidden(){return this.alpha===0}set autofocus(t){this._autofocus=!!t,this._autofocus&&this.setFocus()}get autofocus(){return this._autofocus}requiresLayout(){return this.display==="flex"||this.onBeforeLayout}set updateLayoutOn(t){this.updateLayout()}get updateLayoutOn(){return null}updateLayout(t,e){var r,n;if(this.hasChildren){pt("Layout: ",this);let i=!1;Bt(this.onBeforeLayout)&&(i=this.onBeforeLayout.call(this,this,t,e)||!1),this.display==="flex"?(kc(this)||i)&&((r=this.parent)==null||r.updateLayout()):i&&((n=this.parent)==null||n.updateLayout()),Bt(this.onLayout)&&this.onLayout.call(this,this,t,e)}}_stateChanged(){if(pt("State Changed: ",this,this.states),this.forwardStates){const e=this.states.slice();this.children.forEach(r=>{r.states=e})}const t=this.states;if(this._undoStyles||this.style&&Dc(this.style,t)){this._undoStyles=this._undoStyles||[];const e={};this._undoStyles.forEach(n=>{e[n]=this.style[n]});const r=t.reduce((n,i)=>{const o=this.style[i];return o&&(n={...n,...o}),n},{});this._undoStyles=Object.keys(r),r.transition!==void 0&&(this.transition=r.transition),Object.assign(this,e,r)}}render(){var n;const t=this,e=this.parent;if(!e){console.warn("Parent not set - no node created for: ",this);return}if(!e.rendered){console.warn("Parent not rendered yet: ",this);return}if(e.requiresLayout()&&!Zs.has(e)&&(Zs.add(e),Wr&&(Wr=!1,queueMicrotask(()=>{Wr=!0;const i=[...Zs];Zs.clear();for(let o=i.length-1;o>=0;o--)i[o].updateLayout()}))),this.rendered)return;this._states&&this._stateChanged();const r=t.lng;if(r.x=r.x||0,r.y=r.y||0,e.rendered&&(r.parent=e.lng),t._effects&&(r.shader=wi(t._effects)),t.isTextNode()){const i=r;if(Le.fontSettings)for(const o in Le.fontSettings)i[o]===void 0&&(i[o]=Le.fontSettings[o]);i.text=i.text||t.getText(),i.textAlign&&!i.contain&&console.warn("Text align requires contain: ",t.getText()),i.contain&&(i.width||(i.width=(e.width||0)-i.x-(i.marginRight||0)),i.contain==="both"&&!i.height&&!i.maxLines?i.height=(e.height||0)-i.y-(i.marginBottom||0):i.maxLines===1&&(i.height=i.height||i.lineHeight||i.fontSize)),pt("Rendering: ",this,r),t.lng=dt.createTextNode(r),e.requiresLayout()&&(!r.width||!r.height)&&t._layoutOnLoad()}else r.texture||(isNaN(r.width)&&(r.width=(e.width||0)-r.x),isNaN(r.height)&&(r.height=(e.height||0)-r.y),r.rtt&&!r.color&&(r.color=4294967295),!r.color&&!r.src&&(r.color=0)),pt("Rendering: ",this,r),t.lng=dt.createNode(r);if(t.rendered=!0,t.autosize&&e.requiresLayout()&&t._layoutOnLoad(),t.onFail&&t.lng.on("failed",t.onFail),t.onLoad&&t.lng.on("loaded",t.onLoad),Bt(this.onCreate)&&this.onCreate.call(this,t),t.onEvents&&t.onEvents.forEach(([i,o])=>{t.lng.on(i,(a,l)=>o(t,l))}),(n=t.lng)!=null&&n.div&&(t.lng.div.element=t),t._type===ft.Element)for(let i=0;i<t.children.length;i++){const o=t.children[i];z(o,"Child is undefined"),Qs(o)?o.render():o.text&&o._type===ft.Text&&console.warn("TextNode outside of <Text>: ",o)}t._autofocus&&t.setFocus()}}for(const s of Wc)Object.defineProperty(gt.prototype,s,{get(){return this.lng[s]},set(t){this._sendToLightningAnimatable(s,t)}});for(const s of Xc)Object.defineProperty(gt.prototype,s,{get(){return this.lng[s]},set(t){this.lng[s]=t}});Object.defineProperties(gt.prototype,{borderRadius:{set(s){this.effects=this.effects?{...this.effects,radius:{radius:s}}:{radius:{radius:s}}},get(){var s,t;return(t=(s=this.effects)==null?void 0:s.radius)==null?void 0:t.radius}},border:ns(),borderLeft:ns("Left"),borderRight:ns("Right"),borderTop:ns("Top"),borderBottom:ns("Bottom"),linearGradient:{set(s={}){this.effects=this.effects?{...this.effects,linearGradient:s}:{linearGradient:s}},get(){var s;return(s=this.effects)==null?void 0:s.linearGradient}},radialGradient:{set(s={}){this.effects=this.effects?{...this.effects,radialGradient:s}:{radialGradient:s}},get(){var s;return(s=this.effects)==null?void 0:s.radialGradient}},radialProgress:{set(s={}){this.effects=this.effects?{...this.effects,radialProgressGradient:s}:{radialProgressGradient:s}},get(){var s;return(s=this.effects)==null?void 0:s.radialProgress}}});/**
* @vue/shared v3.4.36
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Lo(s,t){const e=new Set(s.split(","));return r=>e.has(r)}const me={},Xt=[],ze=()=>{},Yc=()=>!1,Bn=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&(s.charCodeAt(2)>122||s.charCodeAt(2)<97),Fo=s=>s.startsWith("onUpdate:"),Ie=Object.assign,Nn=(s,t)=>{const e=s.indexOf(t);e>-1&&s.splice(e,1)},jc=Object.prototype.hasOwnProperty,ae=(s,t)=>jc.call(s,t),J=Array.isArray,Yt=s=>Er(s)==="[object Map]",Oo=s=>Er(s)==="[object Set]",se=s=>typeof s=="function",Fe=s=>typeof s=="string",Pt=s=>typeof s=="symbol",xe=s=>s!==null&&typeof s=="object",Bo=s=>(xe(s)||se(s))&&se(s.then)&&se(s.catch),No=Object.prototype.toString,Er=s=>No.call(s),Kc=s=>Er(s).slice(8,-1),Do=s=>Er(s)==="[object Object]",Dn=s=>Fe(s)&&s!=="NaN"&&s[0]!=="-"&&""+parseInt(s,10)===s,ps=Lo(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Cr=s=>{const t=Object.create(null);return e=>t[e]||(t[e]=s(e))},qc=/-(\w)/g,qt=Cr(s=>s.replace(qc,(t,e)=>e?e.toUpperCase():"")),Qc=/\B([A-Z])/g,Ns=Cr(s=>s.replace(Qc,"-$1").toLowerCase()),Zc=Cr(s=>s.charAt(0).toUpperCase()+s.slice(1)),Xr=Cr(s=>s?`on${Zc(s)}`:""),yt=(s,t)=>!Object.is(s,t),Yr=(s,...t)=>{for(let e=0;e<s.length;e++)s[e](...t)},ko=(s,t,e,r=!1)=>{Object.defineProperty(s,t,{configurable:!0,enumerable:!1,writable:r,value:e})},Jc=s=>{const t=parseFloat(s);return isNaN(t)?s:t};let Ri;const Uo=()=>Ri||(Ri=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ds(s){if(J(s)){const t={};for(let e=0;e<s.length;e++){const r=s[e],n=Fe(r)?ru(r):Ds(r);if(n)for(const i in n)t[i]=n[i]}return t}else if(Fe(s)||xe(s))return s}const eu=/;(?![^(]*\))/g,tu=/:([^]+)/,su=/\/\*[^]*?\*\//g;function ru(s){const t={};return s.replace(su,"").split(eu).forEach(e=>{if(e){const r=e.split(tu);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function kn(s){let t="";if(Fe(s))t=s;else if(J(s))for(let e=0;e<s.length;e++){const r=kn(s[e]);r&&(t+=r+" ")}else if(xe(s))for(const e in s)s[e]&&(t+=e+" ");return t.trim()}const $o=s=>!!(s&&s.__v_isRef===!0),nu=s=>Fe(s)?s:s==null?"":J(s)||xe(s)&&(s.toString===No||!se(s.toString))?$o(s)?nu(s.value):JSON.stringify(s,zo,2):String(s),zo=(s,t)=>$o(t)?zo(s,t.value):Yt(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[r,n],i)=>(e[jr(r,i)+" =>"]=n,e),{})}:Oo(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>jr(e))}:Pt(t)?jr(t):xe(t)&&!J(t)&&!Do(t)?String(t):t,jr=(s,t="")=>{var e;return Pt(s)?`Symbol(${(e=s.description)!=null?e:t})`:s};/**
* @vue/reactivity v3.4.36
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ge;class iu{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Ge,!t&&Ge&&(this.index=(Ge.scopes||(Ge.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const e=Ge;try{return Ge=this,t()}finally{Ge=e}}}on(){Ge=this}off(){Ge=this.parent}stop(t){if(this._active){let e,r;for(e=0,r=this.effects.length;e<r;e++)this.effects[e].stop();for(e=0,r=this.cleanups.length;e<r;e++)this.cleanups[e]();if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0,this._active=!1}}}function ou(s,t=Ge){t&&t.active&&t.effects.push(s)}function au(){return Ge}let At;class Un{constructor(t,e,r,n){this.fn=t,this.trigger=e,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,ou(this,n)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,bt();for(let t=0;t<this._depsLength;t++){const e=this.deps[t];if(e.computed&&(lu(e.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),wt()}return this._dirtyLevel>=4}set dirty(t){this._dirtyLevel=t?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=mt,e=At;try{return mt=!0,At=this,this._runnings++,Si(this),this.fn()}finally{Ei(this),this._runnings--,At=e,mt=t}}stop(){this.active&&(Si(this),Ei(this),this.onStop&&this.onStop(),this.active=!1)}}function lu(s){return s.value}function Si(s){s._trackId++,s._depsLength=0}function Ei(s){if(s.deps.length>s._depsLength){for(let t=s._depsLength;t<s.deps.length;t++)Ho(s.deps[t],s);s.deps.length=s._depsLength}}function Ho(s,t){const e=s.get(t);e!==void 0&&t._trackId!==e&&(s.delete(t),s.size===0&&s.cleanup())}let mt=!0,gn=0;const Go=[];function bt(){Go.push(mt),mt=!1}function wt(){const s=Go.pop();mt=s===void 0?!0:s}function $n(){gn++}function zn(){for(gn--;!gn&&mn.length;)mn.shift()()}function Vo(s,t,e){if(t.get(s)!==s._trackId){t.set(s,s._trackId);const r=s.deps[s._depsLength];r!==t?(r&&Ho(r,s),s.deps[s._depsLength++]=t):s._depsLength++}}const mn=[];function Wo(s,t,e){$n();for(const r of s.keys()){let n;r._dirtyLevel<t&&(n??(n=s.get(r)===r._trackId))&&(r._shouldSchedule||(r._shouldSchedule=r._dirtyLevel===0),r._dirtyLevel=t),r._shouldSchedule&&(n??(n=s.get(r)===r._trackId))&&(r.trigger(),(!r._runnings||r.allowRecurse)&&r._dirtyLevel!==2&&(r._shouldSchedule=!1,r.scheduler&&mn.push(r.scheduler)))}zn()}const Xo=(s,t)=>{const e=new Map;return e.cleanup=s,e.computed=t,e},xn=new WeakMap,It=Symbol(""),yn=Symbol("");function Ne(s,t,e){if(mt&&At){let r=xn.get(s);r||xn.set(s,r=new Map);let n=r.get(e);n||r.set(e,n=Xo(()=>r.delete(e))),Vo(At,n)}}function st(s,t,e,r,n,i){const o=xn.get(s);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(e==="length"&&J(s)){const l=Number(r);o.forEach((c,f)=>{(f==="length"||!Pt(f)&&f>=l)&&a.push(c)})}else switch(e!==void 0&&a.push(o.get(e)),t){case"add":J(s)?Dn(e)&&a.push(o.get("length")):(a.push(o.get(It)),Yt(s)&&a.push(o.get(yn)));break;case"delete":J(s)||(a.push(o.get(It)),Yt(s)&&a.push(o.get(yn)));break;case"set":Yt(s)&&a.push(o.get(It));break}$n();for(const l of a)l&&Wo(l,4);zn()}const cu=Lo("__proto__,__v_isRef,__isVue"),Yo=new Set(Object.getOwnPropertyNames(Symbol).filter(s=>s!=="arguments"&&s!=="caller").map(s=>Symbol[s]).filter(Pt)),Ci=uu();function uu(){const s={};return["includes","indexOf","lastIndexOf"].forEach(t=>{s[t]=function(...e){const r=ue(this);for(let i=0,o=this.length;i<o;i++)Ne(r,"get",i+"");const n=r[t](...e);return n===-1||n===!1?r[t](...e.map(ue)):n}}),["push","pop","shift","unshift","splice"].forEach(t=>{s[t]=function(...e){bt(),$n();const r=ue(this)[t].apply(this,e);return zn(),wt(),r}}),s}function fu(s){Pt(s)||(s=String(s));const t=ue(this);return Ne(t,"has",s),t.hasOwnProperty(s)}class jo{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,r){const n=this._isReadonly,i=this._isShallow;if(e==="__v_isReactive")return!n;if(e==="__v_isReadonly")return n;if(e==="__v_isShallow")return i;if(e==="__v_raw")return r===(n?i?Ru:Zo:i?Qo:qo).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const o=J(t);if(!n){if(o&&ae(Ci,e))return Reflect.get(Ci,e,r);if(e==="hasOwnProperty")return fu}const a=Reflect.get(t,e,r);return(Pt(e)?Yo.has(e):cu(e))||(n||Ne(t,"get",e),i)?a:De(a)?o&&Dn(e)?a:a.value:xe(a)?n?ea(a):Ir(a):a}}class Ko extends jo{constructor(t=!1){super(!1,t)}set(t,e,r,n){let i=t[e];if(!this._isShallow){const l=Mt(i);if(!Qt(r)&&!Mt(r)&&(i=ue(i),r=ue(r)),!J(t)&&De(i)&&!De(r))return l?!1:(i.value=r,!0)}const o=J(t)&&Dn(e)?Number(e)<t.length:ae(t,e),a=Reflect.set(t,e,r,n);return t===ue(n)&&(o?yt(r,i)&&st(t,"set",e,r):st(t,"add",e,r)),a}deleteProperty(t,e){const r=ae(t,e);t[e];const n=Reflect.deleteProperty(t,e);return n&&r&&st(t,"delete",e,void 0),n}has(t,e){const r=Reflect.has(t,e);return(!Pt(e)||!Yo.has(e))&&Ne(t,"has",e),r}ownKeys(t){return Ne(t,"iterate",J(t)?"length":It),Reflect.ownKeys(t)}}class hu extends jo{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const du=new Ko,pu=new hu,gu=new Ko(!0);const Hn=s=>s,Ar=s=>Reflect.getPrototypeOf(s);function Js(s,t,e=!1,r=!1){s=s.__v_raw;const n=ue(s),i=ue(t);e||(yt(t,i)&&Ne(n,"get",t),Ne(n,"get",i));const{has:o}=Ar(n),a=r?Hn:e?Wn:As;if(o.call(n,t))return a(s.get(t));if(o.call(n,i))return a(s.get(i));s!==n&&s.get(t)}function er(s,t=!1){const e=this.__v_raw,r=ue(e),n=ue(s);return t||(yt(s,n)&&Ne(r,"has",s),Ne(r,"has",n)),s===n?e.has(s):e.has(s)||e.has(n)}function tr(s,t=!1){return s=s.__v_raw,!t&&Ne(ue(s),"iterate",It),Reflect.get(s,"size",s)}function Ai(s,t=!1){!t&&!Qt(s)&&!Mt(s)&&(s=ue(s));const e=ue(this);return Ar(e).has.call(e,s)||(e.add(s),st(e,"add",s,s)),this}function Ii(s,t,e=!1){!e&&!Qt(t)&&!Mt(t)&&(t=ue(t));const r=ue(this),{has:n,get:i}=Ar(r);let o=n.call(r,s);o||(s=ue(s),o=n.call(r,s));const a=i.call(r,s);return r.set(s,t),o?yt(t,a)&&st(r,"set",s,t):st(r,"add",s,t),this}function Mi(s){const t=ue(this),{has:e,get:r}=Ar(t);let n=e.call(t,s);n||(s=ue(s),n=e.call(t,s)),r&&r.call(t,s);const i=t.delete(s);return n&&st(t,"delete",s,void 0),i}function Pi(){const s=ue(this),t=s.size!==0,e=s.clear();return t&&st(s,"clear",void 0,void 0),e}function sr(s,t){return function(r,n){const i=this,o=i.__v_raw,a=ue(o),l=t?Hn:s?Wn:As;return!s&&Ne(a,"iterate",It),o.forEach((c,f)=>r.call(n,l(c),l(f),i))}}function rr(s,t,e){return function(...r){const n=this.__v_raw,i=ue(n),o=Yt(i),a=s==="entries"||s===Symbol.iterator&&o,l=s==="keys"&&o,c=n[s](...r),f=e?Hn:t?Wn:As;return!t&&Ne(i,"iterate",l?yn:It),{next(){const{value:h,done:d}=c.next();return d?{value:h,done:d}:{value:a?[f(h[0]),f(h[1])]:f(h),done:d}},[Symbol.iterator](){return this}}}}function nt(s){return function(...t){return s==="delete"?!1:s==="clear"?void 0:this}}function mu(){const s={get(i){return Js(this,i)},get size(){return tr(this)},has:er,add:Ai,set:Ii,delete:Mi,clear:Pi,forEach:sr(!1,!1)},t={get(i){return Js(this,i,!1,!0)},get size(){return tr(this)},has:er,add(i){return Ai.call(this,i,!0)},set(i,o){return Ii.call(this,i,o,!0)},delete:Mi,clear:Pi,forEach:sr(!1,!0)},e={get(i){return Js(this,i,!0)},get size(){return tr(this,!0)},has(i){return er.call(this,i,!0)},add:nt("add"),set:nt("set"),delete:nt("delete"),clear:nt("clear"),forEach:sr(!0,!1)},r={get(i){return Js(this,i,!0,!0)},get size(){return tr(this,!0)},has(i){return er.call(this,i,!0)},add:nt("add"),set:nt("set"),delete:nt("delete"),clear:nt("clear"),forEach:sr(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{s[i]=rr(i,!1,!1),e[i]=rr(i,!0,!1),t[i]=rr(i,!1,!0),r[i]=rr(i,!0,!0)}),[s,e,t,r]}const[xu,yu,_u,vu]=mu();function Gn(s,t){const e=t?s?vu:_u:s?yu:xu;return(r,n,i)=>n==="__v_isReactive"?!s:n==="__v_isReadonly"?s:n==="__v_raw"?r:Reflect.get(ae(e,n)&&n in r?e:r,n,i)}const Tu={get:Gn(!1,!1)},bu={get:Gn(!1,!0)},wu={get:Gn(!0,!1)};const qo=new WeakMap,Qo=new WeakMap,Zo=new WeakMap,Ru=new WeakMap;function Su(s){switch(s){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Eu(s){return s.__v_skip||!Object.isExtensible(s)?0:Su(Kc(s))}function Ir(s){return Mt(s)?s:Vn(s,!1,du,Tu,qo)}function Jo(s){return Vn(s,!1,gu,bu,Qo)}function ea(s){return Vn(s,!0,pu,wu,Zo)}function Vn(s,t,e,r,n){if(!xe(s)||s.__v_raw&&!(t&&s.__v_isReactive))return s;const i=n.get(s);if(i)return i;const o=Eu(s);if(o===0)return s;const a=new Proxy(s,o===2?r:e);return n.set(s,a),a}function gs(s){return Mt(s)?gs(s.__v_raw):!!(s&&s.__v_isReactive)}function Mt(s){return!!(s&&s.__v_isReadonly)}function Qt(s){return!!(s&&s.__v_isShallow)}function ta(s){return s?!!s.__v_raw:!1}function ue(s){const t=s&&s.__v_raw;return t?ue(t):s}function sa(s){return Object.isExtensible(s)&&ko(s,"__v_skip",!0),s}const As=s=>xe(s)?Ir(s):s,Wn=s=>xe(s)?ea(s):s;class ra{constructor(t,e,r,n){this.getter=t,this._setter=e,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Un(()=>t(this._value),()=>ur(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!n,this.__v_isReadonly=r}get value(){const t=ue(this);return(!t._cacheable||t.effect.dirty)&&yt(t._value,t._value=t.effect.run())&&ur(t,4),ia(t),t.effect._dirtyLevel>=2&&ur(t,2),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function na(s,t,e=!1){let r,n;const i=se(s);return i?(r=s,n=ze):(r=s.get,n=s.set),new ra(r,n,i||!n,e)}function ia(s){var t;mt&&At&&(s=ue(s),Vo(At,(t=s.dep)!=null?t:s.dep=Xo(()=>s.dep=void 0,s instanceof ra?s:void 0)))}function ur(s,t=4,e,r){s=ue(s);const n=s.dep;n&&Wo(n,t)}function De(s){return!!(s&&s.__v_isRef===!0)}function tt(s){return oa(s,!1)}function Cu(s){return oa(s,!0)}function oa(s,t){return De(s)?s:new Au(s,t)}class Au{constructor(t,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:ue(t),this._value=e?t:As(t)}get value(){return ia(this),this._value}set value(t){const e=this.__v_isShallow||Qt(t)||Mt(t);t=e?t:ue(t),yt(t,this._rawValue)&&(this._rawValue,this._rawValue=t,this._value=e?t:As(t),ur(this,4))}}function ve(s){return De(s)?s.value:s}const Iu={get:(s,t,e)=>ve(Reflect.get(s,t,e)),set:(s,t,e,r)=>{const n=s[t];return De(n)&&!De(e)?(n.value=e,!0):Reflect.set(s,t,e,r)}};function aa(s){return gs(s)?s:new Proxy(s,Iu)}const la=tt(void 0),Mu=s=>la.value=s;Le.setActiveElement=Mu;/**
* @vue/runtime-core v3.4.36
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function xt(s,t,e,r){try{return r?s(...r):s()}catch(n){Mr(n,t,e)}}function Ze(s,t,e,r){if(se(s)){const n=xt(s,t,e,r);return n&&Bo(n)&&n.catch(i=>{Mr(i,t,e)}),n}if(J(s)){const n=[];for(let i=0;i<s.length;i++)n.push(Ze(s[i],t,e,r));return n}}function Mr(s,t,e,r=!0){const n=t?t.vnode:null;if(t){let i=t.parent;const o=t.proxy,a=`https://vuejs.org/error-reference/#runtime-${e}`;for(;i;){const c=i.ec;if(c){for(let f=0;f<c.length;f++)if(c[f](s,o,a)===!1)return}i=i.parent}const l=t.appContext.config.errorHandler;if(l){bt(),xt(l,null,10,[s,o,a]),wt();return}}Pu(s,e,n,r)}function Pu(s,t,e,r=!0){console.error(s)}let Is=!1,_n=!1;const Ce=[];let Qe=0;const jt=[];let at=null,Et=0;const ca=Promise.resolve();let Xn=null;function ua(s){const t=Xn||ca;return s?t.then(this?s.bind(this):s):t}function Lu(s){let t=Qe+1,e=Ce.length;for(;t<e;){const r=t+e>>>1,n=Ce[r],i=Ms(n);i<s||i===s&&n.pre?t=r+1:e=r}return t}function Yn(s){(!Ce.length||!Ce.includes(s,Is&&s.allowRecurse?Qe+1:Qe))&&(s.id==null?Ce.push(s):Ce.splice(Lu(s.id),0,s),fa())}function fa(){!Is&&!_n&&(_n=!0,Xn=ca.then(da))}function Fu(s){const t=Ce.indexOf(s);t>Qe&&Ce.splice(t,1)}function Ou(s){J(s)?jt.push(...s):(!at||!at.includes(s,s.allowRecurse?Et+1:Et))&&jt.push(s),fa()}function Li(s,t,e=Is?Qe+1:0){for(;e<Ce.length;e++){const r=Ce[e];if(r&&r.pre){if(s&&r.id!==s.uid)continue;Ce.splice(e,1),e--,r()}}}function ha(s){if(jt.length){const t=[...new Set(jt)].sort((e,r)=>Ms(e)-Ms(r));if(jt.length=0,at){at.push(...t);return}for(at=t,Et=0;Et<at.length;Et++){const e=at[Et];e.active!==!1&&e()}at=null,Et=0}}const Ms=s=>s.id==null?1/0:s.id,Bu=(s,t)=>{const e=Ms(s)-Ms(t);if(e===0){if(s.pre&&!t.pre)return-1;if(t.pre&&!s.pre)return 1}return e};function da(s){_n=!1,Is=!0,Ce.sort(Bu);try{for(Qe=0;Qe<Ce.length;Qe++){const t=Ce[Qe];t&&t.active!==!1&&xt(t,t.i,t.i?15:14)}}finally{Qe=0,Ce.length=0,ha(),Is=!1,Xn=null,(Ce.length||jt.length)&&da()}}let Ee=null,pa=null;function _r(s){const t=Ee;return Ee=s,pa=s&&s.type.__scopeId||null,t}function fs(s,t=Ee,e){if(!t||s._n)return s;const r=(...n)=>{r._d&&$i(-1);const i=_r(t);let o;try{o=s(...n)}finally{_r(i),r._d&&$i(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Id(s,t){if(Ee===null)return s;const e=Nr(Ee),r=s.dirs||(s.dirs=[]);for(let n=0;n<t.length;n++){let[i,o,a,l=me]=t[n];i&&(se(i)&&(i={mounted:i,updated:i}),i.deep&&ht(o),r.push({dir:i,instance:e,value:o,oldValue:void 0,arg:a,modifiers:l}))}return s}function Rt(s,t,e,r){const n=s.dirs,i=t&&t.dirs;for(let o=0;o<n.length;o++){const a=n[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(bt(),Ze(l,e,8,[s.el,a,s,t]),wt())}}function ga(s,t){s.shapeFlag&6&&s.component?ga(s.component.subTree,t):s.shapeFlag&128?(s.ssContent.transition=t.clone(s.ssContent),s.ssFallback.transition=t.clone(s.ssFallback)):s.transition=t}/*! #__NO_SIDE_EFFECTS__ */function Lt(s,t){return se(s)?Ie({name:s.name},t,{setup:s}):s}const ms=s=>!!s.type.__asyncLoader,ma=s=>s.type.__isKeepAlive;function Nu(s,t){xa(s,"a",t)}function Du(s,t){xa(s,"da",t)}function xa(s,t,e=Ae){const r=s.__wdc||(s.__wdc=()=>{let n=e;for(;n;){if(n.isDeactivated)return;n=n.parent}return s()});if(Pr(t,r,e),e){let n=e.parent;for(;n&&n.parent;)ma(n.parent.vnode)&&ku(r,t,e,n),n=n.parent}}function ku(s,t,e,r){const n=Pr(t,s,r,!0);jn(()=>{Nn(r[t],n)},e)}function Pr(s,t,e=Ae,r=!1){if(e){const n=e[s]||(e[s]=[]),i=t.__weh||(t.__weh=(...o)=>{bt();const a=Us(e),l=Ze(t,e,s,o);return a(),wt(),l});return r?n.unshift(i):n.push(i),i}}const rt=s=>(t,e=Ae)=>{(!Br||s==="sp")&&Pr(s,(...r)=>t(...r),e)},Uu=rt("bm"),$u=rt("m"),zu=rt("bu"),Hu=rt("u"),Gu=rt("bum"),jn=rt("um"),Vu=rt("sp"),Wu=rt("rtg"),Xu=rt("rtc");function Yu(s,t=Ae){Pr("ec",s,t)}const ju=Symbol.for("v-ndc");function Md(s,t,e,r){let n;const i=e;if(J(s)||Fe(s)){n=new Array(s.length);for(let o=0,a=s.length;o<a;o++)n[o]=t(s[o],o,void 0,i)}else if(typeof s=="number"){n=new Array(s);for(let o=0;o<s;o++)n[o]=t(o+1,o,void 0,i)}else if(xe(s))if(s[Symbol.iterator])n=Array.from(s,(o,a)=>t(o,a,void 0,i));else{const o=Object.keys(s);n=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];n[a]=t(s[c],c,a,i)}}else n=[];return n}function ya(s,t,e={},r,n){if(Ee.isCE||Ee.parent&&ms(Ee.parent)&&Ee.parent.isCE)return be("slot",e,r);let i=s[t];i&&i._c&&(i._d=!1),Ft();const o=i&&_a(i(e)),a=Na($e,{key:(e.key||o&&o.key||`_${t}`)+(!o&&r?"_fb":"")},o||[],o&&s._===1?64:-2);return a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),i&&i._c&&(i._d=!0),a}function _a(s){return s.some(t=>Tr(t)?!(t.type===_t||t.type===$e&&!_a(t.children)):!0)?s:null}const vn=s=>s?ka(s)?Nr(s):vn(s.parent):null,xs=Ie(Object.create(null),{$:s=>s,$el:s=>s.vnode.el,$data:s=>s.data,$props:s=>s.props,$attrs:s=>s.attrs,$slots:s=>s.slots,$refs:s=>s.refs,$parent:s=>vn(s.parent),$root:s=>vn(s.root),$emit:s=>s.emit,$options:s=>Kn(s),$forceUpdate:s=>s.f||(s.f=()=>{s.effect.dirty=!0,Yn(s.update)}),$nextTick:s=>s.n||(s.n=ua.bind(s.proxy)),$watch:s=>vf.bind(s)}),Kr=(s,t)=>s!==me&&!s.__isScriptSetup&&ae(s,t),Ku={get({_:s},t){if(t==="__v_skip")return!0;const{ctx:e,setupState:r,data:n,props:i,accessCache:o,type:a,appContext:l}=s;let c;if(t[0]!=="$"){const g=o[t];if(g!==void 0)switch(g){case 1:return r[t];case 2:return n[t];case 4:return e[t];case 3:return i[t]}else{if(Kr(r,t))return o[t]=1,r[t];if(n!==me&&ae(n,t))return o[t]=2,n[t];if((c=s.propsOptions[0])&&ae(c,t))return o[t]=3,i[t];if(e!==me&&ae(e,t))return o[t]=4,e[t];Tn&&(o[t]=0)}}const f=xs[t];let h,d;if(f)return t==="$attrs"&&Ne(s.attrs,"get",""),f(s);if((h=a.__cssModules)&&(h=h[t]))return h;if(e!==me&&ae(e,t))return o[t]=4,e[t];if(d=l.config.globalProperties,ae(d,t))return d[t]},set({_:s},t,e){const{data:r,setupState:n,ctx:i}=s;return Kr(n,t)?(n[t]=e,!0):r!==me&&ae(r,t)?(r[t]=e,!0):ae(s.props,t)||t[0]==="$"&&t.slice(1)in s?!1:(i[t]=e,!0)},has({_:{data:s,setupState:t,accessCache:e,ctx:r,appContext:n,propsOptions:i}},o){let a;return!!e[o]||s!==me&&ae(s,o)||Kr(t,o)||(a=i[0])&&ae(a,o)||ae(r,o)||ae(xs,o)||ae(n.config.globalProperties,o)},defineProperty(s,t,e){return e.get!=null?s._.accessCache[t]=0:ae(e,"value")&&this.set(s,t,e.value,null),Reflect.defineProperty(s,t,e)}};function qu(){return Qu().attrs}function Qu(){const s=Bf();return s.setupContext||(s.setupContext=$a(s))}function Fi(s){return J(s)?s.reduce((t,e)=>(t[e]=null,t),{}):s}let Tn=!0;function Zu(s){const t=Kn(s),e=s.proxy,r=s.ctx;Tn=!1,t.beforeCreate&&Oi(t.beforeCreate,s,"bc");const{data:n,computed:i,methods:o,watch:a,provide:l,inject:c,created:f,beforeMount:h,mounted:d,beforeUpdate:g,updated:x,activated:y,deactivated:v,beforeDestroy:T,beforeUnmount:w,destroyed:E,unmounted:C,render:F,renderTracked:I,renderTriggered:O,errorCaptured:Q,serverPrefetch:q,expose:j,inheritAttrs:R,components:ie,directives:re,filters:oe}=t;if(c&&Ju(c,r,null),o)for(const H in o){const K=o[H];se(K)&&(r[H]=K.bind(e))}if(n){const H=n.call(e,e);xe(H)&&(s.data=Ir(H))}if(Tn=!0,i)for(const H in i){const K=i[H],fe=se(K)?K.bind(e,e):se(K.get)?K.get.bind(e,e):ze,le=!se(K)&&se(K.set)?K.set.bind(e):ze,ye=We({get:fe,set:le});Object.defineProperty(r,H,{enumerable:!0,configurable:!0,get:()=>ye.value,set:pe=>ye.value=pe})}if(a)for(const H in a)va(a[H],r,e,H);if(l){const H=se(l)?l.call(e):l;Reflect.ownKeys(H).forEach(K=>{fr(K,H[K])})}f&&Oi(f,s,"c");function V(H,K){J(K)?K.forEach(fe=>H(fe.bind(e))):K&&H(K.bind(e))}if(V(Uu,h),V($u,d),V(zu,g),V(Hu,x),V(Nu,y),V(Du,v),V(Yu,Q),V(Xu,I),V(Wu,O),V(Gu,w),V(jn,C),V(Vu,q),J(j))if(j.length){const H=s.exposed||(s.exposed={});j.forEach(K=>{Object.defineProperty(H,K,{get:()=>e[K],set:fe=>e[K]=fe})})}else s.exposed||(s.exposed={});F&&s.render===ze&&(s.render=F),R!=null&&(s.inheritAttrs=R),ie&&(s.components=ie),re&&(s.directives=re)}function Ju(s,t,e=ze){J(s)&&(s=bn(s));for(const r in s){const n=s[r];let i;xe(n)?"default"in n?i=Xe(n.from||r,n.default,!0):i=Xe(n.from||r):i=Xe(n),De(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):t[r]=i}}function Oi(s,t,e){Ze(J(s)?s.map(r=>r.bind(t.proxy)):s.bind(t.proxy),t,e)}function va(s,t,e,r){const n=r.includes(".")?Fa(e,r):()=>e[r];if(Fe(s)){const i=t[s];se(i)&&_s(n,i)}else if(se(s))_s(n,s.bind(e));else if(xe(s))if(J(s))s.forEach(i=>va(i,t,e,r));else{const i=se(s.handler)?s.handler.bind(e):t[s.handler];se(i)&&_s(n,i,s)}}function Kn(s){const t=s.type,{mixins:e,extends:r}=t,{mixins:n,optionsCache:i,config:{optionMergeStrategies:o}}=s.appContext,a=i.get(t);let l;return a?l=a:!n.length&&!e&&!r?l=t:(l={},n.length&&n.forEach(c=>vr(l,c,o,!0)),vr(l,t,o)),xe(t)&&i.set(t,l),l}function vr(s,t,e,r=!1){const{mixins:n,extends:i}=t;i&&vr(s,i,e,!0),n&&n.forEach(o=>vr(s,o,e,!0));for(const o in t)if(!(r&&o==="expose")){const a=ef[o]||e&&e[o];s[o]=a?a(s[o],t[o]):t[o]}return s}const ef={data:Bi,props:Ni,emits:Ni,methods:hs,computed:hs,beforeCreate:Me,created:Me,beforeMount:Me,mounted:Me,beforeUpdate:Me,updated:Me,beforeDestroy:Me,beforeUnmount:Me,destroyed:Me,unmounted:Me,activated:Me,deactivated:Me,errorCaptured:Me,serverPrefetch:Me,components:hs,directives:hs,watch:sf,provide:Bi,inject:tf};function Bi(s,t){return t?s?function(){return Ie(se(s)?s.call(this,this):s,se(t)?t.call(this,this):t)}:t:s}function tf(s,t){return hs(bn(s),bn(t))}function bn(s){if(J(s)){const t={};for(let e=0;e<s.length;e++)t[s[e]]=s[e];return t}return s}function Me(s,t){return s?[...new Set([].concat(s,t))]:t}function hs(s,t){return s?Ie(Object.create(null),s,t):t}function Ni(s,t){return s?J(s)&&J(t)?[...new Set([...s,...t])]:Ie(Object.create(null),Fi(s),Fi(t??{})):t}function sf(s,t){if(!s)return t;if(!t)return s;const e=Ie(Object.create(null),s);for(const r in t)e[r]=Me(s[r],t[r]);return e}function Ta(){return{app:null,config:{isNativeTag:Yc,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let rf=0;function nf(s,t){return function(r,n=null){se(r)||(r=Ie({},r)),n!=null&&!xe(n)&&(n=null);const i=Ta(),o=new WeakSet;let a=!1;const l=i.app={_uid:rf++,_component:r,_props:n,_container:null,_context:i,_instance:null,version:$f,get config(){return i.config},set config(c){},use(c,...f){return o.has(c)||(c&&se(c.install)?(o.add(c),c.install(l,...f)):se(c)&&(o.add(c),c(l,...f))),l},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),l},component(c,f){return f?(i.components[c]=f,l):i.components[c]},directive(c,f){return f?(i.directives[c]=f,l):i.directives[c]},mount(c,f,h){if(!a){const d=be(r,n);return d.appContext=i,h===!0?h="svg":h===!1&&(h=void 0),f&&t?t(d,c):s(d,c,h),a=!0,l._container=c,c.__vue_app__=l,Nr(d.component)}},unmount(){a&&(s(null,l._container),delete l._container.__vue_app__)},provide(c,f){return i.provides[c]=f,l},runWithContext(c){const f=ys;ys=l;try{return c()}finally{ys=f}}};return l}}let ys=null;function fr(s,t){if(Ae){let e=Ae.provides;const r=Ae.parent&&Ae.parent.provides;r===e&&(e=Ae.provides=Object.create(r)),e[s]=t}}function Xe(s,t,e=!1){const r=Ae||Ee;if(r||ys){const n=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:ys._context.provides;if(n&&s in n)return n[s];if(arguments.length>1)return e&&se(t)?t.call(r&&r.proxy):t}}const ba={},wa=()=>Object.create(ba),Ra=s=>Object.getPrototypeOf(s)===ba;function of(s,t,e,r=!1){const n={},i=wa();s.propsDefaults=Object.create(null),Sa(s,t,n,i);for(const o in s.propsOptions[0])o in n||(n[o]=void 0);e?s.props=r?n:Jo(n):s.type.props?s.props=n:s.props=i,s.attrs=i}function af(s,t,e,r){const{props:n,attrs:i,vnode:{patchFlag:o}}=s,a=ue(n),[l]=s.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const f=s.vnode.dynamicProps;for(let h=0;h<f.length;h++){let d=f[h];if(Lr(s.emitsOptions,d))continue;const g=t[d];if(l)if(ae(i,d))g!==i[d]&&(i[d]=g,c=!0);else{const x=qt(d);n[x]=wn(l,a,x,g,s,!1)}else g!==i[d]&&(i[d]=g,c=!0)}}}else{Sa(s,t,n,i)&&(c=!0);let f;for(const h in a)(!t||!ae(t,h)&&((f=Ns(h))===h||!ae(t,f)))&&(l?e&&(e[h]!==void 0||e[f]!==void 0)&&(n[h]=wn(l,a,h,void 0,s,!0)):delete n[h]);if(i!==a)for(const h in i)(!t||!ae(t,h))&&(delete i[h],c=!0)}c&&st(s.attrs,"set","")}function Sa(s,t,e,r){const[n,i]=s.propsOptions;let o=!1,a;if(t)for(let l in t){if(ps(l))continue;const c=t[l];let f;n&&ae(n,f=qt(l))?!i||!i.includes(f)?e[f]=c:(a||(a={}))[f]=c:Lr(s.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(i){const l=ue(e),c=a||me;for(let f=0;f<i.length;f++){const h=i[f];e[h]=wn(n,l,h,c[h],s,!ae(c,h))}}return o}function wn(s,t,e,r,n,i){const o=s[e];if(o!=null){const a=ae(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&se(l)){const{propsDefaults:c}=n;if(e in c)r=c[e];else{const f=Us(n);r=c[e]=l.call(null,t),f()}}else r=l}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===Ns(e))&&(r=!0))}return r}const lf=new WeakMap;function Ea(s,t,e=!1){const r=e?lf:t.propsCache,n=r.get(s);if(n)return n;const i=s.props,o={},a=[];let l=!1;if(!se(s)){const f=h=>{l=!0;const[d,g]=Ea(h,t,!0);Ie(o,d),g&&a.push(...g)};!e&&t.mixins.length&&t.mixins.forEach(f),s.extends&&f(s.extends),s.mixins&&s.mixins.forEach(f)}if(!i&&!l)return xe(s)&&r.set(s,Xt),Xt;if(J(i))for(let f=0;f<i.length;f++){const h=qt(i[f]);Di(h)&&(o[h]=me)}else if(i)for(const f in i){const h=qt(f);if(Di(h)){const d=i[f],g=o[h]=J(d)||se(d)?{type:d}:Ie({},d),x=g.type;let y=!1,v=!0;if(J(x))for(let T=0;T<x.length;++T){const w=x[T],E=se(w)&&w.name;if(E==="Boolean"){y=!0;break}else E==="String"&&(v=!1)}else y=se(x)&&x.name==="Boolean";g[0]=y,g[1]=v,(y||ae(g,"default"))&&a.push(h)}}const c=[o,a];return xe(s)&&r.set(s,c),c}function Di(s){return s[0]!=="$"&&!ps(s)}const Ca=s=>s[0]==="_"||s==="$stable",qn=s=>J(s)?s.map(qe):[qe(s)],cf=(s,t,e)=>{if(t._n)return t;const r=fs((...n)=>qn(t(...n)),e);return r._c=!1,r},Aa=(s,t,e)=>{const r=s._ctx;for(const n in s){if(Ca(n))continue;const i=s[n];if(se(i))t[n]=cf(n,i,r);else if(i!=null){const o=qn(i);t[n]=()=>o}}},Ia=(s,t)=>{const e=qn(t);s.slots.default=()=>e},Ma=(s,t,e)=>{for(const r in t)(e||r!=="_")&&(s[r]=t[r])},uf=(s,t,e)=>{const r=s.slots=wa();if(s.vnode.shapeFlag&32){const n=t._;n?(Ma(r,t,e),e&&ko(r,"_",n,!0)):Aa(t,r)}else t&&Ia(s,t)},ff=(s,t,e)=>{const{vnode:r,slots:n}=s;let i=!0,o=me;if(r.shapeFlag&32){const a=t._;a?e&&a===1?i=!1:Ma(n,t,e):(i=!t.$stable,Aa(t,n)),o=t}else t&&(Ia(s,t),o={default:1});if(i)for(const a in n)!Ca(a)&&o[a]==null&&delete n[a]};function Rn(s,t,e,r,n=!1){if(J(s)){s.forEach((d,g)=>Rn(d,t&&(J(t)?t[g]:t),e,r,n));return}if(ms(r)&&!n)return;const i=r.shapeFlag&4?Nr(r.component):r.el,o=n?null:i,{i:a,r:l}=s,c=t&&t.r,f=a.refs===me?a.refs={}:a.refs,h=a.setupState;if(c!=null&&c!==l&&(Fe(c)?(f[c]=null,ae(h,c)&&(h[c]=null)):De(c)&&(c.value=null)),se(l))xt(l,a,12,[o,f]);else{const d=Fe(l),g=De(l);if(d||g){const x=()=>{if(s.f){const y=d?ae(h,l)?h[l]:f[l]:l.value;n?J(y)&&Nn(y,i):J(y)?y.includes(i)||y.push(i):d?(f[l]=[i],ae(h,l)&&(h[l]=f[l])):(l.value=[i],s.k&&(f[s.k]=l.value))}else d?(f[l]=o,ae(h,l)&&(h[l]=o)):g&&(l.value=o,s.k&&(f[s.k]=o))};o?(x.id=-1,Oe(x,e)):x()}}}const hf=Symbol("_vte"),df=s=>s.__isTeleport,Oe=Af;function pf(s){return gf(s)}function gf(s,t){const e=Uo();e.__VUE__=!0;const{insert:r,remove:n,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:f,parentNode:h,nextSibling:d,setScopeId:g=ze,insertStaticContent:x}=s,y=(p,m,_,A=null,S=null,M=null,U=void 0,D=null,k=!!m.dynamicChildren)=>{if(p===m)return;p&&!is(p,m)&&(A=b(p),pe(p,S,M,!0),p=null),m.patchFlag===-2&&(k=!1,m.dynamicChildren=null);const{type:P,ref:G,shapeFlag:Y}=m;switch(P){case Fr:v(p,m,_,A);break;case _t:T(p,m,_,A);break;case Zr:p==null&&w(m,_,A,U);break;case $e:ie(p,m,_,A,S,M,U,D,k);break;default:Y&1?F(p,m,_,A,S,M,U,D,k):Y&6?re(p,m,_,A,S,M,U,D,k):(Y&64||Y&128)&&P.process(p,m,_,A,S,M,U,D,k,$)}G!=null&&S&&Rn(G,p&&p.ref,M,m||p,!m)},v=(p,m,_,A)=>{if(p==null)r(m.el=a(m.children),_,A);else{const S=m.el=p.el;m.children!==p.children&&c(S,m.children)}},T=(p,m,_,A)=>{p==null?r(m.el=l(m.children||""),_,A):m.el=p.el},w=(p,m,_,A)=>{[p.el,p.anchor]=x(p.children,m,_,A,p.el,p.anchor)},E=({el:p,anchor:m},_,A)=>{let S;for(;p&&p!==m;)S=d(p),r(p,_,A),p=S;r(m,_,A)},C=({el:p,anchor:m})=>{let _;for(;p&&p!==m;)_=d(p),n(p),p=_;n(m)},F=(p,m,_,A,S,M,U,D,k)=>{m.type==="svg"?U="svg":m.type==="math"&&(U="mathml"),p==null?I(m,_,A,S,M,U,D,k):q(p,m,S,M,U,D,k)},I=(p,m,_,A,S,M,U,D)=>{let k,P;const{props:G,shapeFlag:Y,transition:W,dirs:Z}=p;if(k=p.el=o(p.type,M,G&&G.is,G),Y&8?f(k,p.children):Y&16&&Q(p.children,k,null,A,S,qr(p,M),U,D),Z&&Rt(p,null,A,"created"),O(k,p,p.scopeId,U,A),G){for(const ge in G)ge!=="value"&&!ps(ge)&&i(k,ge,null,G[ge],M,A);"value"in G&&i(k,"value",null,G.value,M),(P=G.onVnodeBeforeMount)&&Ke(P,A,p)}Z&&Rt(p,null,A,"beforeMount");const ne=mf(S,W);ne&&W.beforeEnter(k),r(k,m,_),((P=G&&G.onVnodeMounted)||ne||Z)&&Oe(()=>{P&&Ke(P,A,p),ne&&W.enter(k),Z&&Rt(p,null,A,"mounted")},S)},O=(p,m,_,A,S)=>{if(_&&g(p,_),A)for(let M=0;M<A.length;M++)g(p,A[M]);if(S){let M=S.subTree;if(m===M){const U=S.vnode;O(p,U,U.scopeId,U.slotScopeIds,S.parent)}}},Q=(p,m,_,A,S,M,U,D,k=0)=>{for(let P=k;P<p.length;P++){const G=p[P]=D?lt(p[P]):qe(p[P]);y(null,G,m,_,A,S,M,U,D)}},q=(p,m,_,A,S,M,U)=>{const D=m.el=p.el;let{patchFlag:k,dynamicChildren:P,dirs:G}=m;k|=p.patchFlag&16;const Y=p.props||me,W=m.props||me;let Z;if(_&&St(_,!1),(Z=W.onVnodeBeforeUpdate)&&Ke(Z,_,m,p),G&&Rt(m,p,_,"beforeUpdate"),_&&St(_,!0),(Y.innerHTML&&W.innerHTML==null||Y.textContent&&W.textContent==null)&&f(D,""),P?j(p.dynamicChildren,P,D,_,A,qr(m,S),M):U||K(p,m,D,null,_,A,qr(m,S),M,!1),k>0){if(k&16)R(D,Y,W,_,S);else if(k&2&&Y.class!==W.class&&i(D,"class",null,W.class,S),k&4&&i(D,"style",Y.style,W.style,S),k&8){const ne=m.dynamicProps;for(let ge=0;ge<ne.length;ge++){const ce=ne[ge],Re=Y[ce],He=W[ce];(He!==Re||ce==="value")&&i(D,ce,Re,He,S,_)}}k&1&&p.children!==m.children&&f(D,m.children)}else!U&&P==null&&R(D,Y,W,_,S);((Z=W.onVnodeUpdated)||G)&&Oe(()=>{Z&&Ke(Z,_,m,p),G&&Rt(m,p,_,"updated")},A)},j=(p,m,_,A,S,M,U)=>{for(let D=0;D<m.length;D++){const k=p[D],P=m[D],G=k.el&&(k.type===$e||!is(k,P)||k.shapeFlag&70)?h(k.el):_;y(k,P,G,null,A,S,M,U,!0)}},R=(p,m,_,A,S)=>{if(m!==_){if(m!==me)for(const M in m)!ps(M)&&!(M in _)&&i(p,M,m[M],null,S,A);for(const M in _){if(ps(M))continue;const U=_[M],D=m[M];U!==D&&M!=="value"&&i(p,M,D,U,S,A)}"value"in _&&i(p,"value",m.value,_.value,S)}},ie=(p,m,_,A,S,M,U,D,k)=>{const P=m.el=p?p.el:a(""),G=m.anchor=p?p.anchor:a("");let{patchFlag:Y,dynamicChildren:W,slotScopeIds:Z}=m;Z&&(D=D?D.concat(Z):Z),p==null?(r(P,_,A),r(G,_,A),Q(m.children||[],_,G,S,M,U,D,k)):Y>0&&Y&64&&W&&p.dynamicChildren?(j(p.dynamicChildren,W,_,S,M,U,D),(m.key!=null||S&&m===S.subTree)&&Pa(p,m,!0)):K(p,m,_,G,S,M,U,D,k)},re=(p,m,_,A,S,M,U,D,k)=>{m.slotScopeIds=D,p==null?m.shapeFlag&512?S.ctx.activate(m,_,A,U,k):oe(m,_,A,S,M,U,k):X(p,m,k)},oe=(p,m,_,A,S,M,U)=>{const D=p.component=Of(p,A,S);if(ma(p)&&(D.ctx.renderer=$),Nf(D,!1,U),D.asyncDep){if(S&&S.registerDep(D,V,U),!p.el){const k=D.subTree=be(_t);T(null,k,m,_)}}else V(D,p,m,_,S,M,U)},X=(p,m,_)=>{const A=m.component=p.component;if(Sf(p,m,_))if(A.asyncDep&&!A.asyncResolved){H(A,m,_);return}else A.next=m,Fu(A.update),A.effect.dirty=!0,A.update();else m.el=p.el,A.vnode=m},V=(p,m,_,A,S,M,U)=>{const D=()=>{if(p.isMounted){let{next:G,bu:Y,u:W,parent:Z,vnode:ne}=p;{const Ot=La(p);if(Ot){G&&(G.el=ne.el,H(p,G,U)),Ot.asyncDep.then(()=>{p.isUnmounted||D()});return}}let ge=G,ce;St(p,!1),G?(G.el=ne.el,H(p,G,U)):G=ne,Y&&Yr(Y),(ce=G.props&&G.props.onVnodeBeforeUpdate)&&Ke(ce,Z,G,ne),St(p,!0);const Re=Qr(p),He=p.subTree;p.subTree=Re,y(He,Re,h(He.el),b(He),p,S,M),G.el=Re.el,ge===null&&Ef(p,Re.el),W&&Oe(W,S),(ce=G.props&&G.props.onVnodeUpdated)&&Oe(()=>Ke(ce,Z,G,ne),S)}else{let G;const{el:Y,props:W}=m,{bm:Z,m:ne,parent:ge}=p,ce=ms(m);if(St(p,!1),Z&&Yr(Z),!ce&&(G=W&&W.onVnodeBeforeMount)&&Ke(G,ge,m),St(p,!0),Y&&ee){const Re=()=>{p.subTree=Qr(p),ee(Y,p.subTree,p,S,null)};ce?m.type.__asyncLoader().then(()=>!p.isUnmounted&&Re()):Re()}else{const Re=p.subTree=Qr(p);y(null,Re,_,A,p,S,M),m.el=Re.el}if(ne&&Oe(ne,S),!ce&&(G=W&&W.onVnodeMounted)){const Re=m;Oe(()=>Ke(G,ge,Re),S)}(m.shapeFlag&256||ge&&ms(ge.vnode)&&ge.vnode.shapeFlag&256)&&p.a&&Oe(p.a,S),p.isMounted=!0,m=_=A=null}},k=p.effect=new Un(D,ze,()=>Yn(P),p.scope),P=p.update=()=>{k.dirty&&k.run()};P.i=p,P.id=p.uid,St(p,!0),P()},H=(p,m,_)=>{m.component=p;const A=p.vnode.props;p.vnode=m,p.next=null,af(p,m.props,A,_),ff(p,m.children,_),bt(),Li(p),wt()},K=(p,m,_,A,S,M,U,D,k=!1)=>{const P=p&&p.children,G=p?p.shapeFlag:0,Y=m.children,{patchFlag:W,shapeFlag:Z}=m;if(W>0){if(W&128){le(P,Y,_,A,S,M,U,D,k);return}else if(W&256){fe(P,Y,_,A,S,M,U,D,k);return}}Z&8?(G&16&&he(P,S,M),Y!==P&&f(_,Y)):G&16?Z&16?le(P,Y,_,A,S,M,U,D,k):he(P,S,M,!0):(G&8&&f(_,""),Z&16&&Q(Y,_,A,S,M,U,D,k))},fe=(p,m,_,A,S,M,U,D,k)=>{p=p||Xt,m=m||Xt;const P=p.length,G=m.length,Y=Math.min(P,G);let W;for(W=0;W<Y;W++){const Z=m[W]=k?lt(m[W]):qe(m[W]);y(p[W],Z,_,null,S,M,U,D,k)}P>G?he(p,S,M,!0,!1,Y):Q(m,_,A,S,M,U,D,k,Y)},le=(p,m,_,A,S,M,U,D,k)=>{let P=0;const G=m.length;let Y=p.length-1,W=G-1;for(;P<=Y&&P<=W;){const Z=p[P],ne=m[P]=k?lt(m[P]):qe(m[P]);if(is(Z,ne))y(Z,ne,_,null,S,M,U,D,k);else break;P++}for(;P<=Y&&P<=W;){const Z=p[Y],ne=m[W]=k?lt(m[W]):qe(m[W]);if(is(Z,ne))y(Z,ne,_,null,S,M,U,D,k);else break;Y--,W--}if(P>Y){if(P<=W){const Z=W+1,ne=Z<G?m[Z].el:A;for(;P<=W;)y(null,m[P]=k?lt(m[P]):qe(m[P]),_,ne,S,M,U,D,k),P++}}else if(P>W)for(;P<=Y;)pe(p[P],S,M,!0),P++;else{const Z=P,ne=P,ge=new Map;for(P=ne;P<=W;P++){const ke=m[P]=k?lt(m[P]):qe(m[P]);ke.key!=null&&ge.set(ke.key,P)}let ce,Re=0;const He=W-ne+1;let Ot=!1,si=0;const rs=new Array(He);for(P=0;P<He;P++)rs[P]=0;for(P=Z;P<=Y;P++){const ke=p[P];if(Re>=He){pe(ke,S,M,!0);continue}let je;if(ke.key!=null)je=ge.get(ke.key);else for(ce=ne;ce<=W;ce++)if(rs[ce-ne]===0&&is(ke,m[ce])){je=ce;break}je===void 0?pe(ke,S,M,!0):(rs[je-ne]=P+1,je>=si?si=je:Ot=!0,y(ke,m[je],_,null,S,M,U,D,k),Re++)}const ri=Ot?xf(rs):Xt;for(ce=ri.length-1,P=He-1;P>=0;P--){const ke=ne+P,je=m[ke],ni=ke+1<G?m[ke+1].el:A;rs[P]===0?y(null,je,_,ni,S,M,U,D,k):Ot&&(ce<0||P!==ri[ce]?ye(je,_,ni,2):ce--)}}},ye=(p,m,_,A,S=null)=>{const{el:M,type:U,transition:D,children:k,shapeFlag:P}=p;if(P&6){ye(p.component.subTree,m,_,A);return}if(P&128){p.suspense.move(m,_,A);return}if(P&64){U.move(p,m,_,$);return}if(U===$e){r(M,m,_);for(let Y=0;Y<k.length;Y++)ye(k[Y],m,_,A);r(p.anchor,m,_);return}if(U===Zr){E(p,m,_);return}if(A!==2&&P&1&&D)if(A===0)D.beforeEnter(M),r(M,m,_),Oe(()=>D.enter(M),S);else{const{leave:Y,delayLeave:W,afterLeave:Z}=D,ne=()=>r(M,m,_),ge=()=>{Y(M,()=>{ne(),Z&&Z()})};W?W(M,ne,ge):ge()}else r(M,m,_)},pe=(p,m,_,A=!1,S=!1)=>{const{type:M,props:U,ref:D,children:k,dynamicChildren:P,shapeFlag:G,patchFlag:Y,dirs:W,cacheIndex:Z}=p;if(Y===-2&&(S=!1),D!=null&&Rn(D,null,_,p,!0),Z!=null&&(m.renderCache[Z]=void 0),G&256){m.ctx.deactivate(p);return}const ne=G&1&&W,ge=!ms(p);let ce;if(ge&&(ce=U&&U.onVnodeBeforeUnmount)&&Ke(ce,m,p),G&6)we(p.component,_,A);else{if(G&128){p.suspense.unmount(_,A);return}ne&&Rt(p,null,m,"beforeUnmount"),G&64?p.type.remove(p,m,_,$,A):P&&!P.hasOnce&&(M!==$e||Y>0&&Y&64)?he(P,m,_,!1,!0):(M===$e&&Y&384||!S&&G&16)&&he(k,m,_),A&&Te(p)}(ge&&(ce=U&&U.onVnodeUnmounted)||ne)&&Oe(()=>{ce&&Ke(ce,m,p),ne&&Rt(p,null,m,"unmounted")},_)},Te=p=>{const{type:m,el:_,anchor:A,transition:S}=p;if(m===$e){_e(_,A);return}if(m===Zr){C(p);return}const M=()=>{n(_),S&&!S.persisted&&S.afterLeave&&S.afterLeave()};if(p.shapeFlag&1&&S&&!S.persisted){const{leave:U,delayLeave:D}=S,k=()=>U(_,M);D?D(p.el,M,k):k()}else M()},_e=(p,m)=>{let _;for(;p!==m;)_=d(p),n(p),p=_;n(m)},we=(p,m,_)=>{const{bum:A,scope:S,update:M,subTree:U,um:D,m:k,a:P}=p;ki(k),ki(P),A&&Yr(A),S.stop(),M&&(M.active=!1,pe(U,p,m,_)),D&&Oe(D,m),Oe(()=>{p.isUnmounted=!0},m),m&&m.pendingBranch&&!m.isUnmounted&&p.asyncDep&&!p.asyncResolved&&p.suspenseId===m.pendingId&&(m.deps--,m.deps===0&&m.resolve())},he=(p,m,_,A=!1,S=!1,M=0)=>{for(let U=M;U<p.length;U++)pe(p[U],m,_,A,S)},b=p=>{if(p.shapeFlag&6)return b(p.component.subTree);if(p.shapeFlag&128)return p.suspense.next();const m=d(p.anchor||p.el),_=m&&m[hf];return _?d(_):m};let L=!1;const B=(p,m,_)=>{p==null?m._vnode&&pe(m._vnode,null,null,!0):y(m._vnode||null,p,m,null,null,null,_),L||(L=!0,Li(),ha(),L=!1),m._vnode=p},$={p:y,um:pe,m:ye,r:Te,mt:oe,mc:Q,pc:K,pbc:j,n:b,o:s};let te,ee;return{render:B,hydrate:te,createApp:nf(B,te)}}function qr({type:s,props:t},e){return e==="svg"&&s==="foreignObject"||e==="mathml"&&s==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:e}function St({effect:s,update:t},e){s.allowRecurse=t.allowRecurse=e}function mf(s,t){return(!s||s&&!s.pendingBranch)&&t&&!t.persisted}function Pa(s,t,e=!1){const r=s.children,n=t.children;if(J(r)&&J(n))for(let i=0;i<r.length;i++){const o=r[i];let a=n[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[i]=lt(n[i]),a.el=o.el),!e&&a.patchFlag!==-2&&Pa(o,a)),a.type===Fr&&(a.el=o.el)}}function xf(s){const t=s.slice(),e=[0];let r,n,i,o,a;const l=s.length;for(r=0;r<l;r++){const c=s[r];if(c!==0){if(n=e[e.length-1],s[n]<c){t[r]=n,e.push(r);continue}for(i=0,o=e.length-1;i<o;)a=i+o>>1,s[e[a]]<c?i=a+1:o=a;c<s[e[i]]&&(i>0&&(t[r]=e[i-1]),e[i]=r)}}for(i=e.length,o=e[i-1];i-- >0;)e[i]=o,o=t[o];return e}function La(s){const t=s.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:La(t)}function ki(s){if(s)for(let t=0;t<s.length;t++)s[t].active=!1}const yf=Symbol.for("v-scx"),_f=()=>Xe(yf);function Pd(s,t){return Qn(s,null,t)}const nr={};function _s(s,t,e){return Qn(s,t,e)}function Qn(s,t,{immediate:e,deep:r,flush:n,once:i,onTrack:o,onTrigger:a}=me){if(t&&i){const I=t;t=(...O)=>{I(...O),F()}}const l=Ae,c=I=>r===!0?I:ht(I,r===!1?1:void 0);let f,h=!1,d=!1;if(De(s)?(f=()=>s.value,h=Qt(s)):gs(s)?(f=()=>c(s),h=!0):J(s)?(d=!0,h=s.some(I=>gs(I)||Qt(I)),f=()=>s.map(I=>{if(De(I))return I.value;if(gs(I))return c(I);if(se(I))return xt(I,l,2)})):se(s)?t?f=()=>xt(s,l,2):f=()=>(g&&g(),Ze(s,l,3,[x])):f=ze,t&&r){const I=f;f=()=>ht(I())}let g,x=I=>{g=E.onStop=()=>{xt(I,l,4),g=E.onStop=void 0}},y;if(Br)if(x=ze,t?e&&Ze(t,l,3,[f(),d?[]:void 0,x]):f(),n==="sync"){const I=_f();y=I.__watcherHandles||(I.__watcherHandles=[])}else return ze;let v=d?new Array(s.length).fill(nr):nr;const T=()=>{if(!(!E.active||!E.dirty))if(t){const I=E.run();(r||h||(d?I.some((O,Q)=>yt(O,v[Q])):yt(I,v)))&&(g&&g(),Ze(t,l,3,[I,v===nr?void 0:d&&v[0]===nr?[]:v,x]),v=I)}else E.run()};T.allowRecurse=!!t;let w;n==="sync"?w=T:n==="post"?w=()=>Oe(T,l&&l.suspense):(T.pre=!0,l&&(T.id=l.uid),w=()=>Yn(T));const E=new Un(f,ze,w),C=au(),F=()=>{E.stop(),C&&Nn(C.effects,E)};return t?e?T():v=E.run():n==="post"?Oe(E.run.bind(E),l&&l.suspense):E.run(),y&&y.push(F),F}function vf(s,t,e){const r=this.proxy,n=Fe(s)?s.includes(".")?Fa(r,s):()=>r[s]:s.bind(r,r);let i;se(t)?i=t:(i=t.handler,e=t);const o=Us(this),a=Qn(n,i.bind(r),e);return o(),a}function Fa(s,t){const e=t.split(".");return()=>{let r=s;for(let n=0;n<e.length&&r;n++)r=r[e[n]];return r}}function ht(s,t=1/0,e){if(t<=0||!xe(s)||s.__v_skip||(e=e||new Set,e.has(s)))return s;if(e.add(s),t--,De(s))ht(s.value,t,e);else if(J(s))for(let r=0;r<s.length;r++)ht(s[r],t,e);else if(Oo(s)||Yt(s))s.forEach(r=>{ht(r,t,e)});else if(Do(s)){for(const r in s)ht(s[r],t,e);for(const r of Object.getOwnPropertySymbols(s))Object.prototype.propertyIsEnumerable.call(s,r)&&ht(s[r],t,e)}return s}const Tf=(s,t)=>t==="modelValue"||t==="model-value"?s.modelModifiers:s[`${t}Modifiers`]||s[`${qt(t)}Modifiers`]||s[`${Ns(t)}Modifiers`];function bf(s,t,...e){if(s.isUnmounted)return;const r=s.vnode.props||me;let n=e;const i=t.startsWith("update:"),o=i&&Tf(r,t.slice(7));o&&(o.trim&&(n=e.map(f=>Fe(f)?f.trim():f)),o.number&&(n=e.map(Jc)));let a,l=r[a=Xr(t)]||r[a=Xr(qt(t))];!l&&i&&(l=r[a=Xr(Ns(t))]),l&&Ze(l,s,6,n);const c=r[a+"Once"];if(c){if(!s.emitted)s.emitted={};else if(s.emitted[a])return;s.emitted[a]=!0,Ze(c,s,6,n)}}function Oa(s,t,e=!1){const r=t.emitsCache,n=r.get(s);if(n!==void 0)return n;const i=s.emits;let o={},a=!1;if(!se(s)){const l=c=>{const f=Oa(c,t,!0);f&&(a=!0,Ie(o,f))};!e&&t.mixins.length&&t.mixins.forEach(l),s.extends&&l(s.extends),s.mixins&&s.mixins.forEach(l)}return!i&&!a?(xe(s)&&r.set(s,null),null):(J(i)?i.forEach(l=>o[l]=null):Ie(o,i),xe(s)&&r.set(s,o),o)}function Lr(s,t){return!s||!Bn(t)?!1:(t=t.slice(2).replace(/Once$/,""),ae(s,t[0].toLowerCase()+t.slice(1))||ae(s,Ns(t))||ae(s,t))}function Qr(s){const{type:t,vnode:e,proxy:r,withProxy:n,propsOptions:[i],slots:o,attrs:a,emit:l,render:c,renderCache:f,props:h,data:d,setupState:g,ctx:x,inheritAttrs:y}=s,v=_r(s);let T,w;try{if(e.shapeFlag&4){const C=n||r,F=C;T=qe(c.call(F,C,f,h,g,d,x)),w=a}else{const C=t;T=qe(C.length>1?C(h,{attrs:a,slots:o,emit:l}):C(h,null)),w=t.props?a:wf(a)}}catch(C){vs.length=0,Mr(C,s,1),T=be(_t)}let E=T;if(w&&y!==!1){const C=Object.keys(w),{shapeFlag:F}=E;C.length&&F&7&&(i&&C.some(Fo)&&(w=Rf(w,i)),E=Zt(E,w,!1,!0))}return e.dirs&&(E=Zt(E,null,!1,!0),E.dirs=E.dirs?E.dirs.concat(e.dirs):e.dirs),e.transition&&(E.transition=e.transition),T=E,_r(v),T}const wf=s=>{let t;for(const e in s)(e==="class"||e==="style"||Bn(e))&&((t||(t={}))[e]=s[e]);return t},Rf=(s,t)=>{const e={};for(const r in s)(!Fo(r)||!(r.slice(9)in t))&&(e[r]=s[r]);return e};function Sf(s,t,e){const{props:r,children:n,component:i}=s,{props:o,children:a,patchFlag:l}=t,c=i.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&l>=0){if(l&1024)return!0;if(l&16)return r?Ui(r,o,c):!!o;if(l&8){const f=t.dynamicProps;for(let h=0;h<f.length;h++){const d=f[h];if(o[d]!==r[d]&&!Lr(c,d))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Ui(r,o,c):!0:!!o;return!1}function Ui(s,t,e){const r=Object.keys(t);if(r.length!==Object.keys(s).length)return!0;for(let n=0;n<r.length;n++){const i=r[n];if(t[i]!==s[i]&&!Lr(e,i))return!0}return!1}function Ef({vnode:s,parent:t},e){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===s&&(r.el=s.el),r===s)(s=t.vnode).el=e,t=t.parent;else break}}const Cf=s=>s.__isSuspense;function Af(s,t){t&&t.pendingBranch?J(s)?t.effects.push(...s):t.effects.push(s):Ou(s)}const $e=Symbol.for("v-fgt"),Fr=Symbol.for("v-txt"),_t=Symbol.for("v-cmt"),Zr=Symbol.for("v-stc"),vs=[];let Ue=null;function Ft(s=!1){vs.push(Ue=s?null:[])}function If(){vs.pop(),Ue=vs[vs.length-1]||null}let Ps=1;function $i(s){Ps+=s,s<0&&Ue&&(Ue.hasOnce=!0)}function Ba(s){return s.dynamicChildren=Ps>0?Ue||Xt:null,If(),Ps>0&&Ue&&Ue.push(s),s}function ks(s,t,e,r,n,i){return Ba(Be(s,t,e,r,n,i,!0))}function Na(s,t,e,r,n){return Ba(be(s,t,e,r,n,!0))}function Tr(s){return s?s.__v_isVNode===!0:!1}function is(s,t){return s.type===t.type&&s.key===t.key}const Da=({key:s})=>s??null,hr=({ref:s,ref_key:t,ref_for:e})=>(typeof s=="number"&&(s=""+s),s!=null?Fe(s)||De(s)||se(s)?{i:Ee,r:s,k:t,f:!!e}:s:null);function Be(s,t=null,e=null,r=0,n=null,i=s===$e?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:s,props:t,key:t&&Da(t),ref:t&&hr(t),scopeId:pa,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Ee};return a?(Zn(l,e),i&128&&s.normalize(l)):e&&(l.shapeFlag|=Fe(e)?8:16),Ps>0&&!o&&Ue&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Ue.push(l),l}const be=Mf;function Mf(s,t=null,e=null,r=0,n=null,i=!1){if((!s||s===ju)&&(s=_t),Tr(s)){const a=Zt(s,t,!0);return e&&Zn(a,e),Ps>0&&!i&&Ue&&(a.shapeFlag&6?Ue[Ue.indexOf(s)]=a:Ue.push(a)),a.patchFlag=-2,a}if(Uf(s)&&(s=s.__vccOpts),t){t=Pf(t);let{class:a,style:l}=t;a&&!Fe(a)&&(t.class=kn(a)),xe(l)&&(ta(l)&&!J(l)&&(l=Ie({},l)),t.style=Ds(l))}const o=Fe(s)?1:Cf(s)?128:df(s)?64:xe(s)?4:se(s)?2:0;return Be(s,t,e,r,n,o,i,!0)}function Pf(s){return s?ta(s)||Ra(s)?Ie({},s):s:null}function Zt(s,t,e=!1,r=!1){const{props:n,ref:i,patchFlag:o,children:a,transition:l}=s,c=t?Or(n||{},t):n,f={__v_isVNode:!0,__v_skip:!0,type:s.type,props:c,key:c&&Da(c),ref:t&&t.ref?e&&i?J(i)?i.concat(hr(t)):[i,hr(t)]:hr(t):i,scopeId:s.scopeId,slotScopeIds:s.slotScopeIds,children:a,target:s.target,targetStart:s.targetStart,targetAnchor:s.targetAnchor,staticCount:s.staticCount,shapeFlag:s.shapeFlag,patchFlag:t&&s.type!==$e?o===-1?16:o|16:o,dynamicProps:s.dynamicProps,dynamicChildren:s.dynamicChildren,appContext:s.appContext,dirs:s.dirs,transition:l,component:s.component,suspense:s.suspense,ssContent:s.ssContent&&Zt(s.ssContent),ssFallback:s.ssFallback&&Zt(s.ssFallback),el:s.el,anchor:s.anchor,ctx:s.ctx,ce:s.ce};return l&&r&&ga(f,l.clone(f)),f}function dr(s=" ",t=0){return be(Fr,null,s,t)}function Ld(s="",t=!1){return t?(Ft(),Na(_t,null,s)):be(_t,null,s)}function qe(s){return s==null||typeof s=="boolean"?be(_t):J(s)?be($e,null,s.slice()):typeof s=="object"?lt(s):be(Fr,null,String(s))}function lt(s){return s.el===null&&s.patchFlag!==-1||s.memo?s:Zt(s)}function Zn(s,t){let e=0;const{shapeFlag:r}=s;if(t==null)t=null;else if(J(t))e=16;else if(typeof t=="object")if(r&65){const n=t.default;n&&(n._c&&(n._d=!1),Zn(s,n()),n._c&&(n._d=!0));return}else{e=32;const n=t._;!n&&!Ra(t)?t._ctx=Ee:n===3&&Ee&&(Ee.slots._===1?t._=1:(t._=2,s.patchFlag|=1024))}else se(t)?(t={default:t,_ctx:Ee},e=32):(t=String(t),r&64?(e=16,t=[dr(t)]):e=8);s.children=t,s.shapeFlag|=e}function Or(...s){const t={};for(let e=0;e<s.length;e++){const r=s[e];for(const n in r)if(n==="class")t.class!==r.class&&(t.class=kn([t.class,r.class]));else if(n==="style")t.style=Ds([t.style,r.style]);else if(Bn(n)){const i=t[n],o=r[n];o&&i!==o&&!(J(i)&&i.includes(o))&&(t[n]=i?[].concat(i,o):o)}else n!==""&&(t[n]=r[n])}return t}function Ke(s,t,e,r=null){Ze(s,t,7,[e,r])}const Lf=Ta();let Ff=0;function Of(s,t,e){const r=s.type,n=(t?t.appContext:s.appContext)||Lf,i={uid:Ff++,vnode:s,type:r,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,scope:new iu(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ea(r,n),emitsOptions:Oa(r,n),emit:null,emitted:null,propsDefaults:me,inheritAttrs:r.inheritAttrs,ctx:me,data:me,props:me,attrs:me,slots:me,refs:me,setupState:me,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=bf.bind(null,i),s.ce&&s.ce(i),i}let Ae=null;const Bf=()=>Ae||Ee;let br,Sn;{const s=Uo(),t=(e,r)=>{let n;return(n=s[e])||(n=s[e]=[]),n.push(r),i=>{n.length>1?n.forEach(o=>o(i)):n[0](i)}};br=t("__VUE_INSTANCE_SETTERS__",e=>Ae=e),Sn=t("__VUE_SSR_SETTERS__",e=>Br=e)}const Us=s=>{const t=Ae;return br(s),s.scope.on(),()=>{s.scope.off(),br(t)}},zi=()=>{Ae&&Ae.scope.off(),br(null)};function ka(s){return s.vnode.shapeFlag&4}let Br=!1;function Nf(s,t=!1,e=!1){t&&Sn(t);const{props:r,children:n}=s.vnode,i=ka(s);of(s,r,i,t),uf(s,n,e);const o=i?Df(s,t):void 0;return t&&Sn(!1),o}function Df(s,t){const e=s.type;s.accessCache=Object.create(null),s.proxy=new Proxy(s.ctx,Ku);const{setup:r}=e;if(r){const n=s.setupContext=r.length>1?$a(s):null,i=Us(s);bt();const o=xt(r,s,0,[s.props,n]);if(wt(),i(),Bo(o)){if(o.then(zi,zi),t)return o.then(a=>{Hi(s,a,t)}).catch(a=>{Mr(a,s,0)});s.asyncDep=o}else Hi(s,o,t)}else Ua(s,t)}function Hi(s,t,e){se(t)?s.type.__ssrInlineRender?s.ssrRender=t:s.render=t:xe(t)&&(s.setupState=aa(t)),Ua(s,e)}let Gi;function Ua(s,t,e){const r=s.type;if(!s.render){if(!t&&Gi&&!r.render){const n=r.template||Kn(s).template;if(n){const{isCustomElement:i,compilerOptions:o}=s.appContext.config,{delimiters:a,compilerOptions:l}=r,c=Ie(Ie({isCustomElement:i,delimiters:a},o),l);r.render=Gi(n,c)}}s.render=r.render||ze}{const n=Us(s);bt();try{Zu(s)}finally{wt(),n()}}}const kf={get(s,t){return Ne(s,"get",""),s[t]}};function $a(s){const t=e=>{s.exposed=e||{}};return{attrs:new Proxy(s.attrs,kf),slots:s.slots,emit:s.emit,expose:t}}function Nr(s){return s.exposed?s.exposeProxy||(s.exposeProxy=new Proxy(aa(sa(s.exposed)),{get(t,e){if(e in t)return t[e];if(e in xs)return xs[e](s)},has(t,e){return e in t||e in xs}})):s.proxy}function Uf(s){return se(s)&&"__vccOpts"in s}const We=(s,t)=>na(s,t,Br);function za(s,t,e){const r=arguments.length;return r===2?xe(t)&&!J(t)?Tr(t)?be(s,null,[t]):be(s,t):be(s,null,t):(r>3?e=Array.prototype.slice.call(arguments,2):r===3&&Tr(e)&&(e=[e]),be(s,t,e))}const $f="3.4.36",zf="comment";function Hf(s,t,e){if(e){Ha(s,t);const r=s._rawNodes.indexOf(e);s._rawNodes.splice(r,0,t)}else s._rawNodes.push(t);t.parent=s}function Ha(s,t){const e=s._rawNodes.indexOf(t);e>=0&&s._rawNodes.splice(e,1)}const Jn={createElement(s){const t=new gt(s);return t._rawNodes=[],sa(t),t},createText(s){return{_type:ft.Text,text:s,parent:void 0,skipFocus:!0}},createComment(s){return{_type:zf,text:s,parent:void 0,skipFocus:!0}},setText(s,t){pt("Replace Text: ",s,t),s.text=t;const e=s.parent;z(e),e.text=e.getText()},setElementText(s,t){pt("SetElementText: ",s,t),s.text=t},setProperty(s,t,e,r){s[t]=r},insert(s,t,e){pt("INSERT: ",t,s,e),s._queueDelete=!1,Hf(t,s,e),s instanceof gt?(t.insertChild(s,e),t.rendered&&s.render()):t.isTextNode()&&(t.insertChild(s,e),t.text=t.getText())},isTextNode(s){return s.isTextNode()},remove(s){pt("REMOVE: ",s),Ha(s.parent,s),s._queueDelete=!0,s instanceof gt&&(s.parent.removeChild(s),queueMicrotask(()=>s.destroy()))},querySelector(s){},setScopeId(s,t){return s.id=t},parentNode(s){return s.parent},nextSibling(s){const t=s.parent._rawNodes||[],e=t.indexOf(s)+1;if(e<t.length)return t[e]}},Gf=Jn.setProperty,Vf=function(s,t){const e=Mc(Le.rendererOptions,t),r=Jn.createElement("App");return r.lng=e.root,r.rendered=!0,{app:Wf(s),rootNode:r,renderer:e}},{render:Fd,createApp:Wf}=pf(Ie({patchProp:Gf},Jn));/*!
  * vue-router v4.4.3
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Vt=typeof document<"u";function Xf(s){return s.__esModule||s[Symbol.toStringTag]==="Module"}const de=Object.assign;function Jr(s,t){const e={};for(const r in t){const n=t[r];e[r]=Ye(n)?n.map(s):s(n)}return e}const Ts=()=>{},Ye=Array.isArray,Ga=/#/g,Yf=/&/g,jf=/\//g,Kf=/=/g,qf=/\?/g,Va=/\+/g,Qf=/%5B/g,Zf=/%5D/g,Wa=/%5E/g,Jf=/%60/g,Xa=/%7B/g,eh=/%7C/g,Ya=/%7D/g,th=/%20/g;function ei(s){return encodeURI(""+s).replace(eh,"|").replace(Qf,"[").replace(Zf,"]")}function sh(s){return ei(s).replace(Xa,"{").replace(Ya,"}").replace(Wa,"^")}function En(s){return ei(s).replace(Va,"%2B").replace(th,"+").replace(Ga,"%23").replace(Yf,"%26").replace(Jf,"`").replace(Xa,"{").replace(Ya,"}").replace(Wa,"^")}function rh(s){return En(s).replace(Kf,"%3D")}function nh(s){return ei(s).replace(Ga,"%23").replace(qf,"%3F")}function ih(s){return s==null?"":nh(s).replace(jf,"%2F")}function Ls(s){try{return decodeURIComponent(""+s)}catch{}return""+s}const oh=/\/$/,ah=s=>s.replace(oh,"");function en(s,t,e="/"){let r,n={},i="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=t.slice(0,l),i=t.slice(l+1,a>-1?a:t.length),n=s(i)),a>-1&&(r=r||t.slice(0,a),o=t.slice(a,t.length)),r=fh(r??t,e),{fullPath:r+(i&&"?")+i+o,path:r,query:n,hash:Ls(o)}}function lh(s,t){const e=t.query?s(t.query):"";return t.path+(e&&"?")+e+(t.hash||"")}function Vi(s,t){return!t||!s.toLowerCase().startsWith(t.toLowerCase())?s:s.slice(t.length)||"/"}function ch(s,t,e){const r=t.matched.length-1,n=e.matched.length-1;return r>-1&&r===n&&Jt(t.matched[r],e.matched[n])&&ja(t.params,e.params)&&s(t.query)===s(e.query)&&t.hash===e.hash}function Jt(s,t){return(s.aliasOf||s)===(t.aliasOf||t)}function ja(s,t){if(Object.keys(s).length!==Object.keys(t).length)return!1;for(const e in s)if(!uh(s[e],t[e]))return!1;return!0}function uh(s,t){return Ye(s)?Wi(s,t):Ye(t)?Wi(t,s):s===t}function Wi(s,t){return Ye(t)?s.length===t.length&&s.every((e,r)=>e===t[r]):s.length===1&&s[0]===t}function fh(s,t){if(s.startsWith("/"))return s;if(!s)return t;const e=t.split("/"),r=s.split("/"),n=r[r.length-1];(n===".."||n===".")&&r.push("");let i=e.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return e.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const it={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Fs;(function(s){s.pop="pop",s.push="push"})(Fs||(Fs={}));var bs;(function(s){s.back="back",s.forward="forward",s.unknown=""})(bs||(bs={}));function hh(s){if(!s)if(Vt){const t=document.querySelector("base");s=t&&t.getAttribute("href")||"/",s=s.replace(/^\w+:\/\/[^\/]+/,"")}else s="/";return s[0]!=="/"&&s[0]!=="#"&&(s="/"+s),ah(s)}const dh=/^[^#]+#/;function ph(s,t){return s.replace(dh,"#")+t}function gh(s,t){const e=document.documentElement.getBoundingClientRect(),r=s.getBoundingClientRect();return{behavior:t.behavior,left:r.left-e.left-(t.left||0),top:r.top-e.top-(t.top||0)}}const Dr=()=>({left:window.scrollX,top:window.scrollY});function mh(s){let t;if("el"in s){const e=s.el,r=typeof e=="string"&&e.startsWith("#"),n=typeof e=="string"?r?document.getElementById(e.slice(1)):document.querySelector(e):e;if(!n)return;t=gh(n,s)}else t=s;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Xi(s,t){return(history.state?history.state.position-t:-1)+s}const Cn=new Map;function xh(s,t){Cn.set(s,t)}function yh(s){const t=Cn.get(s);return Cn.delete(s),t}let _h=()=>location.protocol+"//"+location.host;function Ka(s,t){const{pathname:e,search:r,hash:n}=t,i=s.indexOf("#");if(i>-1){let a=n.includes(s.slice(i))?s.slice(i).length:1,l=n.slice(a);return l[0]!=="/"&&(l="/"+l),Vi(l,"")}return Vi(e,s)+r+n}function vh(s,t,e,r){let n=[],i=[],o=null;const a=({state:d})=>{const g=Ka(s,location),x=e.value,y=t.value;let v=0;if(d){if(e.value=g,t.value=d,o&&o===x){o=null;return}v=y?d.position-y.position:0}else r(g);n.forEach(T=>{T(e.value,x,{delta:v,type:Fs.pop,direction:v?v>0?bs.forward:bs.back:bs.unknown})})};function l(){o=e.value}function c(d){n.push(d);const g=()=>{const x=n.indexOf(d);x>-1&&n.splice(x,1)};return i.push(g),g}function f(){const{history:d}=window;d.state&&d.replaceState(de({},d.state,{scroll:Dr()}),"")}function h(){for(const d of i)d();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",f)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",f,{passive:!0}),{pauseListeners:l,listen:c,destroy:h}}function Yi(s,t,e,r=!1,n=!1){return{back:s,current:t,forward:e,replaced:r,position:window.history.length,scroll:n?Dr():null}}function Th(s){const{history:t,location:e}=window,r={value:Ka(s,e)},n={value:t.state};n.value||i(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(l,c,f){const h=s.indexOf("#"),d=h>-1?(e.host&&document.querySelector("base")?s:s.slice(h))+l:_h()+s+l;try{t[f?"replaceState":"pushState"](c,"",d),n.value=c}catch(g){console.error(g),e[f?"replace":"assign"](d)}}function o(l,c){const f=de({},t.state,Yi(n.value.back,l,n.value.forward,!0),c,{position:n.value.position});i(l,f,!0),r.value=l}function a(l,c){const f=de({},n.value,t.state,{forward:l,scroll:Dr()});i(f.current,f,!0);const h=de({},Yi(r.value,l,null),{position:f.position+1},c);i(l,h,!1),r.value=l}return{location:r,state:n,push:a,replace:o}}function bh(s){s=hh(s);const t=Th(s),e=vh(s,t.state,t.location,t.replace);function r(i,o=!0){o||e.pauseListeners(),history.go(i)}const n=de({location:"",base:s,go:r,createHref:ph.bind(null,s)},t,e);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>t.state.value}),n}function wh(s){return s=location.host?s||location.pathname+location.search:"",s.includes("#")||(s+="#"),bh(s)}function Rh(s){return typeof s=="string"||s&&typeof s=="object"}function qa(s){return typeof s=="string"||typeof s=="symbol"}const Qa=Symbol("");var ji;(function(s){s[s.aborted=4]="aborted",s[s.cancelled=8]="cancelled",s[s.duplicated=16]="duplicated"})(ji||(ji={}));function es(s,t){return de(new Error,{type:s,[Qa]:!0},t)}function Je(s,t){return s instanceof Error&&Qa in s&&(t==null||!!(s.type&t))}const Ki="[^/]+?",Sh={sensitive:!1,strict:!1,start:!0,end:!0},Eh=/[.+*?^${}()[\]/\\]/g;function Ch(s,t){const e=de({},Sh,t),r=[];let n=e.start?"^":"";const i=[];for(const c of s){const f=c.length?[]:[90];e.strict&&!c.length&&(n+="/");for(let h=0;h<c.length;h++){const d=c[h];let g=40+(e.sensitive?.25:0);if(d.type===0)h||(n+="/"),n+=d.value.replace(Eh,"\\$&"),g+=40;else if(d.type===1){const{value:x,repeatable:y,optional:v,regexp:T}=d;i.push({name:x,repeatable:y,optional:v});const w=T||Ki;if(w!==Ki){g+=10;try{new RegExp(`(${w})`)}catch(C){throw new Error(`Invalid custom RegExp for param "${x}" (${w}): `+C.message)}}let E=y?`((?:${w})(?:/(?:${w}))*)`:`(${w})`;h||(E=v&&c.length<2?`(?:/${E})`:"/"+E),v&&(E+="?"),n+=E,g+=20,v&&(g+=-8),y&&(g+=-20),w===".*"&&(g+=-50)}f.push(g)}r.push(f)}if(e.strict&&e.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}e.strict||(n+="/?"),e.end?n+="$":e.strict&&(n+="(?:/|$)");const o=new RegExp(n,e.sensitive?"":"i");function a(c){const f=c.match(o),h={};if(!f)return null;for(let d=1;d<f.length;d++){const g=f[d]||"",x=i[d-1];h[x.name]=g&&x.repeatable?g.split("/"):g}return h}function l(c){let f="",h=!1;for(const d of s){(!h||!f.endsWith("/"))&&(f+="/"),h=!1;for(const g of d)if(g.type===0)f+=g.value;else if(g.type===1){const{value:x,repeatable:y,optional:v}=g,T=x in c?c[x]:"";if(Ye(T)&&!y)throw new Error(`Provided param "${x}" is an array but it is not repeatable (* or + modifiers)`);const w=Ye(T)?T.join("/"):T;if(!w)if(v)d.length<2&&(f.endsWith("/")?f=f.slice(0,-1):h=!0);else throw new Error(`Missing required param "${x}"`);f+=w}}return f||"/"}return{re:o,score:r,keys:i,parse:a,stringify:l}}function Ah(s,t){let e=0;for(;e<s.length&&e<t.length;){const r=t[e]-s[e];if(r)return r;e++}return s.length<t.length?s.length===1&&s[0]===80?-1:1:s.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Za(s,t){let e=0;const r=s.score,n=t.score;for(;e<r.length&&e<n.length;){const i=Ah(r[e],n[e]);if(i)return i;e++}if(Math.abs(n.length-r.length)===1){if(qi(r))return 1;if(qi(n))return-1}return n.length-r.length}function qi(s){const t=s[s.length-1];return s.length>0&&t[t.length-1]<0}const Ih={type:0,value:""},Mh=/[a-zA-Z0-9_]/;function Ph(s){if(!s)return[[]];if(s==="/")return[[Ih]];if(!s.startsWith("/"))throw new Error(`Invalid path "${s}"`);function t(g){throw new Error(`ERR (${e})/"${c}": ${g}`)}let e=0,r=e;const n=[];let i;function o(){i&&n.push(i),i=[]}let a=0,l,c="",f="";function h(){c&&(e===0?i.push({type:0,value:c}):e===1||e===2||e===3?(i.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:f,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function d(){c+=l}for(;a<s.length;){if(l=s[a++],l==="\\"&&e!==2){r=e,e=4;continue}switch(e){case 0:l==="/"?(c&&h(),o()):l===":"?(h(),e=1):d();break;case 4:d(),e=r;break;case 1:l==="("?e=2:Mh.test(l)?d():(h(),e=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+l:e=3:f+=l;break;case 3:h(),e=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,f="";break;default:t("Unknown state");break}}return e===2&&t(`Unfinished custom RegExp for param "${c}"`),h(),o(),n}function Lh(s,t,e){const r=Ch(Ph(s.path),e),n=de(r,{record:s,parent:t,children:[],alias:[]});return t&&!n.record.aliasOf==!t.record.aliasOf&&t.children.push(n),n}function Fh(s,t){const e=[],r=new Map;t=Ji({strict:!1,end:!0,sensitive:!1},t);function n(h){return r.get(h)}function i(h,d,g){const x=!g,y=Oh(h);y.aliasOf=g&&g.record;const v=Ji(t,h),T=[y];if("alias"in h){const C=typeof h.alias=="string"?[h.alias]:h.alias;for(const F of C)T.push(de({},y,{components:g?g.record.components:y.components,path:F,aliasOf:g?g.record:y}))}let w,E;for(const C of T){const{path:F}=C;if(d&&F[0]!=="/"){const I=d.record.path,O=I[I.length-1]==="/"?"":"/";C.path=d.record.path+(F&&O+F)}if(w=Lh(C,d,v),g?g.alias.push(w):(E=E||w,E!==w&&E.alias.push(w),x&&h.name&&!Zi(w)&&o(h.name)),Ja(w)&&l(w),y.children){const I=y.children;for(let O=0;O<I.length;O++)i(I[O],w,g&&g.children[O])}g=g||w}return E?()=>{o(E)}:Ts}function o(h){if(qa(h)){const d=r.get(h);d&&(r.delete(h),e.splice(e.indexOf(d),1),d.children.forEach(o),d.alias.forEach(o))}else{const d=e.indexOf(h);d>-1&&(e.splice(d,1),h.record.name&&r.delete(h.record.name),h.children.forEach(o),h.alias.forEach(o))}}function a(){return e}function l(h){const d=Dh(h,e);e.splice(d,0,h),h.record.name&&!Zi(h)&&r.set(h.record.name,h)}function c(h,d){let g,x={},y,v;if("name"in h&&h.name){if(g=r.get(h.name),!g)throw es(1,{location:h});v=g.record.name,x=de(Qi(d.params,g.keys.filter(E=>!E.optional).concat(g.parent?g.parent.keys.filter(E=>E.optional):[]).map(E=>E.name)),h.params&&Qi(h.params,g.keys.map(E=>E.name))),y=g.stringify(x)}else if(h.path!=null)y=h.path,g=e.find(E=>E.re.test(y)),g&&(x=g.parse(y),v=g.record.name);else{if(g=d.name?r.get(d.name):e.find(E=>E.re.test(d.path)),!g)throw es(1,{location:h,currentLocation:d});v=g.record.name,x=de({},d.params,h.params),y=g.stringify(x)}const T=[];let w=g;for(;w;)T.unshift(w.record),w=w.parent;return{name:v,path:y,params:x,matched:T,meta:Nh(T)}}s.forEach(h=>i(h));function f(){e.length=0,r.clear()}return{addRoute:i,resolve:c,removeRoute:o,clearRoutes:f,getRoutes:a,getRecordMatcher:n}}function Qi(s,t){const e={};for(const r of t)r in s&&(e[r]=s[r]);return e}function Oh(s){return{path:s.path,redirect:s.redirect,name:s.name,meta:s.meta||{},aliasOf:void 0,beforeEnter:s.beforeEnter,props:Bh(s),children:s.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in s?s.components||null:s.component&&{default:s.component}}}function Bh(s){const t={},e=s.props||!1;if("component"in s)t.default=e;else for(const r in s.components)t[r]=typeof e=="object"?e[r]:e;return t}function Zi(s){for(;s;){if(s.record.aliasOf)return!0;s=s.parent}return!1}function Nh(s){return s.reduce((t,e)=>de(t,e.meta),{})}function Ji(s,t){const e={};for(const r in s)e[r]=r in t?t[r]:s[r];return e}function Dh(s,t){let e=0,r=t.length;for(;e!==r;){const i=e+r>>1;Za(s,t[i])<0?r=i:e=i+1}const n=kh(s);return n&&(r=t.lastIndexOf(n,r-1)),r}function kh(s){let t=s;for(;t=t.parent;)if(Ja(t)&&Za(s,t)===0)return t}function Ja({record:s}){return!!(s.name||s.components&&Object.keys(s.components).length||s.redirect)}function Uh(s){const t={};if(s===""||s==="?")return t;const r=(s[0]==="?"?s.slice(1):s).split("&");for(let n=0;n<r.length;++n){const i=r[n].replace(Va," "),o=i.indexOf("="),a=Ls(o<0?i:i.slice(0,o)),l=o<0?null:Ls(i.slice(o+1));if(a in t){let c=t[a];Ye(c)||(c=t[a]=[c]),c.push(l)}else t[a]=l}return t}function eo(s){let t="";for(let e in s){const r=s[e];if(e=rh(e),r==null){r!==void 0&&(t+=(t.length?"&":"")+e);continue}(Ye(r)?r.map(i=>i&&En(i)):[r&&En(r)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+e,i!=null&&(t+="="+i))})}return t}function $h(s){const t={};for(const e in s){const r=s[e];r!==void 0&&(t[e]=Ye(r)?r.map(n=>n==null?null:""+n):r==null?r:""+r)}return t}const zh=Symbol(""),to=Symbol(""),kr=Symbol(""),ti=Symbol(""),An=Symbol("");function os(){let s=[];function t(r){return s.push(r),()=>{const n=s.indexOf(r);n>-1&&s.splice(n,1)}}function e(){s=[]}return{add:t,list:()=>s.slice(),reset:e}}function ct(s,t,e,r,n,i=o=>o()){const o=r&&(r.enterCallbacks[n]=r.enterCallbacks[n]||[]);return()=>new Promise((a,l)=>{const c=d=>{d===!1?l(es(4,{from:e,to:t})):d instanceof Error?l(d):Rh(d)?l(es(2,{from:t,to:d})):(o&&r.enterCallbacks[n]===o&&typeof d=="function"&&o.push(d),a())},f=i(()=>s.call(r&&r.instances[n],t,e,c));let h=Promise.resolve(f);s.length<3&&(h=h.then(c)),h.catch(d=>l(d))})}function tn(s,t,e,r,n=i=>i()){const i=[];for(const o of s)for(const a in o.components){let l=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(Hh(l)){const f=(l.__vccOpts||l)[t];f&&i.push(ct(f,e,r,o,a,n))}else{let c=l();i.push(()=>c.then(f=>{if(!f)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const h=Xf(f)?f.default:f;o.components[a]=h;const g=(h.__vccOpts||h)[t];return g&&ct(g,e,r,o,a,n)()}))}}return i}function Hh(s){return typeof s=="object"||"displayName"in s||"props"in s||"__vccOpts"in s}function so(s){const t=Xe(kr),e=Xe(ti),r=We(()=>{const l=ve(s.to);return t.resolve(l)}),n=We(()=>{const{matched:l}=r.value,{length:c}=l,f=l[c-1],h=e.matched;if(!f||!h.length)return-1;const d=h.findIndex(Jt.bind(null,f));if(d>-1)return d;const g=ro(l[c-2]);return c>1&&ro(f)===g&&h[h.length-1].path!==g?h.findIndex(Jt.bind(null,l[c-2])):d}),i=We(()=>n.value>-1&&Xh(e.params,r.value.params)),o=We(()=>n.value>-1&&n.value===e.matched.length-1&&ja(e.params,r.value.params));function a(l={}){return Wh(l)?t[ve(s.replace)?"replace":"push"](ve(s.to)).catch(Ts):Promise.resolve()}return{route:r,href:We(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}const Gh=Lt({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:so,setup(s,{slots:t}){const e=Ir(so(s)),{options:r}=Xe(kr),n=We(()=>({[no(s.activeClass,r.linkActiveClass,"router-link-active")]:e.isActive,[no(s.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:e.isExactActive}));return()=>{const i=t.default&&t.default(e);return s.custom?i:za("a",{"aria-current":e.isExactActive?s.ariaCurrentValue:null,href:e.href,onClick:e.navigate,class:n.value},i)}}}),Vh=Gh;function Wh(s){if(!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)&&!s.defaultPrevented&&!(s.button!==void 0&&s.button!==0)){if(s.currentTarget&&s.currentTarget.getAttribute){const t=s.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return s.preventDefault&&s.preventDefault(),!0}}function Xh(s,t){for(const e in t){const r=t[e],n=s[e];if(typeof r=="string"){if(r!==n)return!1}else if(!Ye(n)||n.length!==r.length||r.some((i,o)=>i!==n[o]))return!1}return!0}function ro(s){return s?s.aliasOf?s.aliasOf.path:s.path:""}const no=(s,t,e)=>s??t??e,Yh=Lt({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(s,{attrs:t,slots:e}){const r=Xe(An),n=We(()=>s.route||r.value),i=Xe(to,0),o=We(()=>{let c=ve(i);const{matched:f}=n.value;let h;for(;(h=f[c])&&!h.components;)c++;return c}),a=We(()=>n.value.matched[o.value]);fr(to,We(()=>o.value+1)),fr(zh,a),fr(An,n);const l=tt();return _s(()=>[l.value,a.value,s.name],([c,f,h],[d,g,x])=>{f&&(f.instances[h]=c,g&&g!==f&&c&&c===d&&(f.leaveGuards.size||(f.leaveGuards=g.leaveGuards),f.updateGuards.size||(f.updateGuards=g.updateGuards))),c&&f&&(!g||!Jt(f,g)||!d)&&(f.enterCallbacks[h]||[]).forEach(y=>y(c))},{flush:"post"}),()=>{const c=n.value,f=s.name,h=a.value,d=h&&h.components[f];if(!d)return io(e.default,{Component:d,route:c});const g=h.props[f],x=g?g===!0?c.params:typeof g=="function"?g(c):g:null,v=za(d,de({},x,t,{onVnodeUnmounted:T=>{T.component.isUnmounted&&(h.instances[f]=null)},ref:l}));return io(e.default,{Component:v,route:c})||v}}});function io(s,t){if(!s)return null;const e=s(t);return e.length===1?e[0]:e}const el=Yh;function jh(s){const t=Fh(s.routes,s),e=s.parseQuery||Uh,r=s.stringifyQuery||eo,n=s.history,i=os(),o=os(),a=os(),l=Cu(it);let c=it;Vt&&s.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=Jr.bind(null,b=>""+b),h=Jr.bind(null,ih),d=Jr.bind(null,Ls);function g(b,L){let B,$;return qa(b)?(B=t.getRecordMatcher(b),$=L):$=b,t.addRoute($,B)}function x(b){const L=t.getRecordMatcher(b);L&&t.removeRoute(L)}function y(){return t.getRoutes().map(b=>b.record)}function v(b){return!!t.getRecordMatcher(b)}function T(b,L){if(L=de({},L||l.value),typeof b=="string"){const m=en(e,b,L.path),_=t.resolve({path:m.path},L),A=n.createHref(m.fullPath);return de(m,_,{params:d(_.params),hash:Ls(m.hash),redirectedFrom:void 0,href:A})}let B;if(b.path!=null)B=de({},b,{path:en(e,b.path,L.path).path});else{const m=de({},b.params);for(const _ in m)m[_]==null&&delete m[_];B=de({},b,{params:h(m)}),L.params=h(L.params)}const $=t.resolve(B,L),te=b.hash||"";$.params=f(d($.params));const ee=lh(r,de({},b,{hash:sh(te),path:$.path})),p=n.createHref(ee);return de({fullPath:ee,hash:te,query:r===eo?$h(b.query):b.query||{}},$,{redirectedFrom:void 0,href:p})}function w(b){return typeof b=="string"?en(e,b,l.value.path):de({},b)}function E(b,L){if(c!==b)return es(8,{from:L,to:b})}function C(b){return O(b)}function F(b){return C(de(w(b),{replace:!0}))}function I(b){const L=b.matched[b.matched.length-1];if(L&&L.redirect){const{redirect:B}=L;let $=typeof B=="function"?B(b):B;return typeof $=="string"&&($=$.includes("?")||$.includes("#")?$=w($):{path:$},$.params={}),de({query:b.query,hash:b.hash,params:$.path!=null?{}:b.params},$)}}function O(b,L){const B=c=T(b),$=l.value,te=b.state,ee=b.force,p=b.replace===!0,m=I(B);if(m)return O(de(w(m),{state:typeof m=="object"?de({},te,m.state):te,force:ee,replace:p}),L||B);const _=B;_.redirectedFrom=L;let A;return!ee&&ch(r,$,B)&&(A=es(16,{to:_,from:$}),ye($,$,!0,!1)),(A?Promise.resolve(A):j(_,$)).catch(S=>Je(S)?Je(S,2)?S:le(S):K(S,_,$)).then(S=>{if(S){if(Je(S,2))return O(de({replace:p},w(S.to),{state:typeof S.to=="object"?de({},te,S.to.state):te,force:ee}),L||_)}else S=ie(_,$,!0,p,te);return R(_,$,S),S})}function Q(b,L){const B=E(b,L);return B?Promise.reject(B):Promise.resolve()}function q(b){const L=_e.values().next().value;return L&&typeof L.runWithContext=="function"?L.runWithContext(b):b()}function j(b,L){let B;const[$,te,ee]=Kh(b,L);B=tn($.reverse(),"beforeRouteLeave",b,L);for(const m of $)m.leaveGuards.forEach(_=>{B.push(ct(_,b,L))});const p=Q.bind(null,b,L);return B.push(p),he(B).then(()=>{B=[];for(const m of i.list())B.push(ct(m,b,L));return B.push(p),he(B)}).then(()=>{B=tn(te,"beforeRouteUpdate",b,L);for(const m of te)m.updateGuards.forEach(_=>{B.push(ct(_,b,L))});return B.push(p),he(B)}).then(()=>{B=[];for(const m of ee)if(m.beforeEnter)if(Ye(m.beforeEnter))for(const _ of m.beforeEnter)B.push(ct(_,b,L));else B.push(ct(m.beforeEnter,b,L));return B.push(p),he(B)}).then(()=>(b.matched.forEach(m=>m.enterCallbacks={}),B=tn(ee,"beforeRouteEnter",b,L,q),B.push(p),he(B))).then(()=>{B=[];for(const m of o.list())B.push(ct(m,b,L));return B.push(p),he(B)}).catch(m=>Je(m,8)?m:Promise.reject(m))}function R(b,L,B){a.list().forEach($=>q(()=>$(b,L,B)))}function ie(b,L,B,$,te){const ee=E(b,L);if(ee)return ee;const p=L===it,m=Vt?history.state:{};B&&($||p?n.replace(b.fullPath,de({scroll:p&&m&&m.scroll},te)):n.push(b.fullPath,te)),l.value=b,ye(b,L,B,p),le()}let re;function oe(){re||(re=n.listen((b,L,B)=>{if(!we.listening)return;const $=T(b),te=I($);if(te){O(de(te,{replace:!0}),$).catch(Ts);return}c=$;const ee=l.value;Vt&&xh(Xi(ee.fullPath,B.delta),Dr()),j($,ee).catch(p=>Je(p,12)?p:Je(p,2)?(O(p.to,$).then(m=>{Je(m,20)&&!B.delta&&B.type===Fs.pop&&n.go(-1,!1)}).catch(Ts),Promise.reject()):(B.delta&&n.go(-B.delta,!1),K(p,$,ee))).then(p=>{p=p||ie($,ee,!1),p&&(B.delta&&!Je(p,8)?n.go(-B.delta,!1):B.type===Fs.pop&&Je(p,20)&&n.go(-1,!1)),R($,ee,p)}).catch(Ts)}))}let X=os(),V=os(),H;function K(b,L,B){le(b);const $=V.list();return $.length?$.forEach(te=>te(b,L,B)):console.error(b),Promise.reject(b)}function fe(){return H&&l.value!==it?Promise.resolve():new Promise((b,L)=>{X.add([b,L])})}function le(b){return H||(H=!b,oe(),X.list().forEach(([L,B])=>b?B(b):L()),X.reset()),b}function ye(b,L,B,$){const{scrollBehavior:te}=s;if(!Vt||!te)return Promise.resolve();const ee=!B&&yh(Xi(b.fullPath,0))||($||!B)&&history.state&&history.state.scroll||null;return ua().then(()=>te(b,L,ee)).then(p=>p&&mh(p)).catch(p=>K(p,b,L))}const pe=b=>n.go(b);let Te;const _e=new Set,we={currentRoute:l,listening:!0,addRoute:g,removeRoute:x,clearRoutes:t.clearRoutes,hasRoute:v,getRoutes:y,resolve:T,options:s,push:C,replace:F,go:pe,back:()=>pe(-1),forward:()=>pe(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:V.add,isReady:fe,install(b){const L=this;b.component("RouterLink",Vh),b.component("RouterView",el),b.config.globalProperties.$router=L,Object.defineProperty(b.config.globalProperties,"$route",{enumerable:!0,get:()=>ve(l)}),Vt&&!Te&&l.value===it&&(Te=!0,C(n.location).catch(te=>{}));const B={};for(const te in it)Object.defineProperty(B,te,{get:()=>l.value[te],enumerable:!0});b.provide(kr,L),b.provide(ti,Jo(B)),b.provide(An,l);const $=b.unmount;_e.add(b),b.unmount=function(){_e.delete(b),_e.size<1&&(c=it,re&&re(),re=null,l.value=it,Te=!1,H=!1),$()}}};function he(b){return b.reduce((L,B)=>L.then(()=>q(B)),Promise.resolve())}return we}function Kh(s,t){const e=[],r=[],n=[],i=Math.max(t.matched.length,s.matched.length);for(let o=0;o<i;o++){const a=t.matched[o];a&&(s.matched.find(c=>Jt(c,a))?r.push(a):e.push(a));const l=s.matched[o];l&&(t.matched.find(c=>Jt(c,l))||n.push(l))}return[e,r,n]}function qh(){return Xe(kr)}function Qh(s){return Xe(ti)}const Zh=["texture","width","height","x","y"],Jh=Lt({__name:"Icon",props:["name"],setup(s){function t(o,a){const l=dt.createTexture("ImageTexture",{src:o});return a.reduce((c,f)=>{const{x:h,y:d,width:g,height:x}=f;return c[f.name]=dt.createTexture("SubTexture",{texture:l,x:h,y:d,width:g,height:x}),c},{})}const e=s,r="/vue-demo-app/",n=tt([{name:"experiment",width:81,height:100,x:0,y:0},{name:"trending",width:100,height:56,x:81,y:0},{name:"tv",width:100,height:68,x:181,y:0},{name:"movie",width:94,height:100,x:282,y:0}]),i=t(r+"assets/icons_white.png",n.value);return(o,a)=>(Ft(),ks("view",Or(e,{texture:ve(i)[e.name],width:ve(i)[e.name].props.width,height:ve(i)[e.name].props.height,x:(100-(ve(i)[e.name].props.width||0))/2,y:(100-(ve(i)[e.name].props.height||0))/2}),null,16,Zh))}}),ed={y:-16},sn=Lt({__name:"NavButton",props:["icon"],setup(s){const t=s,e={zIndex:102,height:70,width:100,borderRadius:8,focus:{color:1111638783},active:{width:328,height:70}},r={fontSize:38,x:116,y:18,height:50,alpha:0,active:{alpha:1}};return(n,i)=>(Ft(),ks("view",Or({style:e},t,{forwardStates:!0}),[Be("view",ed,[be(Jh,{scale:.5,name:t.icon},null,8,["name"])]),Be("text",{style:r},[ya(n.$slots,"default")])],16))}});function td(s){const t=s?"width":"height",e=s?"x":"y";return(r,n,i=0,o)=>{if(!r.children.length)return;const a=r.scrollAdjustment||0,l=r.gap||0,c=r.scroll||"auto";let f=r[e]??0;const h=(n==null?void 0:n[e])??0,d=(n==null?void 0:n[t])??0,g=o===void 0?"none":i>o?"incremental":"decremental";let x=f;const[y,v]=sd(s,r),T=(w,E)=>Math.abs(f)+v<w+E;if(c==="auto")r.scrollIndex!=null&&r.scrollIndex>=0?r.selected>=r.scrollIndex?x=g==="incremental"?f-d-l:f+d+l:g==="decremental"&&r.selected===r.scrollIndex-1&&(x=f+d+l):(T(y.position,y.size)||h<Math.abs(f))&&(x=-h+a);else if(c==="always"||c==="edge"&&g==="decremental"&&Math.abs(f)>h)x=-h+a;else if(c==="edge"&&g==="incremental"&&T(h,d))x=f-d-l;else if(c==="edge"&&g==="none"){let w=0;const E=T(h,d);for(;w<r.children.length&&E;){const C=r.children[w++];if(C.skipFocus)continue;const F=C[t]??0;f-=F+l}x=f}r[e]!==x&&(r[e]=x)}}function sd(s,t){let e;for(let r=t.children.length-1;r>=0;r--)if(!t.children[r].skipFocus){e=t.children[r];break}return s?[{position:e.x??0,size:e.width??0},t.width??0]:[{position:e.y??0,size:e.height??0},t.height??0]}const rd={display:"flex",flexDirection:"row",justifyContent:"flexStart"},nd={display:"flex",flexDirection:"column",justifyContent:"flexStart"},id={xxxl:96,xxl:72,xl:48},od={sm:4},ad={screenW:1920,screenH:1080,marginX:120,marginY:120,gutterX:24,gutterY:72,focusScale:1.1},ld={primary:3235071,focus:3183328767,container:4752127,fillNeutral:4752127,interactiveNeutral:4752127},cd={display1:{fontFamily:"Roboto",fontSize:72,lineHeight:88,fontStyle:"600",verticalAlign:"middle",textBaseline:"bottom",maxLineSuffix:"..."},display2:{fontFamily:"Roboto",fontSize:56,lineHeight:72},headline1:{fontFamily:"Roboto",fontSize:36,fontStyle:"600",lineHeight:48,verticalAlign:"middle",textBaseline:"bottom",maxLineSuffix:"..."},headline2:{fontFamily:"Roboto",fontSize:32,lineHeight:44},headline3:{fontFamily:"Roboto",fontSize:28,lineHeight:40},body1:{fontFamily:"Roboto",fontSize:32,lineHeight:40},body2:{fontFamily:"Roboto",fontSize:28,lineHeight:34},button1:{fontFamily:"Roboto",fontSize:32,lineHeight:40}},Od={flexRow:rd,flexColumn:nd,spacer:id,radius:od,layout:ad,color:ld,typography:cd};function ir(...s){const t=s.filter(e=>typeof e=="function");if(t.length!==0)return t.length===1?t[0]:function(...e){let r;for(const n of t)if(r=n.apply(this,e),r===!0)return r;return r}}function ud(){if(!this||this.children.length===0)return!1;let s=this.selected?this.children[this.selected]:this.selectedNode;for(;s!=null&&s.skipFocus;)this.selected++,s=this.children[this.selected];return s instanceof gt?(s.setFocus(),!0):!1}function oo(s){return function(){var i,o,a;const t=this.children.length,e=this.wrap,r=this.selected||0;if(t===0)return!1;if(s==="right"||s==="down")do if(this.selected=(this.selected||0)%t+1,this.selected>=t){if(!e){this.selected=void 0;break}this.selected=0}while((i=this.children[this.selected])!=null&&i.skipFocus);else if(s==="left"||s==="up")do if(this.selected=(this.selected||0)%t-1,this.selected<0){if(!e){this.selected=void 0;break}this.selected=t-1}while((o=this.children[this.selected])!=null&&o.skipFocus);if(this.selected===void 0&&(this.selected=r,(a=this.children[this.selected])!=null&&a.states.has("focus")))return!1;const n=this.children[this.selected];if(this.onSelectedChanged&&this.onSelectedChanged.call(this,this,n,this.selected,r),this.plinko){const c=this.children[r].selected||0;n.selected=c<n.children.length?c:n.children.length-1}return n.setFocus(),!0}}const fd=["onUp","onDown","forwardFocus","onSelectedChanged","onBeforeLayout"],hd=Lt({__name:"Column",setup(s){const t=qu(),e=ir(t.onUp,oo("up")),r=ir(t.onDown,oo("down")),n=na(()=>{var l;return td(!1,t.y||((l=t.style)==null?void 0:l.y))}),i=ir(t.onSelectedChanged,t.scroll!=="none"?n.value:void 0),o=ir(t.onBeforeLayout,(l,c)=>n.value(l,c)),a={display:"flex",flexBoundary:"fixed",flexDirection:"column",gap:30,transition:{y:{easing:"ease-in-out",duration:250}}};return(l,c)=>(Ft(),ks("node",{onUp:ve(e),onDown:ve(r),forwardFocus:ve(ud),onSelectedChanged:ve(i),onBeforeLayout:ve(o),style:Ds([a,ve(t).style])},[ya(l.$slots,"default")],44,fd))}}),ao={Column:{flexDirection:"column",display:"flex",width:140,height:600,y:360,gap:20,zIndex:101,transition:{x:{duration:250,easing:"ease-in-out"}},x:8,focus:{width:500,x:24}},Gradient:{zIndex:99,color:255,src:"./assets/sidenav.png",alpha:0,width:1200,height:1080,focus:{alpha:1},transition:{alpha:!0}}},dd=Be("view",{flexItem:!1,width:300,height:150,x:30,y:15,zIndex:105},[Be("text",{x:0,y:40,fontSize:28,fontFamily:"Roboto",color:4143380070},"Built With:"),Be("view",{x:120,y:10,src:"./assets/vue.png",width:80,height:80}),Be("view",{x:0,y:106,src:"./assets/tmdb.png",width:80,height:41}),Be("text",{x:90,y:110,contain:"width",width:160,fontSize:12,color:4143380070}," This product uses the TMDB API but is not endorsed or certified by TMDB. ")],-1),pd=Lt({__name:"NavDrawer",props:{focusPage:Function},setup(s){const t=s,e=tt(null),r=qh(),n=Qh();function i(){var l;e.value.states.add("focus"),this.children.forEach(c=>{var f;return(f=c.states)==null?void 0:f.add("active")}),(l=this.selectedNode)==null||l.setFocus()}function o(){e.value.states.remove("focus"),this.selected=0,this.children.forEach(l=>{var c;return(c=l.states)==null?void 0:c.remove("active")})}function a(l){if(n.path===l)return t.focusPage();r.push(l)}return(l,c)=>(Ft(),ks($e,null,[dd,be(ve(hd),Or(l.$attrs,{ref:"column",onFocus:i,onBlur:o,style:ve(ao).Column,scroll:"none"}),{default:fs(()=>[be(sn,{icon:"trending",onEnter:c[0]||(c[0]=f=>a("/browse/all"))},{default:fs(()=>[dr(" Trending ")]),_:1}),be(sn,{icon:"movie",onEnter:c[1]||(c[1]=f=>a("/browse/movie"))},{default:fs(()=>[dr(" Movies ")]),_:1}),be(sn,{icon:"tv",onEnter:c[2]||(c[2]=f=>a("/browse/tv"))},{default:fs(()=>[dr("TV")]),_:1})]),_:1},16,["style"]),Be("view",{skipFocus:!0,ref_key:"backdrop",ref:e,style:Ds(ve(ao).Gradient)},null,4)],64))}}),gd=tt(),md=["onLast","onMenu"],xd={width:1920,height:1080,zIndex:-5},yd=Be("node",{src:"./assets/hero-mask-inverted.png",color:255,width:1920,height:1080},null,-1),rn=1,_d=Lt({__name:"App",setup(s){const{cleanup:t}=Vc();jn(t);const e=tt(null);let r=0;const n=tt(null),i=tt(null);tt({});let o;const a={alpha:rn,color:4294967295},l={duration:550,easing:"ease-in-out"};function c(){const d=e.value.$refs.column.$el;return d.states.has("focus")?!1:(o=la.value,d.setFocus())}function f(){return e.value.$refs.column.$el.states.has("focus")&&(o==null?void 0:o.setFocus())}_s(gd,d=>{h(d)});function h(d){if(r===0){n.value.src=d,r=1;return}if(r===1){i.value.src=d,r=2,i.value.alpha=0,i.value.animate({alpha:rn},l).start(),n.value.animate({alpha:0},l).start();return}r===2&&(n.value.src=d,r=1,n.value.alpha=0,n.value.animate({alpha:rn},l).start(),i.value.animate({alpha:0},l).start())}return(d,g)=>(Ft(),ks("node",{ref:"{window.APP}",onLast:()=>d.history.back(),onMenu:()=>d.navigate("/"),style:{width:1920,height:1080},onBackspace:c,onLeft:c,onRight:f},[be(ve(el)),be(pd,{ref_key:"navDrawer",ref:e,focusPage:()=>ve(o).setFocus()},null,8,["focusPage"]),Be("node",xd,[Be("node",{ref_key:"bg1",ref:n,style:a},null,512),Be("node",{ref_key:"bg2",ref:i,style:a,alpha:0},null,512),yd])],40,md))}}),vd="modulepreload",Td=function(s){return"/vue-demo-app/"+s},lo={},tl=function(t,e,r){let n=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));n=Promise.all(e.map(a=>{if(a=Td(a),a in lo)return;lo[a]=!0;const l=a.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${c}`))return;const f=document.createElement("link");if(f.rel=l?"stylesheet":vd,l||(f.as="script",f.crossOrigin=""),f.href=a,o&&f.setAttribute("nonce",o),document.head.appendChild(f),l)return new Promise((h,d)=>{f.addEventListener("load",h),f.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${a}`)))})}))}return n.then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},co=()=>tl(()=>import("./Browse-R8C2otfY.js"),__vite__mapDeps([0,1])),bd=()=>tl(()=>import("./Entity-MifboOO8.js"),__vite__mapDeps([2,1])),wd=[{path:"/",component:co},{path:"/browse/:filter",component:co,props:!0},{path:"/entity/:type/:id",component:bd}],Rd=jh({history:wh(),routes:wd}),Nt="/vue-demo-app/";function Sd(s){s.fontManager.addFontFace(new ds("msdf",{fontFamily:"Roboto",descriptors:{weight:700},atlasDataUrl:Nt+"fonts/Roboto-Bold.msdf.json",atlasUrl:Nt+"fonts/Roboto-Bold.msdf.png",stage:s})),s.fontManager.addFontFace(new ds("msdf",{fontFamily:"Roboto",descriptors:{weight:400},atlasDataUrl:Nt+"fonts/Roboto-Regular.msdf.json",atlasUrl:Nt+"fonts/Roboto-Regular.msdf.png",stage:s})),s.fontManager.addFontFace(new ds("msdf",{fontFamily:"Arial",descriptors:{weight:500},atlasDataUrl:Nt+"fonts/Roboto-Regular.msdf.json",atlasUrl:Nt+"fonts/Roboto-Regular.msdf.png",stage:s}))}Le.debug=!1;Le.animationsEnabled=!0;Le.fontSettings.fontFamily="Roboto";Le.fontSettings.color=4143380223;Le.fontSettings.fontSize=32;Le.rendererOptions={fpsUpdateInterval:0,enableInspector:!0,numImageWorkers:0};const{app:sl,rootNode:Ed,renderer:Cd}=Vf(_d);sl.use(Rd);Sd(Cd.stage);sl.mount(Ed);export{ir as A,na as B,oo as C,td as D,ud as E,$e as F,hd as _,Pd as a,Id as b,ks as c,Lt as d,be as e,Be as f,Na as g,Ld as h,gd as i,fs as j,qh as k,Md as l,la as m,Ds as n,Ft as o,ya as p,Or as q,tt as r,Qh as s,Od as t,ve as u,dr as v,_s as w,z as x,nu as y,qu as z};
//# sourceMappingURL=main-BBqsybQQ.js.map
