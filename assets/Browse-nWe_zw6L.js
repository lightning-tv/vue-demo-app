import{d as k,c as u,a as C,t as S,o as a,b as g,h as v,w as L,r as Y,u as h,e as $,n as D,f as l,g as I,i as E,j as J,k as V,l as N,m as W,F as _,p as j,_ as R,q as H,s as B}from"./main-RaulbzKS.js";import"./CoreExtension-CweeS3gt.js";const P="eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIyZDE4YjEwMTA0YjdiZTlkNjFiMWYwYjVlMGEwNzM2OCIsInN1YiI6IjYwZTVjMTdlNGNhNjc2MDA3NTA4Njc3MSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.D_nqH9kd-bhhWzeVsTDPYhHnsUaNAuyAa6YATmKHqsA",U="https://api.themoviedb.org/3";let F,T;const G="w185",Z={headers:{"Content-Type":"application/json",Authorization:"Bearer "+P}};function y(t,e=G){return T+e+t}function O(t,e={}){return F?m(t,e):A().then(()=>m(t,e))}function m(t,e={}){return fetch(U+t,{...Z,...e}).then(n=>n.json())}function A(){return m("/configuration").then(t=>{var e;return F=t,T=(e=t.images)==null?void 0:e.secure_base_url,t})}const q={get:O,loadConfig:A};function K(t,e){return t.length>e?t.substring(0,e-3)+"...":t}function Q(t,e=7){const n=[];for(let o=0,r=t.length;o<r;o+=e)n.push(t.slice(o,o+e));return n}function X(t=[]){return t.map(e=>({src:y(e.poster_path||e.profile_path),tileSrc:y(e.backdrop_path||e.profile_path,"w300"),backdrop:y(e.backdrop_path,"w1280"),href:`/entity/${e.media_type||"people"}/${e.id}`,shortTitle:K(e.title||e.name,30),title:e.title||e.name,data:e,entityInfo:{type:e.media_type||"people",id:e.id},heroContent:{title:e.title||e.name,description:e.overview}}))}const w=new Map,f=new Map;function ee(t){return e=>{const n=`/trending/${t}/week?page=${e}`;if(w.has(n))return w.get(n);const o=q.get(n).then(r=>{const i=r.results.filter(p=>!p.adult),d=(f.has(t)?f.get(t):[]).concat(X(i)),c=Q(d);return c[c.length-1].length<7?f.set(t,c.pop()):f.delete(t),c});return w.set(n,o),o}}const b=1200,te=k({__name:"ContentBlock",props:{title:String,description:String},setup(t){const e={display:"flex",flexDirection:"column",flexBoundary:"fixed",width:b,height:220,gap:16},n={fontSize:50,fontFamily:"Ubuntu",fontWeight:700,maxLines:1,width:b,contain:"width"},o={fontSize:28,fontFamily:"Ubuntu",fontWeight:400,lineHeight:32,width:b,maxLines:3,contain:"width"};return(r,i)=>(a(),u("node",{id:"contentBlock",style:e},[C("text",{style:n},S(t.title),1),C("text",{style:o},S(t.description),1)]))}}),ne=["onLeft","onRight","forwardFocus","selected","onSelectedChanged"],oe=k({__name:"Row",props:{selected:{type:Number,default:0},scrollIndex:Number,onLeft:Function,onRight:Function,onLayout:Function,onSelectedChanged:Function,scroll:String,style:Object},setup(t){const e=t,n=g(e.onLeft,v("left")),o=g(e.onRight,v("right")),r=g(e.onSelectedChanged,e.scroll!=="none"?L(e.x):void 0),i={display:"flex",flexBoundary:"fixed",flexDirection:"row",gap:30,transition:{x:{easing:"ease-in-out",duration:250}}};return(d,c)=>(a(),u("node",{onLeft:h(n),onRight:h(o),forwardFocus:h($),selected:e.selected,onSelectedChanged:h(r),style:D([i,e.style])},[Y(d.$slots,"default")],44,ne))}}),se=["src","item"],ae=k({__name:"Browse",setup(t){const e=l(1),n=l([]),o=l(null);l(null);const r=l(""),i=l({});e.value;const d={borderRadius:16,width:185,height:278,scale:1,zIndex:2,transition:{scale:{duration:250,easing:"ease-in-out"}},border:{width:0,color:0},focus:{scale:1.1,border:{color:4294967142,width:8}}},c=I(s=>r.value=s,400),p=I(s=>i.value=s||{},200);return E(()=>H.value,(s,M)=>{s&&s.item&&(s.item.backdrop&&c(s.item.backdrop),s.item.heroContent&&p(s.item.heroContent))}),J(()=>{ee("all")(1).then(s=>{n.value=s})}),(s,M)=>(a(),u(_,null,[V(te,{y:250,x:150,title:i.value.title,description:i.value.description},null,8,["title","description"]),n.value.length?(a(),N(R,{key:0,ref_key:"column",ref:o,x:150,y:450,width:1920,height:1080,autofocus:!0,plinko:!0},{default:j(()=>[(a(!0),u(_,null,B(n.value,z=>(a(),N(oe,{width:1620,height:300,justifyContent:"spaceBetween"},{default:j(()=>[(a(!0),u(_,null,B(z,x=>(a(),u("node",{style:d,src:x.src,item:x},null,8,se))),256))]),_:2},1024))),256))]),_:1},512)):W("",!0)],64))}});export{ae as default};
//# sourceMappingURL=Browse-nWe_zw6L.js.map
