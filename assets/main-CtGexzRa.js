const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Browse-B8jlrHPW.js","assets/styles-BtUwi64H.js","assets/Entity-ChfXJnP-.js"])))=>i.map(i=>d[i]);
var Qa=Object.defineProperty;var Za=(s,t,e)=>t in s?Qa(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var c=(s,t,e)=>Za(s,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=e(n);fetch(n.href,i)}})();var Ja={BASE_URL:"/vue-demo-app/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};function el(s,t){const e={alpha:!0,antialias:!1,depth:!1,stencil:!0,desynchronized:!1,powerPreference:"high-performance",premultipliedAlpha:!0,preserveDrawingBuffer:!1},r=s.getContext("webgl",e)||s.getContext("experimental-webgl",e);if(!r)throw new Error("Unable to create WebGL context");return t?new Proxy(r,{get(n,i){const o=n[i];return typeof o=="function"?(t.increment(String(i)),o.bind(n)):o}}):r}function z(s,t){if(!Sn()&&!s)throw new Error(t||"Assertion failed")}function ti(s,t,e){const r=Math.trunc(s>>>24),n=Math.trunc(s>>>16&255),i=Math.trunc(s>>>8&255),o=Math.trunc(s&255),a=Math.trunc(t>>>24),l=Math.trunc(t>>>16&255),u=Math.trunc(t>>>8&255),h=Math.trunc(t&255),f=Math.round(a*e+r*(1-e)),d=Math.round(l*e+n*(1-e)),g=Math.round(u*e+i*(1-e)),x=Math.round(h*e+o*(1-e));return(f<<24|d<<16|g<<8|x)>>>0}function tl(s,t){const e=s>>>24,r=s>>>16&255,n=s>>>8&255,i=Math.trunc((s&255)*t);return(e<<24|r<<16|n<<8|i)>>>0}let co=!0;function sl(s){co=s==="webgl"}function Ns(s,t,e=!1){const r=(s&255)/255*t,n=co?r:1,i=Math.trunc((s>>>24)*n),o=Math.trunc((s>>>16&255)*n),a=Math.trunc((s>>>8&255)*n),l=Math.trunc(r*255);return e?(l<<24|a<<16|o<<8|i)>>>0:(i<<24|o<<16|a<<8|l)>>>0}function sn(s,t){return Object.prototype.hasOwnProperty.call(s,t)}function Sn(){return Ja&&!0}let rl=1;function nl(){return rl++}class _t{constructor(){c(this,"eventListeners",{})}on(t,e){let r=this.eventListeners[t];r||(r=[]),r.push(e),this.eventListeners[t]=r}off(t,e){const r=this.eventListeners[t];if(!r)return;if(!e){delete this.eventListeners[t];return}const n=r.indexOf(e);n>=0&&r.splice(n,1)}once(t,e){const r=(n,i)=>{this.off(t,r),e(n,i)};this.on(t,r)}emit(t,e){const r=this.eventListeners[t];r&&[...r].forEach(n=>{n(this,e)})}removeAllListeners(){this.eventListeners={}}}const il=/^(data|ftps?|https?):/,Ps=s=>{const t=s>>>24,e=s>>>16&255,r=s>>>8&255,n=s&255;return[t/255,e/255,r/255,n/255]},ol=s=>{const t=s>>>24,e=s>>>16&255,r=s>>>8&255,n=s&255;return[t,e,r,n]};function al(s){return(s&255)/255}function kr(s){const t=Math.floor(s[0]*255),e=Math.floor(s[1]*255),r=Math.floor(s[2]*255),n=Math.floor(s[3]*255);return`rgba(${t},${e},${r},${n.toFixed(4)})`}function ks(s,t,e,r,n){return n?(n.x1=s,n.y1=t,n.x2=e,n.y2=r,n):{x1:s,y1:t,x2:e,y2:r}}function Dr(s,t){return s.x1<t.x2&&s.x2>t.x1&&s.y1<t.y2&&s.y2>t.y1}function ll(s,t){return t?(t.x=s.x1,t.y=s.y1,t.width=s.x2-s.x1,t.height=s.y2-s.y1,t):{x:s.x1,y:s.y1,width:s.x2-s.x1,height:s.y2-s.y1}}function uo(s,t,e){const r=Math.max(s.x,t.x),n=Math.max(s.y,t.y),i=Math.min(s.x+s.width,t.x+t.width)-r,o=Math.min(s.y+s.height,t.y+t.height)-n;return i>0&&o>0?e?(e.x=r,e.y=n,e.width=i,e.height=o,e):{x:r,y:n,width:i,height:o}:e?(e.x=0,e.y=0,e.width=0,e.height=0,e):{x:0,y:0,width:0,height:0}}function ho(s,t){return t?(t.x=s.x,t.y=s.y,t.width=s.width,t.height=s.height,t):{x:s.x,y:s.y,width:s.width,height:s.height}}function cl(s,t){return s===t?!0:s===null||t===null?!1:s.x===t.x&&s.y===t.y&&s.width===t.width&&s.height===t.height}function si(s,t){return s.x1<=t.x2&&s.y1<=t.y2&&s.x2>=t.x1&&s.y2>=t.y1}function ul(s){return s.x1<s.x2&&s.y1<s.y2}function hl(s){if(self.location.protocol==="file:"&&!il.test(s)){const e=self.location.pathname.split("/");e.pop();const r=e.join("/"),n=self.location.protocol+"//"+r;return s.charAt(0)==="."&&(s=s.slice(1)),s.charAt(0)==="/"&&(s=s.slice(1)),n+"/"+s}return new URL(s,self.location.href).href}class Me{constructor(){c(this,"ta");c(this,"tb");c(this,"tx");c(this,"tc");c(this,"td");c(this,"ty");c(this,"_floatArr",null);c(this,"mutation");this.ta=0,this.tb=0,this.tx=0,this.tc=0,this.td=0,this.ty=0,this.mutation=!0}static get temp(){return fl}static multiply(t,e,r){const n=t.ta*e.ta+t.tb*e.tc,i=t.ta*e.tb+t.tb*e.td,o=t.ta*e.tx+t.tb*e.ty+t.tx,a=t.tc*e.ta+t.td*e.tc,l=t.tc*e.tb+t.td*e.td,u=t.tc*e.tx+t.td*e.ty+t.ty;return r||(r=new Me),r.ta=n,r.tb=i,r.tx=o,r.tc=a,r.td=l,r.ty=u,r.mutation=!0,r}static identity(t){return t||(t=new Me),t.ta=1,t.tb=0,t.tx=0,t.tc=0,t.td=1,t.ty=0,t.mutation=!0,t}static translate(t,e,r){return r||(r=new Me),r.ta=1,r.tb=0,r.tx=t,r.tc=0,r.td=1,r.ty=e,r.mutation=!0,r}static scale(t,e,r){return r||(r=new Me),r.ta=t,r.tb=0,r.tx=0,r.tc=0,r.td=e,r.ty=0,r.mutation=!0,r}static rotate(t,e){const r=Math.cos(t),n=Math.sin(t);return e||(e=new Me),e.ta=r,e.tb=-n,e.tx=0,e.tc=n,e.td=r,e.ty=0,e.mutation=!0,e}static copy(t,e){return e||(e=new Me),e.ta=t.ta,e.tc=t.tc,e.tb=t.tb,e.td=t.td,e.tx=t.tx,e.ty=t.ty,e.mutation=!0,e}translate(t,e){return this.tx=this.ta*t+this.tb*e+this.tx,this.ty=this.tc*t+this.td*e+this.ty,this.mutation=!0,this}scale(t,e){return this.ta=this.ta*t,this.tb=this.tb*e,this.tc=this.tc*t,this.td=this.td*e,this.mutation=!0,this}rotate(t){if(t===0||!(t%Math.PI*2))return this;const e=Math.cos(t),r=Math.sin(t),n=this.ta*e+this.tb*r,i=this.tb*e-this.ta*r,o=this.tc*e+this.td*r,a=this.td*e-this.tc*r;return this.ta=n,this.tb=i,this.tc=o,this.td=a,this.mutation=!0,this}multiply(t){return Me.multiply(this,t,this)}getFloatArr(){return this._floatArr||(this._floatArr=new Float32Array(9)),this.mutation&&(this._floatArr[0]=this.ta,this._floatArr[1]=this.tc,this._floatArr[2]=0,this._floatArr[3]=this.tb,this._floatArr[4]=this.td,this._floatArr[5]=0,this._floatArr[6]=this.tx,this._floatArr[7]=this.ty,this._floatArr[8]=1,this.mutation=!1),this._floatArr}}const fl=new Me,Ds=0,Us=2,$s=4,zs=6,Hs=1,Ws=3,Vs=5,Gs=7;class ur{constructor(t){c(this,"data");this.data=new Float32Array(8),t&&(this.data[Ds]=t[Ds],this.data[Us]=t[Us],this.data[$s]=t[$s],this.data[zs]=t[zs],this.data[Hs]=t[Hs],this.data[Ws]=t[Ws],this.data[Vs]=t[Vs],this.data[Gs]=t[Gs])}static translate(t,e,r,n,i,o,a,l,u){return u||(u=new ur),u.data[Ds]=t,u.data[Us]=r,u.data[$s]=i,u.data[zs]=a,u.data[Hs]=e,u.data[Ws]=n,u.data[Vs]=o,u.data[Gs]=l,u}get x1(){return this.data[Ds]}get x2(){return this.data[Us]}get x3(){return this.data[$s]}get x4(){return this.data[zs]}get y1(){return this.data[Hs]}get y2(){return this.data[Ws]}get y3(){return this.data[Vs]}get y4(){return this.data[Gs]}}const ri=s=>s&&!(s&s-1),fo=(s,t,e,r)=>{const n=3*s,i=3*(e-s)-n,o=1-n-i,a=3*t,l=3*(r-t)-a,u=1-a-l;return function(h){if(h>=1)return 1;if(h<=0)return 0;let f=.5,d,g,x;for(let T=0;T<20;T++){if(d=f*(f*(f*o+i)+n),x=h-d,x>-1e-8&&x<1e-8)return f*(f*(f*u+l)+a);if(g=f*(f*(3*o)+2*i)+n,g>1e-10&&g<1e-10)break;f+=x/g}let y=0,v=1;for(let T=0;T<20;T++){if(f=.5*(y+v),d=f*(f*(f*o+i)+n),x=h-d,x>-1e-8&&x<1e-8)return f*(f*(f*u+l)+a);x<0?v=f:y=f}}},sr={},dl={ease:[.25,.1,.25,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1],"ease-in-sine":[.12,0,.39,0],"ease-out-sine":[.12,0,.39,0],"ease-in-out-sine":[.37,0,.63,1],"ease-in-cubic":[.32,0,.67,0],"ease-out-cubic":[.33,1,.68,1],"ease-in-out-cubic":[.65,0,.35,1],"ease-in-circ":[.55,0,1,.45],"ease-out-circ":[0,.55,.45,1],"ease-in-out-circ":[.85,0,.15,1],"ease-in-back":[.36,0,.66,-.56],"ease-out-back":[.34,1.56,.64,1],"ease-in-out-back":[.68,-.6,.32,1.6]},rr=s=>s,pl=s=>{const t=/-?\d*\.?\d+/g,e=s.match(t);if(e){const[r,n,i,o]=e,a=parseFloat(r||"0.42"),l=parseFloat(n||"0"),u=parseFloat(i||"1"),h=parseFloat(o||"1"),f=fo(a,l,u,h);return sr[s]=f,f}return console.warn("Unknown cubic-bezier timing: "+s),rr},gl=s=>{if(s==="linear")return rr;if(sr[s]!==void 0)return sr[s]||rr;if(s==="step-start")return()=>1;if(s==="step-end")return e=>e===1?1:0;const t=dl[s];if(t!==void 0){const[e,r,n,i]=t,o=fo(e,r,n,i);return sr[s]=o,o}return s.startsWith("cubic-bezier")?pl(s):(console.warn("Unknown timing function: "+s),rr)};function ni(s){return(s/1024/1024).toFixed(2)}class ml extends _t{constructor(e,r,n){super();c(this,"node");c(this,"props");c(this,"settings");c(this,"progress",0);c(this,"delayFor",0);c(this,"timingFunction");c(this,"propValuesMap",{});c(this,"dynPropValuesMap",{});this.node=e,this.props=r;for(const a in r)if(a!=="shaderProps")this.propValuesMap.props===void 0&&(this.propValuesMap.props={}),this.propValuesMap.props[a]={start:e[a],target:r[a]};else if(e.shader.type!=="DynamicShader"){this.propValuesMap.shaderProps={};for(const l in r.shaderProps)this.propValuesMap.shaderProps[l]={start:e.shader.props[l],target:r.shaderProps[l]}}else{const l=Object.keys(r.shaderProps),u=l.length;let h=0;for(;h<u;h++){const f=l[h],d=r.shaderProps[f];this.dynPropValuesMap[f]={};const g=Object.entries(d),x=g.length;let y=0;for(;y<x;y++){const[v,T]=g[y];this.dynPropValuesMap[f][v]={start:e.shader.props[f][v],target:T}}}}const i=n.easing||"linear",o=n.delay??0;this.settings={duration:n.duration??0,delay:o,easing:i,loop:n.loop??!1,repeat:n.repeat??0,repeatDelay:n.repeatDelay??0,stopMethod:n.stopMethod??!1},this.timingFunction=gl(i),this.delayFor=o}reset(){this.progress=0,this.delayFor=this.settings.delay||0,this.update(0)}restoreValues(e,r){const n=Object.entries(r),i=n.length;for(let o=0;o<i;o++){const[a,l]=n[o];e[a]=l.start}}restore(){this.reset(),this.propValuesMap.props!==void 0&&this.restoreValues(this.node,this.propValuesMap.props),this.propValuesMap.shaderProps!==void 0&&this.restoreValues(this.node.shader.props,this.propValuesMap.shaderProps);const e=Object.keys(this.dynPropValuesMap),r=e.length;if(r>0){let n=0;for(;n<r;n++){const i=e[n];this.restoreValues(this.node.shader.props[i],this.dynPropValuesMap[i])}}}reverseValues(e){const r=Object.entries(e),n=r.length;for(let i=0;i<n;i++){const[o,a]=r[i];e[o]={start:a.target,target:a.start}}}reverse(){this.progress=0,this.propValuesMap.props!==void 0&&this.reverseValues(this.propValuesMap.props),this.propValuesMap.shaderProps!==void 0&&this.reverseValues(this.propValuesMap.shaderProps);const e=Object.keys(this.dynPropValuesMap),r=e.length;if(r>0){let n=0;for(;n<r;n++){const i=e[n];this.reverseValues(this.dynPropValuesMap[i])}}this.settings.loop||(this.settings.stopMethod=!1)}applyEasing(e,r,n){return(this.timingFunction(e)||e)*(n-r)+r}updateValue(e,r,n,i){if(this.progress===1)return r;if(this.progress===0)return n;const o=r;if(e.indexOf("color")!==-1){if(n===o)return n;if(i){const a=this.timingFunction(this.progress)||this.progress;return ti(n,o,a)}return ti(n,o,this.progress)}return i?this.applyEasing(this.progress,n,o):n+(o-n)*this.progress}updateValues(e,r,n){const i=Object.entries(r),o=i.length;for(let a=0;a<o;a++){const[l,u]=i[a];e[l]=this.updateValue(l,u.target,u.start,n)}}update(e){const{duration:r,loop:n,easing:i,stopMethod:o}=this.settings,{delayFor:a}=this;if(r===0&&a===0){this.emit("finished",{});return}if(this.delayFor>0){if(this.delayFor-=e,this.delayFor>=0)return;e=-this.delayFor,this.delayFor=0}if(r===0){this.emit("finished",{});return}if(this.progress===0&&this.emit("animating",{}),this.progress+=e/r,this.progress>1&&(this.progress=n?0:1,o)){this.emit("finished",{});return}this.propValuesMap.props!==void 0&&this.updateValues(this.node,this.propValuesMap.props,i),this.propValuesMap.shaderProps!==void 0&&this.updateValues(this.node.shader.props,this.propValuesMap.shaderProps,i);const l=Object.keys(this.dynPropValuesMap),u=l.length;if(u>0){let h=0;for(;h<u;h++){const f=l[h];this.updateValues(this.node.shader.props[f],this.dynPropValuesMap[f],i)}}this.progress===1&&this.emit("finished",{})}}class xl extends _t{constructor(e,r){super();c(this,"manager");c(this,"animation");c(this,"stoppedPromise");c(this,"stoppedResolve",null);c(this,"state");this.manager=e,this.animation=r,this.state="stopped",this.stoppedPromise=Promise.resolve(),this.onAnimating=this.onAnimating.bind(this),this.onFinished=this.onFinished.bind(this)}start(){return this.state!=="running"&&(this.makeStoppedPromise(),this.registerAnimation(),this.state="running"),this}stop(){return this.unregisterAnimation(),this.stoppedResolve!==null&&(this.stoppedResolve(),this.stoppedResolve=null,this.emit("stopped",this)),this.animation.reset(),this.state="stopped",this}pause(){return this.unregisterAnimation(),this.state="paused",this}restore(){return this.stoppedResolve=null,this.animation.restore(),this}waitUntilStopped(){return this.stoppedPromise}registerAnimation(){this.animation.once("finished",this.onFinished),this.animation.on("animating",this.onAnimating),this.manager.registerAnimation(this.animation)}unregisterAnimation(){this.manager.unregisterAnimation(this.animation),this.animation.off("finished",this.onFinished),this.animation.off("animating",this.onAnimating)}makeStoppedPromise(){this.stoppedResolve===null&&(this.stoppedPromise=new Promise(e=>{this.stoppedResolve=e}))}onFinished(){z(this.stoppedResolve);const{loop:e,stopMethod:r}=this.animation.settings;if(r==="reverse"){this.animation.reverse();return}e||(this.unregisterAnimation(),this.stoppedResolve(),this.stoppedResolve=null,this.emit("stopped",this),this.state="stopped")}onAnimating(){this.emit("animating",this)}}var We;(function(s){s[s.Init=0]="Init",s[s.OutOfBounds=2]="OutOfBounds",s[s.InBounds=4]="InBounds",s[s.InViewport=8]="InViewport"})(We||(We={}));const Ls=new Map;Ls.set(We.Init,"init");Ls.set(We.OutOfBounds,"outOfBounds");Ls.set(We.InBounds,"inBounds");Ls.set(We.InViewport,"inViewport");var k;(function(s){s[s.Children=1]="Children",s[s.ScaleRotate=2]="ScaleRotate",s[s.Local=4]="Local",s[s.Global=8]="Global",s[s.Clipping=16]="Clipping",s[s.CalculatedZIndex=32]="CalculatedZIndex",s[s.ZIndexSortedChildren=64]="ZIndexSortedChildren",s[s.PremultipliedColors=128]="PremultipliedColors",s[s.WorldAlpha=256]="WorldAlpha",s[s.RenderState=512]="RenderState",s[s.IsRenderable=1024]="IsRenderable",s[s.RenderTexture=2048]="RenderTexture",s[s.ParentRenderTexture=4096]="ParentRenderTexture",s[s.None=0]="None",s[s.All=8191]="All"})(k||(k={}));class rn extends _t{constructor(e,r){super();c(this,"stage");c(this,"children",[]);c(this,"_id",nl());c(this,"props");c(this,"updateType",k.All);c(this,"globalTransform");c(this,"scaleRotateTransform");c(this,"localTransform");c(this,"renderCoords");c(this,"renderBound");c(this,"strictBound");c(this,"preloadBound");c(this,"clippingRect",{x:0,y:0,width:0,height:0,valid:!1});c(this,"isRenderable",!1);c(this,"renderState",We.Init);c(this,"worldAlpha",1);c(this,"premultipliedColorTl",0);c(this,"premultipliedColorTr",0);c(this,"premultipliedColorBl",0);c(this,"premultipliedColorBr",0);c(this,"calcZIndex",0);c(this,"hasRTTupdates",!1);c(this,"parentHasRenderTexture",!1);c(this,"_src","");c(this,"onTextureLoaded",(e,r)=>{var n,i;this.autosizeNode(r),this.stage.requestRender(),this.parentHasRenderTexture&&this.setRTTUpdates(1),this.emit("loaded",{type:"texture",dimensions:r}),((i=(n=this.props.textureOptions)==null?void 0:n.resizeMode)==null?void 0:i.type)==="contain"&&this.setUpdateType(k.Local)});c(this,"onTextureFailed",(e,r)=>{this.emit("failed",{type:"texture",error:r})});c(this,"onTextureFreed",()=>{this.emit("freed",{type:"texture"})});this.stage=e,this.props={...r,parent:null,texture:null,shader:e.defShaderCtr,src:"",rtt:!1,data:r.data||{}},this.parent=r.parent,this.shader=r.shader,this.texture=r.texture,this.src=r.src||"",this.rtt=r.rtt,this.updateScaleRotateTransform()}loadTexture(){const{texture:e}=this.props;z(e),queueMicrotask(()=>{this.textureOptions.preload&&e.ctxTexture.load(),e.state==="loaded"?(z(e.dimensions),this.onTextureLoaded(e,e.dimensions)):e.state==="failed"?(z(e.error),this.onTextureFailed(e,e.error)):e.state==="freed"&&this.onTextureFreed(e),e.on("loaded",this.onTextureLoaded),e.on("failed",this.onTextureFailed),e.on("freed",this.onTextureFreed)})}unloadTexture(){this.texture&&(this.texture.off("loaded",this.onTextureLoaded),this.texture.off("failed",this.onTextureFailed),this.texture.off("freed",this.onTextureFreed),this.texture.setRenderableOwner(this,!1))}autosizeNode(e){this.autosize&&(this.width=e.width,this.height=e.height)}setUpdateType(e){this.updateType|=e;const r=this.props.parent;r&&!(r.updateType&k.Children)&&r.setUpdateType(k.Children),this.parentHasRenderTexture&&this.setRTTUpdates(e)}sortChildren(){this.children.sort((e,r)=>e.calcZIndex-r.calcZIndex)}updateScaleRotateTransform(){const{rotation:e,scaleX:r,scaleY:n}=this.props;if(e===0&&r===1&&n===1){this.scaleRotateTransform=void 0;return}this.scaleRotateTransform=Me.rotate(e,this.scaleRotateTransform).scale(r,n)}updateLocalTransform(){var u,h;const{x:e,y:r,width:n,height:i}=this.props,o=this.props.mountX*n,a=this.props.mountY*i;if(this.scaleRotateTransform){const f=this.props.pivotX*n,d=this.props.pivotY*i;this.localTransform=Me.translate(e-o+f,r-a+d,this.localTransform).multiply(this.scaleRotateTransform).translate(-f,-d)}else this.localTransform=Me.translate(e-o,r-a,this.localTransform);const l=this.props.texture;if(l&&l.dimensions&&((h=(u=this.props.textureOptions)==null?void 0:u.resizeMode)==null?void 0:h.type)==="contain"){let f=1,d=1,g=0,x=0;const{width:y,height:v}=l.dimensions,T=y/v,R=n/i;if(T>R){const E=n/y,A=v*E;x=(i-A)/2,d=A/i}else{const E=i/v,A=y*E;g=(n-A)/2,f=A/n}this.localTransform.translate(g,x).scale(f,d)}this.setUpdateType(k.Global)}update(e,r){var o;this.updateType&k.ScaleRotate&&(this.updateScaleRotateTransform(),this.setUpdateType(k.Local)),this.updateType&k.Local&&(this.updateLocalTransform(),this.setUpdateType(k.Global));const n=this.props.parent;let i=k.None;if(this.updateType&k.ParentRenderTexture){let a=this.parent;for(;a;)a.rtt&&(this.parentHasRenderTexture=!0),a=a.parent}this.updateType^k.All&&this.updateType&k.RenderTexture&&this.children.forEach(a=>{a.setUpdateType(k.All)}),this.updateType&k.Global&&(z(this.localTransform),this.globalTransform=Me.copy((n==null?void 0:n.globalTransform)||this.localTransform,this.globalTransform),this.parentHasRenderTexture&&((o=this.props.parent)!=null&&o.rtt)&&(this.globalTransform=Me.identity()),n&&this.globalTransform.multiply(this.localTransform),this.calculateRenderCoords(),this.updateBoundingRect(),this.setUpdateType(k.Clipping|k.RenderState|k.Children),i|=k.Global),this.updateType&k.Clipping&&(this.calculateClippingRect(r),this.setUpdateType(k.Children),i|=k.Clipping),this.updateType&k.WorldAlpha&&(n?this.worldAlpha=n.worldAlpha*this.props.alpha:this.worldAlpha=this.props.alpha,this.setUpdateType(k.Children|k.PremultipliedColors|k.IsRenderable),i|=k.WorldAlpha),this.updateType&k.PremultipliedColors&&(this.premultipliedColorTl=Ns(this.props.colorTl,this.worldAlpha,!0),this.props.colorTl===this.props.colorTr&&this.props.colorBl===this.props.colorBr&&this.props.colorTl===this.props.colorBl?this.premultipliedColorTr=this.premultipliedColorBl=this.premultipliedColorBr=this.premultipliedColorTl:(this.premultipliedColorTr=Ns(this.props.colorTr,this.worldAlpha,!0),this.premultipliedColorBl=Ns(this.props.colorBl,this.worldAlpha,!0),this.premultipliedColorBr=Ns(this.props.colorBr,this.worldAlpha,!0))),this.updateType&k.RenderState&&(this.updateRenderState(r),this.setUpdateType(k.IsRenderable)),this.updateType&k.IsRenderable&&this.updateIsRenderable(),n&&this.updateType&k.CalculatedZIndex&&(this.calculateZIndex(),n.setUpdateType(k.ZIndexSortedChildren)),this.updateType&k.Children&&this.children.length&&!this.rtt&&this.children.forEach(a=>{a.setUpdateType(i),a.updateType!==0&&a.update(e,this.clippingRect)}),this.updateType&k.ZIndexSortedChildren&&this.sortChildren(),this.updateType=0}checkRenderProps(){return this.props.texture?!0:!this.props.width||!this.props.height?!1:!!(this.props.shader===this.stage.defShaderCtr||this.props.clipping||this.props.color!==0||this.props.colorTop!==0||this.props.colorBottom!==0||this.props.colorLeft!==0||this.props.colorRight!==0||this.props.colorTl!==0||this.props.colorTr!==0||this.props.colorBl!==0||this.props.colorBr!==0)}checkRenderBounds(e){z(this.renderBound);const r=e.width||this.stage.root.width,n=e.height||this.stage.root.height;if(this.strictBound=ks(e.x,e.y,e.x+r,e.y+n,this.strictBound),si(this.renderBound,this.strictBound))return We.InViewport;const i=this.stage.boundsMargin;return this.preloadBound=ks(this.strictBound.x1-i[3],this.strictBound.y1-i[0],this.strictBound.x2+i[1],this.strictBound.y2+i[2],this.preloadBound),si(this.renderBound,this.preloadBound)?We.InBounds:We.OutOfBounds}updateRenderState(e){const r=this.checkRenderBounds(e);if(r===this.renderState)return;const n=this.renderState;this.renderState=r;const i=Ls.get(r);z(i),this.emit(i,{previous:n,current:r})}updateIsRenderable(){let e;this.worldAlpha===0||!this.checkRenderProps()?e=!1:e=this.renderState>We.OutOfBounds,this.isRenderable!==e&&(this.isRenderable=e,this.onChangeIsRenderable(e))}onChangeIsRenderable(e){var r;(r=this.texture)==null||r.setRenderableOwner(this,e)}calculateRenderCoords(){const{width:e,height:r,globalTransform:n}=this;z(n);const{tx:i,ty:o,ta:a,tb:l,tc:u,td:h}=n;if(l===0&&u===0){const f=i,d=i+e*a,g=o,x=o+r*h;this.renderCoords=ur.translate(f,g,d,g,d,x,f,x,this.renderCoords)}else this.renderCoords=ur.translate(i,o,i+e*a,o+e*u,i+e*a+r*l,o+e*u+r*h,i+r*l,o+r*h,this.renderCoords)}updateBoundingRect(){const{renderCoords:e,globalTransform:r}=this;z(r),z(e);const{tb:n,tc:i}=r,{x1:o,y1:a,x3:l,y3:u}=e;if(n===0||i===0)this.renderBound=ks(o,a,l,u,this.renderBound);else{const{x2:h,x4:f,y2:d,y4:g}=e;this.renderBound=ks(Math.min(o,h,l,f),Math.min(a,d,u,g),Math.max(o,h,l,f),Math.max(a,d,u,g),this.renderBound)}}calculateClippingRect(e){z(this.globalTransform);const{clippingRect:r,props:n,globalTransform:i}=this,{clipping:o}=n,a=i.tb!==0||i.tc!==0;o&&!a?(r.x=i.tx,r.y=i.ty,r.width=this.width*i.ta,r.height=this.height*i.td,r.valid=!0):r.valid=!1,e.valid&&r.valid?uo(e,r,r):e.valid&&(ho(e,r),r.valid=!0)}calculateZIndex(){var o,a;const e=this.props,r=e.zIndex||0,n=((o=e.parent)==null?void 0:o.zIndex)||0;let i=r;(a=e.parent)!=null&&a.zIndexLocked&&(i=r<n?r:n),this.calcZIndex=i}destroy(){this.unloadTexture(),this.clippingRect.valid=!1,this.isRenderable=!1,delete this.renderCoords,delete this.renderBound,delete this.strictBound,delete this.preloadBound,delete this.globalTransform,delete this.scaleRotateTransform,delete this.localTransform,this.props.texture=null,this.props.shader=this.stage.defShaderCtr,this.rtt&&this.stage.renderer.removeRTTNode(this),this.removeAllListeners(),this.parent=null}renderQuads(e){const{texture:r,width:n,height:i,textureOptions:o,rtt:a,shader:l}=this.props;if(this.parentHasRenderTexture&&(!e.renderToTextureActive||this.parentRenderTexture!==e.activeRttNode))return;const{premultipliedColorTl:u,premultipliedColorTr:h,premultipliedColorBl:f,premultipliedColorBr:d}=this,{zIndex:g,worldAlpha:x,globalTransform:y,clippingRect:v,renderCoords:T}=this;z(y),z(T),e.addQuad({width:n,height:i,colorTl:u,colorTr:h,colorBl:f,colorBr:d,texture:r,textureOptions:o,zIndex:g,shader:l.shader,shaderProps:l.getResolvedProps(),alpha:x,clippingRect:v,tx:y.tx,ty:y.ty,ta:y.ta,tb:y.tb,tc:y.tc,td:y.td,renderCoords:T,rtt:a,parentHasRenderTexture:this.parentHasRenderTexture,framebufferDimensions:this.framebufferDimensions})}get id(){return this._id}get x(){return this.props.x}set x(e){this.props.x!==e&&(this.props.x=e,this.setUpdateType(k.Local))}get absX(){var e,r,n;return this.props.x+(((e=this.props.parent)==null?void 0:e.absX)||((n=(r=this.props.parent)==null?void 0:r.globalTransform)==null?void 0:n.tx)||0)}get absY(){var e;return this.props.y+(((e=this.props.parent)==null?void 0:e.absY)??0)}get y(){return this.props.y}set y(e){this.props.y!==e&&(this.props.y=e,this.setUpdateType(k.Local))}get width(){return this.props.width}set width(e){this.props.width!==e&&(this.props.width=e,this.setUpdateType(k.Local),this.props.rtt&&(this.texture=this.stage.txManager.loadTexture("RenderTexture",{width:this.width,height:this.height}),this.textureOptions.preload=!0,this.setUpdateType(k.RenderTexture)))}get height(){return this.props.height}set height(e){this.props.height!==e&&(this.props.height=e,this.setUpdateType(k.Local),this.props.rtt&&(this.texture=this.stage.txManager.loadTexture("RenderTexture",{width:this.width,height:this.height}),this.textureOptions.preload=!0,this.setUpdateType(k.RenderTexture)))}get scale(){return this.scaleX}set scale(e){this.scaleX=e,this.scaleY=e}get scaleX(){return this.props.scaleX}set scaleX(e){this.props.scaleX!==e&&(this.props.scaleX=e,this.setUpdateType(k.ScaleRotate))}get scaleY(){return this.props.scaleY}set scaleY(e){this.props.scaleY!==e&&(this.props.scaleY=e,this.setUpdateType(k.ScaleRotate))}get mount(){return this.props.mount}set mount(e){(this.props.mountX!==e||this.props.mountY!==e)&&(this.props.mountX=e,this.props.mountY=e,this.props.mount=e,this.setUpdateType(k.Local))}get mountX(){return this.props.mountX}set mountX(e){this.props.mountX!==e&&(this.props.mountX=e,this.setUpdateType(k.Local))}get mountY(){return this.props.mountY}set mountY(e){this.props.mountY!==e&&(this.props.mountY=e,this.setUpdateType(k.Local))}get pivot(){return this.props.pivot}set pivot(e){(this.props.pivotX!==e||this.props.pivotY!==e)&&(this.props.pivotX=e,this.props.pivotY=e,this.props.pivot=e,this.setUpdateType(k.Local))}get pivotX(){return this.props.pivotX}set pivotX(e){this.props.pivotX!==e&&(this.props.pivotX=e,this.setUpdateType(k.Local))}get pivotY(){return this.props.pivotY}set pivotY(e){this.props.pivotY!==e&&(this.props.pivotY=e,this.setUpdateType(k.Local))}get rotation(){return this.props.rotation}set rotation(e){this.props.rotation!==e&&(this.props.rotation=e,this.setUpdateType(k.ScaleRotate))}get alpha(){return this.props.alpha}set alpha(e){this.props.alpha=e,this.setUpdateType(k.PremultipliedColors|k.WorldAlpha)}get autosize(){return this.props.autosize}set autosize(e){this.props.autosize=e}get clipping(){return this.props.clipping}set clipping(e){this.props.clipping=e,this.setUpdateType(k.Clipping)}get color(){return this.props.color}set color(e){this.colorTop=e,this.colorBottom=e,this.colorLeft=e,this.colorRight=e,this.props.color=e,this.setUpdateType(k.PremultipliedColors)}get colorTop(){return this.props.colorTop}set colorTop(e){(this.props.colorTl!==e||this.props.colorTr!==e)&&(this.colorTl=e,this.colorTr=e),this.props.colorTop=e,this.setUpdateType(k.PremultipliedColors)}get colorBottom(){return this.props.colorBottom}set colorBottom(e){(this.props.colorBl!==e||this.props.colorBr!==e)&&(this.colorBl=e,this.colorBr=e),this.props.colorBottom=e,this.setUpdateType(k.PremultipliedColors)}get colorLeft(){return this.props.colorLeft}set colorLeft(e){(this.props.colorTl!==e||this.props.colorBl!==e)&&(this.colorTl=e,this.colorBl=e),this.props.colorLeft=e,this.setUpdateType(k.PremultipliedColors)}get colorRight(){return this.props.colorRight}set colorRight(e){(this.props.colorTr!==e||this.props.colorBr!==e)&&(this.colorTr=e,this.colorBr=e),this.props.colorRight=e,this.setUpdateType(k.PremultipliedColors)}get colorTl(){return this.props.colorTl}set colorTl(e){this.props.colorTl=e,this.setUpdateType(k.PremultipliedColors)}get colorTr(){return this.props.colorTr}set colorTr(e){this.props.colorTr=e,this.setUpdateType(k.PremultipliedColors)}get colorBl(){return this.props.colorBl}set colorBl(e){this.props.colorBl=e,this.setUpdateType(k.PremultipliedColors)}get colorBr(){return this.props.colorBr}set colorBr(e){this.props.colorBr=e,this.setUpdateType(k.PremultipliedColors)}get zIndexLocked(){return this.props.zIndexLocked||0}set zIndexLocked(e){this.props.zIndexLocked=e,this.setUpdateType(k.CalculatedZIndex|k.Children),this.children.forEach(r=>{r.setUpdateType(k.CalculatedZIndex)})}get zIndex(){return this.props.zIndex}set zIndex(e){this.props.zIndex=e,this.setUpdateType(k.CalculatedZIndex|k.Children),this.children.forEach(r=>{r.setUpdateType(k.CalculatedZIndex)})}get parent(){return this.props.parent}set parent(e){const r=this.props.parent;if(r!==e){if(this.props.parent=e,r){const n=r.children.indexOf(this);z(n!==-1,"CoreNode.parent: Node not found in old parent's children!"),r.children.splice(n,1),r.setUpdateType(k.Children|k.ZIndexSortedChildren)}e&&(e.children.push(this),this.setUpdateType(k.All),e.setUpdateType(k.Children|k.ZIndexSortedChildren),(e.rtt||e.parentHasRenderTexture)&&this.setRTTUpdates(k.All)),this.updateScaleRotateTransform()}}get rtt(){return this.props.rtt}set rtt(e){var r,n;if(this.props.rtt===!0&&(this.props.rtt=e,e===!1&&this.texture!==null)){this.unloadTexture(),this.setUpdateType(k.All),this.children.forEach(i=>{i.parentHasRenderTexture=!1}),(r=this.stage.renderer)==null||r.removeRTTNode(this);return}e!==!1&&(this.texture=this.stage.txManager.loadTexture("RenderTexture",{width:this.width,height:this.height}),this.textureOptions.preload=!0,this.props.rtt=!0,this.hasRTTupdates=!0,this.setUpdateType(k.All),this.children.forEach(i=>{i.setUpdateType(k.All)}),(n=this.stage.renderer)==null||n.renderToTexture(this))}get shader(){return this.props.shader}set shader(e){this.props.shader!==e&&(this.props.shader=e,e===this.stage.defShaderCtr&&this.setUpdateType(k.IsRenderable))}get src(){return this._src}set src(e){if(this._src!==e){if(this._src=e,!e){this.texture=null;return}this.texture=this.stage.txManager.loadTexture("ImageTexture",{src:e})}}get framebufferDimensions(){return this.parentHasRenderTexture&&!this.rtt&&this.parent?this.parent.framebufferDimensions:{width:this.width,height:this.height}}get parentRenderTexture(){let e=this.parent;for(;e;){if(e.rtt)return e;e=e.parent}return null}get texture(){return this.props.texture}set texture(e){if(this.props.texture===e)return;const r=this.props.texture;r&&(r.setRenderableOwner(this,!1),this.unloadTexture()),this.props.texture=e,e&&(e.setRenderableOwner(this,this.isRenderable),this.loadTexture()),this.setUpdateType(k.IsRenderable)}set textureOptions(e){this.props.textureOptions=e}get textureOptions(){return this.props.textureOptions}setRTTUpdates(e){var r;this.hasRTTupdates=!0,(r=this.parent)==null||r.setRTTUpdates(e)}animate(e,r){const n=new ml(this,e,r);return new xl(this.stage.animationManager,n)}flush(){}}const Xs={alpha:s=>s===1?null:{prop:"opacity",value:`${s}`},x:s=>({prop:"left",value:`${s}px`}),y:s=>({prop:"top",value:`${s}px`}),width:s=>s===0?null:{prop:"width",value:`${s}px`},height:s=>s===0?null:{prop:"height",value:`${s}px`},zIndex:()=>"zIndex",fontFamily:()=>"font-family",fontSize:()=>"font-size",fontStyle:()=>"font-style",fontWeight:()=>"font-weight",fontStretch:()=>"font-stretch",lineHeight:()=>"line-height",letterSpacing:()=>"letter-spacing",textAlign:()=>"text-align",overflowSuffix:()=>"overflow-suffix",maxLines:()=>"max-lines",contain:()=>"contain",verticalAlign:()=>"vertical-align",clipping:s=>s===!1?null:{prop:"overflow",value:s?"hidden":"visible"},rotation:s=>s===0?null:{prop:"transform",value:`rotate(${s}rad)`},scale:s=>s===1?null:{prop:"transform",value:`scale(${s})`},scaleX:s=>s===1?null:{prop:"transform",value:`scaleX(${s})`},scaleY:s=>s===1?null:{prop:"transform",value:`scaleY(${s})`},color:s=>s===0?null:{prop:"color",value:po(s)}},po=s=>{const t=(s&255)/255,e=s>>8&255,r=s>>16&255;return`rgba(${s>>24&255},${r},${e},${t})`},ii={id:"id"};class yl{constructor(t,e){c(this,"root",null);c(this,"canvas",null);c(this,"height",1080);c(this,"width",1920);c(this,"scaleX",1);c(this,"scaleY",1);if(Sn())return;if(!e)throw new Error("settings is required");this.height=Math.ceil(e.appHeight??1080/(e.deviceLogicalPixelRatio??1)),this.width=Math.ceil(e.appWidth??1900/(e.deviceLogicalPixelRatio??1)),this.scaleX=e.deviceLogicalPixelRatio??1,this.scaleY=e.deviceLogicalPixelRatio??1,this.canvas=t,this.root=document.createElement("div"),this.setRootPosition(),document.body.appendChild(this.root),new MutationObserver(this.setRootPosition.bind(this)).observe(t,{attributes:!0,childList:!1,subtree:!1}),new ResizeObserver(this.setRootPosition.bind(this)).observe(t),window.addEventListener("resize",this.setRootPosition.bind(this)),console.warn("Inspector is enabled, this will impact performance")}setRootPosition(){if(this.root===null||this.canvas===null)return;const t=this.canvas.getBoundingClientRect(),e=document.documentElement.scrollTop+t.top,r=document.documentElement.scrollLeft+t.left;this.root.id="root",this.root.style.left=`${r}px`,this.root.style.top=`${e}px`,this.root.style.width=`${this.width}px`,this.root.style.height=`${this.height}px`,this.root.style.position="absolute",this.root.style.transformOrigin="0 0 0",this.root.style.transform=`scale(${this.scaleX}, ${this.scaleY})`,this.root.style.overflow="hidden",this.root.style.zIndex="65534"}createDiv(t,e){const r=document.createElement("div");r.style.position="absolute",r.id=t.toString();for(const n in e)this.updateNodeProperty(r,n,e[n]);return r}createNode(t){const e=this.createDiv(t.id,t.props);return e.node=t,t.div=e,this.createProxy(t,e)}createTextNode(t){const e=this.createDiv(t.id,t.props);return e.node=t,t.div=e,this.createProxy(t,e)}createProxy(t,e){return new Proxy(t,{set:(r,n,i)=>(this.updateNodeProperty(e,n,i),Reflect.set(r,n,i)),get:(r,n,i)=>(n==="destroy"&&this.destroyNode(r.id),n==="animate"?(o,a)=>{const l=r.animate(o,a);return new Proxy(l,{get:(u,h,f)=>(h==="start"&&this.animateNode(e,o,a),Reflect.get(u,h,f))})}:Reflect.get(r,n,i))})}destroyNode(t){const e=document.getElementById(t.toString());e==null||e.remove()}updateNodeProperty(t,e,r){var n;if(!(this.root===null||r===void 0||r===null)){if(e==="parent"){const i=r.id;if(i===1){this.root.appendChild(t);return}const o=document.getElementById(i.toString());o==null||o.appendChild(t);return}if(e==="text"){t.innerHTML=String(r),t.style.visibility="hidden";return}if(e==="src"&&r){t.setAttribute("data-src",String(r));return}if(Xs[e]){const i=(n=Xs[e])==null?void 0:n.call(Xs,r);if(i===null)return;if(typeof i=="string"){t.style.setProperty(i,String(r));return}typeof i=="object"&&t.style.setProperty(i.prop,i.value);return}if(ii[e]){const i=ii[e];if(!i)return;t.setAttribute(String(i),String(r));return}if(e==="data"){for(const i in r){const o=r[i];o===void 0?t.removeAttribute(`data-${i}`):t.setAttribute(`data-${i}`,String(o))}return}}}animateNode(t,e,r){const{duration:n=1e3,delay:i=0}=r,{x:o,y:a,width:l,height:u,alpha:h=1,rotation:f=0,scale:d=1,color:g}=e;function x(){setTimeout(()=>{t.style.top=`${a}px`,t.style.left=`${o}px`,t.style.width=`${l}px`,t.style.height=`${u}px`,t.style.opacity=`${h}`,t.style.rotate=`${f}rad`,t.style.scale=`${d}`,t.style.color=po(g)},n)}setTimeout(x,i)}}const _l=s=>{let t=!1;const e=()=>{if(s.updateFrameTime(),s.updateAnimations(),!s.hasSceneUpdates()){s.calculateFps(),setTimeout(e,16.666666666666668),t||(s.txMemManager.checkCleanup()&&s.txMemManager.cleanup(),s.eventBus.emit("idle"),t=!0),s.flushFrameEvents();return}t=!1,s.drawFrame(),s.flushFrameEvents(),requestAnimationFrame(e)};requestAnimationFrame(e)},vl=()=>performance?performance.now():Date.now();class go{constructor(t,e){c(this,"textureSource");c(this,"memManager");this.memManager=t,this.textureSource=e}setTextureMemUse(t){this.memManager.setTextureMemUse(this.textureSource,t)}get renderable(){return this.textureSource.renderable}}class mo{constructor(t){c(this,"options");c(this,"mode");c(this,"stage");c(this,"txManager");c(this,"txMemManager");c(this,"shManager");c(this,"rttNodes",[]);this.options=t,this.stage=t.stage,this.txManager=t.txManager,this.txMemManager=t.txMemManager,this.shManager=t.shManager}}class Tl{}class xo{static makeCacheKey(t){return!1}static resolveDefaults(t){return{}}}function oi(s,t,e){const r=s.createShader(t);if(!r)throw new Error;if(s.shaderSource(r,e),s.compileShader(r),s.getShaderParameter(r,s.COMPILE_STATUS))return r;console.log(s.getShaderInfoLog(r)),s.deleteShader(r)}function wl(s,t,e){const r=s.createProgram();if(!r)throw new Error;if(s.attachShader(r,t),s.attachShader(r,e),s.linkProgram(r),s.getProgramParameter(r,s.LINK_STATUS))return r;console.log(s.getProgramInfoLog(r)),s.deleteProgram(r)}function bl(s){return self.WebGL2RenderingContext&&s instanceof self.WebGL2RenderingContext}class vt extends xo{constructor(e){super();c(this,"boundBufferCollection",null);c(this,"buffersBound",!1);c(this,"program");c(this,"vao");c(this,"renderer");c(this,"glw");c(this,"attributeBuffers");c(this,"attributeLocations");c(this,"attributeNames");c(this,"uniformLocations");c(this,"uniformTypes");c(this,"supportsIndexedTextures");const r=this.renderer=e.renderer,n=this.glw=this.renderer.glw;this.supportsIndexedTextures=e.supportsIndexedTextures||!1;const i=n.isWebGl2(),o=i&&e.webgl2Extensions||!i&&e.webgl1Extensions||[],a=i?"2.0":"1.0";o.forEach(y=>{if(!n.getExtension(y))throw new Error(`Shader "${this.constructor.name}" requires extension "${y}" for WebGL ${a} but wasn't found`)});const l=e.shaderSources||this.constructor.shaderSources;if(l)i&&(l!=null&&l.webGl2)&&(l.fragment=l.webGl2.fragment,l.vertex=l.webGl2.vertex,delete l.webGl2);else throw new Error(`Shader "${this.constructor.name}" is missing shaderSources.`);const u=r.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS,h=l.vertex instanceof Function?l.vertex(u):l.vertex,f=l.fragment instanceof Function?l.fragment(u):l.fragment,d=oi(n,n.VERTEX_SHADER,h),g=oi(n,n.FRAGMENT_SHADER,f);if(!d||!g)throw new Error;const x=wl(n,d,g);if(!x)throw new Error;if(this.program=x,i){const y=n.createVertexArray();if(!y)throw new Error;this.vao=y,n.bindVertexArray(this.vao)}this.attributeLocations={},this.attributeBuffers={},this.attributeNames=[],[...e.attributes].forEach(y=>{const v=n.getAttribLocation(this.program,y);if(v<0)throw new Error(`${this.constructor.name}: Vertex shader must have an attribute "${y}"!`);const T=n.createBuffer();if(!T)throw new Error(`${this.constructor.name}: Could not create buffer for attribute "${y}"`);this.attributeLocations[y]=v,this.attributeBuffers[y]=T,this.attributeNames.push(y)}),this.uniformLocations={},this.uniformTypes={},e.uniforms.forEach(y=>{const v=n.getUniformLocation(this.program,y.name);if(this.uniformTypes[y.name]=y.uniform,!v){console.warn(`Shader "${this.constructor.name}" could not get uniform location for "${y.name}"`);return}this.uniformLocations[y.name]=v})}bindBufferAttribute(e,r,n){const{glw:i}=this;i.enableVertexAttribArray(e),i.vertexAttribPointer(r,e,n.size,n.type,n.normalized,n.stride,n.offset)}disableAttribute(e){this.glw.disableVertexAttribArray(e)}disableAttributes(){for(const e in this.attributeLocations)this.disableAttribute(this.attributeLocations[e]);this.boundBufferCollection=null}canBatchShaderProps(e,r){return!1}bindRenderOp(e,r){this.bindBufferCollection(e.buffers),e.textures.length>0&&this.bindTextures(e.textures);const{glw:n,parentHasRenderTexture:i,renderToTexture:o}=e;if(!(o&&i)){if(i){const{width:a,height:l}=e.framebufferDimensions||{};this.setUniform("u_pixelRatio",1),this.setUniform("u_resolution",new Float32Array([a??0,l??0]))}else this.setUniform("u_pixelRatio",e.options.pixelRatio),this.setUniform("u_resolution",new Float32Array([n.canvas.width,n.canvas.height]));if(r){if(sn(r,"$dimensions")){let a=r.$dimensions;a||(a=e.dimensions),this.setUniform("u_dimensions",[a.width,a.height])}if(sn(r,"$alpha")){let a=r.$alpha;a||(a=e.alpha),this.setUniform("u_alpha",a)}this.bindProps(r)}}}setUniform(e,...r){this.glw.setUniform(this.uniformTypes[e],this.uniformLocations[e],...r)}bindBufferCollection(e){if(this.boundBufferCollection!==e){for(const r in this.attributeLocations){const n=e.getBuffer(r),i=e.getAttributeInfo(r);z(n,`Buffer for "${r}" not found`),z(i),this.bindBufferAttribute(this.attributeLocations[r],n,i)}this.boundBufferCollection=e}}bindProps(e){}bindTextures(e){}attach(){this.glw.useProgram(this.program),this.glw.useProgram(this.program),this.glw.isWebGl2()&&this.vao&&this.glw.bindVertexArray(this.vao)}detach(){this.disableAttributes()}}c(vt,"shaderSources");class yo extends Tl{constructor(e,r,n,i,o,a,l,u,h,f,d,g,x){super();c(this,"glw");c(this,"options");c(this,"buffers");c(this,"shader");c(this,"shaderProps");c(this,"alpha");c(this,"clippingRect");c(this,"dimensions");c(this,"bufferIdx");c(this,"zIndex");c(this,"renderToTexture");c(this,"parentHasRenderTexture");c(this,"framebufferDimensions");c(this,"length",0);c(this,"numQuads",0);c(this,"textures",[]);c(this,"maxTextures");this.glw=e,this.options=r,this.buffers=n,this.shader=i,this.shaderProps=o,this.alpha=a,this.clippingRect=l,this.dimensions=u,this.bufferIdx=h,this.zIndex=f,this.renderToTexture=d,this.parentHasRenderTexture=g,this.framebufferDimensions=x,this.maxTextures=i.supportsIndexedTextures?e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS):1}addTexture(e){const{textures:r,maxTextures:n}=this,i=r.findIndex(a=>a===e);if(i!==-1)return i;const o=r.length;return o>=n?4294967295:(this.textures.push(e),o)}draw(){const{glw:e,shader:r,shaderProps:n,options:i}=this,{shManager:o}=i;o.useShader(r),r.bindRenderOp(this,n);const a=this.bufferIdx/24*6*2;if(this.clippingRect.valid){const{x:l,y:u,width:h,height:f}=this.clippingRect,d=i.pixelRatio,g=i.canvas.height,x=Math.round(l*d),y=Math.round(h*d),v=Math.round(f*d),T=Math.round(g-v-u*d);e.setScissorTest(!0),e.scissor(x,T,y,v)}else e.setScissorTest(!1);e.drawElements(e.TRIANGLES,6*this.numQuads,e.UNSIGNED_SHORT,a)}}function Rl(s){const t={MAX_RENDERBUFFER_SIZE:0,MAX_TEXTURE_SIZE:0,MAX_VIEWPORT_DIMS:0,MAX_VERTEX_TEXTURE_IMAGE_UNITS:0,MAX_TEXTURE_IMAGE_UNITS:0,MAX_COMBINED_TEXTURE_IMAGE_UNITS:0,MAX_VERTEX_ATTRIBS:0,MAX_VARYING_VECTORS:0,MAX_VERTEX_UNIFORM_VECTORS:0,MAX_FRAGMENT_UNIFORM_VECTORS:0};return Object.keys(t).forEach(r=>{t[r]=s.getParameter(s[r])}),t}function Sl(s){const t={ANGLE_instanced_arrays:null,WEBGL_compressed_texture_s3tc:null,WEBGL_compressed_texture_astc:null,WEBGL_compressed_texture_etc:null,WEBGL_compressed_texture_etc1:null,WEBGL_compressed_texture_pvrtc:null,WEBKIT_WEBGL_compressed_texture_pvrtc:null,WEBGL_compressed_texture_s3tc_srgb:null,OES_vertex_array_object:null};return Object.keys(t).forEach(r=>{t[r]=s.getExtension(r)}),t}function El(s,t){const e=~~(t/80),r=new Uint16Array(e*6);for(let i=0,o=0;i<e;i+=6,o+=4)r[i]=o,r[i+1]=o+1,r[i+2]=o+2,r[i+3]=o+2,r[i+4]=o+1,r[i+5]=o+3;const n=s.createBuffer();s.elementArrayBufferData(n,r,s.STATIC_DRAW)}function Cl(s){return s!==null&&typeof s=="object"&&s.constructor&&s.constructor.name==="HTMLImageElement"}const Ur=new Uint8Array([0,0,0,0]);class hr extends go{constructor(e,r,n){super(r,n);c(this,"glw");c(this,"_nativeCtxTexture",null);c(this,"_state","freed");c(this,"_w",0);c(this,"_h",0);this.glw=e}get ctxTexture(){return this._state==="freed"&&this.load(),z(this._nativeCtxTexture),this._nativeCtxTexture}get w(){return this._w}get h(){return this._h}load(){this._state==="loading"||this._state==="loaded"||(this._state="loading",this.textureSource.setState("loading"),this._nativeCtxTexture=this.createNativeCtxTexture(),this.onLoadRequest().then(({width:e,height:r})=>{this._state!=="freed"&&(this._state="loaded",this._w=e,this._h=r,this.textureSource.setState("loaded",{width:e,height:r}))}).catch(e=>{this._state!=="freed"&&(this._state="failed",this.textureSource.setState("failed",e),console.error(e))}))}async onLoadRequest(){var o;const{glw:e}=this;e.texImage2D(0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null),this.setTextureMemUse(Ur.byteLength);const r=await((o=this.textureSource)==null?void 0:o.getTextureData());if(!this._nativeCtxTexture)return z(this._state==="freed"),{width:0,height:0};let n=0,i=0;if(z(this._nativeCtxTexture),e.activeTexture(0),r.data instanceof ImageBitmap||r.data instanceof ImageData||Cl(r.data)){const a=r.data;n=a.width,i=a.height,e.bindTexture(this._nativeCtxTexture),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!!r.premultiplyAlpha),e.texImage2D(0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,a),this.setTextureMemUse(n*i*4),(e.isWebGl2()||ri(n)&&ri(i))&&e.generateMipmap()}else if(r.data===null)n=0,i=0,e.bindTexture(this._nativeCtxTexture),e.texImage2D(0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,Ur),this.setTextureMemUse(Ur.byteLength);else if("mipmaps"in r.data&&r.data.mipmaps){const{mipmaps:a,width:l=0,height:u=0,type:h,glInternalFormat:f}=r.data,d=h==="ktx"?new DataView(a[0]??new ArrayBuffer(0)):a[0];e.bindTexture(this._nativeCtxTexture),e.compressedTexImage2D(0,f,l,u,0,d),e.texParameteri(e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_MIN_FILTER,e.LINEAR),this.setTextureMemUse(d.byteLength)}else console.error("WebGlCoreCtxTexture.onLoadRequest: Unexpected textureData returned",r);return{width:n,height:i}}free(){if(this._state==="freed"||(this._state="freed",this.textureSource.setState("freed"),this._w=0,this._h=0,!this._nativeCtxTexture))return;const{glw:e}=this;e.deleteTexture(this._nativeCtxTexture),this.setTextureMemUse(0),this._nativeCtxTexture=null}createNativeCtxTexture(){const{glw:e}=this,r=e.createTexture();if(!r)throw new Error("Could not create WebGL Texture");return e.activeTexture(0),e.bindTexture(r),e.texParameteri(e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),r}}class Zt extends _t{constructor(e){super();c(this,"txManager");c(this,"dimensions",null);c(this,"error",null);c(this,"state","freed");c(this,"renderableOwners",new Set);c(this,"renderable",!1);c(this,"lastRenderableChangeTime",0);this.txManager=e}setRenderableOwner(e,r){var i,o;const n=this.renderableOwners.size;if(r){this.renderableOwners.add(e);const a=this.renderableOwners.size;a>n&&a===1&&(this.renderable=!0,this.lastRenderableChangeTime=this.txManager.frameTime,(i=this.onChangeIsRenderable)==null||i.call(this,!0))}else{this.renderableOwners.delete(e);const a=this.renderableOwners.size;a<n&&a===0&&(this.renderable=!1,this.lastRenderableChangeTime=this.txManager.frameTime,(o=this.onChangeIsRenderable)==null||o.call(this,!1))}}get ctxTexture(){const e=this.txManager.renderer.createCtxTexture(this);return Object.defineProperty(this,"ctxTexture",{value:e}),e}setState(e,...r){if(this.state!==e){if(this.state=e,e==="loaded"){const n=r;this.dimensions=n[0]}else if(e==="failed"){const n=r;this.error=n[0]}this.emit(e,...r)}}static makeCacheKey(e){return!1}static resolveDefaults(e){return{}}}const _s=class _s extends Zt{constructor(e,r){super(e);c(this,"props");this.props=_s.resolveDefaults(r||{})}get color(){return this.props.color}set color(e){this.props.color=e}async getTextureData(){const e=new Uint32Array([this.color]),r=new Uint8ClampedArray(e.buffer);return{data:new ImageData(r,1,1),premultiplyAlpha:!0}}static makeCacheKey(e){return`ColorTexture,${_s.resolveDefaults(e).color}`}static resolveDefaults(e){return{color:e.color||4294967295}}};c(_s,"z$__type__Props");let fr=_s;const vr=class vr extends Zt{constructor(e,r){super(e);c(this,"props");c(this,"parentTexture");c(this,"onParentTxLoaded",()=>{this.setState("loaded",{width:this.props.width,height:this.props.height})});c(this,"onParentTxFailed",(e,r)=>{this.setState("failed",r)});this.props=vr.resolveDefaults(r||{}),this.parentTexture=this.props.texture,queueMicrotask(()=>{const n=this.parentTexture;n.state==="loaded"?this.onParentTxLoaded(n,n.dimensions):n.state==="failed"&&this.onParentTxFailed(n,n.error),n.on("loaded",this.onParentTxLoaded),n.on("failed",this.onParentTxFailed)})}onChangeIsRenderable(e){this.parentTexture.setRenderableOwner(this,e)}async getTextureData(){return{data:this.props}}static makeCacheKey(e){return!1}static resolveDefaults(e){return{texture:e.texture,x:e.x||0,y:e.y||0,width:e.width||0,height:e.height||0}}};c(vr,"z$__type__Props");let jt=vr;class Al extends hr{constructor(t,e,r){super(t,e,r)}async onLoadRequest(){var e,r;const t=await this.textureSource.getTextureData();return{width:((e=t.data)==null?void 0:e.width)||0,height:((r=t.data)==null?void 0:r.height)||0}}}class _o extends vt{constructor(t){super({renderer:t,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"}]})}bindTextures(t){const{glw:e}=this;e.activeTexture(0),e.bindTexture(t[0].ctxTexture)}}c(_o,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRESICISON_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;
      attribute vec4 a_color;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;


      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
        vec2 normalized = a_position * u_pixelRatio;
        vec2 screenSpace = vec2(2.0 / u_resolution.x, -2.0 / u_resolution.y);

        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;

        gl_Position = vec4(normalized.x * screenSpace.x - 1.0, normalized.y * -abs(screenSpace.y) + 1.0, 0.0, 1.0);
        gl_Position.y = -sign(screenSpace.y) * gl_Position.y;
      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRESICISON_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform sampler2D u_texture;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
          vec4 color = texture2D(u_texture, v_textureCoordinate);
          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);
      }
    `});class vo extends vt{constructor(e){super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color","a_textureIndex"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_textures[0]",uniform:"uniform1iv"}]});c(this,"supportsIndexedTextures",!0)}bindTextures(e){const{renderer:r,glw:n}=this;if(e.length>r.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS)throw new Error(`DefaultShaderBatched: Cannot bind more than ${r.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS} textures`);e.forEach((o,a)=>{n.activeTexture(a),n.bindTexture(o.ctxTexture)});const i=Array.from(Array(e.length).keys());this.setUniform("u_textures[0]",i)}}c(vo,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRESICISON_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_textureCoordinate;
      attribute vec2 a_position;
      attribute vec4 a_color;
      attribute float a_textureIndex;
      attribute float a_depth;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;
      varying float v_textureIndex;

      void main(){
        vec2 normalized = a_position * u_pixelRatio / u_resolution;
        vec2 zero_two = normalized * 2.0;
        vec2 clip_space = zero_two - 1.0;

        // pass to fragment
        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;
        v_textureIndex = a_textureIndex;

        // flip y
        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
      }
    `,fragment:e=>`
      #define txUnits ${e}
      # ifdef GL_FRAGMENT_PRESICISON_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform sampler2D u_image;
      uniform sampler2D u_textures[txUnits];

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;
      varying float v_textureIndex;

      vec4 sampleFromTexture(sampler2D textures[${e}], int idx, vec2 uv) {
        ${Array.from(Array(e).keys()).map(r=>`
          ${r!==0?"else ":""}if (idx == ${r}) {
            return texture2D(textures[${r}], uv);
          }
        `).join("")}
        return texture2D(textures[0], uv);
      }

      void main(){
        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);
      }
    `});class Re{constructor(t){c(this,"priority",1);c(this,"name","");c(this,"ref");c(this,"target");c(this,"passParameters","");c(this,"declaredUniforms","");c(this,"uniformInfo",{});const{ref:e,target:r,props:n={}}=t;this.ref=e,this.target=r;const i={},o=[];let a="";const l=this.constructor.uniforms||{};for(const u in l){const h=l[u],f=h.type,d=`${e}_${u}`;let g="";h.size&&(g=`[${h.size(n)}]`),o.push(d),a+=`uniform ${f} ${d}${g};`,i[u]={name:d,uniform:l[u].method}}this.passParameters=o.join(","),this.declaredUniforms=a,this.uniformInfo=i}static getEffectKey(t){return""}static getMethodParameters(t,e){const r=[];for(const n in t){const i=t[n];let o="";i.size&&(o=`[${i.size(e)}]`),r.push(`${i.type} ${n}${o}`)}return r.join(",")}static resolveDefaults(t){return{}}static makeEffectKey(t){return!1}}c(Re,"uniforms",{}),c(Re,"methods"),c(Re,"onShaderMask"),c(Re,"onColorize"),c(Re,"onEffectMask");const $r=new Map,Il=(s,t)=>{const e=JSON.stringify(s);if($r.has(e))return $r.get(e);s=s??[];const r=[],n=s.length;let i=0;for(;i<n;i++){const{name:o,type:a,props:l}=s[i],u={name:o,type:a,props:{}},h=t[a],f=h.resolveDefaults(l),d=h.uniforms,g=Object.keys(d),x=g.length;let y=0;for(;y<x;y++){const v=g[y],T=d[v],R={value:f[v],programValue:void 0,updateOnBind:T.updateOnBind||!1,hasValidator:T.validator!==void 0,hasProgramValueUpdater:T.updateProgramValue!==void 0},E=R.hasValidator&&T.validator(f[v],f)||f[v];f[v]!==E&&(R.validatedValue=E),R.hasProgramValueUpdater&&T.updateProgramValue(R),R.programValue===void 0&&(R.programValue=R.value),u.props[v]=R}r.push(u)}return $r.set(e,r),r},tt=class tt extends vt{constructor(e,r,n){const i=tt.createShader(r,n);super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_alpha",uniform:"uniform1f"},...i.uniforms],shaderSources:{vertex:i.vertex,fragment:i.fragment}});c(this,"effects",[]);this.effects=i.effects}bindTextures(e){const{glw:r}=this;r.activeTexture(0),r.bindTexture(e[0].ctxTexture)}bindProps(e){var o;const r=e.effects,n=r.length;let i=0;for(;i<n;i++){const a=r[i],l=this.effects[i].uniformInfo,u=Object.keys(a.props),h=u.length;let f=0;for(;f<h;f++){const d=u[f];if(a.props[d].updateOnBind===!0){const x=(o=this.renderer.shManager.getRegisteredEffects()[a.type])==null?void 0:o.uniforms[d];x==null||x.updateProgramValue(a.props[d],e)}this.setUniform(l[d].name,a.props[d].programValue)}}}canBatchShaderProps(e,r){if(e.$dimensions.width!==r.$dimensions.width||e.$dimensions.height!==r.$dimensions.height||e.effects.length!==r.effects.length)return!1;const n=e.effects.length;let i=0;for(;i<n;i++){const o=e.effects[i],a=r.effects[i];if(o.type!==a.type)return!1;for(const l in o.props)if(a.props&&!a.props[l]||o.props[l].value!==a.props[l].value)return!1}return!0}static createShader(e,r){const n={},i={};let o="";const a=[],l=[],u=e.effects.map(x=>{const y=r[x.type],v=y.getEffectKey(x.props||{});n[v]=n[v]?++n[v]:1;const T=n[v];T===1&&l.push({key:v,type:x.type,props:x.props});const R=new y({ref:`${v}${T===1?"":T}`,target:v,props:x.props});return o+=R.declaredUniforms,a.push(...Object.values(R.uniformInfo)),R});let h="";l==null||l.forEach(x=>{const y=r[x.type],v=y.resolveDefaults(x.props??{}),T=[];for(const F in y.methods){let Q=F;const q=y.methods[F];i[F]&&i[F]!==q&&(Q=tt.resolveMethodDuplicate(F,q,i)),i[Q]=q.replace("function",Q),T.push({m:F,cm:Q})}let R=y.onShaderMask instanceof Function?y.onShaderMask(v):y.onShaderMask,E=y.onColorize instanceof Function?y.onColorize(v):y.onColorize,A=y.onEffectMask instanceof Function?y.onEffectMask(v):y.onEffectMask;T.forEach(F=>{const{m:Q,cm:q}=F,Y=new RegExp(`\\$${Q}`,"g");R&&(R=R.replace(Y,q)),E&&(E=E.replace(Y,q)),A&&(A=A.replace(Y,q))});const L=y.getMethodParameters(y.uniforms,v),I=L.length>0?`, ${L}`:"";R&&(h+=`
        float fx_${x.key}_onShaderMask(float shaderMask ${I}) {
          ${R}
        }
        `),E&&(h+=`
          vec4 fx_${x.key}_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor${I}) {
            ${E}
          }
        `),A&&(h+=`
          vec4 fx_${x.key}_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor${I}) {
            ${A}
          }
        `)});let f="";for(const x in i)f+=i[x];let d="mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))",g=`

    `;for(let x=0;x<u.length;x++){const y=u[x],v=y.passParameters.length>0?`, ${y.passParameters}`:"",T=r[y.name];T.onShaderMask&&(g+=`
        shaderMask = fx_${y.target}_onShaderMask(shaderMask ${v});
        `),T.onColorize&&(g+=`
        maskColor = fx_${y.target}_onColorize(shaderMask, maskColor, shaderColor${v});
        `),T.onEffectMask&&(d=`fx_${y.target}_onEffectMask(shaderMask, maskColor, shaderColor${v})`);const R=u[x+1];(R===void 0||r[R.name].onEffectMask)&&(g+=`
          shaderColor = ${d};
        `)}return{effects:u,uniforms:a,fragment:tt.fragment(o,f,h,g),vertex:tt.vertex()}}static resolveMethodDuplicate(e,r,n,i=0){const o=e+(i>0?i:"");return n[o]&&n[o]!==r?this.resolveMethodDuplicate(e,r,n,++i):o}static resolveDefaults(e,r){return z(r),{effects:Il(e.effects??[],r),$dimensions:{width:0,height:0},$alpha:0}}static makeCacheKey(e,r){var i;let n="";return(i=e.effects)==null||i.forEach(o=>{const l=r[o.type].getEffectKey(o.props||{});n+=`,${l}`}),`DynamicShader${n}`}};c(tt,"z$__type__Props"),c(tt,"vertex",()=>`
    # ifdef GL_FRAGMENT_PRESICISON_HIGH
    precision highp float;
    # else
    precision mediump float;
    # endif

    attribute vec2 a_textureCoordinate;
    attribute vec2 a_position;
    attribute vec4 a_color;
    attribute float a_textureIndex;

    uniform vec2 u_resolution;
    uniform float u_pixelRatio;

    varying vec4 v_color;
    varying vec2 v_textureCoordinate;
    varying float v_textureIndex;

    void main(){
      vec2 normalized = a_position * u_pixelRatio / u_resolution;
      vec2 zero_two = normalized * 2.0;
      vec2 clip_space = zero_two - 1.0;

      // pass to fragment
      v_color = a_color;
      v_textureCoordinate = a_textureCoordinate;
      v_textureIndex = a_textureIndex;

      // flip y
      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
    }
  `),c(tt,"fragment",(e,r,n,i)=>`
    # ifdef GL_FRAGMENT_PRESICISON_HIGH
    precision highp float;
    # else
    precision mediump float;
    # endif

    #define PI 3.14159265359

    uniform vec2 u_resolution;
    uniform vec2 u_dimensions;
    uniform float u_alpha;
    uniform float u_radius;
    uniform sampler2D u_texture;
    uniform float u_pixelRatio;

    ${e}

    varying vec4 v_color;
    varying vec2 v_textureCoordinate;

    ${r}

    ${n}

    void main() {
      vec2 p = v_textureCoordinate.xy * u_dimensions - u_dimensions * 0.5;
      vec2 d = abs(p) - (u_dimensions) * 0.5;
      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));

      vec4 shaderColor = vec4(0.0);
      float shaderMask = lng_DefaultMask;

      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;

      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));

      ${i}

      gl_FragColor = shaderColor * u_alpha;
    }
  `);let Wt=tt;class nn extends vt{constructor(t){super({renderer:t,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_radius",uniform:"uniform1f"}]})}static resolveDefaults(t){return{radius:t.radius||10,$dimensions:{width:0,height:0}}}bindTextures(t){const{glw:e}=this;e.activeTexture(0),e.bindTexture(t[0].ctxTexture)}bindProps(t){this.setUniform("u_radius",t.radius)}canBatchShaderProps(t,e){return t.radius===e.radius&&t.$dimensions.width===e.$dimensions.width&&t.$dimensions.height===e.$dimensions.height}}c(nn,"z$__type__Props"),c(nn,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRESICISON_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;
      attribute vec4 a_color;
      attribute float a_textureIndex;
      attribute float a_depth;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
        vec2 normalized = a_position * u_pixelRatio / u_resolution;
        vec2 zero_two = normalized * 2.0;
        vec2 clip_space = zero_two - 1.0;

        // pass to fragment
        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;

        // flip y
        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRESICISON_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform vec2 u_dimensions;
      uniform float u_radius;
      uniform sampler2D u_texture;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      float boxDist(vec2 p, vec2 size, float radius){
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }

      float fillMask(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }

      void main() {
        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;
        vec2 halfDimensions = u_dimensions * 0.5;

        float d = boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);
        gl_FragColor = mix(vec4(0.0), color, fillMask(d));
      }
    `});const Ml=new Float32Array([1,0,0,0,1,0,0,0,1]),Tr=class Tr extends vt{constructor(t){super({renderer:t,attributes:["a_position","a_textureCoordinate"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_transform",uniform:"uniformMatrix3fv"},{name:"u_scrollY",uniform:"uniform1f"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_color",uniform:"uniform4fv"},{name:"u_size",uniform:"uniform1f"},{name:"u_distanceRange",uniform:"uniform1f"},{name:"u_debug",uniform:"uniform1i"}]})}bindTextures(t){const{glw:e}=this;e.activeTexture(0),e.bindTexture(t[0].ctxTexture)}bindProps(t){const e=Tr.resolveDefaults(t);for(const r in e)if(r==="transform")this.setUniform("u_transform",!1,e[r]);else if(r==="scrollY")this.setUniform("u_scrollY",e[r]);else if(r==="color"){const n=Ps(e.color);this.setUniform("u_color",n)}else r==="size"?this.setUniform("u_size",e[r]):r==="distanceRange"?this.setUniform("u_distanceRange",e[r]):r==="debug"&&this.setUniform("u_debug",e[r]?1:0)}static resolveDefaults(t={}){return{transform:t.transform??Ml,scrollY:t.scrollY??0,color:t.color??4294967295,size:t.size??16,distanceRange:t.distanceRange??1,debug:t.debug??!1}}};c(Tr,"shaderSources",{vertex:`
      // an attribute is an input (in) to a vertex shader.
      // It will receive data from a buffer
      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;

      uniform vec2 u_resolution;
      uniform mat3 u_transform;
      uniform float u_scrollY;
      uniform float u_pixelRatio;
      uniform float u_size;

      varying vec2 v_texcoord;

      void main() {
        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);
        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;

        // Calculate screen space with pixel ratio
        vec2 screenSpace = (transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1);

        gl_Position = vec4(screenSpace, 0.0, 1.0);
        v_texcoord = a_textureCoordinate;

      }
    `,fragment:`
      precision highp float;

      uniform vec4 u_color;
      uniform sampler2D u_texture;
      uniform float u_distanceRange;
      uniform float u_pixelRatio;
      uniform int u_debug;

      varying vec2 v_texcoord;

      float median(float r, float g, float b) {
          return max(min(r, g), min(max(r, g), b));
      }

      void main() {
          vec3 sample = texture2D(u_texture, v_texcoord).rgb;
          if (u_debug == 1) {
            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);
            return;
          }
          float scaledDistRange = u_distanceRange * u_pixelRatio;
          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);
          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;

          // Build the final color.
          // IMPORTANT: We must premultiply the color by the alpha value before returning it.
          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);
      }
    `});let on=Tr;const Jt=s=>{s.programValue===void 0&&(s.programValue=new Float32Array(4));const t=s.value,e=s.programValue;e[0]=(t>>>24)/255,e[1]=(t>>>16&255)/255,e[2]=(t>>>8&255)/255,e[3]=(t&255)/255},Pl=s=>{const t=s.validatedValue||s.value;if(s.programValue instanceof Float32Array){const e=s.programValue;e[0]=t[0],e[1]=t[1]}else s.programValue=new Float32Array(t)},Ll=s=>{const t=s.validatedValue||s.value;if(s.programValue instanceof Float32Array){const e=s.programValue;e[0]=t[0],e[1]=t[1],e[2]=t[1],e[3]=t[1]}else s.programValue=new Float32Array(t)},To=s=>{const t=s.validatedValue||s.value;if(s.programValue instanceof Float32Array){const e=t.length,r=s.programValue;for(let n=0;n<e;n++)r[n]=t[n]}else s.programValue=new Float32Array(t)},En=s=>{const t=Array.isArray(s);if(t){if(t&&s.length===4)return s;if(t&&s.length===2)return[s[0],s[1],s[0],s[1]];if(t&&s.length===3)return[s[0],s[1],s[2],s[0]]}else return[s,s,s,s];return[s[0],s[0],s[0],s[0]]},wo=(s,t)=>{s.programValue===void 0&&(s.programValue=new Float32Array(4));const e=s.programValue,r=s.validatedValue||s.value;if(t===void 0&&s.$dimensions===void 0){e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3];return}let n=s.$dimensions;if(t!==void 0){const{$dimensions:d}=t;if(n!==void 0&&(n.width===d.width||n.height===d.height))return;n===void 0&&(n={width:d==null?void 0:d.width,height:d==null?void 0:d.height},s.$dimensions=n)}const{width:i,height:o}=n,[a,l,u,h]=r,f=Math.min(Math.min(Math.min(i/Math.max(i,a+l),i/Math.max(i,u+h)),Math.min(o/Math.max(o,a+u),o/Math.max(o,l+h))),1);e[0]=a*f,e[1]=l*f,e[2]=u*f,e[3]=h*f};class Bt extends Re{constructor(){super(...arguments);c(this,"name","radius")}static getEffectKey(){return"radius"}static resolveDefaults(e){return{radius:e.radius??10}}}c(Bt,"z$__type__Props"),c(Bt,"uniforms",{radius:{value:0,method:"uniform4fv",type:"vec4",updateOnBind:!0,validator:En,updateProgramValue:wo}}),c(Bt,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,boxDist:`
      float function(vec2 p, vec2 size, float radius) {
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }
    `}),c(Bt,"onShaderMask",`
  vec2 halfDimensions = u_dimensions * 0.5;
  float r = radius[0] * step(v_textureCoordinate.x, 0.5) * step(v_textureCoordinate.y, 0.5);
  r = r + radius[1] * step(0.5, v_textureCoordinate.x) * step(v_textureCoordinate.y, 0.5);
  r = r + radius[2] * step(0.5, v_textureCoordinate.x) * step(0.5, v_textureCoordinate.y);
  r = r + radius[3] * step(v_textureCoordinate.x, 0.5) * step(0.5, v_textureCoordinate.y);
  return $boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);
  `),c(Bt,"onEffectMask",`
  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));
  `);class ns extends Re{constructor(){super(...arguments);c(this,"name","border")}static getEffectKey(){return"border"}static resolveDefaults(e){return{width:e.width??10,color:e.color??4294967295}}}c(ns,"z$__type__Props"),c(ns,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:Jt,method:"uniform4fv",type:"vec4"}}),c(ns,"onEffectMask",`
  float intR = shaderMask + 1.0;
  float mask = clamp(intR + width, 0.0, 1.0) - clamp(intR, 0.0, 1.0);
  return mix(shaderColor, mix(shaderColor, maskColor, maskColor.a), mask);
  `),c(ns,"onColorize",`
    return color;
  `);const ut=class ut extends Re{constructor(){super(...arguments);c(this,"name","linearGradient")}static getEffectKey(e){return`linearGradient${e.colors.length}`}static resolveDefaults(e){const r=e.colors??[4278190080,4294967295];let n=e.stops||[];if(n.length===0||n.length!==r.length){const i=r.length;let o=0;const a=n;for(;o<i;o++)n[o]?(a[o]=n[o],n[o-1]===void 0&&a[o-2]!==void 0&&(a[o-1]=a[o-2]+(n[o]-a[o-2])/2)):a[o]=o*(1/(r.length-1));n=a}return{colors:r,stops:n,angle:e.angle??0}}};c(ut,"z$__type__Props"),c(ut,"uniforms",{angle:{value:0,method:"uniform1f",type:"float"},colors:{value:4294967295,validator:e=>e.reduce((r,n)=>r.concat(Ps(n)),[]),updateProgramValue:To,size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),c(ut,"methods",{fromLinear:`
      vec4 function(vec4 linearRGB) {
        vec4 higher = vec4(1.055)*pow(linearRGB, vec4(1.0/2.4)) - vec4(0.055);
        vec4 lower = linearRGB * vec4(12.92);
        return mix(higher, lower, 1.0);
      }
    `,toLinear:`
      vec4 function(vec4 sRGB) {
        vec4 higher = pow((sRGB + vec4(0.055))/vec4(1.055), vec4(2.4));
        vec4 lower = sRGB/vec4(12.92);
        return mix(higher, lower, 1.0);
      }
    `,calcPoint:`
      vec2 function(float d, float angle) {
        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);
      }
    `}),c(ut,"ColorLoop",e=>{let r="";for(let n=2;n<e;n++)r+=`colorOut = mix(colorOut, colors[${n}], clamp((dist - stops[${n-1}]) / (stops[${n}] - stops[${n-1}]), 0.0, 1.0));`;return r}),c(ut,"onColorize",e=>{const r=e.colors.length||1;return`
      float a = angle - (PI / 180.0 * 90.0);
      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));
      vec2 f = $calcPoint(lineDist * 0.5, a);
      vec2 t = $calcPoint(lineDist * 0.5, a + PI);
      vec2 gradVec = t - f;
      float dist = dot(v_textureCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);

      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);
      vec4 colorOut = $fromLinear(mix($toLinear(colors[0]), $toLinear(colors[1]), stopCalc));
      ${ut.ColorLoop(r)}
      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));
    `});let an=ut;class ln extends Re{constructor(){super(...arguments);c(this,"name","grayscale")}static getEffectKey(){return"grayscale"}static resolveDefaults(e){return{amount:e.amount??1}}}c(ln,"uniforms",{amount:{value:1,method:"uniform1f",type:"float"}}),c(ln,"onColorize",`
    float grayness = 0.2 * maskColor.r + 0.6 * maskColor.g + 0.2 * maskColor.b;
    return vec4(amount * vec3(grayness) + (1.0 - amount) * maskColor.rgb, maskColor.a);
  `);class Nt extends Re{constructor(){super(...arguments);c(this,"name","borderRight")}static getEffectKey(){return"borderRight"}static resolveDefaults(e){return{width:e.width??10,color:e.color??4294967295}}}c(Nt,"z$__type__Props"),c(Nt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:Jt,method:"uniform4fv",type:"vec4"}}),c(Nt,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),c(Nt,"onEffectMask",`
  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),c(Nt,"onColorize",`
    return color;
  `);class kt extends Re{constructor(){super(...arguments);c(this,"name","borderTop")}static getEffectKey(){return"borderTop"}static resolveDefaults(e){return{width:e.width??10,color:e.color??4294967295}}}c(kt,"z$__type__Props"),c(kt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:Jt,method:"uniform4fv",type:"vec4"}}),c(kt,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),c(kt,"onEffectMask",`
  vec2 pos = vec2(0.0, width * 0.5);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),c(kt,"onColorize",`
    return color;
  `);class Dt extends Re{constructor(){super(...arguments);c(this,"name","borderBottom")}static getEffectKey(){return"borderBottom"}static resolveDefaults(e){return{width:e.width??10,color:e.color??4294967295}}}c(Dt,"z$__type__Props"),c(Dt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:Jt,method:"uniform4fv",type:"vec4"}}),c(Dt,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),c(Dt,"onEffectMask",`
  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),c(Dt,"onColorize",`
    return color;
  `);class Ut extends Re{constructor(){super(...arguments);c(this,"name","borderLeft")}static getEffectKey(){return"borderLeft"}static resolveDefaults(e){return{width:e.width??10,color:e.color??4294967295}}}c(Ut,"z$__type__Props"),c(Ut,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:Jt,method:"uniform4fv",type:"vec4"}}),c(Ut,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),c(Ut,"onEffectMask",`
  vec2 pos = vec2(width * 0.5, 0.0);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),c(Ut,"onColorize",`
    return color;
  `);class is extends Re{constructor(){super(...arguments);c(this,"name","glitch")}static getEffectKey(e){return"glitch"}static resolveDefaults(e){return{amplitude:e.amplitude??.2,narrowness:e.narrowness??4,blockiness:e.blockiness??2,minimizer:e.minimizer??8,time:e.time??Date.now()}}}c(is,"z$__type__Props"),c(is,"uniforms",{amplitude:{value:0,method:"uniform1f",type:"float"},narrowness:{value:0,method:"uniform1f",type:"float"},blockiness:{value:0,method:"uniform1f",type:"float"},minimizer:{value:0,method:"uniform1f",type:"float"},time:{value:0,method:"uniform1f",updateOnBind:!0,updateProgramValue:e=>{const r=e.value=(Date.now()-e.value)%1e3;e.programValue=r},type:"float"}}),c(is,"methods",{rand:`
      float function(vec2 p, float time) {
        float t = floor(time * 20.) / 10.;
        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);
      }
    `,noise:`
      float function(vec2 uv, float blockiness, float time) {
        vec2 lv = fract(uv);
        vec2 id = floor(uv);

        float n1 = rand(id, time);
        float n2 = rand(id+vec2(1,0), time);
        float n3 = rand(id+vec2(0,1), time);
        float n4 = rand(id+vec2(1,1), time);
        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);
        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);
      }
    `,fbm:`
      float function(vec2 uv, int count, float blockiness, float complexity, float time) {
        float val = 0.0;
        float amp = 0.5;
        const int MAX_ITERATIONS = 10;

        for(int i = 0; i < MAX_ITERATIONS; i++) {
          if(i >= count) {break;}
          val += amp * noise(uv, blockiness, time);
          amp *= 0.5;
          uv *= complexity;
        }
        return val;
      }
    `}),c(is,"onColorize",`
    vec2 uv = v_textureCoordinate.xy;
    float aspect = u_dimensions.x / u_dimensions.y;
    vec2 a = vec2(uv.x * aspect , uv.y);
    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));

    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);
    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);
    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);
    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);

    vec3 f = vec3(colR, colG, colB);
    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);
  `);class nr extends Re{constructor(){super(...arguments);c(this,"name","fadeOut")}static getEffectKey(){return"fadeOut"}static resolveDefaults(e){return{fade:e.fade??10}}}c(nr,"z$__type__Props"),c(nr,"uniforms",{fade:{value:0,method:"uniform4fv",type:"vec4",validator:En,updateProgramValue:Ll}}),c(nr,"onColorize",`
  vec2 point = v_textureCoordinate.xy * u_dimensions.xy;
  vec2 pos1;
  vec2 pos2;
  vec2 d;
  float c;
  vec4 result = maskColor;


  if(fade[0] > 0.0) {
    pos1 = vec2(point.x, point.y);
    pos2 = vec2(point.x, point.y + fade[0]);
    d = pos2 - pos1;
    c = dot(pos1, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[1] > 0.0) {
    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_textureCoordinate.y);
    pos2 = vec2(point.x - u_dimensions.x, v_textureCoordinate.y);
    d = pos1 - pos2;
    c = dot(pos2, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[2] > 0.0) {
    pos1 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y - fade[2]);
    pos2 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y);
    d = pos1 - pos2;
    c = dot(pos2, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[3] > 0.0) {
    pos1 = vec2(point.x, point.y);
    pos2 = vec2(point.x + fade[3], point.y);
    d = pos2 - pos1;
    c = dot(pos1, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  return result;
  `);const Et=class Et extends Re{constructor(){super(...arguments);c(this,"name","radialGradient")}static getEffectKey(e){return`radialGradient${e.colors.length}`}static resolveDefaults(e){const r=e.colors??[4278190080,4294967295];let n=e.stops||[];if(n.length===0||n.length!==r.length){const i=r.length;let o=0;const a=n;for(;o<i;o++)n[o]?(a[o]=n[o],n[o-1]===void 0&&a[o-2]!==void 0&&(a[o-1]=a[o-2]+(n[o]-a[o-2])/2)):a[o]=o*(1/(r.length-1));n=a}return{colors:r,stops:n,width:e.width??0,height:e.height??e.width??0,pivot:e.pivot??[.5,.5]}}};c(Et,"z$__type__Props"),c(Et,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},pivot:{value:[.5,.5],updateProgramValue:Pl,method:"uniform2fv",type:"vec2"},colors:{value:4294967295,validator:e=>e.reduce((r,n)=>r.concat(Ps(n)),[]),updateProgramValue:To,size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),c(Et,"ColorLoop",e=>{let r="";for(let n=2;n<e;n++)r+=`colorOut = mix(colorOut, colors[${n}], clamp((dist - stops[${n-1}]) / (stops[${n}] - stops[${n-1}]), 0.0, 1.0));`;return r}),c(Et,"onColorize",e=>{const r=e.colors.length||1;return`
      vec2 point = v_textureCoordinate.xy * u_dimensions;
      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);

      float dist = length((point - projection) / vec2(width, height));

      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);
      vec4 colorOut = mix(colors[0], colors[1], stopCalc);
      ${Et.ColorLoop(r)}
      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));
    `});let cn=Et;class $t extends Re{constructor(){super(...arguments);c(this,"name","radialProgress")}static getEffectKey(){return"radialProgress"}static resolveDefaults(e){return{width:e.width??10,progress:e.progress??.5,offset:e.offset??0,range:e.range??Math.PI*2,rounded:e.rounded??!1,radius:e.radius??1,color:e.color??4294967295}}}c($t,"z$__type__Props"),c($t,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},progress:{value:.5,method:"uniform1f",type:"float"},offset:{value:0,method:"uniform1f",type:"float"},range:{value:0,method:"uniform1f",type:"float"},rounded:{value:0,method:"uniform1f",type:"float",validator:e=>e?1:0},radius:{value:1,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:Jt,method:"uniform4fv",type:"vec4"}}),c($t,"methods",{rotateUV:`
    vec2 function(vec2 uv, float d) {
      float s = sin(d);
      float c = cos(d);
      mat2 rotMatrix = mat2(c, -s, s, c);
      return uv * rotMatrix;
    }
    `,drawDot:`
    float function(vec2 uv, vec2 p, float r) {
      uv += p;
      float circle = length(uv) - r;
      return clamp(-circle, 0.0, 1.0);
    }
    `}),c($t,"onEffectMask",`
    float outerRadius = radius * u_dimensions.y * 0.5;

    float endAngle = range * progress - 0.0005;

    vec2 uv = v_textureCoordinate.xy * u_dimensions.xy - u_dimensions * 0.5;

    uv = $rotateUV(uv, -(offset));
    float linewidth = width * u_pixelRatio;
    float circle = length(uv) - (outerRadius - linewidth) ;
    circle = abs(circle) - linewidth;
    circle = clamp(-circle, 0.0, 1.0);

    float angle = (atan(uv.x, -uv.y) / 3.14159265359 * 0.5);
    float p = endAngle / (PI * 2.);

    circle *= step(fract(angle), fract(p));

    circle = rounded < 1. ? circle : max(circle, $drawDot(uv, vec2(0, outerRadius - linewidth), linewidth));
    circle = rounded < 1. ? circle : max(circle, $drawDot($rotateUV(uv, -(endAngle)), vec2(0, outerRadius - linewidth), linewidth));

    return mix(shaderColor, maskColor, circle);
  `),c($t,"onColorize",`
    return color;
  `);class zt extends Re{constructor(){super(...arguments);c(this,"name","holePunch")}static getEffectKey(){return"holePunch"}static resolveDefaults(e){return{x:e.x||0,y:e.y||0,width:e.width||50,height:e.height||50,radius:e.radius??0}}}c(zt,"z$__type__Props"),c(zt,"uniforms",{x:{value:0,method:"uniform1f",type:"float"},y:{value:0,method:"uniform1f",type:"float"},width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},radius:{value:0,method:"uniform4fv",type:"vec4",updateOnBind:!0,validator:En,updateProgramValue:wo}}),c(zt,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,boxDist:`
      float function(vec2 p, vec2 size, float radius) {
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }
    `}),c(zt,"onShaderMask",`
  vec2 halfDimensions = u_dimensions * 0.5;
  vec2 size = vec2(width, height) * 0.5;
  vec2 basePos = v_textureCoordinate.xy * u_dimensions.xy - vec2(x, y);
  vec2 pos = basePos - size;
  float r = radius[0] * step(pos.x, 0.5) * step(pos.y, 0.5);
  r = r + radius[1] * step(0.5, pos.x) * step(pos.y, 0.5);
  r = r + radius[2] * step(0.5, pos.x) * step(0.5, pos.y);
  r = r + radius[3] * step(pos.x, 0.5) * step(0.5, pos.y);
  return $boxDist(pos, size, r);
  `),c(zt,"onEffectMask",`
  return mix(maskColor, vec4(0.0), $fillMask(shaderMask));
  `);const bo="RoundedRectangle";class Cn extends xo{constructor(e){super();c(this,"shType");this.shType=e,e!==bo&&console.warn("Unsupported shader:",e)}bindRenderOp(){}bindProps(){}attach(){}detach(){}}class Fl{constructor(t,e,r,n){c(this,"type");c(this,"shader");c(this,"resolvedProps");c(this,"props");this.type=t,this.shader=e,this.resolvedProps=r;const i=Object.keys(r),o=i.length,a={};for(let l=0;l<o;l++){const u=i[l];Object.defineProperty(a,u,{get:()=>this.resolvedProps[u],set:h=>{this.resolvedProps[u]=h,n.requestRender()}})}this.props=a}getResolvedProps(){return this.resolvedProps}}class Ol{constructor(t,e,r){c(this,"shader");c(this,"resolvedProps");c(this,"props");c(this,"type");this.shader=t,this.type="DynamicShader",this.resolvedProps=e;const n=r.getRegisteredEffects(),i={},o=e.effects,a=o.length;for(let l=0;l<a;l++){const{name:u,props:h,type:f}=o[l],d={},g=Object.keys(h),x=g.length;for(let y=0;y<x;y++){const v=g[y];Object.defineProperty(d,v,{get:()=>this.resolvedProps.effects[l].props[v].value,set:T=>{var E,A;const R=this.resolvedProps.effects[l].props[v];R.value=T,R.hasValidator&&(T=R.validatedValue=(E=n[f].uniforms[v])==null?void 0:E.validator(T,h)),R.hasProgramValueUpdater?(A=n[f].uniforms[v])==null||A.updateProgramValue(R):R.programValue=T,r.renderer.stage.requestRender()}})}Object.defineProperty(i,u,{get:()=>d})}this.props=i}getResolvedProps(){return this.resolvedProps}}class Bl{constructor(){c(this,"shCache",new Map);c(this,"shConstructors",{});c(this,"attachedShader",null);c(this,"effectConstructors",{});c(this,"renderer");this.registerShaderType("DefaultShader",_o),this.registerShaderType("DefaultShaderBatched",vo),this.registerShaderType("RoundedRectangle",nn),this.registerShaderType("DynamicShader",Wt),this.registerShaderType("SdfShader",on),this.registerEffectType("border",ns),this.registerEffectType("borderBottom",Dt),this.registerEffectType("borderLeft",Ut),this.registerEffectType("borderRight",Nt),this.registerEffectType("borderTop",kt),this.registerEffectType("fadeOut",nr),this.registerEffectType("linearGradient",an),this.registerEffectType("radialGradient",cn),this.registerEffectType("grayscale",ln),this.registerEffectType("glitch",is),this.registerEffectType("radius",Bt),this.registerEffectType("radialProgress",$t),this.registerEffectType("holePunch",zt)}registerShaderType(t,e){this.shConstructors[t]=e}registerEffectType(t,e){this.effectConstructors[t]=e}getRegisteredEffects(){return this.effectConstructors}getRegisteredShaders(){return this.shConstructors}loadShader(t,e){if(!this.renderer)throw new Error("Renderer is not been defined");const r=this.shConstructors[t];if(!r)throw new Error(`Shader type "${t}" is not registered`);if(this.renderer.mode==="canvas"&&r.prototype instanceof vt)return this._createShaderCtr(t,new Cn(t),e);if(t==="DynamicShader")return this.loadDynamicShader(e);const n=r.resolveDefaults(e),i=r.makeCacheKey(n)||r.name;if(i&&this.shCache.has(i))return this._createShaderCtr(t,this.shCache.get(i),n);const o=new r(this.renderer,e);return i&&this.shCache.set(i,o),this._createShaderCtr(t,o,n)}loadDynamicShader(t){if(!this.renderer)throw new Error("Renderer is not been defined");const e=Wt.resolveDefaults(t,this.effectConstructors),r=Wt.makeCacheKey(e,this.effectConstructors);if(r&&this.shCache.has(r))return this._createDynShaderCtr(this.shCache.get(r),e);const n=new Wt(this.renderer,t,this.effectConstructors);return r&&this.shCache.set(r,n),this._createDynShaderCtr(n,e)}_createShaderCtr(t,e,r){return new Fl(t,e,r,this.renderer.stage)}_createDynShaderCtr(t,e){return new Ol(t,e,this)}useShader(t){this.attachedShader!==t&&(this.attachedShader&&this.attachedShader.detach(),t.attach(),this.attachedShader=t)}}class Ro{constructor(t){c(this,"config");this.config=t}getBuffer(t){var e;return(e=this.config.find(r=>r.attributes[t]))==null?void 0:e.buffer}getAttributeInfo(t){var e;return(e=this.config.find(r=>r.attributes[t]))==null?void 0:e.attributes[t]}}class Nl{constructor(t){c(this,"gl");c(this,"activeTextureUnit",0);c(this,"texture2dUnits");c(this,"texture2dParams",new WeakMap);c(this,"scissorEnabled");c(this,"scissorX");c(this,"scissorY");c(this,"scissorWidth");c(this,"scissorHeight");c(this,"blendEnabled");c(this,"blendSrcRgb");c(this,"blendDstRgb");c(this,"blendSrcAlpha");c(this,"blendDstAlpha");c(this,"boundArrayBuffer");c(this,"boundElementArrayBuffer");c(this,"curProgram");c(this,"programUniforms",new WeakMap);c(this,"canvas");c(this,"MAX_RENDERBUFFER_SIZE");c(this,"MAX_TEXTURE_SIZE");c(this,"MAX_VIEWPORT_DIMS");c(this,"MAX_VERTEX_TEXTURE_IMAGE_UNITS");c(this,"MAX_TEXTURE_IMAGE_UNITS");c(this,"MAX_COMBINED_TEXTURE_IMAGE_UNITS");c(this,"MAX_VERTEX_ATTRIBS");c(this,"MAX_VARYING_VECTORS");c(this,"MAX_VERTEX_UNIFORM_VECTORS");c(this,"MAX_FRAGMENT_UNIFORM_VECTORS");c(this,"TEXTURE_MAG_FILTER");c(this,"TEXTURE_MIN_FILTER");c(this,"TEXTURE_WRAP_S");c(this,"TEXTURE_WRAP_T");c(this,"LINEAR");c(this,"CLAMP_TO_EDGE");c(this,"RGBA");c(this,"UNSIGNED_BYTE");c(this,"UNPACK_PREMULTIPLY_ALPHA_WEBGL");c(this,"UNPACK_FLIP_Y_WEBGL");c(this,"FLOAT");c(this,"TRIANGLES");c(this,"UNSIGNED_SHORT");c(this,"ONE");c(this,"ONE_MINUS_SRC_ALPHA");c(this,"VERTEX_SHADER");c(this,"FRAGMENT_SHADER");c(this,"STATIC_DRAW");c(this,"COMPILE_STATUS");c(this,"LINK_STATUS");c(this,"DYNAMIC_DRAW");c(this,"COLOR_ATTACHMENT0");this.gl=t,this.activeTextureUnit=t.getParameter(t.ACTIVE_TEXTURE)-t.TEXTURE0;const e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.texture2dUnits=new Array(e).fill(void 0).map((n,i)=>(this.activeTexture(i),t.getParameter(t.TEXTURE_BINDING_2D))),this.activeTexture(this.activeTextureUnit),this.scissorEnabled=t.isEnabled(t.SCISSOR_TEST);const r=t.getParameter(t.SCISSOR_BOX);this.scissorX=r[0],this.scissorY=r[1],this.scissorWidth=r[2],this.scissorHeight=r[3],this.blendEnabled=t.isEnabled(t.BLEND),this.blendSrcRgb=t.getParameter(t.BLEND_SRC_RGB),this.blendDstRgb=t.getParameter(t.BLEND_DST_RGB),this.blendSrcAlpha=t.getParameter(t.BLEND_SRC_ALPHA),this.blendDstAlpha=t.getParameter(t.BLEND_DST_ALPHA),this.boundArrayBuffer=t.getParameter(t.ARRAY_BUFFER_BINDING),this.boundElementArrayBuffer=t.getParameter(t.ELEMENT_ARRAY_BUFFER_BINDING),this.curProgram=t.getParameter(t.CURRENT_PROGRAM),this.canvas=t.canvas,this.MAX_RENDERBUFFER_SIZE=t.MAX_RENDERBUFFER_SIZE,this.MAX_TEXTURE_SIZE=t.MAX_TEXTURE_SIZE,this.MAX_VIEWPORT_DIMS=t.MAX_VIEWPORT_DIMS,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=t.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.MAX_TEXTURE_IMAGE_UNITS=t.MAX_TEXTURE_IMAGE_UNITS,this.MAX_COMBINED_TEXTURE_IMAGE_UNITS=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS,this.MAX_VERTEX_ATTRIBS=t.MAX_VERTEX_ATTRIBS,this.MAX_VARYING_VECTORS=t.MAX_VARYING_VECTORS,this.MAX_VERTEX_UNIFORM_VECTORS=t.MAX_VERTEX_UNIFORM_VECTORS,this.MAX_FRAGMENT_UNIFORM_VECTORS=t.MAX_FRAGMENT_UNIFORM_VECTORS,this.TEXTURE_MAG_FILTER=t.TEXTURE_MAG_FILTER,this.TEXTURE_MIN_FILTER=t.TEXTURE_MIN_FILTER,this.TEXTURE_WRAP_S=t.TEXTURE_WRAP_S,this.TEXTURE_WRAP_T=t.TEXTURE_WRAP_T,this.LINEAR=t.LINEAR,this.CLAMP_TO_EDGE=t.CLAMP_TO_EDGE,this.RGBA=t.RGBA,this.UNSIGNED_BYTE=t.UNSIGNED_BYTE,this.UNPACK_PREMULTIPLY_ALPHA_WEBGL=t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.UNPACK_FLIP_Y_WEBGL=t.UNPACK_FLIP_Y_WEBGL,this.FLOAT=t.FLOAT,this.TRIANGLES=t.TRIANGLES,this.UNSIGNED_SHORT=t.UNSIGNED_SHORT,this.ONE=t.ONE,this.ONE_MINUS_SRC_ALPHA=t.ONE_MINUS_SRC_ALPHA,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=t.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.TRIANGLES=t.TRIANGLES,this.UNSIGNED_SHORT=t.UNSIGNED_SHORT,this.VERTEX_SHADER=t.VERTEX_SHADER,this.FRAGMENT_SHADER=t.FRAGMENT_SHADER,this.STATIC_DRAW=t.STATIC_DRAW,this.COMPILE_STATUS=t.COMPILE_STATUS,this.LINK_STATUS=t.LINK_STATUS,this.DYNAMIC_DRAW=t.DYNAMIC_DRAW,this.COLOR_ATTACHMENT0=t.COLOR_ATTACHMENT0}isWebGl2(){return bl(this.gl)}activeTexture(t){const{gl:e}=this;this.activeTextureUnit!==t&&(e.activeTexture(t+e.TEXTURE0),this.activeTextureUnit=t)}bindTexture(t){const{gl:e,activeTextureUnit:r,texture2dUnits:n}=this;n[r]!==t&&(n[r]=t,e.bindTexture(this.gl.TEXTURE_2D,t))}_getActiveTexture(){const{activeTextureUnit:t,texture2dUnits:e}=this;return e[t]}texParameteri(t,e){const{gl:r,texture2dParams:n}=this,i=this._getActiveTexture();if(!i)throw new Error("No active texture");let o=n.get(i);o||(o={},n.set(i,o)),o[t]!==e&&(o[t]=e,r.texParameteri(r.TEXTURE_2D,t,e))}texImage2D(t,e,r,n,i,o,a,l){const{gl:u}=this;o?u.texImage2D(u.TEXTURE_2D,t,e,r,n,i,o,a,l):u.texImage2D(u.TEXTURE_2D,t,e,r,n,i)}compressedTexImage2D(t,e,r,n,i,o){const{gl:a}=this;a.compressedTexImage2D(a.TEXTURE_2D,t,e,r,n,i,o)}pixelStorei(t,e){const{gl:r}=this;r.pixelStorei(t,e)}generateMipmap(){const{gl:t}=this;t.generateMipmap(t.TEXTURE_2D)}createTexture(){const{gl:t}=this;return t.createTexture()}deleteTexture(t){const{gl:e}=this;t&&this.texture2dParams.delete(t),e.deleteTexture(t)}viewport(t,e,r,n){const{gl:i}=this;i.viewport(t,e,r,n)}clearColor(t,e,r,n){const{gl:i}=this;i.clearColor(t,e,r,n)}setScissorTest(t){const{gl:e,scissorEnabled:r}=this;t!==r&&(t?e.enable(e.SCISSOR_TEST):e.disable(e.SCISSOR_TEST),this.scissorEnabled=t)}scissor(t,e,r,n){const{gl:i,scissorX:o,scissorY:a,scissorWidth:l,scissorHeight:u}=this;(t!==o||e!==a||r!==l||n!==u)&&(i.scissor(t,e,r,n),this.scissorX=t,this.scissorY=e,this.scissorWidth=r,this.scissorHeight=n)}setBlend(t){const{gl:e,blendEnabled:r}=this;t!==r&&(t?e.enable(e.BLEND):e.disable(e.BLEND),this.blendEnabled=t)}blendFunc(t,e){const{gl:r,blendSrcRgb:n,blendDstRgb:i,blendSrcAlpha:o,blendDstAlpha:a}=this;(t!==n||e!==i||t!==o||e!==a)&&(r.blendFunc(t,e),this.blendSrcRgb=t,this.blendDstRgb=e,this.blendSrcAlpha=t,this.blendDstAlpha=e)}createBuffer(){const{gl:t}=this;return t.createBuffer()}createFramebuffer(){const{gl:t}=this;return t.createFramebuffer()}bindFramebuffer(t){const{gl:e}=this;e.bindFramebuffer(e.FRAMEBUFFER,t)}framebufferTexture2D(t,e,r){const{gl:n}=this;n.framebufferTexture2D(n.FRAMEBUFFER,t,n.TEXTURE_2D,e,r)}clear(){const{gl:t}=this;t.clear(t.COLOR_BUFFER_BIT)}arrayBufferData(t,e,r){const{gl:n,boundArrayBuffer:i}=this;i!==t&&(n.bindBuffer(n.ARRAY_BUFFER,t),this.boundArrayBuffer=t),n.bufferData(n.ARRAY_BUFFER,e,r)}elementArrayBufferData(t,e,r){const{gl:n,boundElementArrayBuffer:i}=this;i!==t&&(n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t),this.boundElementArrayBuffer=t),n.bufferData(n.ELEMENT_ARRAY_BUFFER,e,r)}vertexAttribPointer(t,e,r,n,i,o,a){const{gl:l,boundArrayBuffer:u}=this;u!==t&&(l.bindBuffer(l.ARRAY_BUFFER,t),this.boundArrayBuffer=t),l.vertexAttribPointer(e,r,n,i,o,a)}useProgram(t){const{gl:e,curProgram:r}=this;r!==t&&(e.useProgram(t),this.curProgram=t)}setUniform(t,e,...r){const{gl:n,programUniforms:i}=this;let o=i.get(this.curProgram);o||(o=new Map,i.set(this.curProgram,o));const a=o.get(e);(!a||!kl(a,r))&&(o.set(e,r),n[t](e,...r))}getParameter(t){const{gl:e}=this;return e.getParameter(t)}drawElements(t,e,r,n){const{gl:i}=this;i.drawElements(t,e,r,n)}getExtension(t){const{gl:e}=this;return e.getExtension(t)}createVertexArray(){const{gl:t}=this;return z(t instanceof WebGL2RenderingContext),t.createVertexArray()}bindVertexArray(t){const{gl:e}=this;z(e instanceof WebGL2RenderingContext),e.bindVertexArray(t)}getAttribLocation(t,e){const{gl:r}=this;return r.getAttribLocation(t,e)}getUniformLocation(t,e){const{gl:r}=this;return r.getUniformLocation(t,e)}enableVertexAttribArray(t){const{gl:e}=this;e.enableVertexAttribArray(t)}disableVertexAttribArray(t){const{gl:e}=this;e.disableVertexAttribArray(t)}createShader(t){const{gl:e}=this;return e.createShader(t)}compileShader(t){const{gl:e}=this;e.compileShader(t)}attachShader(t,e){const{gl:r}=this;r.attachShader(t,e)}linkProgram(t){const{gl:e}=this;e.linkProgram(t)}deleteProgram(t){const{gl:e}=this;e.deleteProgram(t)}getShaderParameter(t,e){const{gl:r}=this;return r.getShaderParameter(t,e)}getShaderInfoLog(t){const{gl:e}=this;return e.getShaderInfoLog(t)}createProgram(){const{gl:t}=this;return t.createProgram()}getProgramParameter(t,e){const{gl:r}=this;return r.getProgramParameter(t,e)}getProgramInfoLog(t){const{gl:e}=this;return e.getProgramInfoLog(t)}shaderSource(t,e){const{gl:r}=this;r.shaderSource(t,e)}deleteShader(t){const{gl:e}=this;e.deleteShader(t)}}function kl(s,t){return s.length!==t.length?!1:s.every((e,r)=>Array.isArray(e)||e instanceof Float32Array?!1:e===t[r])}const wr=class wr extends Zt{constructor(e,r){super(e);c(this,"props");this.props=wr.resolveDefaults(r||{})}get width(){return this.props.width}set width(e){this.props.width=e}get height(){return this.props.height}set height(e){this.props.height=e}async getTextureData(){return{data:null,premultiplyAlpha:null}}static resolveDefaults(e){return{width:e.width||256,height:e.height||256}}};c(wr,"z$__type__Props");let ws=wr;class ai extends hr{constructor(e,r,n){super(e,r,n);c(this,"framebuffer");const i=e.createFramebuffer();z(i,"Unable to create framebuffer"),this.framebuffer=i}async onLoadRequest(){const{glw:e}=this,r=this._nativeCtxTexture=this.createNativeCtxTexture(),{width:n,height:i}=this.textureSource;return e.texImage2D(0,e.RGBA,n,i,0,e.RGBA,e.UNSIGNED_BYTE,null),this.setTextureMemUse(n*i*4),e.bindFramebuffer(this.framebuffer),e.framebufferTexture2D(e.COLOR_ATTACHMENT0,r,0),e.bindFramebuffer(null),{width:n,height:i}}}function Dl(s){return/\.(ktx|pvr)$/.test(s)}const Ul=async s=>{const e=await(await fetch(s)).arrayBuffer();return s.indexOf(".ktx")!==-1?$l(e):zl(e)},$l=async s=>{const t=new DataView(s),e=t.getUint32(12)===16909060,r=[],n={glInternalFormat:t.getUint32(28,e),pixelWidth:t.getUint32(36,e),pixelHeight:t.getUint32(40,e),numberOfMipmapLevels:t.getUint32(56,e),bytesOfKeyValueData:t.getUint32(60,e)};let i=64;i+=n.bytesOfKeyValueData;for(let o=0;o<n.numberOfMipmapLevels;o++){const a=t.getUint32(i);i+=4,r.push(t.buffer.slice(i,a)),i+=a}return{data:{glInternalFormat:n.glInternalFormat,mipmaps:r,width:n.pixelWidth||0,height:n.pixelHeight||0,type:"ktx"},premultiplyAlpha:!1}},zl=async s=>{const a=s,l=new Int32Array(a,0,13),u=l[12]+52,h=new Uint8Array(a,u),f=[],d={pixelWidth:l[7],pixelHeight:l[6],numberOfMipmapLevels:l[11]||0};let g=0,x=d.pixelWidth||0,y=d.pixelHeight||0;for(let v=0;v<d.numberOfMipmapLevels;v++){const T=(x+3>>2)*(y+3>>2)*8,R=new Uint8Array(a,h.byteOffset+g,T);f.push(R),g+=T,x=x>>1,y=y>>1}return{data:{glInternalFormat:36196,mipmaps:f,width:d.pixelWidth||0,height:d.pixelHeight||0,type:"pvr"},premultiplyAlpha:!1}},vs=class vs extends Zt{constructor(e,r){super(e);c(this,"props");this.props=vs.resolveDefaults(r)}hasAlphaChannel(e){return e.indexOf("image/png")!==-1}async getTextureData(){const{src:e,premultiplyAlpha:r}=this.props;if(!e)return{data:null};if(typeof e!="string")return e instanceof ImageData?{data:e,premultiplyAlpha:r}:{data:e(),premultiplyAlpha:r};if(Dl(e))return Ul(e);const n=hl(e);if(this.txManager.imageWorkerManager)return await this.txManager.imageWorkerManager.getImage(n,r);if(this.txManager.hasCreateImageBitmap){const o=await(await fetch(n)).blob(),a=r??this.hasAlphaChannel(o.type);return{data:await createImageBitmap(o,{premultiplyAlpha:a?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}),premultiplyAlpha:a}}else{const i=new Image;return e.substr(0,5)!=="data:"&&(i.crossOrigin="Anonymous"),i.src=n,await new Promise((o,a)=>{i.onload=()=>o(),i.onerror=()=>a(new Error("Failed to load image"))}).catch(o=>{console.error(o)}),{data:i,premultiplyAlpha:r??!0}}}static makeCacheKey(e){const r=vs.resolveDefaults(e),n=r.key||r.src;return typeof n!="string"?!1:`ImageTexture,${n},${r.premultiplyAlpha??"true"}`}static resolveDefaults(e){return{src:e.src??"",premultiplyAlpha:e.premultiplyAlpha??!0,key:e.key??null}}};c(vs,"z$__type__Props");let dr=vs;const Hl=24;class An extends mo{constructor(e){super(e);c(this,"glw");c(this,"system");c(this,"quadBuffer",new ArrayBuffer(1024*1024*4));c(this,"fQuadBuffer",new Float32Array(this.quadBuffer));c(this,"uiQuadBuffer",new Uint32Array(this.quadBuffer));c(this,"renderOps",[]);c(this,"curBufferIdx",0);c(this,"curRenderOp",null);c(this,"rttNodes",[]);c(this,"activeRttNode",null);c(this,"defShaderCtrl");c(this,"defaultShader");c(this,"quadBufferCollection");c(this,"defaultTexture");c(this,"renderToTextureActive",!1);this.mode="webgl";const{canvas:r,clearColor:n,bufferMemory:i}=e;this.defaultTexture=new fr(this.txManager),this.defaultTexture.setRenderableOwner(this,!0),this.defaultTexture.once("loaded",()=>{this.stage.requestRender()});const o=el(r,e.contextSpy),a=this.glw=new Nl(o),l=Ps(n);a.viewport(0,0,r.width,r.height),a.clearColor(l[0],l[1],l[2],l[3]),a.setBlend(!0),a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA),El(a,i),this.system={parameters:Rl(this.glw),extensions:Sl(this.glw)},this.shManager.renderer=this,this.defShaderCtrl=this.shManager.loadShader("DefaultShader"),this.defaultShader=this.defShaderCtrl.shader;const u=a.createBuffer();z(u);const h=6*Float32Array.BYTES_PER_ELEMENT;this.quadBufferCollection=new Ro([{buffer:u,attributes:{a_position:{name:"a_position",size:2,type:a.FLOAT,normalized:!1,stride:h,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:a.FLOAT,normalized:!1,stride:h,offset:2*Float32Array.BYTES_PER_ELEMENT},a_color:{name:"a_color",size:4,type:a.UNSIGNED_BYTE,normalized:!0,stride:h,offset:4*Float32Array.BYTES_PER_ELEMENT},a_textureIndex:{name:"a_textureIndex",size:1,type:a.FLOAT,normalized:!1,stride:h,offset:5*Float32Array.BYTES_PER_ELEMENT}}}])}reset(){const{glw:e}=this;this.curBufferIdx=0,this.curRenderOp=null,this.renderOps.length=0,e.setScissorTest(!1),e.clear()}getShaderManager(){return this.shManager}createCtxTexture(e){return e instanceof jt?new Al(this.glw,this.txMemManager,e):e instanceof ws?new ai(this.glw,this.txMemManager,e):new hr(this.glw,this.txMemManager,e)}addQuad(e){const{fQuadBuffer:r,uiQuadBuffer:n}=this,{width:i,height:o,colorTl:a,colorTr:l,colorBl:u,colorBr:h,textureOptions:f,shader:d,shaderProps:g,alpha:x,clippingRect:y,tx:v,ty:T,ta:R,tb:E,tc:A,td:L,renderCoords:I,rtt:F,parentHasRenderTexture:Q,framebufferDimensions:q}=e;let{texture:Y}=e;if(g&&sn(g,"$dimensions")){const _e=g.$dimensions;_e.width=i,_e.height=o}Y=Y??this.defaultTexture,z(Y instanceof Zt,"Invalid texture type");let{curBufferIdx:b,curRenderOp:ie}=this;const re={width:i,height:o},oe=d||this.defaultShader;z(oe instanceof vt),this.reuseRenderOp(e)||(this.newRenderOp(oe,g,x,re,y,b,F,Q,q),ie=this.curRenderOp,z(ie));const G=(f==null?void 0:f.flipX)??!1;let V=(f==null?void 0:f.flipY)??!1;Y instanceof ws&&(V=!V);let H=0,K=0,fe=1,ce=1;if(Y instanceof jt){const{x:_e,y:we,width:ae,height:w}=Y.props,{width:P=0,height:N=0}=Y.parentTexture.dimensions||{width:0,height:0};H=_e/P,fe=H+ae/P,K=we/N,ce=K+w/N,Y=Y.parentTexture}const ye=(f==null?void 0:f.resizeMode)??!1;if(Y instanceof dr&&ye&&Y.dimensions){const{width:_e,height:we}=Y.dimensions;if(ye.type==="cover"){const ae=i/_e,w=o/we,P=Math.max(ae,w),N=1/P;if(P&&ae&&ae<P){const $=N*i;H=(1-$/_e)*(ye.clipX??.5),fe=H+$/_e}if(P&&w&&w<P){const $=N*o;K=(1-$/we)*(ye.clipY??.5),ce=K+$/we}}}G&&([H,fe]=[fe,H]),V&&([K,ce]=[ce,K]);const pe=Y.ctxTexture;z(pe instanceof hr);const ve=this.addTexture(pe,b);if(ie=this.curRenderOp,z(ie),I){const{x1:_e,y1:we,x2:ae,y2:w,x3:P,y3:N,x4:$,y4:te}=I;r[b++]=_e,r[b++]=we,r[b++]=H,r[b++]=K,n[b++]=a,r[b++]=ve,r[b++]=ae,r[b++]=w,r[b++]=fe,r[b++]=K,n[b++]=l,r[b++]=ve,r[b++]=$,r[b++]=te,r[b++]=H,r[b++]=ce,n[b++]=u,r[b++]=ve,r[b++]=P,r[b++]=N,r[b++]=fe,r[b++]=ce,n[b++]=h,r[b++]=ve}else if(E!==0||A!==0)r[b++]=v,r[b++]=T,r[b++]=H,r[b++]=K,n[b++]=a,r[b++]=ve,r[b++]=v+i*R,r[b++]=T+i*A,r[b++]=fe,r[b++]=K,n[b++]=l,r[b++]=ve,r[b++]=v+o*E,r[b++]=T+o*L,r[b++]=H,r[b++]=ce,n[b++]=u,r[b++]=ve,r[b++]=v+i*R+o*E,r[b++]=T+i*A+o*L,r[b++]=fe,r[b++]=ce,n[b++]=h,r[b++]=ve;else{const _e=v+i*R,we=T+o*L;r[b++]=v,r[b++]=T,r[b++]=H,r[b++]=K,n[b++]=a,r[b++]=ve,r[b++]=_e,r[b++]=T,r[b++]=fe,r[b++]=K,n[b++]=l,r[b++]=ve,r[b++]=v,r[b++]=we,r[b++]=H,r[b++]=ce,n[b++]=u,r[b++]=ve,r[b++]=_e,r[b++]=we,r[b++]=fe,r[b++]=ce,n[b++]=h,r[b++]=ve}ie.length+=Hl,ie.numQuads++,this.curBufferIdx=b}newRenderOp(e,r,n,i,o,a,l,u,h){const f=new yo(this.glw,this.options,this.quadBufferCollection,e,r,n,o,i,a,0,l,u,h);this.curRenderOp=f,this.renderOps.push(f)}addTexture(e,r,n){const{curRenderOp:i}=this;z(i);const o=i.addTexture(e);if(o===4294967295){if(n)throw new Error("Unable to add texture to render op");const{shader:a,shaderProps:l,dimensions:u,clippingRect:h,alpha:f}=i;return this.newRenderOp(a,l,f,u,h,r),this.addTexture(e,r,!0)}return o}reuseRenderOp(e){var u;const{shader:r,shaderProps:n,parentHasRenderTexture:i,rtt:o,clippingRect:a}=e,l=r||this.defaultShader;return!(((u=this.curRenderOp)==null?void 0:u.shader)!==l||!cl(this.curRenderOp.clippingRect,a)||i||o||this.curRenderOp.shader!==this.defaultShader&&(!n||!this.curRenderOp.shader.canBatchShaderProps(this.curRenderOp.shaderProps,n)))}addRenderOp(e){this.renderOps.push(e),this.curRenderOp=null}render(e="screen"){const{glw:r,quadBuffer:n}=this,i=new Float32Array(n,0,this.curBufferIdx),o=this.quadBufferCollection.getBuffer("a_position")??null;r.arrayBufferData(o,i,r.STATIC_DRAW),this.renderOps.forEach((a,l)=>{a.draw()})}renderToTexture(e){for(let r=0;r<this.rttNodes.length;r++)if(this.rttNodes[r]===e)return;this.rttNodes.unshift(e)}renderRTTNodes(){const{glw:e}=this;this.stage;for(let r=0;r<this.rttNodes.length;r++){const n=this.rttNodes[r];if(!n||!n.hasRTTupdates)continue;this.activeRttNode=n,z(n.texture,"RTT node missing texture");const i=n.texture.ctxTexture;z(i instanceof ai),this.renderToTextureActive=!0,e.bindFramebuffer(i.framebuffer),e.viewport(0,0,i.w,i.h),e.clear();for(let o=0;o<n.children.length;o++){const a=n.children[o];a&&(a.update(this.stage.deltaTime,{x:0,y:0,width:0,height:0,valid:!1}),this.stage.addQuads(a),a.hasRTTupdates=!1)}this.render(),this.renderOps.length=0,n.hasRTTupdates=!1}e.bindFramebuffer(null),e.viewport(0,0,this.glw.canvas.width,this.glw.canvas.height),this.renderToTextureActive=!1}removeRTTNode(e){const r=this.rttNodes.indexOf(e);r!==-1&&this.rttNodes.splice(r,1)}getDefShaderCtr(){return this.defShaderCtrl}}class Wl{constructor(){c(this,"activeAnimations",new Set)}registerAnimation(t){this.activeAnimations.add(t)}unregisterAnimation(t){this.activeAnimations.delete(t)}update(t){this.activeAnimations.forEach(e=>{e.update(t)})}}const Vl=function(){function t(r){return r.indexOf("image/png")!==-1}function e(r,n){return new Promise(function(i,o){var a=new XMLHttpRequest;a.open("GET",r,!0),a.responseType="blob",a.onload=function(){if(a.status!==200)return o(new Error("Failed to load image: "+a.statusText));var l=a.response,u=n!==void 0?n:t(l.type);createImageBitmap(l,{premultiplyAlpha:u?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}).then(function(h){i({data:h,premultiplyAlpha:n})}).catch(function(h){o(h)})},a.onerror=function(){o(new Error("Network error occurred while trying to fetch the image."))},a.send()})}self.onmessage=r=>{var n=r.data.src,i=r.data.id,o=r.data.premultiplyAlpha;e(n,o).then(function(a){self.postMessage({id:i,src:n,data:a})}).catch(function(a){self.postMessage({id:i,src:n,error:a.message})})}};class Gl{constructor(t){c(this,"imageWorkersEnabled",!0);c(this,"messageManager",{});c(this,"workers",[]);c(this,"workerIndex",0);c(this,"nextId",0);this.workers=this.createWorkers(t),this.workers.forEach(e=>{e.onmessage=this.handleMessage.bind(this)})}handleMessage(t){const{id:e,data:r,error:n}=t.data,i=this.messageManager[e];if(i){const[o,a]=i;delete this.messageManager[e],n?a(new Error(n)):o(r)}}createWorkers(t=1){const e=`${Vl.toString()} worker()`,r=new Blob([e.replace('"use strict";',"")],{type:"application/javascript"}),n=(self.URL?URL:webkitURL).createObjectURL(r),i=[];for(let o=0;o<t;o++)i.push(new Worker(n));return i}getNextWorker(){const t=this.workers[this.workerIndex];return this.workerIndex=(this.workerIndex+1)%this.workers.length,t}getImage(t,e){return new Promise((r,n)=>{try{if(this.workers){const i=this.nextId++;this.messageManager[i]=[r,n];const o=this.getNextWorker();o&&o.postMessage({id:i,src:t,premultiplyAlpha:e})}}catch(i){n(i)}})}}const Ts=class Ts extends Zt{constructor(e,r){super(e);c(this,"props");this.props=Ts.resolveDefaults(r)}async getTextureData(){const{width:e,height:r}=this.props,n=e*r*4,i=new Uint8ClampedArray(n);for(let o=0;o<n;o+=4){const a=Math.floor(Math.random()*256);i[o]=a,i[o+1]=a,i[o+2]=a,i[o+3]=255}return{data:new ImageData(i,e,r)}}static makeCacheKey(e){if(e.cacheId===void 0)return!1;const r=Ts.resolveDefaults(e);return`NoiseTexture,${r.width},${r.height},${r.cacheId}`}static resolveDefaults(e){return{width:e.width??128,height:e.height??128,cacheId:e.cacheId??0}}};c(Ts,"z$__type__Props");let un=Ts;class Xl{constructor(t){c(this,"keyCache",new Map);c(this,"inverseKeyCache",new WeakMap);c(this,"txConstructors",{});c(this,"imageWorkerManager",null);c(this,"hasCreateImageBitmap",!!self.createImageBitmap);c(this,"hasWorker",!!self.Worker);c(this,"renderer");c(this,"frameTime",0);this.hasCreateImageBitmap&&this.hasWorker&&t>0&&(this.imageWorkerManager=new Gl(t)),this.hasCreateImageBitmap||console.warn("[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower."),this.registerTextureType("ImageTexture",dr),this.registerTextureType("ColorTexture",fr),this.registerTextureType("NoiseTexture",un),this.registerTextureType("SubTexture",jt),this.registerTextureType("RenderTexture",ws)}registerTextureType(t,e){this.txConstructors[t]=e}loadTexture(t,e){let r;const n=this.txConstructors[t];if(!n)throw new Error(`Texture type "${t}" is not registered`);if(!r){const i=n.makeCacheKey(e);i&&this.keyCache.has(i)?r=this.keyCache.get(i):(r=new n(this,e),i&&this.initTextureToCache(r,i))}return r}initTextureToCache(t,e){const{keyCache:r,inverseKeyCache:n}=this;r.set(e,t),n.set(t,e)}removeTextureFromCache(t){const{inverseKeyCache:e,keyCache:r}=this,n=e.get(t);n&&r.delete(n)}}function Yl(s,t){var e=0,r,n;t=t||{};function i(){var o=r,a=arguments.length,l,u;e:for(;o;){if(o.args.length!==arguments.length){o=o.next;continue}for(u=0;u<a;u++)if(o.args[u]!==arguments[u]){o=o.next;continue e}return o!==r&&(o===n&&(n=o.prev),o.prev.next=o.next,o.next&&(o.next.prev=o.prev),o.next=r,o.prev=null,r.prev=o,r=o),o.val}for(l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];return o={args:l,val:s.apply(null,l)},r?(r.prev=o,o.next=r):n=o,e===t.maxSize?(n=n.prev,n.next=null):e++,r=o,o.val}return i.clear=function(){r=null,n=null,e=0},i}const jl={normal:400,bold:700,bolder:900,lighter:100},li=s=>typeof s=="number"?s:jl[s]||400;function Kl(s,t,e,r,n){let i=li(e);for(const o of s){const a=o[t];if(!a)continue;if(a.size===1)return console.warn(`TrFontManager: Only one font face found for family: '${t}' - will be used for all weights and styles`),a.values().next().value;const l=new Map;for(const h of a){const f=li(h.descriptors.weight);if(f===i&&h.descriptors.style===r&&h.descriptors.stretch===n)return h;l.set(f,h)}const u=`TrFontManager: No exact match: '${t} Weight: ${i} Style: ${r} Stretch: ${n}'`;if(console.error(u),i===400&&l.has(500))return l.get(500);if(i===500&&l.has(400))return l.get(400);if(i<400){for(;i>0;){if(l.has(i))return l.get(i);i-=100}i=600}for(;i<1e3;){if(l.has(i))return l.get(i);i+=100}for(i=500;i>0;){if(l.has(i))return l.get(i);i-=100}}}const ql=Yl(Kl);class In{constructor(t){c(this,"textRenderers");this.textRenderers=t}addFontFace(t){for(const e in this.textRenderers){const r=this.textRenderers[e];r&&r.isFontFaceSupported(t)&&r.addFontFace(t)}}static resolveFontFace(t,e){const{fontFamily:r,fontWeight:n,fontStyle:i,fontStretch:o}=e;return ql(t,r,n,i,o)}}const Ql={x:(s,t)=>{s.props.x=t},y:(s,t)=>{s.props.y=t},width:(s,t)=>{s.props.width=t},height:(s,t)=>{s.props.height=t},color:(s,t)=>{s.props.color=t},zIndex:(s,t)=>{s.props.zIndex=t},fontFamily:(s,t)=>{s.props.fontFamily=t},fontWeight:(s,t)=>{s.props.fontWeight=t},fontStyle:(s,t)=>{s.props.fontStyle=t},fontStretch:(s,t)=>{s.props.fontStretch=t},fontSize:(s,t)=>{s.props.fontSize=t},text:(s,t)=>{s.props.text=t},textAlign:(s,t)=>{s.props.textAlign=t},contain:(s,t)=>{s.props.contain=t},offsetY:(s,t)=>{s.props.offsetY=t},scrollable:(s,t)=>{s.props.scrollable=t},scrollY:(s,t)=>{s.props.scrollY=t},letterSpacing:(s,t)=>{s.props.letterSpacing=t},lineHeight:(s,t)=>{s.props.lineHeight=t},maxLines:(s,t)=>{s.props.maxLines=t},textBaseline:(s,t)=>{s.props.textBaseline=t},verticalAlign:(s,t)=>{s.props.verticalAlign=t},overflowSuffix:(s,t)=>{s.props.overflowSuffix=t},debug:(s,t)=>{s.props.debug=t}};class So{constructor(t){c(this,"stage");c(this,"set");this.stage=t;const e={...Ql,...this.getPropertySetters()};this.set=Object.freeze(Object.fromEntries(Object.entries(e).map(([r,n])=>[r,(i,o)=>{i.props[r]!==o&&(n(i,o),this.stage.requestRender())}])))}setStatus(t,e,r){t.status!==e&&(t.status=e,t.emitter.emit(e,r))}setIsRenderable(t,e){t.isRenderable=e}destroyState(t){this.setStatus(t,"destroyed"),t.emitter.removeAllListeners()}scheduleUpdateState(t){t.updateScheduled||(t.updateScheduled=!0,queueMicrotask(()=>{t.status!=="destroyed"&&(t.updateScheduled=!1,this.updateState(t))}))}}class Eo extends _t{constructor(e){super();c(this,"fontFamily");c(this,"descriptors");c(this,"loaded",!1);c(this,"metrics",null);const{fontFamily:r,descriptors:n,metrics:i}=e;i&&(this.metrics={ascender:i.ascender/i.unitsPerEm,descender:i.descender/i.unitsPerEm,lineGap:i.lineGap/i.unitsPerEm}),this.fontFamily=r,this.descriptors={style:"normal",weight:"normal",stretch:"normal",...n}}static convertToCssFontFaceDescriptors(e){return{style:e.style,weight:typeof e.weight=="number"?`${e.weight}`:e.weight,stretch:e.stretch,unicodeRange:e.unicodeRange,featureSettings:e.featureSettings,display:e.display}}}const Zl={LINE_FEED:10,CARRIAGE_RETURN:13,SPACE:32,TAB:9,ZERO_WIDTH_SPACE:8203,ZERO_WIDTH_NON_JOINER:8204,ZERO_WIDTH_JOINER:8205,LEFT_TO_RIGHT_MARK:8206,RIGHT_TO_LEFT_MARK:8207,LEFT_TO_RIGHT_EMBEDDING:8234,RIGHT_TO_LEFT_EMBEDDING:8235,POP_DIRECTIONAL_FORMATTING:8236,LEFT_TO_RIGHT_OVERRIDE:8237,RIGHT_TO_LEFT_OVERRIDE:8238,LINE_SEPARATOR:8232,PARAGRAPH_SEPARATOR:8233,OBJECT_REPLACEMENT_CHARACTER:65532,REPLACEMENT_CHARACTER:65533,ZERO_WIDTH_NO_BREAK_SPACE:65279,LEFT_TO_RIGHT_ISOLATE:8294,RIGHT_TO_LEFT_ISOLATE:8295,FIRST_STRONG_ISOLATE:8296,POP_DIRECTIONAL_ISOLATE:8297,INHIBIT_SYMMETRIC_SWAPPING:8298,ACTIVATE_SYMMETRIC_SWAPPING:8299,INHIBIT_ARABIC_FORM_SHAPING:8300,ACTIVATE_ARABIC_FORM_SHAPING:8301,NATIONAL_DIGIT_SHAPES:8302,NOMINAL_DIGIT_SHAPES:8303,LEFT_TO_RIGHT_BOUNDARY:8206,RIGHT_TO_LEFT_BOUNDARY:8207};class Jl{}class ec extends Jl{constructor(e,r){super();c(this,"data");c(this,"glyphMap");c(this,"kernings");this.data=e,this.glyphMap=r;const n=this.kernings={};e.kernings.forEach(i=>{const o=i.second,a=n[o]=n[o]||{};a[i.first]=i.amount}),this.kernings=n}*shapeText(e,r){var o;let n,i;for(;(n=r.peek())&&!n.done;){const a=n.value,l=this.glyphMap.get(a);if(r.next(),l!==void 0){const u=i!==void 0?(((o=this.kernings[l.id])==null?void 0:o[i])||0)+e.letterSpacing:0;i=l.id,yield{mapped:!0,glyphId:l.id,codepoint:a,cluster:r.lastIndex,xAdvance:l.xadvance+u,yAdvance:0,xOffset:l.xoffset+u,yOffset:l.yoffset,xBearing:0,yBearing:0,width:l.width,height:l.height}}else a===Zl.LINE_FEED&&(i=void 0),yield{mapped:!1,codepoint:a,cluster:r.lastIndex}}}}class us extends Eo{constructor(e,r){super(r);c(this,"type");c(this,"texture");c(this,"maxCharHeight",0);c(this,"data");c(this,"shaper");c(this,"glyphMap",new Map);const{atlasUrl:n,atlasDataUrl:i,stage:o}=r;this.type=e;const a=o.renderer;z(a instanceof An,"SDF Font Faces can only be used with the WebGL Renderer"),this.texture=o.txManager.loadTexture("ImageTexture",{src:n,premultiplyAlpha:!1}),this.texture.on("loaded",()=>{this.checkLoaded(),o.requestRender()}),this.texture.ctxTexture.load(),fetch(i).then(async l=>{var h;this.data=await l.json(),z(this.data);let u=0;if(this.data.chars.forEach(f=>{this.glyphMap.set(f.id,f);const d=f.yoffset+f.height;d>u&&(u=d)}),this.maxCharHeight=u,this.shaper=new ec(this.data,this.glyphMap),!this.metrics)if((h=this.data)!=null&&h.lightningMetrics){const{ascender:f,descender:d,lineGap:g,unitsPerEm:x}=this.data.lightningMetrics;this.metrics={ascender:f/x,descender:d/x,lineGap:g/x}}else throw new Error(`Font metrics not found in ${this.type} font ${this.fontFamily}. Make sure you are using the latest version of the Lightning 3 \`msdf-generator\` tool to generate your SDF fonts.`);this.checkLoaded()}).catch(console.error)}getAtlasEntry(e){const r=this.glyphMap.get(e);if(r===void 0)throw new Error(`Glyph ${e} not found in font ${this.fontFamily}`);return{x:r.x,y:r.y,width:r.width,height:r.height}}checkLoaded(){this.loaded||this.texture.state==="loaded"&&this.data&&(this.loaded=!0,this.emit("loaded"))}}const tc=24;function sc(s,t,e,r,n,i,o,a,l){const u=Math.min(Math.max(o.firstLineIdx,0),a.length),h=0,{metrics:f}=e;z(f,"Font metrics not loaded"),z(e.data,"Font data not loaded");const d=(f.ascender-f.descender)*s;let g=0;r==="middle"?g=(t-d)/2:r==="bottom"&&(g=t-d);const x=n/i,y=e.data.common.base,T=f.ascender*s-y,R=x+T+u*t+g;if(!(l&&R>=l/i))return{sdfX:h,sdfY:R,lineIndex:u}}class os{constructor(t,e=0){c(this,"iterator");c(this,"peekBuffer",[]);c(this,"_lastIndex");this.iterator=t,this.iterator=t,this._lastIndex=e-1,this.peekBuffer=[]}next(){const t=this.peekBuffer.length>0?this.peekBuffer.pop():this.iterator.next();return t.done?this._lastIndex=-1:this._lastIndex++,t}peek(){if(this.peekBuffer.length>0)return this.peekBuffer[0];const t=this.iterator.next();return this.peekBuffer.push(t),t}get lastIndex(){return this._lastIndex}}function*as(s,t=0){let e=t;for(;e<s.length;){const r=s.codePointAt(e);if(r===void 0)throw new Error("Invalid Unicode code point");yield r,e+=r<=65535?1:2}}function rc(s,t,e){const r=e.shapeText(t,new os(as(s,0),0));let n=0;for(const i of r)i.mapped&&(n+=i.xAdvance);return n}function nc(s,t,e,r,n,i,o,a,l,u,h,f,d,g,x,y,v,T,R){z(x,"Font face must be loaded"),z(x.loaded,"Font face must be loaded"),z(x.data,"Font face must be loaded"),z(x.shaper,"Font face must be loaded");const E=a/x.data.info.size,A=l/E,L=i/E,I=u/E,F=d[s],Q=(F==null?void 0:F.codepointIndex)||0,q=(F==null?void 0:F.maxX)||0,Y=(F==null?void 0:F.maxY)||0;let b=q,ie=Y,re=t,oe=e,G=0;const V={codepointIndex:-1,bufferOffset:-1,xStart:-1},H=x.shaper,K={letterSpacing:I};let fe=H.shapeText(K,new os(as(r,Q),Q)),ce,ye=-1;const pe=[],ve=o/E,_e=rc(T,K,H);let we=!0;for(;we;){const ae=(R===0||s+1<R)&&(f!=="both"||v||oe+A+x.maxCharHeight<=ve),w=ae?L:L-_e;let P=0;const N=oe+x.maxCharHeight>=g.y1,$=oe<=g.y2,te=N&&$;for(;(ce=fe.next())&&!ce.done;){const ee=ce.value;if(s===d.length)d.push({codepointIndex:ee.cluster,maxY:ie,maxX:b});else if(s>d.length)throw new Error("Unexpected lineCache length");if(ee.codepoint===32||ee.codepoint===10?V.codepointIndex!==-1&&(V.codepointIndex=-1,P=re):V.codepointIndex===-1&&(V.codepointIndex=ee.cluster,V.bufferOffset=G,V.xStart=P),ee.mapped){const p=re+ee.xOffset+ee.width;if(f!=="none"&&p>=w&&V.codepointIndex!==-1&&V.xStart>0)if(ae){fe=H.shapeText(K,new os(as(r,V.codepointIndex),V.codepointIndex)),G=V.bufferOffset;break}else fe=H.shapeText(K,new os(as(T,0),0)),re=V.xStart,G=V.bufferOffset,f="none";else{const m=re+ee.xOffset,_=oe+ee.yOffset;if(te){ye===-1&&(ye=G);const C=x.getAtlasEntry(ee.glyphId),S=C.x/x.data.common.scaleW,O=C.y/x.data.common.scaleH,U=C.width/x.data.common.scaleW,B=C.height/x.data.common.scaleH;h[G++]=m,h[G++]=_,h[G++]=S,h[G++]=O,h[G++]=m+ee.width,h[G++]=_,h[G++]=S+U,h[G++]=O,h[G++]=m,h[G++]=_+ee.height,h[G++]=S,h[G++]=O+B,h[G++]=m+ee.width,h[G++]=_+ee.height,h[G++]=S+U,h[G++]=O+B}ie=Math.max(ie,_+ee.height),b=Math.max(b,m+ee.width),re+=ee.xAdvance}}else if(ee.codepoint===10){if(ae)break;fe=H.shapeText(K,new os(as(T,0),0)),f="none"}}ye!==-1&&(pe.push({bufferStart:ye,bufferEnd:G}),ye=-1),re=0,oe+=A,s++,V.codepointIndex=-1,P=0,!y&&f==="both"&&oe>g.y2||ce&&ce.done?we=!1:ae||(we=!1)}if(n==="center"){const ae=f==="none"?b:L;for(let w=0;w<pe.length;w++){const P=pe[w],N=h[P.bufferEnd-4]-h[P.bufferStart],$=(ae-N)/2;for(let te=P.bufferStart;te<P.bufferEnd;te+=4)h[te]+=$}}else if(n==="right"){const ae=f==="none"?b:L;for(let w=0;w<pe.length;w++){const P=pe[w],N=P.bufferEnd===P.bufferStart?0:h[P.bufferEnd-4]-h[P.bufferStart],$=ae-N;for(let te=P.bufferStart;te<P.bufferEnd;te+=4)h[te]+=$}}return z(ce),{bufferNumFloats:G,bufferNumQuads:G/16,layoutNumCharacters:ce.done?r.length-Q:ce.value.cluster-Q+1,fullyProcessed:!!ce.done,maxX:b,maxY:ie,numLines:d.length}}function ic(s,t){return Math.ceil(s/t)*t}function oc(s,t){return Math.floor(s/t)*t}function ac(s,t,e,r,n,i,o,a){const{screen:l,sdf:u}=s;if(!ul(o))l.x1=0,l.y1=0,l.x2=0,l.y2=0,u.x1=0,u.y1=0,u.x2=0,u.y2=0,s.numLines=0,s.firstLineIdx=0;else{const h=o.x1-t,f=h+(o.x2-o.x1),d=o.y1-e+r,g=oc(d-i,n||1),x=ic(d+(o.y2-o.y1)+i,n||1);l.x1=h,l.y1=g,l.x2=f,l.y2=x,u.x1=h/a,u.y1=g/a,u.x2=f/a,u.y2=x/a,s.numLines=Math.ceil((x-g)/n),s.firstLineIdx=n?Math.floor(g/n):0}s.valid=!0}function Co(s,t){return t*(s.ascender-s.descender+s.lineGap)}const lc={x:0,y:0,width:0,height:0};class cc extends So{constructor(e){super(e);c(this,"ssdfFontFamilies",{});c(this,"msdfFontFamilies",{});c(this,"fontFamilyArray",[this.ssdfFontFamilies,this.msdfFontFamilies]);c(this,"sdfShader");c(this,"rendererBounds");this.sdfShader=this.stage.shManager.loadShader("SdfShader").shader,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(e,r)=>{e.props.fontFamily=r,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontWeight:(e,r)=>{e.props.fontWeight=r,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontStyle:(e,r)=>{e.props.fontStyle=r,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontStretch:(e,r)=>{e.props.fontStretch=r,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontSize:(e,r)=>{e.props.fontSize=r,this.invalidateLayoutCache(e)},text:(e,r)=>{e.props.text=r,this.invalidateLayoutCache(e)},textAlign:(e,r)=>{e.props.textAlign=r,this.invalidateLayoutCache(e)},color:(e,r)=>{e.props.color=r},x:(e,r)=>{e.props.x=r,e.elementBounds.valid&&(this.setElementBoundsX(e),!e.renderWindow.valid&&Dr(e.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(e))},y:(e,r)=>{e.props.y=r,e.elementBounds.valid&&(this.setElementBoundsY(e),!e.renderWindow.valid&&Dr(e.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(e))},contain:(e,r)=>{e.props.contain=r,this.invalidateLayoutCache(e)},width:(e,r)=>{e.props.width=r,e.props.contain!=="none"&&this.invalidateLayoutCache(e)},height:(e,r)=>{e.props.height=r,e.props.contain==="both"&&this.invalidateLayoutCache(e)},offsetY:(e,r)=>{e.props.offsetY=r,this.invalidateLayoutCache(e)},scrollable:(e,r)=>{e.props.scrollable=r,this.invalidateLayoutCache(e)},scrollY:(e,r)=>{e.props.scrollY=r,this.scheduleUpdateState(e)},letterSpacing:(e,r)=>{e.props.letterSpacing=r,this.invalidateLayoutCache(e)},lineHeight:(e,r)=>{e.props.lineHeight=r,e.resLineHeight=void 0,this.invalidateLayoutCache(e)},maxLines:(e,r)=>{e.props.maxLines=r,this.invalidateLayoutCache(e)},textBaseline:(e,r)=>{e.props.textBaseline=r,this.invalidateLayoutCache(e)},verticalAlign:(e,r)=>{e.props.verticalAlign=r,this.invalidateLayoutCache(e)},overflowSuffix:(e,r)=>{e.props.overflowSuffix=r,this.invalidateLayoutCache(e)},debug:(e,r)=>{e.props.debug=r}}}canRenderFont(e){const{fontFamily:r}=e;return r in this.ssdfFontFamilies||r in this.msdfFontFamilies||r==="$$SDF_FAILURE_TEST$$"}isFontFaceSupported(e){return e instanceof us}addFontFace(e){z(e instanceof us);const r=e.fontFamily,n=e.type==="ssdf"?this.ssdfFontFamilies:e.type==="msdf"?this.msdfFontFamilies:void 0;if(!n){console.warn(`Invalid font face type: ${e.type}`);return}let i=n[r];i||(i=new Set,n[r]=i),i.add(e)}createState(e){return{props:e,status:"initialState",updateScheduled:!1,emitter:new _t,lineCache:[],forceFullLayoutCalc:!1,renderWindow:{screen:{x1:0,y1:0,x2:0,y2:0},sdf:{x1:0,y1:0,x2:0,y2:0},firstLineIdx:0,numLines:0,valid:!1},elementBounds:{x1:0,y1:0,x2:0,y2:0,valid:!1},clippingRect:{x:0,y:0,width:0,height:0,valid:!1},bufferNumFloats:0,bufferNumQuads:0,vertexBuffer:void 0,webGlBuffers:null,bufferUploaded:!1,textH:void 0,textW:void 0,distanceRange:0,trFontFace:void 0,isRenderable:!1,resLineHeight:void 0,debugData:{updateCount:0,layoutCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,drawCount:0,bufferSize:0}}}updateState(e){let{trFontFace:r}=e;const{textH:n,lineCache:i,debugData:o,forceFullLayoutCalc:a}=e;if(o.updateCount++,e.status==="initialState"&&this.setStatus(e,"loading"),!r){if(r=this.resolveFontFace(e.props),e.trFontFace=r,!r){const H=`SdfTextRenderer: Could not resolve font face for family: '${e.props.fontFamily}'`;console.error(H),this.setStatus(e,"failed",new Error(H));return}r.texture.setRenderableOwner(e,!0)}if(!r.loaded){r.once("loaded",()=>{this.scheduleUpdateState(e)});return}z(r.data,"Font face data should be loaded"),z(r.metrics,"Font face metrics should be loaded");const{text:l,fontSize:u,x:h,y:f,contain:d,width:g,height:x,verticalAlign:y,scrollable:v,overflowSuffix:T,maxLines:R}=e.props,E=d==="both"&&v?e.props.scrollY:0,{renderWindow:A}=e,L=r.data.info.size,I=u/L;let F=e.resLineHeight;if(F===void 0){const H=e.props.lineHeight;H===void 0?F=Co(r.metrics,u):F=H,e.resLineHeight=F}const Q=F/I;e.distanceRange=I*r.data.distanceField.distanceRange;const q=l.length*tc;let Y=e.vertexBuffer;(!Y||Y.length<q)&&(Y=new Float32Array(q*2));const b=e.elementBounds;if(b.valid||(this.setElementBoundsX(e),this.setElementBoundsY(e),b.valid=!0),!a&&A.valid){const H=A.screen;if(h+H.x1<=b.x1&&h+H.x2>=b.x2&&f-E+H.y1<=b.y1&&f-E+H.y2>=b.y2){this.setStatus(e,"loaded");return}A.valid=!1,this.setStatus(e,"loading")}const{offsetY:ie,textAlign:re}=e.props;if(!A.valid){if(!Dr(b,this.rendererBounds))return;ac(A,h,f,E,F,d==="both"?b.y2-b.y1:0,b,I)}const oe=sc(L,Q,r,y,ie,I,A,i,n);if(!oe){this.setStatus(e,"loaded");return}const{letterSpacing:G}=e.props,V=nc(oe.lineIndex,oe.sdfX,oe.sdfY,l,re,g,x,u,F,G,Y,d,i,A.sdf,r,a,v,T,R);e.bufferUploaded=!1,e.bufferNumFloats=V.bufferNumFloats,e.bufferNumQuads=V.bufferNumQuads,e.vertexBuffer=Y,e.renderWindow=A,o.lastLayoutNumCharacters=V.layoutNumCharacters,o.bufferSize=Y.byteLength,V.fullyProcessed&&(e.textW=V.maxX*I,e.textH=V.numLines*Q*I),this.setStatus(e,"loaded")}renderQuads(e,r,n,i,o,a){var b,ie;if(!e.vertexBuffer)return;const l=this.stage.renderer;z(l instanceof An);const{fontSize:u,color:h,contain:f,scrollable:d,zIndex:g,debug:x}=e.props,y=f==="both"&&d?e.props.scrollY:0,{textW:v=0,textH:T=0,distanceRange:R,vertexBuffer:E,bufferUploaded:A,trFontFace:L,elementBounds:I}=e;let{webGlBuffers:F}=e;if(!F){const re=l.glw,oe=4*Float32Array.BYTES_PER_ELEMENT,G=re.createBuffer();z(G),e.webGlBuffers=new Ro([{buffer:G,attributes:{a_position:{name:"a_position",size:2,type:re.FLOAT,normalized:!1,stride:oe,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:re.FLOAT,normalized:!1,stride:oe,offset:2*Float32Array.BYTES_PER_ELEMENT}}}]),e.bufferUploaded=!1,z(e.webGlBuffers),F=e.webGlBuffers}if(!A){const re=l.glw,oe=(F==null?void 0:F.getBuffer("a_textureCoordinate"))??null;re.arrayBufferData(oe,E,re.STATIC_DRAW),e.bufferUploaded=!0}if(z(L),d&&f==="both"){z(I.valid);const re=ll(I,lc);n.valid?(e.clippingRect.valid=!0,n=uo(n,re,e.clippingRect)):(e.clippingRect.valid=!0,n=ho(re,e.clippingRect))}const Q=new yo(l.glw,l.options,F,this.sdfShader,{transform:r.getFloatArr(),color:tl(h,i),size:u/(((b=L.data)==null?void 0:b.info.size)||0),scrollY:y,distanceRange:R,debug:x.sdfShaderDebug},i,n,{height:T,width:v},0,g,!1,o,a),q=(ie=e.trFontFace)==null?void 0:ie.texture;z(q);const Y=q.ctxTexture;Q.addTexture(Y),Q.length=e.bufferNumFloats,Q.numQuads=e.bufferNumQuads,l.addRenderOp(Q)}setIsRenderable(e,r){var n;super.setIsRenderable(e,r),(n=e.trFontFace)==null||n.texture.setRenderableOwner(e,r)}destroyState(e){var r;super.destroyState(e),(r=e.trFontFace)==null||r.texture.setRenderableOwner(e,!1)}resolveFontFace(e){return In.resolveFontFace(this.fontFamilyArray,e)}releaseFontFace(e){e.resLineHeight=void 0,e.trFontFace&&(e.trFontFace.texture.setRenderableOwner(e,!1),e.trFontFace=void 0)}invalidateLayoutCache(e){e.renderWindow.valid=!1,e.elementBounds.valid=!1,e.textH=void 0,e.textW=void 0,e.lineCache=[],this.setStatus(e,"loading"),this.scheduleUpdateState(e)}setElementBoundsX(e){const{x:r,contain:n,width:i}=e.props,{elementBounds:o}=e;o.x1=r,o.x2=n!=="none"?r+i:1/0}setElementBoundsY(e){const{y:r,contain:n,height:i}=e.props,{elementBounds:o}=e;o.y1=r,o.y2=n==="both"?r+i:1/0}}class zr extends Eo{constructor(e){super(e);c(this,"fontFace");c(this,"fontUrl");const{fontFamily:r,fontUrl:n}=e,i=n.replace(/\(|\)/g,""),o=this.descriptors,a={style:o.style,weight:typeof o.weight=="number"?`${o.weight}`:o.weight,stretch:o.stretch,unicodeRange:o.unicodeRange,featureSettings:o.featureSettings,display:o.display},l=new FontFace(r,`url(${i})`,a);l.load().then(()=>{this.loaded=!0,this.emit("loaded")}).catch(console.error),this.fontFace=l,this.fontUrl=n}}function uc(s,t,e){if(t.metrics)return t.metrics;const r=s.measureText("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz");console.warn(`Font metrics not provided for Canvas Web font ${t.fontFamily}. Using fallback values. It is HIGHLY recommended you use the latest version of the Lightning 3 \`msdf-generator\` tool to extract the default metrics for the font and provide them in the Canvas Web font definition.`);let n;return r.actualBoundingBoxDescent&&r.actualBoundingBoxAscent?n={ascender:r.actualBoundingBoxAscent/e,descender:-r.actualBoundingBoxDescent/e,lineGap:.2}:n={ascender:.8,descender:-.2,lineGap:.2},t.metrics=n,n}const ci=2048;function ui(s,t,e,r,n){const i=s!=="bottom"?.5*t:0;return e*(r-1)+i+Math.max(e,t)+(n||0)}class hc{constructor(t,e){c(this,"_canvas");c(this,"_context");c(this,"_settings");this._canvas=t,this._context=e,this._settings=this.mergeDefaults({})}set settings(t){this._settings=this.mergeDefaults(t)}get settings(){return this._settings}getPrecision(){return this._settings.precision}setFontProperties(){this._context.font=this._getFontSetting(),this._context.textBaseline=this._settings.textBaseline}_getFontSetting(){const t=[this._settings.fontFamily],e=[];for(let r=0,n=t.length;r<n;r++)t[r]==="serif"||t[r]==="sans-serif"?e.push(t[r]):e.push(`"${t[r]}"`);return`${this._settings.fontStyle} ${this._settings.fontSize*this.getPrecision()}px ${e.join(",")}`}_load(){if(document.fonts){const t=this._getFontSetting();try{if(!document.fonts.check(t,this._settings.text))return document.fonts.load(t,this._settings.text).catch(e=>{console.warn("[Lightning] Font load error",e,t)}).then(()=>{document.fonts.check(t,this._settings.text)||console.warn("[Lightning] Font not found",t)})}catch{console.warn("[Lightning] Can't check font loading for "+t)}}}calculateRenderInfo(){const t={},e=this.getPrecision(),r=this._settings.paddingLeft*e,n=this._settings.paddingRight*e,i=this._settings.fontSize*e;let o=this._settings.offsetY===null?null:this._settings.offsetY*e;const a=this._settings.w*e,l=this._settings.h*e;let u=this._settings.wordWrapWidth*e;const h=this._settings.cutSx*e,f=this._settings.cutEx*e,d=this._settings.cutSy*e,g=this._settings.cutEy*e,x=(this._settings.letterSpacing||0)*e,y=this._settings.textIndent*e,v=this._settings.trFontFace;this.setFontProperties(),z(v);const T=uc(this._context,v,i),R=Co(T,i)*e,E=this._settings.lineHeight!==null?this._settings.lineHeight*e:R,A=this._settings.maxHeight,L=A!==null&&E>0?Math.floor(A/E):0,I=this._settings.maxLines,F=L>0&&I>0?Math.min(L,I):Math.max(L,I);let Q=a||2048/this.getPrecision(),q=Q-r;if(q<10&&(Q+=10-q,q=10),u||(u=q),this._settings.textOverflow&&!this._settings.wordWrap){let G;switch(this._settings.textOverflow){case"clip":G="";break;case"ellipsis":G=this._settings.overflowSuffix;break;default:G=this._settings.textOverflow}this._settings.text=this.wrapWord(this._settings.text,u-y,G)}let Y;if(this._settings.wordWrap)Y=this.wrapText(this._settings.text,u,x,y);else{Y={l:this._settings.text.split(/(?:\r\n|\r|\n)/),n:[]};const G=Y.l.length;for(let V=0;V<G-1;V++)Y.n.push(V)}let b=Y.l;if(F&&b.length>F){const G=b.slice(0,F);let V=null;if(this._settings.overflowSuffix){const ye=this._settings.overflowSuffix?this.measureText(this._settings.overflowSuffix):0,pe=this.wrapText(G[G.length-1],u-ye,x,y);G[G.length-1]=`${pe.l[0]}${this._settings.overflowSuffix}`,V=[pe.l.length>1?pe.l[1]:""]}else V=[""];let H;const K=b.length;let fe=0;const ce=Y.n.length;for(H=F;H<K;H++)V[fe]+=`${V[fe]?" ":""}${b[H]}`,H+1<ce&&Y.n[H+1]&&fe++;t.remainingText=V.join(`
`),t.moreTextLines=!0,b=G}else t.moreTextLines=!1,t.remainingText="";let ie=0;const re=[];for(let G=0;G<b.length;G++){const V=this.measureText(b[G],x)+(G===0?y:0);re.push(V),ie=Math.max(ie,V)}t.lineWidths=re,a||(Q=ie+r+n,q=ie);let oe;return l?oe=l:oe=ui(this._settings.textBaseline,i,E,b.length,o),o===null&&(o=i),t.w=Q,t.h=oe,t.lines=b,t.precision=e,Q||(Q=1),oe||(oe=1),(h||f)&&(Q=Math.min(Q,f-h)),(d||g)&&(oe=Math.min(oe,g-d)),t.width=Q,t.innerWidth=q,t.height=oe,t.fontSize=i,t.cutSx=h,t.cutSy=d,t.cutEx=f,t.cutEy=g,t.lineHeight=E,t.defLineHeight=R,t.lineWidths=re,t.offsetY=o,t.paddingLeft=r,t.paddingRight=n,t.letterSpacing=x,t.textIndent=y,t.metrics=T,t}draw(t,e){const r=this.getPrecision(),n=(e==null?void 0:e.lines)||t.lines,i=(e==null?void 0:e.lineWidths)||t.lineWidths,o=e?ui(this._settings.textBaseline,t.fontSize,t.lineHeight,e.lines.length,this._settings.offsetY===null?null:this._settings.offsetY*r):t.height;this._canvas.width=Math.min(Math.ceil(t.width+this._settings.textRenderIssueMargin),ci),this._canvas.height=Math.min(Math.ceil(o),ci),this.setFontProperties(),t.fontSize>=128&&(this._context.globalAlpha=.01,this._context.fillRect(0,0,.01,.01),this._context.globalAlpha=1),(t.cutSx||t.cutSy)&&this._context.translate(-t.cutSx,-t.cutSy);let a,l;const u=[],{metrics:h}=t,f=h?h.ascender*t.fontSize:t.fontSize,d=(h.ascender-h.descender)*t.fontSize;for(let x=0,y=n.length;x<y;x++)a=x===0?t.textIndent:0,l=x*t.lineHeight+f,this._settings.verticalAlign=="middle"?l+=(t.lineHeight-d)/2:this._settings.verticalAlign=="bottom"&&(l+=t.lineHeight-d),this._settings.textAlign==="right"?a+=t.innerWidth-i[x]:this._settings.textAlign==="center"&&(a+=(t.innerWidth-i[x])/2),a+=t.paddingLeft,u.push({text:n[x],x:a,y:l,w:i[x]});if(this._settings.highlight){const x=this._settings.highlightColor,y=this._settings.highlightHeight*r||t.fontSize*1.5,v=this._settings.highlightOffset*r,T=this._settings.highlightPaddingLeft!==null?this._settings.highlightPaddingLeft*r:t.paddingLeft,R=this._settings.highlightPaddingRight!==null?this._settings.highlightPaddingRight*r:t.paddingRight;this._context.fillStyle=kr(x);for(let E=0;E<u.length;E++){const A=u[E];this._context.fillRect(A.x-T,A.y-t.offsetY+v,A.w+R+T,y)}}let g=null;this._settings.shadow&&(g=[this._context.shadowColor,this._context.shadowOffsetX,this._context.shadowOffsetY,this._context.shadowBlur],this._context.shadowColor=kr(this._settings.shadowColor),this._context.shadowOffsetX=this._settings.shadowOffsetX*r,this._context.shadowOffsetY=this._settings.shadowOffsetY*r,this._context.shadowBlur=this._settings.shadowBlur*r),this._context.fillStyle=kr(this._settings.textColor);for(let x=0,y=u.length;x<y;x++){const v=u[x];if(t.letterSpacing===0)this._context.fillText(v.text,v.x,v.y);else{const T=v.text.split("");let R=v.x;for(let E=0,A=T.length;E<A;E++)this._context.fillText(T[E],R,v.y),R+=this.measureText(T[E],t.letterSpacing)}}g&&(this._context.shadowColor=g[0],this._context.shadowOffsetX=g[1],this._context.shadowOffsetY=g[2],this._context.shadowBlur=g[3]),(t.cutSx||t.cutSy)&&this._context.translate(t.cutSx,t.cutSy)}wrapWord(t,e,r){const n=this._context.measureText(r).width,i=t.length,o=this._context.measureText(t).width;if(o<=e)return t;let a=Math.floor(e*i/o),l=this._context.measureText(t.substring(0,a)).width+n;if(l>e)for(;a>0&&(l=this._context.measureText(t.substring(0,a)).width+n,l>e);)a-=1;else for(;a<i;)if(l=this._context.measureText(t.substring(0,a)).width+n,l<e)a+=1;else{a-=1;break}return t.substring(0,a)+(e>=n?r:"")}wrapText(t,e,r,n=0){const i=t.split(/\r?\n/g);let o=[];const a=[];for(let l=0;l<i.length;l++){const u=[];let h="",f=e-n;const d=i[l].split(" ");for(let g=0;g<d.length;g++){const x=this.measureText(d[g],r),y=x+this.measureText(" ",r);g===0||y>f?(g>0&&(u.push(h),h=""),h+=d[g],f=e-x-(g===0?n:0)):(f-=y,h+=` ${d[g]}`)}u.push(h),h="",o=o.concat(u),l<i.length-1&&a.push(o.length)}return{l:o,n:a}}measureText(t,e=0){return e?t.split("").reduce((r,n)=>r+this._context.measureText(n).width+e,0):this._context.measureText(t).width}mergeDefaults(t){return{text:"",w:0,h:0,fontStyle:"normal",fontSize:40,fontFamily:null,trFontFace:null,wordWrap:!0,wordWrapWidth:0,wordBreak:!1,textOverflow:"",lineHeight:null,textBaseline:"alphabetic",textAlign:"left",verticalAlign:"top",offsetY:null,maxLines:0,maxHeight:null,overflowSuffix:"...",textColor:[1,1,1,1],paddingLeft:0,paddingRight:0,shadow:!1,shadowColor:[0,0,0,1],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:5,highlight:!1,highlightHeight:0,highlightColor:[0,0,0,1],highlightOffset:0,highlightPaddingLeft:0,highlightPaddingRight:0,letterSpacing:0,textIndent:0,cutSx:0,cutEx:0,cutSy:0,cutEy:0,advancedRenderer:!1,fontBaselineRatio:0,precision:1,textRenderIssueMargin:0,...t}}}const hi=typeof self>"u"?globalThis:self;var lo;const fi=((lo=hi.document)==null?void 0:lo.fonts)||hi.fonts;function fc(s){const{fontFamily:t,fontStyle:e,fontWeight:r,fontStretch:n,fontSize:i}=s;return[e,r,n,`${i}px`,t].join(" ")}class di extends So{constructor(e){super(e);c(this,"canvas");c(this,"context");c(this,"fontFamilies",{});c(this,"fontFamilyArray",[this.fontFamilies]);c(this,"loadFont",e=>{const r=fc(e.props),n=In.resolveFontFace(this.fontFamilyArray,e.props);if(z(n,`Could not resolve font face for ${r}`),e.fontInfo={fontFace:n,cssString:r,loaded:!1},!e.fontInfo.loaded){fi.load(r).then(this.onFontLoaded.bind(this,e,r)).catch(this.onFontLoadError.bind(this,e,r));return}});typeof OffscreenCanvas<"u"?this.canvas=new OffscreenCanvas(0,0):this.canvas=document.createElement("canvas");let r=this.canvas.getContext("2d",{willReadFrequently:!0});r||(this.canvas=document.createElement("canvas"),r=this.canvas.getContext("2d",{willReadFrequently:!0})),z(r),this.context=r,this.addFontFace(new zr({fontFamily:"sans-serif",descriptors:{},fontUrl:""}))}getPropertySetters(){return{fontFamily:(e,r)=>{e.props.fontFamily=r,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontWeight:(e,r)=>{e.props.fontWeight=r,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontStyle:(e,r)=>{e.props.fontStyle=r,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontStretch:(e,r)=>{e.props.fontStretch=r,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontSize:(e,r)=>{e.props.fontSize=r,e.fontInfo=void 0,this.invalidateLayoutCache(e)},text:(e,r)=>{e.props.text=r,this.invalidateLayoutCache(e)},textAlign:(e,r)=>{e.props.textAlign=r,this.invalidateLayoutCache(e)},color:(e,r)=>{e.props.color=r,this.invalidateLayoutCache(e)},x:(e,r)=>{e.props.x=r},y:(e,r)=>{e.props.y=r},contain:(e,r)=>{e.props.contain=r,this.invalidateLayoutCache(e)},width:(e,r)=>{e.props.width=r,e.props.contain!=="none"&&this.invalidateLayoutCache(e)},height:(e,r)=>{e.props.height=r,e.props.contain==="both"&&this.invalidateLayoutCache(e)},offsetY:(e,r)=>{e.props.offsetY=r,this.invalidateLayoutCache(e)},scrollY:(e,r)=>{e.props.scrollY=r},letterSpacing:(e,r)=>{e.props.letterSpacing=r,this.invalidateLayoutCache(e)},lineHeight:(e,r)=>{e.props.lineHeight=r,this.invalidateLayoutCache(e)},maxLines:(e,r)=>{e.props.maxLines=r,this.invalidateLayoutCache(e)},textBaseline:(e,r)=>{e.props.textBaseline=r,this.invalidateLayoutCache(e)},verticalAlign:(e,r)=>{e.props.verticalAlign=r,this.invalidateLayoutCache(e)},overflowSuffix:(e,r)=>{e.props.overflowSuffix=r,this.invalidateLayoutCache(e)}}}canRenderFont(e){return!0}isFontFaceSupported(e){return e instanceof zr}addFontFace(e){z(e instanceof zr),e.fontFamily!=="sans-serif"&&fi.add(e.fontFace);const{fontFamilies:r}=this,n=e.fontFace.family;let i=r[n];i||(i=new Set,r[n]=i),i.add(e)}createState(e,r){return{node:r,props:e,status:"initialState",updateScheduled:!1,emitter:new _t,textureNode:void 0,lightning2TextRenderer:new hc(this.canvas,this.context),renderInfo:void 0,forceFullLayoutCalc:!1,textW:0,textH:0,fontInfo:void 0,isRenderable:!1,debugData:{updateCount:0,layoutCount:0,drawCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,bufferSize:0}}}updateState(e){if(e.status==="initialState"&&this.setStatus(e,"loading"),e.status!=="loaded"){if(!e.fontInfo)return this.loadFont(e);e.fontInfo.loaded&&(e.renderInfo||(e.renderInfo=this.calculateRenderInfo(e),e.textH=e.renderInfo.lineHeight*e.renderInfo.lines.length,e.textW=e.renderInfo.width,this.renderSingleCanvasPage(e)))}}renderSingleCanvasPage(e){z(e.renderInfo);const r=e.node,n=this.stage.txManager.loadTexture("ImageTexture",{src:(function(i,o){return z(o),i.draw(o,{lines:o.lines,lineWidths:o.lineWidths}),this.canvas.width===0||this.canvas.height===0?null:this.context.getImageData(0,0,this.canvas.width,this.canvas.height)}).bind(this,e.lightning2TextRenderer,e.renderInfo)});if(e.textureNode)e.textureNode.texture=n;else{const i=this.stage.createNode({parent:r,texture:n,autosize:!0,alpha:al(e.props.color)});e.textureNode=i}this.setStatus(e,"loaded")}calculateRenderInfo(e){var r;return e.lightning2TextRenderer.settings={text:e.props.text,textAlign:e.props.textAlign,fontFamily:e.props.fontFamily,trFontFace:(r=e.fontInfo)==null?void 0:r.fontFace,fontSize:e.props.fontSize,fontStyle:[e.props.fontStretch,e.props.fontStyle,e.props.fontWeight].join(" "),textColor:Ps(e.props.color),offsetY:e.props.offsetY,wordWrap:e.props.contain!=="none",wordWrapWidth:e.props.contain==="none"?void 0:e.props.width,letterSpacing:e.props.letterSpacing,lineHeight:e.props.lineHeight??null,maxLines:e.props.maxLines,maxHeight:e.props.contain==="both"?e.props.height-e.props.offsetY:null,textBaseline:e.props.textBaseline,verticalAlign:e.props.verticalAlign,overflowSuffix:e.props.overflowSuffix,w:e.props.contain!=="none"?e.props.width:void 0},e.renderInfo=e.lightning2TextRenderer.calculateRenderInfo(),e.renderInfo}renderQuads(){}destroyState(e){e.status!=="destroyed"&&(super.destroyState(e),e.textureNode&&(e.textureNode.destroy(),delete e.textureNode),delete e.renderInfo)}invalidateLayoutCache(e){e.renderInfo=void 0,this.setStatus(e,"loading"),this.scheduleUpdateState(e)}onFontLoaded(e,r){var n;r!==((n=e.fontInfo)==null?void 0:n.cssString)||!e.fontInfo||(e.fontInfo.loaded=!0,this.scheduleUpdateState(e))}onFontLoadError(e,r,n){var i;r!==((i=e.fontInfo)==null?void 0:i.cssString)||!e.fontInfo||(e.fontInfo.loaded=!0,console.error(`CanvasTextRenderer: Error loading font '${e.fontInfo.cssString}'`,n),this.scheduleUpdateState(e))}}class dc{constructor(){c(this,"data",{})}reset(){this.data={}}increment(t){this.data[t]||(this.data[t]=0),this.data[t]++}getData(){return{...this.data}}}class pc{constructor(t,e){c(this,"stage");c(this,"memUsed",0);c(this,"loadedTextures",new Map);c(this,"criticalThreshold");c(this,"targetThreshold");c(this,"cleanupInterval");c(this,"debugLogging");c(this,"lastCleanupTime",0);c(this,"criticalCleanupRequested",!1);c(this,"frameTime",0);this.stage=t;const{criticalThreshold:r}=e;this.criticalThreshold=Math.round(r);const n=Math.max(0,Math.min(1,e.targetThresholdLevel));if(this.targetThreshold=Math.round(r*n),this.cleanupInterval=e.cleanupInterval,this.debugLogging=e.debugLogging,e.debugLogging){let i=0;setInterval(()=>{i!==this.memUsed&&(i=this.memUsed,console.log(`[TextureMemoryManager] Memory used: ${ni(this.memUsed)} mb / ${ni(this.criticalThreshold)} mb (${(this.memUsed/this.criticalThreshold*100).toFixed(1)}%)`))},1e3)}r===0&&(this.setTextureMemUse=()=>{})}setTextureMemUse(t,e){if(this.loadedTextures.has(t)&&(this.memUsed-=this.loadedTextures.get(t)),e===0){this.loadedTextures.delete(t);return}else this.memUsed+=e,this.loadedTextures.set(t,e);this.memUsed>this.criticalThreshold&&(this.criticalCleanupRequested=!0)}checkCleanup(){return this.criticalCleanupRequested||this.memUsed>this.targetThreshold&&this.frameTime-this.lastCleanupTime>=this.cleanupInterval}cleanup(){const t=this.criticalCleanupRequested;this.lastCleanupTime=this.frameTime,this.criticalCleanupRequested=!1,t&&this.stage.queueFrameEvent("criticalCleanup",{memUsed:this.memUsed,criticalThreshold:this.criticalThreshold}),this.debugLogging&&console.log(`[TextureMemoryManager] Cleaning up textures. Critical: ${t}`);const e=[...this.loadedTextures.keys()].sort((i,o)=>{const a=i.renderable,l=o.renderable;return a===l?i.lastRenderableChangeTime-o.lastRenderableChangeTime:a?1:l?-1:0}),r=this.targetThreshold,n=this.stage.txManager;for(const i of e)if(i.renderable||(i.ctxTexture.free(),n.removeTextureFromCache(i),this.memUsed<=r))break;this.memUsed>=this.criticalThreshold&&(this.stage.queueFrameEvent("criticalCleanupFailed",{memUsed:this.memUsed,criticalThreshold:this.criticalThreshold}),console.warn(`[TextureMemoryManager] Memory usage above critical threshold after cleanup: ${this.memUsed}`))}getMemoryInfo(){let t=0;const e=[...this.loadedTextures.keys()].reduce((r,n)=>(t+=n.renderable?1:0,r+(n.renderable?this.loadedTextures.get(n):0)),0);return{criticalThreshold:this.criticalThreshold,targetThreshold:this.targetThreshold,renderableMemUsed:e,memUsed:this.memUsed,renderableTexturesLoaded:t,loadedTextures:this.loadedTextures.size}}}const gc={isWhite:!0,a:1,r:255,g:255,b:255};function Hr(s){if(s===4294967295)return gc;const t=(s>>>24&255)/255,e=s>>>16&255&255,r=s>>>8&255&255,n=s&255&255;return{isWhite:!1,a:t,r:n,g:r,b:e}}function ir({a:s,r:t,g:e,b:r}){return`rgba(${t},${e},${r},${s})`}class mc extends go{constructor(){super(...arguments);c(this,"image");c(this,"tintCache")}load(){this.textureSource.state==="freed"&&(this.textureSource.setState("loading"),this.onLoadRequest().then(e=>{this.textureSource.setState("loaded",e),this.updateMemSize()}).catch(e=>{this.textureSource.setState("failed",e)}))}free(){this.image=void 0,this.tintCache=void 0,this.textureSource.setState("freed"),this.setTextureMemUse(0)}updateMemSize(){const e=this.tintCache?8:4;if(this.textureSource.dimensions){const{width:r,height:n}=this.textureSource.dimensions;this.setTextureMemUse(r*n*e)}}hasImage(){return this.image!==void 0}getImage(e){var o;const r=this.image;if(z(r,"Attempt to get unloaded image texture"),e.isWhite)return this.tintCache&&(this.tintCache=void 0,this.updateMemSize()),r;const n=ir(e);if(((o=this.tintCache)==null?void 0:o.key)===n)return this.tintCache.image;const i=this.tintTexture(r,n);return this.tintCache={key:n,image:i},this.updateMemSize(),i}tintTexture(e,r){const{width:n,height:i}=e,o=document.createElement("canvas");o.width=n,o.height=i;const a=o.getContext("2d");return a&&(a.fillStyle=r,a.globalCompositeOperation="copy",a.fillRect(0,0,n,i),a.globalCompositeOperation="multiply",a.drawImage(e,0,0,n,i,0,0,n,i),a.globalCompositeOperation="destination-in",a.drawImage(e,0,0,n,i,0,0,n,i)),o}async onLoadRequest(){const{data:e}=await this.textureSource.getTextureData();if(e instanceof ImageData){const r=document.createElement("canvas");r.width=e.width,r.height=e.height;const n=r.getContext("2d");return n&&n.putImageData(e,0,0),this.image=r,{width:e.width,height:e.height}}else if(e instanceof ImageBitmap)return this.image=e,{width:e.width,height:e.height};return{width:0,height:0}}}function xc(s){var t;return s.shader instanceof Cn&&s.shader.shType===bo?((t=s.shaderProps)==null?void 0:t.radius)??0:0}class yc extends mo{constructor(e){super(e);c(this,"context");c(this,"canvas");c(this,"pixelRatio");c(this,"clearColor");c(this,"renderToTextureActive",!1);c(this,"activeRttNode",null);c(this,"defShaderCtr");this.mode="canvas",this.shManager.renderer=this;const{canvas:r,pixelRatio:n,clearColor:i}=e;this.canvas=r,this.context=r.getContext("2d"),this.pixelRatio=n,this.clearColor=i?ol(i):void 0,this.defShaderCtr={type:"DefaultShader",props:{},shader:new Cn("DefaultShader"),getResolvedProps:()=>()=>({})}}reset(){this.canvas.width=this.canvas.width;const e=this.context;if(this.clearColor){const[r,n,i,o]=this.clearColor;e.fillStyle=`rgba(${r}, ${n}, ${i}, ${o/255})`,e.fillRect(0,0,this.canvas.width,this.canvas.height)}e.scale(this.pixelRatio,this.pixelRatio)}render(){}addQuad(e){const r=this.context,{tx:n,ty:i,width:o,height:a,alpha:l,colorTl:u,colorTr:h,colorBr:f,ta:d,tb:g,tc:x,td:y,clippingRect:v}=e;let T=e.texture,R,E;if(T){if(T instanceof jt&&(E=T.props,T=T.parentTexture),R=T.ctxTexture,T.state==="freed"){R.load();return}if(T.state!=="loaded"||!R.hasImage())return}const A=Hr(u),L=d!==1,I=v.width!==0&&v.height!==0,F=u!==h||u!==f,Q=e.shader?xc(e):0;if((L||I||Q)&&r.save(),I){const q=new Path2D,{x:Y,y:b,width:ie,height:re}=v;q.rect(Y,b,ie,re),r.clip(q)}if(L){const q=this.pixelRatio;r.setTransform(d,x,g,y,n*q,i*q),r.scale(q,q),r.translate(-n,-i)}if(Q){const q=new Path2D;q.roundRect(n,i,o,a,Q),r.clip(q)}if(R){const q=R.getImage(A);r.globalAlpha=l,E?r.drawImage(q,E.x,E.y,E.width,E.height,n,i,o,a):r.drawImage(q,n,i,o,a),r.globalAlpha=1}else if(F){let q=n,Y=i,b;u===h?(q=n,Y=i+a,b=Hr(f)):(q=n+o,Y=i,b=Hr(h));const ie=r.createLinearGradient(n,i,q,Y);ie.addColorStop(0,ir(A)),ie.addColorStop(1,ir(b)),r.fillStyle=ie,r.fillRect(n,i,o,a)}else r.fillStyle=ir(A),r.fillRect(n,i,o,a);(L||I||Q)&&r.restore()}createCtxTexture(e){return new mc(this.txMemManager,e)}getShaderManager(){return this.shManager}getDefShaderCtr(){return this.defShaderCtr}renderRTTNodes(){}removeRTTNode(e){}renderToTexture(e){}}class _c extends rn{constructor(e,r){super(e,r);c(this,"textRenderer");c(this,"trState");c(this,"_textRendererOverride",null);c(this,"onTextLoaded",()=>{const{contain:e}=this,r=this.trState.props.width,n=this.trState.props.height,i=this.trState.textW||0,o=this.trState.textH||0;e==="both"?(this.props.width=r,this.props.height=n):e==="width"?(this.props.width=r,this.props.height=o):e==="none"&&(this.props.width=i,this.props.height=o),this.updateLocalTransform(),this.stage.requestRender(),this.emit("loaded",{type:"text",dimensions:{width:this.trState.textW||0,height:this.trState.textH||0}})});c(this,"onTextFailed",(e,r)=>{this.emit("failed",{type:"text",error:r})});this._textRendererOverride=r.textRendererOverride;const{resolvedTextRenderer:n,textRendererState:i}=this.resolveTextRendererAndState({x:this.absX,y:this.absY,width:r.width,height:r.height,textAlign:r.textAlign,color:r.color,zIndex:r.zIndex,contain:r.contain,scrollable:r.scrollable,scrollY:r.scrollY,offsetY:r.offsetY,letterSpacing:r.letterSpacing,debug:r.debug,fontFamily:r.fontFamily,fontSize:r.fontSize,fontStretch:r.fontStretch,fontStyle:r.fontStyle,fontWeight:r.fontWeight,text:r.text,lineHeight:r.lineHeight,maxLines:r.maxLines,textBaseline:r.textBaseline,verticalAlign:r.verticalAlign,overflowSuffix:r.overflowSuffix});this.textRenderer=n,this.trState=i}get width(){return this.props.width}set width(e){this.props.width=e,this.textRenderer.set.width(this.trState,e),this.contain==="none"&&this.setUpdateType(k.Local)}get height(){return this.props.height}set height(e){this.props.height=e,this.textRenderer.set.height(this.trState,e),this.contain!=="both"&&this.setUpdateType(k.Local)}get color(){return this.trState.props.color}set color(e){this.textRenderer.set.color(this.trState,e)}get text(){return this.trState.props.text}set text(e){this.textRenderer.set.text(this.trState,e)}get textRendererOverride(){return this._textRendererOverride}set textRendererOverride(e){this._textRendererOverride=e,this.textRenderer.destroyState(this.trState);const{resolvedTextRenderer:r,textRendererState:n}=this.resolveTextRendererAndState(this.trState.props);this.textRenderer=r,this.trState=n}get fontSize(){return this.trState.props.fontSize}set fontSize(e){this.textRenderer.set.fontSize(this.trState,e)}get fontFamily(){return this.trState.props.fontFamily}set fontFamily(e){this.textRenderer.set.fontFamily(this.trState,e)}get fontStretch(){return this.trState.props.fontStretch}set fontStretch(e){this.textRenderer.set.fontStretch(this.trState,e)}get fontStyle(){return this.trState.props.fontStyle}set fontStyle(e){this.textRenderer.set.fontStyle(this.trState,e)}get fontWeight(){return this.trState.props.fontWeight}set fontWeight(e){this.textRenderer.set.fontWeight(this.trState,e)}get textAlign(){return this.trState.props.textAlign}set textAlign(e){this.textRenderer.set.textAlign(this.trState,e)}get contain(){return this.trState.props.contain}set contain(e){this.textRenderer.set.contain(this.trState,e)}get scrollable(){return this.trState.props.scrollable}set scrollable(e){this.textRenderer.set.scrollable(this.trState,e)}get scrollY(){return this.trState.props.scrollY}set scrollY(e){this.textRenderer.set.scrollY(this.trState,e)}get offsetY(){return this.trState.props.offsetY}set offsetY(e){this.textRenderer.set.offsetY(this.trState,e)}get letterSpacing(){return this.trState.props.letterSpacing}set letterSpacing(e){this.textRenderer.set.letterSpacing(this.trState,e)}get lineHeight(){return this.trState.props.lineHeight}set lineHeight(e){this.textRenderer.set.lineHeight&&this.textRenderer.set.lineHeight(this.trState,e)}get maxLines(){return this.trState.props.maxLines}set maxLines(e){this.textRenderer.set.maxLines&&this.textRenderer.set.maxLines(this.trState,e)}get textBaseline(){return this.trState.props.textBaseline}set textBaseline(e){this.textRenderer.set.textBaseline&&this.textRenderer.set.textBaseline(this.trState,e)}get verticalAlign(){return this.trState.props.verticalAlign}set verticalAlign(e){this.textRenderer.set.verticalAlign&&this.textRenderer.set.verticalAlign(this.trState,e)}get overflowSuffix(){return this.trState.props.overflowSuffix}set overflowSuffix(e){this.textRenderer.set.overflowSuffix&&this.textRenderer.set.overflowSuffix(this.trState,e)}get debug(){return this.trState.props.debug}set debug(e){this.textRenderer.set.debug(this.trState,e)}update(e,r){super.update(e,r),z(this.globalTransform),this.textRenderer.set.x(this.trState,this.globalTransform.tx),this.textRenderer.set.y(this.trState,this.globalTransform.ty)}checkRenderProps(){return this.trState.props.text!==""?!0:super.checkRenderProps()}onChangeIsRenderable(e){super.onChangeIsRenderable(e),this.textRenderer.setIsRenderable(this.trState,e)}renderQuads(e){var r;if(z(this.globalTransform),!this.textRenderer.renderQuads){super.renderQuads(e);return}this.parentHasRenderTexture&&(!e.renderToTextureActive||this.parentRenderTexture!==e.activeRttNode)||(this.parentHasRenderTexture&&((r=this.props.parent)!=null&&r.rtt)&&(this.globalTransform=Me.identity(),this.localTransform&&this.globalTransform.multiply(this.localTransform)),z(this.globalTransform),this.textRenderer.renderQuads(this.trState,this.globalTransform,this.clippingRect,this.worldAlpha,this.parentHasRenderTexture,this.framebufferDimensions))}destroy(){super.destroy(),this.textRenderer.destroyState(this.trState)}resolveTextRendererAndState(e){const r=this.stage.resolveTextRenderer(e,this._textRendererOverride),n=r.createState(e,this);return n.emitter.on("loaded",this.onTextLoaded),n.emitter.on("failed",this.onTextFailed),r.scheduleUpdateState(n),{resolvedTextRenderer:r,textRendererState:n}}}function vc(s){const t={boolean:!0,string:!0,number:!0,undefined:!0},e=Object.keys(s);for(let r=0;r<e.length;r++){const n=e[r];if(!n)continue;const i=s[n],o=typeof i;o==="string"&&i.length>2048&&(console.warn(`Custom Data value for ${n} is too long, it will be truncated to 2048 characters`),s[n]=i.substring(0,2048)),t[o]||(console.warn(`Custom Data value for ${n} is not a boolean, string, or number, it will be ignored`),delete s[n])}return s}const Tc=2e6;class wc{constructor(t){c(this,"options");c(this,"animationManager");c(this,"txManager");c(this,"txMemManager");c(this,"fontManager");c(this,"textRenderers");c(this,"shManager");c(this,"renderer");c(this,"root");c(this,"boundsMargin");c(this,"defShaderCtr");c(this,"eventBus");c(this,"deltaTime",0);c(this,"lastFrameTime",0);c(this,"currentFrameTime",0);c(this,"fpsNumFrames",0);c(this,"fpsElapsedTime",0);c(this,"renderRequested",!1);c(this,"frameEventQueue",[]);c(this,"contextSpy",null);this.options=t;const{canvas:e,clearColor:r,appWidth:n,appHeight:i,boundsMargin:o,enableContextSpy:a,numImageWorkers:l,textureMemory:u,renderMode:h}=t;this.eventBus=t.eventBus,this.txManager=new Xl(l),this.txMemManager=new pc(this,u),this.shManager=new Bl,this.animationManager=new Wl,this.contextSpy=a?new dc:null;let f=[0,0,0,0];o&&(f=Array.isArray(o)?o:[o,o,o,o]),this.boundsMargin=f;const d={stage:this,canvas:e,pixelRatio:t.devicePhysicalPixelRatio*t.deviceLogicalPixelRatio,clearColor:r??4278190080,bufferMemory:Tc,txManager:this.txManager,txMemManager:this.txMemManager,shManager:this.shManager,contextSpy:this.contextSpy};h==="canvas"?this.renderer=new yc(d):this.renderer=new An(d),this.defShaderCtr=this.renderer.getDefShaderCtr(),sl(h),this.txManager.renderer=this.renderer,this.textRenderers=h==="webgl"?{canvas:new di(this),sdf:new cc(this)}:{canvas:new di(this)},this.fontManager=new In(this.textRenderers);const g=new rn(this,{x:0,y:0,width:n,height:i,alpha:1,autosize:!1,clipping:!1,color:0,colorTop:0,colorBottom:0,colorLeft:0,colorRight:0,colorTl:0,colorTr:0,colorBl:0,colorBr:0,zIndex:0,zIndexLocked:0,scaleX:1,scaleY:1,mountX:0,mountY:0,mount:0,pivot:.5,pivotX:.5,pivotY:.5,rotation:0,parent:null,texture:null,textureOptions:{},shader:this.defShaderCtr,rtt:!1,src:null,scale:1});this.root=g,_l(this)}updateFrameTime(){const t=vl();this.lastFrameTime=this.currentFrameTime,this.currentFrameTime=t,this.deltaTime=this.lastFrameTime?t-this.lastFrameTime:100/6,this.txManager.frameTime=t,this.txMemManager.frameTime=t,this.eventBus.emit("frameTick",{time:this.currentFrameTime,delta:this.deltaTime})}updateAnimations(){const{animationManager:t}=this;this.root&&t.update(this.deltaTime)}hasSceneUpdates(){return!!this.root.updateType||this.renderRequested}drawFrame(){const{renderer:t,renderRequested:e}=this;z(t),this.root.updateType!==0&&this.root.update(this.deltaTime,this.root.clippingRect),t.reset(),this.txMemManager.criticalCleanupRequested&&this.txMemManager.cleanup(),t.rttNodes.length>0&&t.renderRTTNodes(),this.addQuads(this.root),t==null||t.render(),this.calculateFps(),e&&(this.renderRequested=!1)}queueFrameEvent(t,e){this.frameEventQueue.push([t,e])}flushFrameEvents(){for(const[t,e]of this.frameEventQueue)this.eventBus.emit(t,e);this.frameEventQueue=[]}calculateFps(){var e,r;const{fpsUpdateInterval:t}=this.options;if(t&&(this.fpsNumFrames++,this.fpsElapsedTime+=this.deltaTime,this.fpsElapsedTime>=t)){const n=Math.round(this.fpsNumFrames*1e3/this.fpsElapsedTime);this.fpsNumFrames=0,this.fpsElapsedTime=0,this.queueFrameEvent("fpsUpdate",{fps:n,contextSpyData:((e=this.contextSpy)==null?void 0:e.getData())??null}),(r=this.contextSpy)==null||r.reset()}}addQuads(t){z(this.renderer&&t.globalTransform),t.isRenderable&&t.renderQuads(this.renderer);for(let e=0;e<t.children.length;e++){const r=t.children[e];r&&(r==null?void 0:r.worldAlpha)!==0&&this.addQuads(r)}}requestRender(){this.renderRequested=!0}resolveTextRenderer(t,e=null){let r=e,n=!1;if(r){const o=this.textRenderers[r];o?o.canRenderFont(t)||(console.warn(`Cannot use override text renderer '${r}' for font`,t),r=null,n=!0):(console.warn(`Text renderer override '${r}' not found.`),r=null,n=!0)}if(!r){for(const[o,a]of Object.entries(this.textRenderers))if(o!=="canvas"&&a.canRenderFont(t)){r=o;break}r||(r="canvas")}n&&console.warn(`Falling back to text renderer ${String(r)}`);const i=this.textRenderers[r];return z(i,"resolvedTextRenderer undefined"),i}createShaderCtr(t,e){return this.shManager.loadShader(t,e)}createNode(t){const e=this.resolveNodeDefaults(t);return new rn(this,e)}createTextNode(t){const e=t.fontSize??16,r={...this.resolveNodeDefaults(t),text:t.text??"",textRendererOverride:t.textRendererOverride??null,fontSize:e,fontFamily:t.fontFamily??"sans-serif",fontStyle:t.fontStyle??"normal",fontWeight:t.fontWeight??"normal",fontStretch:t.fontStretch??"normal",textAlign:t.textAlign??"left",contain:t.contain??"none",scrollable:t.scrollable??!1,scrollY:t.scrollY??0,offsetY:t.offsetY??0,letterSpacing:t.letterSpacing??0,lineHeight:t.lineHeight,maxLines:t.maxLines??0,textBaseline:t.textBaseline??"alphabetic",verticalAlign:t.verticalAlign??"middle",overflowSuffix:t.overflowSuffix??"...",debug:t.debug??{},shaderProps:null};return new _c(this,r)}resolveNodeDefaults(t){const e=t.color??4294967295,r=t.colorTl??t.colorTop??t.colorLeft??e,n=t.colorTr??t.colorTop??t.colorRight??e,i=t.colorBl??t.colorBottom??t.colorLeft??e,o=t.colorBr??t.colorBottom??t.colorRight??e,a=vc(t.data??{});return{x:t.x??0,y:t.y??0,width:t.width??0,height:t.height??0,alpha:t.alpha??1,autosize:t.autosize??!1,clipping:t.clipping??!1,color:e,colorTop:t.colorTop??e,colorBottom:t.colorBottom??e,colorLeft:t.colorLeft??e,colorRight:t.colorRight??e,colorBl:i,colorBr:o,colorTl:r,colorTr:n,zIndex:t.zIndex??0,zIndexLocked:t.zIndexLocked??0,parent:t.parent??null,texture:t.texture??null,textureOptions:t.textureOptions??{},shader:t.shader??this.defShaderCtr,src:t.src??"",scale:t.scale??null,scaleX:t.scaleX??t.scale??1,scaleY:t.scaleY??t.scale??1,mount:t.mount??0,mountX:t.mountX??t.mount??0,mountY:t.mountY??t.mount??0,pivot:t.pivot??.5,pivotX:t.pivotX??t.pivot??.5,pivotY:t.pivotY??t.pivot??.5,rotation:t.rotation??0,rtt:t.rtt??!1,data:a}}}class bc extends _t{constructor(e,r){var y,v,T,R;super();c(this,"root");c(this,"canvas");c(this,"settings");c(this,"stage");c(this,"inspector",null);const n={criticalThreshold:((y=e.textureMemory)==null?void 0:y.criticalThreshold)||124e6,targetThresholdLevel:((v=e.textureMemory)==null?void 0:v.targetThresholdLevel)||.5,cleanupInterval:((T=e.textureMemory)==null?void 0:T.cleanupInterval)||3e4,debugLogging:((R=e.textureMemory)==null?void 0:R.debugLogging)||!1},i={appWidth:e.appWidth||1920,appHeight:e.appHeight||1080,textureMemory:n,boundsMargin:e.boundsMargin||0,deviceLogicalPixelRatio:e.deviceLogicalPixelRatio||1,devicePhysicalPixelRatio:e.devicePhysicalPixelRatio||window.devicePixelRatio,clearColor:e.clearColor??0,fpsUpdateInterval:e.fpsUpdateInterval||0,numImageWorkers:e.numImageWorkers!==void 0?e.numImageWorkers:2,enableContextSpy:e.enableContextSpy??!1,enableInspector:e.enableInspector??!1,renderMode:e.renderMode??"webgl"};this.settings=i;const{appWidth:o,appHeight:a,deviceLogicalPixelRatio:l,devicePhysicalPixelRatio:u,enableInspector:h}=i,f=o*l,d=a*l,g=document.createElement("canvas");this.canvas=g,g.width=f*u,g.height=d*u,g.style.width=`${f}px`,g.style.height=`${d}px`,this.stage=new wc({appWidth:this.settings.appWidth,appHeight:this.settings.appHeight,boundsMargin:this.settings.boundsMargin,clearColor:this.settings.clearColor,canvas:this.canvas,deviceLogicalPixelRatio:this.settings.deviceLogicalPixelRatio,devicePhysicalPixelRatio:this.settings.devicePhysicalPixelRatio,enableContextSpy:this.settings.enableContextSpy,fpsUpdateInterval:this.settings.fpsUpdateInterval,numImageWorkers:this.settings.numImageWorkers,renderMode:this.settings.renderMode,textureMemory:n,eventBus:this}),this.root=this.stage.root;let x;if(typeof r=="string"?x=document.getElementById(r):x=r,!x)throw new Error("Could not find target element");x.appendChild(g),h&&!Sn()&&(this.inspector=new yl(g,i))}createNode(e){z(this.stage,"Stage is not initialized");const r=this.stage.createNode(e);return this.inspector?this.inspector.createNode(r):r}createTextNode(e){const r=this.stage.createTextNode(e);return this.inspector?this.inspector.createTextNode(r):r}destroyNode(e){return this.inspector&&this.inspector.destroyNode(e.id),e.destroy()}createTexture(e,r){return this.stage.txManager.loadTexture(e,r)}createShader(e,r){return this.stage.shManager.loadShader(e,r)}createDynamicShader(e){return this.stage.shManager.loadDynamicShader({effects:e})}createEffect(e,r,n){return{name:e,type:r,props:n}}getNodeById(e){var i;const r=(i=this.stage)==null?void 0:i.root;if(!r)return null;const n=o=>{if(o.id===e)return o;for(const a of o.children){const l=n(a);if(l)return l}return null};return n(r)}toggleFreeze(){throw new Error("Not implemented")}advanceFrame(){throw new Error("Not implemented")}rerender(){throw new Error("Not implemented")}}let dt,Mn;function Rc(s={},t="app"){return dt=new bc(s,t),Mn=dt.createShader.bind(dt),dt}class Sc extends Array{constructor(e){super();c(this,"_parent");this._parent=e}get selected(){const e=this._parent.selected||0;for(let r=e;r<this.length;r++)if(this[r]instanceof st)return this._parent.selected=r,this[r]}get firstChild(){return this[0]}insert(e,r){if(r){const n=this.indexOf(r);this.splice(n,0,e)}else this.push(e);e.parent=this._parent}remove(e){const r=this.indexOf(e);r>=0&&this.splice(r,1)}}var Ec={BASE_URL:"/vue-demo-app/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};function Cc(){return!!(Ec&&!1)}const Ac=Cc()||!1,Pe={debug:!1,animationsEnabled:!0,animationSettings:{duration:250,easing:"ease-in-out"},fontSettings:{fontFamily:"Ubuntu",fontSize:100},setActiveElement:()=>{}};function pi(s){return Ic(s)&&s.debug}function pt(s,t,...e){Ac&&(Pe.debug||pi(t)||pi(e[0]))&&console.log(s,t,...e)}const Ft=s=>s instanceof Function;function Ic(s){return typeof s=="object"}function pr(s){return Array.isArray(s)}function Mc(s){return typeof s=="string"}function Pc(s){return typeof s=="number"}function Lc(s){return"destroy"in s&&typeof s.destroy=="function"}function Ys(s){return s instanceof st}function Fc(s,t){for(const e of t)if(e in s)return!0;return!1}function Ao(s,t={}){if(pr(s))s.forEach(e=>{Ao(e,t)});else if(s)for(const e in s)t[e]===void 0&&(t[e]=s[e]);return t}class gi extends Array{constructor(e,r={}){var t=(...gd)=>(super(...gd),c(this,"onChange"),this);return pr(r)?t(...r):Mc(r)?t(r):t(...Object.entries(r).filter(([n,i])=>i).map(([n])=>n)),this.onChange=e,this}has(e){return this.indexOf(e)>=0}is(e){return this.indexOf(e)>=0}add(e){this.push(e),this.onChange()}toggle(e,r){r===!0?this.has(e)||this.add(e):r===!1?this.has(e)&&this.remove(e):this.has(e)?this.remove(e):this.add(e)}remove(e){const r=this.indexOf(e);r>=0&&(this.splice(r,1),this.onChange())}}const ht={Element:"element",TextNode:"textNode",Text:"text"};function Oc(s){const t=[];let e=!1,r=0;for(let A=0;A<s.children.length;A++){const L=s.children[A];if(L._type!==ht.Text&&L.flexItem!==!1){if(L._type===ht.TextNode&&L.text&&!(L.width||L.height))return!1;L.flexOrder!==void 0&&(e=!0),L.flexGrow!==void 0&&(r+=L.flexGrow),t.push(L)}}e&&t.sort((A,L)=>(A.flexOrder||0)-(L.flexOrder||0));const n=t.length,o=(s.flexDirection||"row")==="row",a=o?"width":"height",l=o?"height":"width",u=o?"marginLeft":"marginTop",h=o?"marginRight":"marginBottom",f=o?"x":"y",d=o?"y":"x",g=s[a]||0,x=s[l]||0,y=s.gap||0,v=s.justifyContent||"flexStart",T=s.alignItems;if(r){const A=t.reduce((I,F)=>I+(F.flexGrow?0:F[a]||0)+(F[u]||0)+(F[h]||0),0),L=(g-A-y*(n-1))/r;for(let I=0;I<t.length;I++){const F=t[I];F.flexGrow!==void 0&&F.flexGrow>0&&(F[a]=F.flexGrow*L)}}let R=0;["center","spaceBetween","spaceEvenly"].includes(v)&&(R=t.reduce((A,L)=>A+(L[a]||0)+(L[u]||0)+(L[h]||0),0));const E=x&&T?A=>{T==="flexStart"?A[d]=0:T==="center"?A[d]=(x-(A[l]||0))/2:T==="flexEnd"&&(A[d]=x-(A[l]||0))}:A=>A;if(v==="flexStart"){let A=0;for(let L=0;L<t.length;L++){const I=t[L];I[f]=A+(I[u]||0),A+=(I[a]||0)+y+(I[u]||0)+(I[h]||0),E(I)}if(s.flexBoundary!=="fixed"){const L=A-y;if(L!==s[a])return s[a]=L,!0}}else if(v==="flexEnd"){let A=g;for(let L=n-1;L>=0;L--){const I=t[L];I[f]=A-(I[a]||0)-(I[h]||0),A-=(I[a]||0)+y+(I[u]||0)+(I[h]||0),E(I)}if(s.flexBoundary!=="fixed"){const L=A-y;if(L!==s[a])return s[a]=L,!0}}else if(v==="center"){let A=(g-(R+y*(n-1)))/2;for(let L=0;L<t.length;L++){const I=t[L];I[f]=A+(I[u]||0),A+=(I[a]||0)+y+(I[u]||0)+(I[h]||0),E(I)}}else if(v==="spaceBetween"){const A=(g-R)/(n-1);let L=0;for(let I=0;I<t.length;I++){const F=t[I];F[f]=L+(F[u]||0),L+=(F[a]||0)+A+(F[u]||0)+(F[h]||0),E(F)}}else if(v==="spaceEvenly"){const A=(g-R)/(n+1);let L=A;for(let I=0;I<t.length;I++){const F=t[I];F[f]=L+(F[u]||0),L+=(F[a]||0)+A+(F[u]||0)+(F[h]||0),E(F)}}return!1}const js=new Set;let Wr=!0;function mi(s){const t=[];let e=0;for(const[r,n]of Object.entries(s))t.push({name:`el${e}`,type:r,props:n}),e++;return Mn("DynamicShader",{effects:t})}function ts(s=""){return{set(t){Pc(t)&&(t={width:t,color:255}),this.effects=this.effects?{...this.effects||{},[`border${s}`]:t}:{[`border${s}`]:t}},get(){var t;return(t=this.effects)==null?void 0:t[`border${s}`]}}}const Bc=["alpha","color","colorTop","colorRight","colorLeft","colorBottom","colorTl","colorTr","colorBl","colorBr","height","fontSize","lineHeight","mount","mountX","mountY","pivot","pivotX","pivotY","rotation","scale","width","worldX","worldY","x","y","zIndex","zIndexLocked"],Nc=["absX","absY","autosize","clipping","contain","fontFamily","fontStretch","fontStyle","fontWeight","letterSpacing","maxLines","offsetY","overflowSuffix","rtt","scrollable","scrollY","src","text","textAlign","textBaseline","textOverflow","texture","verticalAlign","wordWrap"];class st extends Object{constructor(t){super(),this._type=t==="text"?ht.TextNode:ht.Element,this.rendered=!1,this.lng={},this.children=new Sc(this)}get effects(){return this._effects}set effects(t){this._effects=t,this.rendered&&(this.shader=mi(t))}get parent(){return this._parent}set parent(t){this._parent=t,this.rendered&&(this.lng.parent=(t==null?void 0:t.lng)??null)}set shader(t){let e=t;pr(t)&&(e=Mn(...t)),this.lng.shader=e}_sendToLightningAnimatable(t,e){if(this.transition&&this.rendered&&Pe.animationsEnabled&&(this.transition===!0||this.transition[t])){const r=this.transition===!0||this.transition[t]===!0?void 0:this.transition[t],n=this.animate({[t]:e},r);return Ft(this.onAnimationStarted)&&n.once("animating",i=>{var o;(o=this.onAnimationStarted)==null||o.call(this,i,t,e)}),Ft(this.onAnimationFinished)&&n.once("stopped",i=>{var o;(o=this.onAnimationFinished)==null||o.call(this,i,t,e)}),n.start()}this.lng[t]=e}animate(t,e){return z(this.rendered,"Node must be rendered before animating"),this.lng.animate(t,e||this.animationSettings)}chain(t,e){return this._animationRunning&&(this._animationQueue=[],this._animationRunning=!1),e?this._animationQueueSettings=e:this._animationQueueSettings||(this._animationQueueSettings=e||this.animationSettings),e=e||this._animationQueueSettings,this._animationQueue=this._animationQueue||[],this._animationQueue.push({props:t,animationSettings:e}),this}async start(){let t=this._animationQueue.shift();for(;t;)this._animationRunning=!0,await this.animate(t.props,t.animationSettings).start().waitUntilStopped(),t=this._animationQueue.shift();this._animationRunning=!1,this._animationQueueSettings=void 0}setFocus(){var t,e;if(this.rendered){if(this.skipFocus){const r=(t=this.parent)==null?void 0:t.children.indexOf(this),n=(e=this.parent)==null?void 0:e.children[r+1];Ys(n)&&n.setFocus();return}if(this.forwardFocus!==void 0)if(Ft(this.forwardFocus)){if(this.forwardFocus.call(this,this)!==!1)return}else{const r=typeof this.forwardFocus=="number"?this.forwardFocus:null;if(r!==null&&r<this.children.length){const n=this.children[r];Ys(n)&&n.setFocus();return}}queueMicrotask(()=>Pe.setActiveElement(this))}else this.autofocus=!0}isTextNode(){return this._type===ht.TextNode}_layoutOnLoad(){this.lng.on("loaded",(t,e)=>{const{dimensions:r}=e;this.parent.updateLayout(this,r)})}getText(){let t="";for(let e=0;e<this.children.length;e++)t+=this.children[e].text;return t}destroy(){this._queueDelete&&Lc(this.lng)&&this.lng.destroy()}set onEvents(t){this._events=t}get onEvents(){return this._events}set style(t){pr(t)?this._style=Ao(t):this._style=t;for(const e in this._style)this[e]===void 0&&(this[e]=this._style[e])}get style(){return this._style}get hasChildren(){return this.children.length>0}getChildById(t){return this.children.find(e=>e.id===t)}searchChildrenById(t){for(let e=0;e<this.children.length;e++){const r=this.children[e];if(Ys(r)){if(r.id===t)return r;const n=r.searchChildrenById(t);if(n)return n}}}set states(t){this._states=new gi(this._stateChanged.bind(this),t),this.rendered&&this._stateChanged()}get states(){return this._states=this._states||new gi(this._stateChanged.bind(this)),this._states}get animationSettings(){return this._animationSettings||Pe.animationSettings}set animationSettings(t){this._animationSettings=t}requiresLayout(){return this.display==="flex"||this.onBeforeLayout}updateLayout(t,e){var r,n;if(this.hasChildren){pt("Layout: ",this);let i=!1;Ft(this.onBeforeLayout)&&(i=this.onBeforeLayout.call(this,this,t,e)||!1),this.display==="flex"?(Oc(this)||i)&&((r=this.parent)==null||r.updateLayout()):i&&((n=this.parent)==null||n.updateLayout()),Ft(this.onLayout)&&this.onLayout.call(this,this,t,e)}}_stateChanged(){if(pt("State Changed: ",this,this.states),this.forwardStates){const e=this.states.slice();this.children.forEach(r=>{r.states=e})}const t=this.states;if(this._undoStyles||this.style&&Fc(this.style,t)){this._undoStyles=this._undoStyles||[];const e={};this._undoStyles.forEach(n=>{e[n]=this.style[n]});const r=t.reduce((n,i)=>{const o=this.style[i];return o&&(n={...n,...o}),n},{});this._undoStyles=Object.keys(r),r.transition!==void 0&&(this.transition=r.transition),Object.assign(this,e,r)}}render(){var n;const t=this,e=this.parent;if(!e){console.warn("Parent not set - no node created for: ",this);return}if(!e.rendered){console.warn("Parent not rendered yet: ",this);return}if(this.rendered){console.warn("Node already rendered: ",this);return}e.requiresLayout()&&!js.has(e)&&(js.add(e),Wr&&(Wr=!1,queueMicrotask(()=>{Wr=!0;const i=[...js];js.clear();for(let o=i.length-1;o>=0;o--)i[o].updateLayout()}))),this._states&&this._stateChanged();const r=t.lng;if(r.x=r.x||0,r.y=r.y||0,e.rendered&&(r.parent=e.lng),t._effects&&(r.shader=mi(t._effects)),t.isTextNode()){const i=r;if(Pe.fontSettings)for(const o in Pe.fontSettings)i[o]===void 0&&(i[o]=Pe.fontSettings[o]);i.text=i.text||t.getText(),i.textAlign&&!i.contain&&console.warn("Text align requires contain: ",t.getText()),i.contain&&(i.width||(i.width=(e.width||0)-i.x-(i.marginRight||0)),i.contain==="both"&&!i.height&&!i.maxLines?i.height=(e.height||0)-i.y-(i.marginBottom||0):i.maxLines===1&&(i.height=i.height||i.lineHeight||i.fontSize)),pt("Rendering: ",this,r),t.lng=dt.createTextNode(r),e.requiresLayout()&&(!r.width||!r.height)&&t._layoutOnLoad()}else r.texture||(isNaN(r.width)&&(r.width=(e.width||0)-r.x),isNaN(r.height)&&(r.height=(e.height||0)-r.y),r.rtt&&!r.color&&(r.color=4294967295),!r.color&&!r.src&&(r.color=0)),pt("Rendering: ",this,r),t.lng=dt.createNode(r);if(t.rendered=!0,t.autosize&&e.requiresLayout()&&t._layoutOnLoad(),t.onFail&&t.lng.on("failed",t.onFail),t.onLoad&&t.lng.on("loaded",t.onLoad),Ft(this.onCreate)&&this.onCreate.call(this,t),t.onEvents&&t.onEvents.forEach(([i,o])=>{t.lng.on(i,(a,l)=>o(t,l))}),(n=t.lng)!=null&&n.div&&(t.lng.div.element=t),t._type===ht.Element)for(let i=0;i<t.children.length;i++){const o=t.children[i];z(o,"Child is undefined"),Ys(o)?o.render():o.text&&o._type===ht.Text&&console.warn("TextNode outside of <Text>: ",o)}t.autofocus&&t.setFocus()}}for(const s of Bc)Object.defineProperty(st.prototype,s,{get(){return this.lng[s]},set(t){this._sendToLightningAnimatable(s,t)}});for(const s of Nc)Object.defineProperty(st.prototype,s,{get(){return this.lng[s]},set(t){this.lng[s]=t}});Object.defineProperties(st.prototype,{borderRadius:{set(s){this.effects=this.effects?{...this.effects,radius:{radius:s}}:{radius:{radius:s}}},get(){var s,t;return(t=(s=this.effects)==null?void 0:s.radius)==null?void 0:t.radius}},border:ts(),borderLeft:ts("Left"),borderRight:ts("Right"),borderTop:ts("Top"),borderBottom:ts("Bottom"),linearGradient:{set(s={}){this.effects=this.effects?{...this.effects,linearGradient:s}:{linearGradient:s}},get(){var s;return(s=this.effects)==null?void 0:s.linearGradient}}});/**
* @vue/shared v3.4.31
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Io(s,t){const e=new Set(s.split(","));return r=>e.has(r)}const me={},Vt=[],$e=()=>{},kc=()=>!1,Pn=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&(s.charCodeAt(2)>122||s.charCodeAt(2)<97),Mo=s=>s.startsWith("onUpdate:"),Ee=Object.assign,Ln=(s,t)=>{const e=s.indexOf(t);e>-1&&s.splice(e,1)},Dc=Object.prototype.hasOwnProperty,le=(s,t)=>Dc.call(s,t),J=Array.isArray,Gt=s=>br(s)==="[object Map]",Po=s=>br(s)==="[object Set]",se=s=>typeof s=="function",Fe=s=>typeof s=="string",It=s=>typeof s=="symbol",xe=s=>s!==null&&typeof s=="object",Lo=s=>(xe(s)||se(s))&&se(s.then)&&se(s.catch),Fo=Object.prototype.toString,br=s=>Fo.call(s),Uc=s=>br(s).slice(8,-1),Oo=s=>br(s)==="[object Object]",Fn=s=>Fe(s)&&s!=="NaN"&&s[0]!=="-"&&""+parseInt(s,10)===s,hs=Io(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Rr=s=>{const t=Object.create(null);return e=>t[e]||(t[e]=s(e))},$c=/-(\w)/g,bs=Rr(s=>s.replace($c,(t,e)=>e?e.toUpperCase():"")),zc=/\B([A-Z])/g,Sr=Rr(s=>s.replace(zc,"-$1").toLowerCase()),Hc=Rr(s=>s.charAt(0).toUpperCase()+s.slice(1)),Vr=Rr(s=>s?`on${Hc(s)}`:""),xt=(s,t)=>!Object.is(s,t),Gr=(s,...t)=>{for(let e=0;e<s.length;e++)s[e](...t)},Bo=(s,t,e,r=!1)=>{Object.defineProperty(s,t,{configurable:!0,enumerable:!1,writable:r,value:e})},Wc=s=>{const t=parseFloat(s);return isNaN(t)?s:t};let xi;const No=()=>xi||(xi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Fs(s){if(J(s)){const t={};for(let e=0;e<s.length;e++){const r=s[e],n=Fe(r)?Yc(r):Fs(r);if(n)for(const i in n)t[i]=n[i]}return t}else if(Fe(s)||xe(s))return s}const Vc=/;(?![^(]*\))/g,Gc=/:([^]+)/,Xc=/\/\*[^]*?\*\//g;function Yc(s){const t={};return s.replace(Xc,"").split(Vc).forEach(e=>{if(e){const r=e.split(Gc);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function On(s){let t="";if(Fe(s))t=s;else if(J(s))for(let e=0;e<s.length;e++){const r=On(s[e]);r&&(t+=r+" ")}else if(xe(s))for(const e in s)s[e]&&(t+=e+" ");return t.trim()}const ko=s=>!!(s&&s.__v_isRef===!0),jc=s=>Fe(s)?s:s==null?"":J(s)||xe(s)&&(s.toString===Fo||!se(s.toString))?ko(s)?jc(s.value):JSON.stringify(s,Do,2):String(s),Do=(s,t)=>ko(t)?Do(s,t.value):Gt(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[r,n],i)=>(e[Xr(r,i)+" =>"]=n,e),{})}:Po(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>Xr(e))}:It(t)?Xr(t):xe(t)&&!J(t)&&!Oo(t)?String(t):t,Xr=(s,t="")=>{var e;return It(s)?`Symbol(${(e=s.description)!=null?e:t})`:s};/**
* @vue/reactivity v3.4.31
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let He;class Kc{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=He,!t&&He&&(this.index=(He.scopes||(He.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const e=He;try{return He=this,t()}finally{He=e}}}on(){He=this}off(){He=this.parent}stop(t){if(this._active){let e,r;for(e=0,r=this.effects.length;e<r;e++)this.effects[e].stop();for(e=0,r=this.cleanups.length;e<r;e++)this.cleanups[e]();if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0,this._active=!1}}}function qc(s,t=He){t&&t.active&&t.effects.push(s)}function Qc(){return He}let Ct;class Bn{constructor(t,e,r,n){this.fn=t,this.trigger=e,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,qc(this,n)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,Tt();for(let t=0;t<this._depsLength;t++){const e=this.deps[t];if(e.computed&&(Zc(e.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),wt()}return this._dirtyLevel>=4}set dirty(t){this._dirtyLevel=t?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=gt,e=Ct;try{return gt=!0,Ct=this,this._runnings++,yi(this),this.fn()}finally{_i(this),this._runnings--,Ct=e,gt=t}}stop(){this.active&&(yi(this),_i(this),this.onStop&&this.onStop(),this.active=!1)}}function Zc(s){return s.value}function yi(s){s._trackId++,s._depsLength=0}function _i(s){if(s.deps.length>s._depsLength){for(let t=s._depsLength;t<s.deps.length;t++)Uo(s.deps[t],s);s.deps.length=s._depsLength}}function Uo(s,t){const e=s.get(t);e!==void 0&&t._trackId!==e&&(s.delete(t),s.size===0&&s.cleanup())}let gt=!0,hn=0;const $o=[];function Tt(){$o.push(gt),gt=!1}function wt(){const s=$o.pop();gt=s===void 0?!0:s}function Nn(){hn++}function kn(){for(hn--;!hn&&fn.length;)fn.shift()()}function zo(s,t,e){if(t.get(s)!==s._trackId){t.set(s,s._trackId);const r=s.deps[s._depsLength];r!==t?(r&&Uo(r,s),s.deps[s._depsLength++]=t):s._depsLength++}}const fn=[];function Ho(s,t,e){Nn();for(const r of s.keys()){let n;r._dirtyLevel<t&&(n??(n=s.get(r)===r._trackId))&&(r._shouldSchedule||(r._shouldSchedule=r._dirtyLevel===0),r._dirtyLevel=t),r._shouldSchedule&&(n??(n=s.get(r)===r._trackId))&&(r.trigger(),(!r._runnings||r.allowRecurse)&&r._dirtyLevel!==2&&(r._shouldSchedule=!1,r.scheduler&&fn.push(r.scheduler)))}kn()}const Wo=(s,t)=>{const e=new Map;return e.cleanup=s,e.computed=t,e},dn=new WeakMap,At=Symbol(""),pn=Symbol("");function Ne(s,t,e){if(gt&&Ct){let r=dn.get(s);r||dn.set(s,r=new Map);let n=r.get(e);n||r.set(e,n=Wo(()=>r.delete(e))),zo(Ct,n)}}function rt(s,t,e,r,n,i){const o=dn.get(s);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(e==="length"&&J(s)){const l=Number(r);o.forEach((u,h)=>{(h==="length"||!It(h)&&h>=l)&&a.push(u)})}else switch(e!==void 0&&a.push(o.get(e)),t){case"add":J(s)?Fn(e)&&a.push(o.get("length")):(a.push(o.get(At)),Gt(s)&&a.push(o.get(pn)));break;case"delete":J(s)||(a.push(o.get(At)),Gt(s)&&a.push(o.get(pn)));break;case"set":Gt(s)&&a.push(o.get(At));break}Nn();for(const l of a)l&&Ho(l,4);kn()}const Jc=Io("__proto__,__v_isRef,__isVue"),Vo=new Set(Object.getOwnPropertyNames(Symbol).filter(s=>s!=="arguments"&&s!=="caller").map(s=>Symbol[s]).filter(It)),vi=eu();function eu(){const s={};return["includes","indexOf","lastIndexOf"].forEach(t=>{s[t]=function(...e){const r=he(this);for(let i=0,o=this.length;i<o;i++)Ne(r,"get",i+"");const n=r[t](...e);return n===-1||n===!1?r[t](...e.map(he)):n}}),["push","pop","shift","unshift","splice"].forEach(t=>{s[t]=function(...e){Tt(),Nn();const r=he(this)[t].apply(this,e);return kn(),wt(),r}}),s}function tu(s){It(s)||(s=String(s));const t=he(this);return Ne(t,"has",s),t.hasOwnProperty(s)}class Go{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,r){const n=this._isReadonly,i=this._isShallow;if(e==="__v_isReactive")return!n;if(e==="__v_isReadonly")return n;if(e==="__v_isShallow")return i;if(e==="__v_raw")return r===(n?i?pu:Ko:i?jo:Yo).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const o=J(t);if(!n){if(o&&le(vi,e))return Reflect.get(vi,e,r);if(e==="hasOwnProperty")return tu}const a=Reflect.get(t,e,r);return(It(e)?Vo.has(e):Jc(e))||(n||Ne(t,"get",e),i)?a:ke(a)?o&&Fn(e)?a:a.value:xe(a)?n?Qo(a):Cr(a):a}}class Xo extends Go{constructor(t=!1){super(!1,t)}set(t,e,r,n){let i=t[e];if(!this._isShallow){const l=Rs(i);if(!gr(r)&&!Rs(r)&&(i=he(i),r=he(r)),!J(t)&&ke(i)&&!ke(r))return l?!1:(i.value=r,!0)}const o=J(t)&&Fn(e)?Number(e)<t.length:le(t,e),a=Reflect.set(t,e,r,n);return t===he(n)&&(o?xt(r,i)&&rt(t,"set",e,r):rt(t,"add",e,r)),a}deleteProperty(t,e){const r=le(t,e);t[e];const n=Reflect.deleteProperty(t,e);return n&&r&&rt(t,"delete",e,void 0),n}has(t,e){const r=Reflect.has(t,e);return(!It(e)||!Vo.has(e))&&Ne(t,"has",e),r}ownKeys(t){return Ne(t,"iterate",J(t)?"length":At),Reflect.ownKeys(t)}}class su extends Go{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const ru=new Xo,nu=new su,iu=new Xo(!0);const Dn=s=>s,Er=s=>Reflect.getPrototypeOf(s);function Ks(s,t,e=!1,r=!1){s=s.__v_raw;const n=he(s),i=he(t);e||(xt(t,i)&&Ne(n,"get",t),Ne(n,"get",i));const{has:o}=Er(n),a=r?Dn:e?zn:Ss;if(o.call(n,t))return a(s.get(t));if(o.call(n,i))return a(s.get(i));s!==n&&s.get(t)}function qs(s,t=!1){const e=this.__v_raw,r=he(e),n=he(s);return t||(xt(s,n)&&Ne(r,"has",s),Ne(r,"has",n)),s===n?e.has(s):e.has(s)||e.has(n)}function Qs(s,t=!1){return s=s.__v_raw,!t&&Ne(he(s),"iterate",At),Reflect.get(s,"size",s)}function Ti(s){s=he(s);const t=he(this);return Er(t).has.call(t,s)||(t.add(s),rt(t,"add",s,s)),this}function wi(s,t){t=he(t);const e=he(this),{has:r,get:n}=Er(e);let i=r.call(e,s);i||(s=he(s),i=r.call(e,s));const o=n.call(e,s);return e.set(s,t),i?xt(t,o)&&rt(e,"set",s,t):rt(e,"add",s,t),this}function bi(s){const t=he(this),{has:e,get:r}=Er(t);let n=e.call(t,s);n||(s=he(s),n=e.call(t,s)),r&&r.call(t,s);const i=t.delete(s);return n&&rt(t,"delete",s,void 0),i}function Ri(){const s=he(this),t=s.size!==0,e=s.clear();return t&&rt(s,"clear",void 0,void 0),e}function Zs(s,t){return function(r,n){const i=this,o=i.__v_raw,a=he(o),l=t?Dn:s?zn:Ss;return!s&&Ne(a,"iterate",At),o.forEach((u,h)=>r.call(n,l(u),l(h),i))}}function Js(s,t,e){return function(...r){const n=this.__v_raw,i=he(n),o=Gt(i),a=s==="entries"||s===Symbol.iterator&&o,l=s==="keys"&&o,u=n[s](...r),h=e?Dn:t?zn:Ss;return!t&&Ne(i,"iterate",l?pn:At),{next(){const{value:f,done:d}=u.next();return d?{value:f,done:d}:{value:a?[h(f[0]),h(f[1])]:h(f),done:d}},[Symbol.iterator](){return this}}}}function it(s){return function(...t){return s==="delete"?!1:s==="clear"?void 0:this}}function ou(){const s={get(i){return Ks(this,i)},get size(){return Qs(this)},has:qs,add:Ti,set:wi,delete:bi,clear:Ri,forEach:Zs(!1,!1)},t={get(i){return Ks(this,i,!1,!0)},get size(){return Qs(this)},has:qs,add:Ti,set:wi,delete:bi,clear:Ri,forEach:Zs(!1,!0)},e={get(i){return Ks(this,i,!0)},get size(){return Qs(this,!0)},has(i){return qs.call(this,i,!0)},add:it("add"),set:it("set"),delete:it("delete"),clear:it("clear"),forEach:Zs(!0,!1)},r={get(i){return Ks(this,i,!0,!0)},get size(){return Qs(this,!0)},has(i){return qs.call(this,i,!0)},add:it("add"),set:it("set"),delete:it("delete"),clear:it("clear"),forEach:Zs(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{s[i]=Js(i,!1,!1),e[i]=Js(i,!0,!1),t[i]=Js(i,!1,!0),r[i]=Js(i,!0,!0)}),[s,e,t,r]}const[au,lu,cu,uu]=ou();function Un(s,t){const e=t?s?uu:cu:s?lu:au;return(r,n,i)=>n==="__v_isReactive"?!s:n==="__v_isReadonly"?s:n==="__v_raw"?r:Reflect.get(le(e,n)&&n in r?e:r,n,i)}const hu={get:Un(!1,!1)},fu={get:Un(!1,!0)},du={get:Un(!0,!1)};const Yo=new WeakMap,jo=new WeakMap,Ko=new WeakMap,pu=new WeakMap;function gu(s){switch(s){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function mu(s){return s.__v_skip||!Object.isExtensible(s)?0:gu(Uc(s))}function Cr(s){return Rs(s)?s:$n(s,!1,ru,hu,Yo)}function qo(s){return $n(s,!1,iu,fu,jo)}function Qo(s){return $n(s,!0,nu,du,Ko)}function $n(s,t,e,r,n){if(!xe(s)||s.__v_raw&&!(t&&s.__v_isReactive))return s;const i=n.get(s);if(i)return i;const o=mu(s);if(o===0)return s;const a=new Proxy(s,o===2?r:e);return n.set(s,a),a}function fs(s){return Rs(s)?fs(s.__v_raw):!!(s&&s.__v_isReactive)}function Rs(s){return!!(s&&s.__v_isReadonly)}function gr(s){return!!(s&&s.__v_isShallow)}function Zo(s){return s?!!s.__v_raw:!1}function he(s){const t=s&&s.__v_raw;return t?he(t):s}function Jo(s){return Object.isExtensible(s)&&Bo(s,"__v_skip",!0),s}const Ss=s=>xe(s)?Cr(s):s,zn=s=>xe(s)?Qo(s):s;class ea{constructor(t,e,r,n){this.getter=t,this._setter=e,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Bn(()=>t(this._value),()=>or(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!n,this.__v_isReadonly=r}get value(){const t=he(this);return(!t._cacheable||t.effect.dirty)&&xt(t._value,t._value=t.effect.run())&&or(t,4),ta(t),t.effect._dirtyLevel>=2&&or(t,2),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function xu(s,t,e=!1){let r,n;const i=se(s);return i?(r=s,n=$e):(r=s.get,n=s.set),new ea(r,n,i||!n,e)}function ta(s){var t;gt&&Ct&&(s=he(s),zo(Ct,(t=s.dep)!=null?t:s.dep=Wo(()=>s.dep=void 0,s instanceof ea?s:void 0)))}function or(s,t=4,e,r){s=he(s);const n=s.dep;n&&Ho(n,t)}function ke(s){return!!(s&&s.__v_isRef===!0)}function Ze(s){return sa(s,!1)}function yu(s){return sa(s,!0)}function sa(s,t){return ke(s)?s:new _u(s,t)}class _u{constructor(t,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:he(t),this._value=e?t:Ss(t)}get value(){return ta(this),this._value}set value(t){const e=this.__v_isShallow||gr(t)||Rs(t);t=e?t:he(t),xt(t,this._rawValue)&&(this._rawValue,this._rawValue=t,this._value=e?t:Ss(t),or(this,4))}}function Se(s){return ke(s)?s.value:s}const vu={get:(s,t,e)=>Se(Reflect.get(s,t,e)),set:(s,t,e,r)=>{const n=s[t];return ke(n)&&!ke(e)?(n.value=e,!0):Reflect.set(s,t,e,r)}};function ra(s){return fs(s)?s:new Proxy(s,vu)}const Hn=Ze(void 0),Tu=s=>Hn.value=s;Pe.setActiveElement=Tu;/**
* @vue/runtime-core v3.4.31
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function mt(s,t,e,r){try{return r?s(...r):s()}catch(n){Ar(n,t,e)}}function Je(s,t,e,r){if(se(s)){const n=mt(s,t,e,r);return n&&Lo(n)&&n.catch(i=>{Ar(i,t,e)}),n}if(J(s)){const n=[];for(let i=0;i<s.length;i++)n.push(Je(s[i],t,e,r));return n}}function Ar(s,t,e,r=!0){const n=t?t.vnode:null;if(t){let i=t.parent;const o=t.proxy,a=`https://vuejs.org/error-reference/#runtime-${e}`;for(;i;){const u=i.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](s,o,a)===!1)return}i=i.parent}const l=t.appContext.config.errorHandler;if(l){Tt(),mt(l,null,10,[s,o,a]),wt();return}}wu(s,e,n,r)}function wu(s,t,e,r=!0){console.error(s)}let Es=!1,gn=!1;const Ce=[];let Qe=0;const Xt=[];let at=null,St=0;const na=Promise.resolve();let Wn=null;function ia(s){const t=Wn||na;return s?t.then(this?s.bind(this):s):t}function bu(s){let t=Qe+1,e=Ce.length;for(;t<e;){const r=t+e>>>1,n=Ce[r],i=Cs(n);i<s||i===s&&n.pre?t=r+1:e=r}return t}function Vn(s){(!Ce.length||!Ce.includes(s,Es&&s.allowRecurse?Qe+1:Qe))&&(s.id==null?Ce.push(s):Ce.splice(bu(s.id),0,s),oa())}function oa(){!Es&&!gn&&(gn=!0,Wn=na.then(la))}function Ru(s){const t=Ce.indexOf(s);t>Qe&&Ce.splice(t,1)}function Su(s){J(s)?Xt.push(...s):(!at||!at.includes(s,s.allowRecurse?St+1:St))&&Xt.push(s),oa()}function Si(s,t,e=Es?Qe+1:0){for(;e<Ce.length;e++){const r=Ce[e];if(r&&r.pre){if(s&&r.id!==s.uid)continue;Ce.splice(e,1),e--,r()}}}function aa(s){if(Xt.length){const t=[...new Set(Xt)].sort((e,r)=>Cs(e)-Cs(r));if(Xt.length=0,at){at.push(...t);return}for(at=t,St=0;St<at.length;St++){const e=at[St];e.active!==!1&&e()}at=null,St=0}}const Cs=s=>s.id==null?1/0:s.id,Eu=(s,t)=>{const e=Cs(s)-Cs(t);if(e===0){if(s.pre&&!t.pre)return-1;if(t.pre&&!s.pre)return 1}return e};function la(s){gn=!1,Es=!0,Ce.sort(Eu);try{for(Qe=0;Qe<Ce.length;Qe++){const t=Ce[Qe];t&&t.active!==!1&&mt(t,null,14)}}finally{Qe=0,Ce.length=0,aa(),Es=!1,Wn=null,(Ce.length||Xt.length)&&la()}}function Cu(s,t,...e){if(s.isUnmounted)return;const r=s.vnode.props||me;let n=e;const i=t.startsWith("update:"),o=i&&t.slice(7);if(o&&o in r){const h=`${o==="modelValue"?"model":o}Modifiers`,{number:f,trim:d}=r[h]||me;d&&(n=e.map(g=>Fe(g)?g.trim():g)),f&&(n=e.map(Wc))}let a,l=r[a=Vr(t)]||r[a=Vr(bs(t))];!l&&i&&(l=r[a=Vr(Sr(t))]),l&&Je(l,s,6,n);const u=r[a+"Once"];if(u){if(!s.emitted)s.emitted={};else if(s.emitted[a])return;s.emitted[a]=!0,Je(u,s,6,n)}}function ca(s,t,e=!1){const r=t.emitsCache,n=r.get(s);if(n!==void 0)return n;const i=s.emits;let o={},a=!1;if(!se(s)){const l=u=>{const h=ca(u,t,!0);h&&(a=!0,Ee(o,h))};!e&&t.mixins.length&&t.mixins.forEach(l),s.extends&&l(s.extends),s.mixins&&s.mixins.forEach(l)}return!i&&!a?(xe(s)&&r.set(s,null),null):(J(i)?i.forEach(l=>o[l]=null):Ee(o,i),xe(s)&&r.set(s,o),o)}function Ir(s,t){return!s||!Pn(t)?!1:(t=t.slice(2).replace(/Once$/,""),le(s,t[0].toLowerCase()+t.slice(1))||le(s,Sr(t))||le(s,t))}let Ae=null,ua=null;function mr(s){const t=Ae;return Ae=s,ua=s&&s.type.__scopeId||null,t}function ls(s,t=Ae,e){if(!t||s._n)return s;const r=(...n)=>{r._d&&Ni(-1);const i=mr(t);let o;try{o=s(...n)}finally{mr(i),r._d&&Ni(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Yr(s){const{type:t,vnode:e,proxy:r,withProxy:n,propsOptions:[i],slots:o,attrs:a,emit:l,render:u,renderCache:h,props:f,data:d,setupState:g,ctx:x,inheritAttrs:y}=s,v=mr(s);let T,R;try{if(e.shapeFlag&4){const A=n||r,L=A;T=qe(u.call(L,A,h,f,g,d,x)),R=a}else{const A=t;T=qe(A.length>1?A(f,{attrs:a,slots:o,emit:l}):A(f,null)),R=t.props?a:Au(a)}}catch(A){ms.length=0,Ar(A,s,1),T=Te(yt)}let E=T;if(R&&y!==!1){const A=Object.keys(R),{shapeFlag:L}=E;A.length&&L&7&&(i&&A.some(Mo)&&(R=Iu(R,i)),E=Kt(E,R,!1,!0))}return e.dirs&&(E=Kt(E,null,!1,!0),E.dirs=E.dirs?E.dirs.concat(e.dirs):e.dirs),e.transition&&(E.transition=e.transition),T=E,mr(v),T}const Au=s=>{let t;for(const e in s)(e==="class"||e==="style"||Pn(e))&&((t||(t={}))[e]=s[e]);return t},Iu=(s,t)=>{const e={};for(const r in s)(!Mo(r)||!(r.slice(9)in t))&&(e[r]=s[r]);return e};function Mu(s,t,e){const{props:r,children:n,component:i}=s,{props:o,children:a,patchFlag:l}=t,u=i.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&l>=0){if(l&1024)return!0;if(l&16)return r?Ei(r,o,u):!!o;if(l&8){const h=t.dynamicProps;for(let f=0;f<h.length;f++){const d=h[f];if(o[d]!==r[d]&&!Ir(u,d))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Ei(r,o,u):!0:!!o;return!1}function Ei(s,t,e){const r=Object.keys(t);if(r.length!==Object.keys(s).length)return!0;for(let n=0;n<r.length;n++){const i=r[n];if(t[i]!==s[i]&&!Ir(e,i))return!0}return!1}function Pu({vnode:s,parent:t},e){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===s&&(r.el=s.el),r===s)(s=t.vnode).el=e,t=t.parent;else break}}const Lu=Symbol.for("v-ndc"),Fu=s=>s.__isSuspense;function Ou(s,t){t&&t.pendingBranch?J(s)?t.effects.push(...s):t.effects.push(s):Su(s)}function Mr(s,t,e=Le,r=!1){if(e){const n=e[s]||(e[s]=[]),i=t.__weh||(t.__weh=(...o)=>{Tt();const a=Bs(e),l=Je(t,e,s,o);return a(),wt(),l});return r?n.unshift(i):n.push(i),i}}const nt=s=>(t,e=Le)=>{(!Fr||s==="sp")&&Mr(s,(...r)=>t(...r),e)},Bu=nt("bm"),Nu=nt("m"),ku=nt("bu"),Du=nt("u"),Uu=nt("bum"),ha=nt("um"),$u=nt("sp"),zu=nt("rtg"),Hu=nt("rtc");function Wu(s,t=Le){Mr("ec",s,t)}function cd(s,t){if(Ae===null)return s;const e=Or(Ae),r=s.dirs||(s.dirs=[]);for(let n=0;n<t.length;n++){let[i,o,a,l=me]=t[n];i&&(se(i)&&(i={mounted:i,updated:i}),i.deep&&ft(o),r.push({dir:i,instance:e,value:o,oldValue:void 0,arg:a,modifiers:l}))}return s}function bt(s,t,e,r){const n=s.dirs,i=t&&t.dirs;for(let o=0;o<n.length;o++){const a=n[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(Tt(),Je(l,e,8,[s.el,a,s,t]),wt())}}function ud(s,t,e,r){let n;const i=e;if(J(s)||Fe(s)){n=new Array(s.length);for(let o=0,a=s.length;o<a;o++)n[o]=t(s[o],o,void 0,i)}else if(typeof s=="number"){n=new Array(s);for(let o=0;o<s;o++)n[o]=t(o+1,o,void 0,i)}else if(xe(s))if(s[Symbol.iterator])n=Array.from(s,(o,a)=>t(o,a,void 0,i));else{const o=Object.keys(s);n=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const u=o[a];n[a]=t(s[u],u,a,i)}}else n=[];return n}/*! #__NO_SIDE_EFFECTS__ */function Mt(s,t){return se(s)?Ee({name:s.name},t,{setup:s}):s}const ds=s=>!!s.type.__asyncLoader;function fa(s,t,e={},r,n){if(Ae.isCE||Ae.parent&&ds(Ae.parent)&&Ae.parent.isCE)return Te("slot",e,r);let i=s[t];i&&i._c&&(i._d=!1),Pt();const o=i&&da(i(e)),a=Pa(Ue,{key:e.key||o&&o.key||`_${t}`},o||[],o&&s._===1?64:-2);return a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),i&&i._c&&(i._d=!0),a}function da(s){return s.some(t=>yr(t)?!(t.type===yt||t.type===Ue&&!da(t.children)):!0)?s:null}const mn=s=>s?Fa(s)?Or(s):mn(s.parent):null,ps=Ee(Object.create(null),{$:s=>s,$el:s=>s.vnode.el,$data:s=>s.data,$props:s=>s.props,$attrs:s=>s.attrs,$slots:s=>s.slots,$refs:s=>s.refs,$parent:s=>mn(s.parent),$root:s=>mn(s.root),$emit:s=>s.emit,$options:s=>Gn(s),$forceUpdate:s=>s.f||(s.f=()=>{s.effect.dirty=!0,Vn(s.update)}),$nextTick:s=>s.n||(s.n=ia.bind(s.proxy)),$watch:s=>ch.bind(s)}),jr=(s,t)=>s!==me&&!s.__isScriptSetup&&le(s,t),Vu={get({_:s},t){if(t==="__v_skip")return!0;const{ctx:e,setupState:r,data:n,props:i,accessCache:o,type:a,appContext:l}=s;let u;if(t[0]!=="$"){const g=o[t];if(g!==void 0)switch(g){case 1:return r[t];case 2:return n[t];case 4:return e[t];case 3:return i[t]}else{if(jr(r,t))return o[t]=1,r[t];if(n!==me&&le(n,t))return o[t]=2,n[t];if((u=s.propsOptions[0])&&le(u,t))return o[t]=3,i[t];if(e!==me&&le(e,t))return o[t]=4,e[t];xn&&(o[t]=0)}}const h=ps[t];let f,d;if(h)return t==="$attrs"&&Ne(s.attrs,"get",""),h(s);if((f=a.__cssModules)&&(f=f[t]))return f;if(e!==me&&le(e,t))return o[t]=4,e[t];if(d=l.config.globalProperties,le(d,t))return d[t]},set({_:s},t,e){const{data:r,setupState:n,ctx:i}=s;return jr(n,t)?(n[t]=e,!0):r!==me&&le(r,t)?(r[t]=e,!0):le(s.props,t)||t[0]==="$"&&t.slice(1)in s?!1:(i[t]=e,!0)},has({_:{data:s,setupState:t,accessCache:e,ctx:r,appContext:n,propsOptions:i}},o){let a;return!!e[o]||s!==me&&le(s,o)||jr(t,o)||(a=i[0])&&le(a,o)||le(r,o)||le(ps,o)||le(n.config.globalProperties,o)},defineProperty(s,t,e){return e.get!=null?s._.accessCache[t]=0:le(e,"value")&&this.set(s,t,e.value,null),Reflect.defineProperty(s,t,e)}};function Ci(s){return J(s)?s.reduce((t,e)=>(t[e]=null,t),{}):s}let xn=!0;function Gu(s){const t=Gn(s),e=s.proxy,r=s.ctx;xn=!1,t.beforeCreate&&Ai(t.beforeCreate,s,"bc");const{data:n,computed:i,methods:o,watch:a,provide:l,inject:u,created:h,beforeMount:f,mounted:d,beforeUpdate:g,updated:x,activated:y,deactivated:v,beforeDestroy:T,beforeUnmount:R,destroyed:E,unmounted:A,render:L,renderTracked:I,renderTriggered:F,errorCaptured:Q,serverPrefetch:q,expose:Y,inheritAttrs:b,components:ie,directives:re,filters:oe}=t;if(u&&Xu(u,r,null),o)for(const H in o){const K=o[H];se(K)&&(r[H]=K.bind(e))}if(n){const H=n.call(e,e);xe(H)&&(s.data=Cr(H))}if(xn=!0,i)for(const H in i){const K=i[H],fe=se(K)?K.bind(e,e):se(K.get)?K.get.bind(e,e):$e,ce=!se(K)&&se(K.set)?K.set.bind(e):$e,ye=Ve({get:fe,set:ce});Object.defineProperty(r,H,{enumerable:!0,configurable:!0,get:()=>ye.value,set:pe=>ye.value=pe})}if(a)for(const H in a)pa(a[H],r,e,H);if(l){const H=se(l)?l.call(e):l;Reflect.ownKeys(H).forEach(K=>{ar(K,H[K])})}h&&Ai(h,s,"c");function V(H,K){J(K)?K.forEach(fe=>H(fe.bind(e))):K&&H(K.bind(e))}if(V(Bu,f),V(Nu,d),V(ku,g),V(Du,x),V(uh,y),V(hh,v),V(Wu,Q),V(Hu,I),V(zu,F),V(Uu,R),V(ha,A),V($u,q),J(Y))if(Y.length){const H=s.exposed||(s.exposed={});Y.forEach(K=>{Object.defineProperty(H,K,{get:()=>e[K],set:fe=>e[K]=fe})})}else s.exposed||(s.exposed={});L&&s.render===$e&&(s.render=L),b!=null&&(s.inheritAttrs=b),ie&&(s.components=ie),re&&(s.directives=re)}function Xu(s,t,e=$e){J(s)&&(s=yn(s));for(const r in s){const n=s[r];let i;xe(n)?"default"in n?i=Xe(n.from||r,n.default,!0):i=Xe(n.from||r):i=Xe(n),ke(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):t[r]=i}}function Ai(s,t,e){Je(J(s)?s.map(r=>r.bind(t.proxy)):s.bind(t.proxy),t,e)}function pa(s,t,e,r){const n=r.includes(".")?Ea(e,r):()=>e[r];if(Fe(s)){const i=t[s];se(i)&&Yt(n,i)}else if(se(s))Yt(n,s.bind(e));else if(xe(s))if(J(s))s.forEach(i=>pa(i,t,e,r));else{const i=se(s.handler)?s.handler.bind(e):t[s.handler];se(i)&&Yt(n,i,s)}}function Gn(s){const t=s.type,{mixins:e,extends:r}=t,{mixins:n,optionsCache:i,config:{optionMergeStrategies:o}}=s.appContext,a=i.get(t);let l;return a?l=a:!n.length&&!e&&!r?l=t:(l={},n.length&&n.forEach(u=>xr(l,u,o,!0)),xr(l,t,o)),xe(t)&&i.set(t,l),l}function xr(s,t,e,r=!1){const{mixins:n,extends:i}=t;i&&xr(s,i,e,!0),n&&n.forEach(o=>xr(s,o,e,!0));for(const o in t)if(!(r&&o==="expose")){const a=Yu[o]||e&&e[o];s[o]=a?a(s[o],t[o]):t[o]}return s}const Yu={data:Ii,props:Mi,emits:Mi,methods:cs,computed:cs,beforeCreate:Ie,created:Ie,beforeMount:Ie,mounted:Ie,beforeUpdate:Ie,updated:Ie,beforeDestroy:Ie,beforeUnmount:Ie,destroyed:Ie,unmounted:Ie,activated:Ie,deactivated:Ie,errorCaptured:Ie,serverPrefetch:Ie,components:cs,directives:cs,watch:Ku,provide:Ii,inject:ju};function Ii(s,t){return t?s?function(){return Ee(se(s)?s.call(this,this):s,se(t)?t.call(this,this):t)}:t:s}function ju(s,t){return cs(yn(s),yn(t))}function yn(s){if(J(s)){const t={};for(let e=0;e<s.length;e++)t[s[e]]=s[e];return t}return s}function Ie(s,t){return s?[...new Set([].concat(s,t))]:t}function cs(s,t){return s?Ee(Object.create(null),s,t):t}function Mi(s,t){return s?J(s)&&J(t)?[...new Set([...s,...t])]:Ee(Object.create(null),Ci(s),Ci(t??{})):t}function Ku(s,t){if(!s)return t;if(!t)return s;const e=Ee(Object.create(null),s);for(const r in t)e[r]=Ie(s[r],t[r]);return e}function ga(){return{app:null,config:{isNativeTag:kc,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let qu=0;function Qu(s,t){return function(r,n=null){se(r)||(r=Ee({},r)),n!=null&&!xe(n)&&(n=null);const i=ga(),o=new WeakSet;let a=!1;const l=i.app={_uid:qu++,_component:r,_props:n,_container:null,_context:i,_instance:null,version:Sh,get config(){return i.config},set config(u){},use(u,...h){return o.has(u)||(u&&se(u.install)?(o.add(u),u.install(l,...h)):se(u)&&(o.add(u),u(l,...h))),l},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),l},component(u,h){return h?(i.components[u]=h,l):i.components[u]},directive(u,h){return h?(i.directives[u]=h,l):i.directives[u]},mount(u,h,f){if(!a){const d=Te(r,n);return d.appContext=i,f===!0?f="svg":f===!1&&(f=void 0),h&&t?t(d,u):s(d,u,f),a=!0,l._container=u,u.__vue_app__=l,Or(d.component)}},unmount(){a&&(s(null,l._container),delete l._container.__vue_app__)},provide(u,h){return i.provides[u]=h,l},runWithContext(u){const h=gs;gs=l;try{return u()}finally{gs=h}}};return l}}let gs=null;function ar(s,t){if(Le){let e=Le.provides;const r=Le.parent&&Le.parent.provides;r===e&&(e=Le.provides=Object.create(r)),e[s]=t}}function Xe(s,t,e=!1){const r=Le||Ae;if(r||gs){const n=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:gs._context.provides;if(n&&s in n)return n[s];if(arguments.length>1)return e&&se(t)?t.call(r&&r.proxy):t}}const ma={},xa=()=>Object.create(ma),ya=s=>Object.getPrototypeOf(s)===ma;function Zu(s,t,e,r=!1){const n={},i=xa();s.propsDefaults=Object.create(null),_a(s,t,n,i);for(const o in s.propsOptions[0])o in n||(n[o]=void 0);e?s.props=r?n:qo(n):s.type.props?s.props=n:s.props=i,s.attrs=i}function Ju(s,t,e,r){const{props:n,attrs:i,vnode:{patchFlag:o}}=s,a=he(n),[l]=s.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const h=s.vnode.dynamicProps;for(let f=0;f<h.length;f++){let d=h[f];if(Ir(s.emitsOptions,d))continue;const g=t[d];if(l)if(le(i,d))g!==i[d]&&(i[d]=g,u=!0);else{const x=bs(d);n[x]=_n(l,a,x,g,s,!1)}else g!==i[d]&&(i[d]=g,u=!0)}}}else{_a(s,t,n,i)&&(u=!0);let h;for(const f in a)(!t||!le(t,f)&&((h=Sr(f))===f||!le(t,h)))&&(l?e&&(e[f]!==void 0||e[h]!==void 0)&&(n[f]=_n(l,a,f,void 0,s,!0)):delete n[f]);if(i!==a)for(const f in i)(!t||!le(t,f))&&(delete i[f],u=!0)}u&&rt(s.attrs,"set","")}function _a(s,t,e,r){const[n,i]=s.propsOptions;let o=!1,a;if(t)for(let l in t){if(hs(l))continue;const u=t[l];let h;n&&le(n,h=bs(l))?!i||!i.includes(h)?e[h]=u:(a||(a={}))[h]=u:Ir(s.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(i){const l=he(e),u=a||me;for(let h=0;h<i.length;h++){const f=i[h];e[f]=_n(n,l,f,u[f],s,!le(u,f))}}return o}function _n(s,t,e,r,n,i){const o=s[e];if(o!=null){const a=le(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&se(l)){const{propsDefaults:u}=n;if(e in u)r=u[e];else{const h=Bs(n);r=u[e]=l.call(null,t),h()}}else r=l}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===Sr(e))&&(r=!0))}return r}function va(s,t,e=!1){const r=t.propsCache,n=r.get(s);if(n)return n;const i=s.props,o={},a=[];let l=!1;if(!se(s)){const h=f=>{l=!0;const[d,g]=va(f,t,!0);Ee(o,d),g&&a.push(...g)};!e&&t.mixins.length&&t.mixins.forEach(h),s.extends&&h(s.extends),s.mixins&&s.mixins.forEach(h)}if(!i&&!l)return xe(s)&&r.set(s,Vt),Vt;if(J(i))for(let h=0;h<i.length;h++){const f=bs(i[h]);Pi(f)&&(o[f]=me)}else if(i)for(const h in i){const f=bs(h);if(Pi(f)){const d=i[h],g=o[f]=J(d)||se(d)?{type:d}:Ee({},d);if(g){const x=Oi(Boolean,g.type),y=Oi(String,g.type);g[0]=x>-1,g[1]=y<0||x<y,(x>-1||le(g,"default"))&&a.push(f)}}}const u=[o,a];return xe(s)&&r.set(s,u),u}function Pi(s){return s[0]!=="$"&&!hs(s)}function Li(s){return s===null?"null":typeof s=="function"?s.name||"":typeof s=="object"&&s.constructor&&s.constructor.name||""}function Fi(s,t){return Li(s)===Li(t)}function Oi(s,t){return J(t)?t.findIndex(e=>Fi(e,s)):se(t)&&Fi(t,s)?0:-1}const Ta=s=>s[0]==="_"||s==="$stable",Xn=s=>J(s)?s.map(qe):[qe(s)],eh=(s,t,e)=>{if(t._n)return t;const r=ls((...n)=>Xn(t(...n)),e);return r._c=!1,r},wa=(s,t,e)=>{const r=s._ctx;for(const n in s){if(Ta(n))continue;const i=s[n];if(se(i))t[n]=eh(n,i,r);else if(i!=null){const o=Xn(i);t[n]=()=>o}}},ba=(s,t)=>{const e=Xn(t);s.slots.default=()=>e},th=(s,t)=>{const e=s.slots=xa();if(s.vnode.shapeFlag&32){const r=t._;r?(Ee(e,t),Bo(e,"_",r,!0)):wa(t,e)}else t&&ba(s,t)},sh=(s,t,e)=>{const{vnode:r,slots:n}=s;let i=!0,o=me;if(r.shapeFlag&32){const a=t._;a?e&&a===1?i=!1:(Ee(n,t),!e&&a===1&&delete n._):(i=!t.$stable,wa(t,n)),o=t}else t&&(ba(s,t),o={default:1});if(i)for(const a in n)!Ta(a)&&o[a]==null&&delete n[a]};function vn(s,t,e,r,n=!1){if(J(s)){s.forEach((d,g)=>vn(d,t&&(J(t)?t[g]:t),e,r,n));return}if(ds(r)&&!n)return;const i=r.shapeFlag&4?Or(r.component):r.el,o=n?null:i,{i:a,r:l}=s,u=t&&t.r,h=a.refs===me?a.refs={}:a.refs,f=a.setupState;if(u!=null&&u!==l&&(Fe(u)?(h[u]=null,le(f,u)&&(f[u]=null)):ke(u)&&(u.value=null)),se(l))mt(l,a,12,[o,h]);else{const d=Fe(l),g=ke(l);if(d||g){const x=()=>{if(s.f){const y=d?le(f,l)?f[l]:h[l]:l.value;n?J(y)&&Ln(y,i):J(y)?y.includes(i)||y.push(i):d?(h[l]=[i],le(f,l)&&(f[l]=h[l])):(l.value=[i],s.k&&(h[s.k]=l.value))}else d?(h[l]=o,le(f,l)&&(f[l]=o)):g&&(l.value=o,s.k&&(h[s.k]=o))};o?(x.id=-1,Oe(x,e)):x()}}}const Oe=Ou;function rh(s){return nh(s)}function nh(s,t){const e=No();e.__VUE__=!0;const{insert:r,remove:n,patchProp:i,createElement:o,createText:a,createComment:l,setText:u,setElementText:h,parentNode:f,nextSibling:d,setScopeId:g=$e,insertStaticContent:x}=s,y=(p,m,_,C=null,S=null,O=null,U=void 0,B=null,D=!!m.dynamicChildren)=>{if(p===m)return;p&&!ss(p,m)&&(C=w(p),pe(p,S,O,!0),p=null),m.patchFlag===-2&&(D=!1,m.dynamicChildren=null);const{type:M,ref:W,shapeFlag:j}=m;switch(M){case Pr:v(p,m,_,C);break;case yt:T(p,m,_,C);break;case qr:p==null&&R(m,_,C,U);break;case Ue:ie(p,m,_,C,S,O,U,B,D);break;default:j&1?L(p,m,_,C,S,O,U,B,D):j&6?re(p,m,_,C,S,O,U,B,D):(j&64||j&128)&&M.process(p,m,_,C,S,O,U,B,D,$)}W!=null&&S&&vn(W,p&&p.ref,O,m||p,!m)},v=(p,m,_,C)=>{if(p==null)r(m.el=a(m.children),_,C);else{const S=m.el=p.el;m.children!==p.children&&u(S,m.children)}},T=(p,m,_,C)=>{p==null?r(m.el=l(m.children||""),_,C):m.el=p.el},R=(p,m,_,C)=>{[p.el,p.anchor]=x(p.children,m,_,C,p.el,p.anchor)},E=({el:p,anchor:m},_,C)=>{let S;for(;p&&p!==m;)S=d(p),r(p,_,C),p=S;r(m,_,C)},A=({el:p,anchor:m})=>{let _;for(;p&&p!==m;)_=d(p),n(p),p=_;n(m)},L=(p,m,_,C,S,O,U,B,D)=>{m.type==="svg"?U="svg":m.type==="math"&&(U="mathml"),p==null?I(m,_,C,S,O,U,B,D):q(p,m,S,O,U,B,D)},I=(p,m,_,C,S,O,U,B)=>{let D,M;const{props:W,shapeFlag:j,transition:X,dirs:Z}=p;if(D=p.el=o(p.type,O,W&&W.is,W),j&8?h(D,p.children):j&16&&Q(p.children,D,null,C,S,Kr(p,O),U,B),Z&&bt(p,null,C,"created"),F(D,p,p.scopeId,U,C),W){for(const ge in W)ge!=="value"&&!hs(ge)&&i(D,ge,null,W[ge],O,p.children,C,S,ae);"value"in W&&i(D,"value",null,W.value,O),(M=W.onVnodeBeforeMount)&&Ke(M,C,p)}Z&&bt(p,null,C,"beforeMount");const ne=ih(S,X);ne&&X.beforeEnter(D),r(D,m,_),((M=W&&W.onVnodeMounted)||ne||Z)&&Oe(()=>{M&&Ke(M,C,p),ne&&X.enter(D),Z&&bt(p,null,C,"mounted")},S)},F=(p,m,_,C,S)=>{if(_&&g(p,_),C)for(let O=0;O<C.length;O++)g(p,C[O]);if(S){let O=S.subTree;if(m===O){const U=S.vnode;F(p,U,U.scopeId,U.slotScopeIds,S.parent)}}},Q=(p,m,_,C,S,O,U,B,D=0)=>{for(let M=D;M<p.length;M++){const W=p[M]=B?lt(p[M]):qe(p[M]);y(null,W,m,_,C,S,O,U,B)}},q=(p,m,_,C,S,O,U)=>{const B=m.el=p.el;let{patchFlag:D,dynamicChildren:M,dirs:W}=m;D|=p.patchFlag&16;const j=p.props||me,X=m.props||me;let Z;if(_&&Rt(_,!1),(Z=X.onVnodeBeforeUpdate)&&Ke(Z,_,m,p),W&&bt(m,p,_,"beforeUpdate"),_&&Rt(_,!0),M?Y(p.dynamicChildren,M,B,_,C,Kr(m,S),O):U||K(p,m,B,null,_,C,Kr(m,S),O,!1),D>0){if(D&16)b(B,m,j,X,_,C,S);else if(D&2&&j.class!==X.class&&i(B,"class",null,X.class,S),D&4&&i(B,"style",j.style,X.style,S),D&8){const ne=m.dynamicProps;for(let ge=0;ge<ne.length;ge++){const ue=ne[ge],be=j[ue],ze=X[ue];(ze!==be||ue==="value")&&i(B,ue,be,ze,S,p.children,_,C,ae)}}D&1&&p.children!==m.children&&h(B,m.children)}else!U&&M==null&&b(B,m,j,X,_,C,S);((Z=X.onVnodeUpdated)||W)&&Oe(()=>{Z&&Ke(Z,_,m,p),W&&bt(m,p,_,"updated")},C)},Y=(p,m,_,C,S,O,U)=>{for(let B=0;B<m.length;B++){const D=p[B],M=m[B],W=D.el&&(D.type===Ue||!ss(D,M)||D.shapeFlag&70)?f(D.el):_;y(D,M,W,null,C,S,O,U,!0)}},b=(p,m,_,C,S,O,U)=>{if(_!==C){if(_!==me)for(const B in _)!hs(B)&&!(B in C)&&i(p,B,_[B],null,U,m.children,S,O,ae);for(const B in C){if(hs(B))continue;const D=C[B],M=_[B];D!==M&&B!=="value"&&i(p,B,M,D,U,m.children,S,O,ae)}"value"in C&&i(p,"value",_.value,C.value,U)}},ie=(p,m,_,C,S,O,U,B,D)=>{const M=m.el=p?p.el:a(""),W=m.anchor=p?p.anchor:a("");let{patchFlag:j,dynamicChildren:X,slotScopeIds:Z}=m;Z&&(B=B?B.concat(Z):Z),p==null?(r(M,_,C),r(W,_,C),Q(m.children||[],_,W,S,O,U,B,D)):j>0&&j&64&&X&&p.dynamicChildren?(Y(p.dynamicChildren,X,_,S,O,U,B),(m.key!=null||S&&m===S.subTree)&&Ra(p,m,!0)):K(p,m,_,W,S,O,U,B,D)},re=(p,m,_,C,S,O,U,B,D)=>{m.slotScopeIds=B,p==null?m.shapeFlag&512?S.ctx.activate(m,_,C,U,D):oe(m,_,C,S,O,U,D):G(p,m,D)},oe=(p,m,_,C,S,O,U)=>{const B=p.component=_h(p,C,S);if(Ca(p)&&(B.ctx.renderer=$),vh(B),B.asyncDep){if(S&&S.registerDep(B,V,U),!p.el){const D=B.subTree=Te(yt);T(null,D,m,_)}}else V(B,p,m,_,S,O,U)},G=(p,m,_)=>{const C=m.component=p.component;if(Mu(p,m,_))if(C.asyncDep&&!C.asyncResolved){H(C,m,_);return}else C.next=m,Ru(C.update),C.effect.dirty=!0,C.update();else m.el=p.el,C.vnode=m},V=(p,m,_,C,S,O,U)=>{const B=()=>{if(p.isMounted){let{next:W,bu:j,u:X,parent:Z,vnode:ne}=p;{const Lt=Sa(p);if(Lt){W&&(W.el=ne.el,H(p,W,U)),Lt.asyncDep.then(()=>{p.isUnmounted||B()});return}}let ge=W,ue;Rt(p,!1),W?(W.el=ne.el,H(p,W,U)):W=ne,j&&Gr(j),(ue=W.props&&W.props.onVnodeBeforeUpdate)&&Ke(ue,Z,W,ne),Rt(p,!0);const be=Yr(p),ze=p.subTree;p.subTree=be,y(ze,be,f(ze.el),w(ze),p,S,O),W.el=be.el,ge===null&&Pu(p,be.el),X&&Oe(X,S),(ue=W.props&&W.props.onVnodeUpdated)&&Oe(()=>Ke(ue,Z,W,ne),S)}else{let W;const{el:j,props:X}=m,{bm:Z,m:ne,parent:ge}=p,ue=ds(m);if(Rt(p,!1),Z&&Gr(Z),!ue&&(W=X&&X.onVnodeBeforeMount)&&Ke(W,ge,m),Rt(p,!0),j&&ee){const be=()=>{p.subTree=Yr(p),ee(j,p.subTree,p,S,null)};ue?m.type.__asyncLoader().then(()=>!p.isUnmounted&&be()):be()}else{const be=p.subTree=Yr(p);y(null,be,_,C,p,S,O),m.el=be.el}if(ne&&Oe(ne,S),!ue&&(W=X&&X.onVnodeMounted)){const be=m;Oe(()=>Ke(W,ge,be),S)}(m.shapeFlag&256||ge&&ds(ge.vnode)&&ge.vnode.shapeFlag&256)&&p.a&&Oe(p.a,S),p.isMounted=!0,m=_=C=null}},D=p.effect=new Bn(B,$e,()=>Vn(M),p.scope),M=p.update=()=>{D.dirty&&D.run()};M.id=p.uid,Rt(p,!0),M()},H=(p,m,_)=>{m.component=p;const C=p.vnode.props;p.vnode=m,p.next=null,Ju(p,m.props,C,_),sh(p,m.children,_),Tt(),Si(p),wt()},K=(p,m,_,C,S,O,U,B,D=!1)=>{const M=p&&p.children,W=p?p.shapeFlag:0,j=m.children,{patchFlag:X,shapeFlag:Z}=m;if(X>0){if(X&128){ce(M,j,_,C,S,O,U,B,D);return}else if(X&256){fe(M,j,_,C,S,O,U,B,D);return}}Z&8?(W&16&&ae(M,S,O),j!==M&&h(_,j)):W&16?Z&16?ce(M,j,_,C,S,O,U,B,D):ae(M,S,O,!0):(W&8&&h(_,""),Z&16&&Q(j,_,C,S,O,U,B,D))},fe=(p,m,_,C,S,O,U,B,D)=>{p=p||Vt,m=m||Vt;const M=p.length,W=m.length,j=Math.min(M,W);let X;for(X=0;X<j;X++){const Z=m[X]=D?lt(m[X]):qe(m[X]);y(p[X],Z,_,null,S,O,U,B,D)}M>W?ae(p,S,O,!0,!1,j):Q(m,_,C,S,O,U,B,D,j)},ce=(p,m,_,C,S,O,U,B,D)=>{let M=0;const W=m.length;let j=p.length-1,X=W-1;for(;M<=j&&M<=X;){const Z=p[M],ne=m[M]=D?lt(m[M]):qe(m[M]);if(ss(Z,ne))y(Z,ne,_,null,S,O,U,B,D);else break;M++}for(;M<=j&&M<=X;){const Z=p[j],ne=m[X]=D?lt(m[X]):qe(m[X]);if(ss(Z,ne))y(Z,ne,_,null,S,O,U,B,D);else break;j--,X--}if(M>j){if(M<=X){const Z=X+1,ne=Z<W?m[Z].el:C;for(;M<=X;)y(null,m[M]=D?lt(m[M]):qe(m[M]),_,ne,S,O,U,B,D),M++}}else if(M>X)for(;M<=j;)pe(p[M],S,O,!0),M++;else{const Z=M,ne=M,ge=new Map;for(M=ne;M<=X;M++){const De=m[M]=D?lt(m[M]):qe(m[M]);De.key!=null&&ge.set(De.key,M)}let ue,be=0;const ze=X-ne+1;let Lt=!1,Zn=0;const es=new Array(ze);for(M=0;M<ze;M++)es[M]=0;for(M=Z;M<=j;M++){const De=p[M];if(be>=ze){pe(De,S,O,!0);continue}let je;if(De.key!=null)je=ge.get(De.key);else for(ue=ne;ue<=X;ue++)if(es[ue-ne]===0&&ss(De,m[ue])){je=ue;break}je===void 0?pe(De,S,O,!0):(es[je-ne]=M+1,je>=Zn?Zn=je:Lt=!0,y(De,m[je],_,null,S,O,U,B,D),be++)}const Jn=Lt?oh(es):Vt;for(ue=Jn.length-1,M=ze-1;M>=0;M--){const De=ne+M,je=m[De],ei=De+1<W?m[De+1].el:C;es[M]===0?y(null,je,_,ei,S,O,U,B,D):Lt&&(ue<0||M!==Jn[ue]?ye(je,_,ei,2):ue--)}}},ye=(p,m,_,C,S=null)=>{const{el:O,type:U,transition:B,children:D,shapeFlag:M}=p;if(M&6){ye(p.component.subTree,m,_,C);return}if(M&128){p.suspense.move(m,_,C);return}if(M&64){U.move(p,m,_,$);return}if(U===Ue){r(O,m,_);for(let j=0;j<D.length;j++)ye(D[j],m,_,C);r(p.anchor,m,_);return}if(U===qr){E(p,m,_);return}if(C!==2&&M&1&&B)if(C===0)B.beforeEnter(O),r(O,m,_),Oe(()=>B.enter(O),S);else{const{leave:j,delayLeave:X,afterLeave:Z}=B,ne=()=>r(O,m,_),ge=()=>{j(O,()=>{ne(),Z&&Z()})};X?X(O,ne,ge):ge()}else r(O,m,_)},pe=(p,m,_,C=!1,S=!1)=>{const{type:O,props:U,ref:B,children:D,dynamicChildren:M,shapeFlag:W,patchFlag:j,dirs:X,memoIndex:Z}=p;if(j===-2&&(S=!1),B!=null&&vn(B,null,_,p,!0),Z!=null&&(m.renderCache[Z]=void 0),W&256){m.ctx.deactivate(p);return}const ne=W&1&&X,ge=!ds(p);let ue;if(ge&&(ue=U&&U.onVnodeBeforeUnmount)&&Ke(ue,m,p),W&6)we(p.component,_,C);else{if(W&128){p.suspense.unmount(_,C);return}ne&&bt(p,null,m,"beforeUnmount"),W&64?p.type.remove(p,m,_,$,C):M&&(O!==Ue||j>0&&j&64)?ae(M,m,_,!1,!0):(O===Ue&&j&384||!S&&W&16)&&ae(D,m,_),C&&ve(p)}(ge&&(ue=U&&U.onVnodeUnmounted)||ne)&&Oe(()=>{ue&&Ke(ue,m,p),ne&&bt(p,null,m,"unmounted")},_)},ve=p=>{const{type:m,el:_,anchor:C,transition:S}=p;if(m===Ue){_e(_,C);return}if(m===qr){A(p);return}const O=()=>{n(_),S&&!S.persisted&&S.afterLeave&&S.afterLeave()};if(p.shapeFlag&1&&S&&!S.persisted){const{leave:U,delayLeave:B}=S,D=()=>U(_,O);B?B(p.el,O,D):D()}else O()},_e=(p,m)=>{let _;for(;p!==m;)_=d(p),n(p),p=_;n(m)},we=(p,m,_)=>{const{bum:C,scope:S,update:O,subTree:U,um:B,m:D,a:M}=p;Bi(D),Bi(M),C&&Gr(C),S.stop(),O&&(O.active=!1,pe(U,p,m,_)),B&&Oe(B,m),Oe(()=>{p.isUnmounted=!0},m),m&&m.pendingBranch&&!m.isUnmounted&&p.asyncDep&&!p.asyncResolved&&p.suspenseId===m.pendingId&&(m.deps--,m.deps===0&&m.resolve())},ae=(p,m,_,C=!1,S=!1,O=0)=>{for(let U=O;U<p.length;U++)pe(p[U],m,_,C,S)},w=p=>p.shapeFlag&6?w(p.component.subTree):p.shapeFlag&128?p.suspense.next():d(p.anchor||p.el);let P=!1;const N=(p,m,_)=>{p==null?m._vnode&&pe(m._vnode,null,null,!0):y(m._vnode||null,p,m,null,null,null,_),P||(P=!0,Si(),aa(),P=!1),m._vnode=p},$={p:y,um:pe,m:ye,r:ve,mt:oe,mc:Q,pc:K,pbc:Y,n:w,o:s};let te,ee;return{render:N,hydrate:te,createApp:Qu(N,te)}}function Kr({type:s,props:t},e){return e==="svg"&&s==="foreignObject"||e==="mathml"&&s==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:e}function Rt({effect:s,update:t},e){s.allowRecurse=t.allowRecurse=e}function ih(s,t){return(!s||s&&!s.pendingBranch)&&t&&!t.persisted}function Ra(s,t,e=!1){const r=s.children,n=t.children;if(J(r)&&J(n))for(let i=0;i<r.length;i++){const o=r[i];let a=n[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[i]=lt(n[i]),a.el=o.el),!e&&a.patchFlag!==-2&&Ra(o,a)),a.type===Pr&&(a.el=o.el)}}function oh(s){const t=s.slice(),e=[0];let r,n,i,o,a;const l=s.length;for(r=0;r<l;r++){const u=s[r];if(u!==0){if(n=e[e.length-1],s[n]<u){t[r]=n,e.push(r);continue}for(i=0,o=e.length-1;i<o;)a=i+o>>1,s[e[a]]<u?i=a+1:o=a;u<s[e[i]]&&(i>0&&(t[r]=e[i-1]),e[i]=r)}}for(i=e.length,o=e[i-1];i-- >0;)e[i]=o,o=t[o];return e}function Sa(s){const t=s.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Sa(t)}function Bi(s){if(s)for(let t=0;t<s.length;t++)s[t].active=!1}const ah=Symbol.for("v-scx"),lh=()=>Xe(ah);function hd(s,t){return Yn(s,null,t)}const er={};function Yt(s,t,e){return Yn(s,t,e)}function Yn(s,t,{immediate:e,deep:r,flush:n,once:i,onTrack:o,onTrigger:a}=me){if(t&&i){const I=t;t=(...F)=>{I(...F),L()}}const l=Le,u=I=>r===!0?I:ft(I,r===!1?1:void 0);let h,f=!1,d=!1;if(ke(s)?(h=()=>s.value,f=gr(s)):fs(s)?(h=()=>u(s),f=!0):J(s)?(d=!0,f=s.some(I=>fs(I)||gr(I)),h=()=>s.map(I=>{if(ke(I))return I.value;if(fs(I))return u(I);if(se(I))return mt(I,l,2)})):se(s)?t?h=()=>mt(s,l,2):h=()=>(g&&g(),Je(s,l,3,[x])):h=$e,t&&r){const I=h;h=()=>ft(I())}let g,x=I=>{g=E.onStop=()=>{mt(I,l,4),g=E.onStop=void 0}},y;if(Fr)if(x=$e,t?e&&Je(t,l,3,[h(),d?[]:void 0,x]):h(),n==="sync"){const I=lh();y=I.__watcherHandles||(I.__watcherHandles=[])}else return $e;let v=d?new Array(s.length).fill(er):er;const T=()=>{if(!(!E.active||!E.dirty))if(t){const I=E.run();(r||f||(d?I.some((F,Q)=>xt(F,v[Q])):xt(I,v)))&&(g&&g(),Je(t,l,3,[I,v===er?void 0:d&&v[0]===er?[]:v,x]),v=I)}else E.run()};T.allowRecurse=!!t;let R;n==="sync"?R=T:n==="post"?R=()=>Oe(T,l&&l.suspense):(T.pre=!0,l&&(T.id=l.uid),R=()=>Vn(T));const E=new Bn(h,$e,R),A=Qc(),L=()=>{E.stop(),A&&Ln(A.effects,E)};return t?e?T():v=E.run():n==="post"?Oe(E.run.bind(E),l&&l.suspense):E.run(),y&&y.push(L),L}function ch(s,t,e){const r=this.proxy,n=Fe(s)?s.includes(".")?Ea(r,s):()=>r[s]:s.bind(r,r);let i;se(t)?i=t:(i=t.handler,e=t);const o=Bs(this),a=Yn(n,i.bind(r),e);return o(),a}function Ea(s,t){const e=t.split(".");return()=>{let r=s;for(let n=0;n<e.length&&r;n++)r=r[e[n]];return r}}function ft(s,t=1/0,e){if(t<=0||!xe(s)||s.__v_skip||(e=e||new Set,e.has(s)))return s;if(e.add(s),t--,ke(s))ft(s.value,t,e);else if(J(s))for(let r=0;r<s.length;r++)ft(s[r],t,e);else if(Po(s)||Gt(s))s.forEach(r=>{ft(r,t,e)});else if(Oo(s)){for(const r in s)ft(s[r],t,e);for(const r of Object.getOwnPropertySymbols(s))Object.prototype.propertyIsEnumerable.call(s,r)&&ft(s[r],t,e)}return s}const Ca=s=>s.type.__isKeepAlive;function uh(s,t){Aa(s,"a",t)}function hh(s,t){Aa(s,"da",t)}function Aa(s,t,e=Le){const r=s.__wdc||(s.__wdc=()=>{let n=e;for(;n;){if(n.isDeactivated)return;n=n.parent}return s()});if(Mr(t,r,e),e){let n=e.parent;for(;n&&n.parent;)Ca(n.parent.vnode)&&fh(r,t,e,n),n=n.parent}}function fh(s,t,e,r){const n=Mr(t,s,r,!0);ha(()=>{Ln(r[t],n)},e)}function Ia(s,t){s.shapeFlag&6&&s.component?Ia(s.component.subTree,t):s.shapeFlag&128?(s.ssContent.transition=t.clone(s.ssContent),s.ssFallback.transition=t.clone(s.ssFallback)):s.transition=t}const dh=s=>s.__isTeleport,Ue=Symbol.for("v-fgt"),Pr=Symbol.for("v-txt"),yt=Symbol.for("v-cmt"),qr=Symbol.for("v-stc"),ms=[];let Ge=null;function Pt(s=!1){ms.push(Ge=s?null:[])}function ph(){ms.pop(),Ge=ms[ms.length-1]||null}let As=1;function Ni(s){As+=s}function Ma(s){return s.dynamicChildren=As>0?Ge||Vt:null,ph(),As>0&&Ge&&Ge.push(s),s}function Os(s,t,e,r,n,i){return Ma(Be(s,t,e,r,n,i,!0))}function Pa(s,t,e,r,n){return Ma(Te(s,t,e,r,n,!0))}function yr(s){return s?s.__v_isVNode===!0:!1}function ss(s,t){return s.type===t.type&&s.key===t.key}const La=({key:s})=>s??null,lr=({ref:s,ref_key:t,ref_for:e})=>(typeof s=="number"&&(s=""+s),s!=null?Fe(s)||ke(s)||se(s)?{i:Ae,r:s,k:t,f:!!e}:s:null);function Be(s,t=null,e=null,r=0,n=null,i=s===Ue?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:s,props:t,key:t&&La(t),ref:t&&lr(t),scopeId:ua,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Ae};return a?(jn(l,e),i&128&&s.normalize(l)):e&&(l.shapeFlag|=Fe(e)?8:16),As>0&&!o&&Ge&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Ge.push(l),l}const Te=gh;function gh(s,t=null,e=null,r=0,n=null,i=!1){if((!s||s===Lu)&&(s=yt),yr(s)){const a=Kt(s,t,!0);return e&&jn(a,e),As>0&&!i&&Ge&&(a.shapeFlag&6?Ge[Ge.indexOf(s)]=a:Ge.push(a)),a.patchFlag=-2,a}if(Rh(s)&&(s=s.__vccOpts),t){t=mh(t);let{class:a,style:l}=t;a&&!Fe(a)&&(t.class=On(a)),xe(l)&&(Zo(l)&&!J(l)&&(l=Ee({},l)),t.style=Fs(l))}const o=Fe(s)?1:Fu(s)?128:dh(s)?64:xe(s)?4:se(s)?2:0;return Be(s,t,e,r,n,o,i,!0)}function mh(s){return s?Zo(s)||ya(s)?Ee({},s):s:null}function Kt(s,t,e=!1,r=!1){const{props:n,ref:i,patchFlag:o,children:a,transition:l}=s,u=t?Lr(n||{},t):n,h={__v_isVNode:!0,__v_skip:!0,type:s.type,props:u,key:u&&La(u),ref:t&&t.ref?e&&i?J(i)?i.concat(lr(t)):[i,lr(t)]:lr(t):i,scopeId:s.scopeId,slotScopeIds:s.slotScopeIds,children:a,target:s.target,targetAnchor:s.targetAnchor,staticCount:s.staticCount,shapeFlag:s.shapeFlag,patchFlag:t&&s.type!==Ue?o===-1?16:o|16:o,dynamicProps:s.dynamicProps,dynamicChildren:s.dynamicChildren,appContext:s.appContext,dirs:s.dirs,transition:l,component:s.component,suspense:s.suspense,ssContent:s.ssContent&&Kt(s.ssContent),ssFallback:s.ssFallback&&Kt(s.ssFallback),el:s.el,anchor:s.anchor,ctx:s.ctx,ce:s.ce};return l&&r&&Ia(h,l.clone(h)),h}function cr(s=" ",t=0){return Te(Pr,null,s,t)}function fd(s="",t=!1){return t?(Pt(),Pa(yt,null,s)):Te(yt,null,s)}function qe(s){return s==null||typeof s=="boolean"?Te(yt):J(s)?Te(Ue,null,s.slice()):typeof s=="object"?lt(s):Te(Pr,null,String(s))}function lt(s){return s.el===null&&s.patchFlag!==-1||s.memo?s:Kt(s)}function jn(s,t){let e=0;const{shapeFlag:r}=s;if(t==null)t=null;else if(J(t))e=16;else if(typeof t=="object")if(r&65){const n=t.default;n&&(n._c&&(n._d=!1),jn(s,n()),n._c&&(n._d=!0));return}else{e=32;const n=t._;!n&&!ya(t)?t._ctx=Ae:n===3&&Ae&&(Ae.slots._===1?t._=1:(t._=2,s.patchFlag|=1024))}else se(t)?(t={default:t,_ctx:Ae},e=32):(t=String(t),r&64?(e=16,t=[cr(t)]):e=8);s.children=t,s.shapeFlag|=e}function Lr(...s){const t={};for(let e=0;e<s.length;e++){const r=s[e];for(const n in r)if(n==="class")t.class!==r.class&&(t.class=On([t.class,r.class]));else if(n==="style")t.style=Fs([t.style,r.style]);else if(Pn(n)){const i=t[n],o=r[n];o&&i!==o&&!(J(i)&&i.includes(o))&&(t[n]=i?[].concat(i,o):o)}else n!==""&&(t[n]=r[n])}return t}function Ke(s,t,e,r=null){Je(s,t,7,[e,r])}const xh=ga();let yh=0;function _h(s,t,e){const r=s.type,n=(t?t.appContext:s.appContext)||xh,i={uid:yh++,vnode:s,type:r,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,scope:new Kc(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:va(r,n),emitsOptions:ca(r,n),emit:null,emitted:null,propsDefaults:me,inheritAttrs:r.inheritAttrs,ctx:me,data:me,props:me,attrs:me,slots:me,refs:me,setupState:me,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=Cu.bind(null,i),s.ce&&s.ce(i),i}let Le=null,_r,Tn;{const s=No(),t=(e,r)=>{let n;return(n=s[e])||(n=s[e]=[]),n.push(r),i=>{n.length>1?n.forEach(o=>o(i)):n[0](i)}};_r=t("__VUE_INSTANCE_SETTERS__",e=>Le=e),Tn=t("__VUE_SSR_SETTERS__",e=>Fr=e)}const Bs=s=>{const t=Le;return _r(s),s.scope.on(),()=>{s.scope.off(),_r(t)}},ki=()=>{Le&&Le.scope.off(),_r(null)};function Fa(s){return s.vnode.shapeFlag&4}let Fr=!1;function vh(s,t=!1){t&&Tn(t);const{props:e,children:r}=s.vnode,n=Fa(s);Zu(s,e,n,t),th(s,r);const i=n?Th(s,t):void 0;return t&&Tn(!1),i}function Th(s,t){const e=s.type;s.accessCache=Object.create(null),s.proxy=new Proxy(s.ctx,Vu);const{setup:r}=e;if(r){const n=s.setupContext=r.length>1?bh(s):null,i=Bs(s);Tt();const o=mt(r,s,0,[s.props,n]);if(wt(),i(),Lo(o)){if(o.then(ki,ki),t)return o.then(a=>{Di(s,a,t)}).catch(a=>{Ar(a,s,0)});s.asyncDep=o}else Di(s,o,t)}else Oa(s,t)}function Di(s,t,e){se(t)?s.type.__ssrInlineRender?s.ssrRender=t:s.render=t:xe(t)&&(s.setupState=ra(t)),Oa(s,e)}let Ui;function Oa(s,t,e){const r=s.type;if(!s.render){if(!t&&Ui&&!r.render){const n=r.template||Gn(s).template;if(n){const{isCustomElement:i,compilerOptions:o}=s.appContext.config,{delimiters:a,compilerOptions:l}=r,u=Ee(Ee({isCustomElement:i,delimiters:a},o),l);r.render=Ui(n,u)}}s.render=r.render||$e}{const n=Bs(s);Tt();try{Gu(s)}finally{wt(),n()}}}const wh={get(s,t){return Ne(s,"get",""),s[t]}};function bh(s){const t=e=>{s.exposed=e||{}};return{attrs:new Proxy(s.attrs,wh),slots:s.slots,emit:s.emit,expose:t}}function Or(s){return s.exposed?s.exposeProxy||(s.exposeProxy=new Proxy(ra(Jo(s.exposed)),{get(t,e){if(e in t)return t[e];if(e in ps)return ps[e](s)},has(t,e){return e in t||e in ps}})):s.proxy}function Rh(s){return se(s)&&"__vccOpts"in s}const Ve=(s,t)=>xu(s,t,Fr);function Ba(s,t,e){const r=arguments.length;return r===2?xe(t)&&!J(t)?yr(t)?Te(s,null,[t]):Te(s,t):Te(s,null,t):(r>3?e=Array.prototype.slice.call(arguments,2):r===3&&yr(e)&&(e=[e]),Te(s,t,e))}const Sh="3.4.31",Eh="comment",Kn={createElement(s){const t=new st(s);return Jo(t),t},createText(s){return{_type:ht.Text,text:s,parent:void 0,skipFocus:!0}},createComment(s){return{_type:Eh,text:s,parent:void 0,skipFocus:!0}},setText(s,t){pt("Replace Text: ",s,t),s.text=t;const e=s.parent;z(e),e.text=e.getText()},setElementText(s,t){pt("SetElementText: ",s,t),s.text=t},setProperty(s,t,e,r){s[t]=r},insert(s,t,e){pt("INSERT: ",t,s,e),t.children.insert(s,e),s._queueDelete=!1,s instanceof st?t.rendered&&s.render():t.isTextNode()&&(t.text=t.getText())},isTextNode(s){return s.isTextNode()},remove(s){pt("REMOVE: ",s),s.parent.children.remove(s),s._queueDelete=!0,s instanceof st&&queueMicrotask(()=>s.destroy())},querySelector(s){},setScopeId(s,t){return s.id=t},parentNode(s){return s.parent},nextSibling(s){const t=s.parent.children||[],e=t.indexOf(s)+1;if(e<t.length)return t[e]}},Ch=Kn.setProperty,Ah=function(s,t){const e=Rc(Pe.rendererOptions,t),r=Kn.createElement("App");return r.lng=e.root,r.rendered=!0,{app:Ih(s),rootNode:r,renderer:e}},{render:dd,createApp:Ih}=rh(Ee({patchProp:Ch},Kn));/*!
  * vue-router v4.4.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Ht=typeof document<"u";function Mh(s){return s.__esModule||s[Symbol.toStringTag]==="Module"}const de=Object.assign;function Qr(s,t){const e={};for(const r in t){const n=t[r];e[r]=Ye(n)?n.map(s):s(n)}return e}const xs=()=>{},Ye=Array.isArray,Na=/#/g,Ph=/&/g,Lh=/\//g,Fh=/=/g,Oh=/\?/g,ka=/\+/g,Bh=/%5B/g,Nh=/%5D/g,Da=/%5E/g,kh=/%60/g,Ua=/%7B/g,Dh=/%7C/g,$a=/%7D/g,Uh=/%20/g;function qn(s){return encodeURI(""+s).replace(Dh,"|").replace(Bh,"[").replace(Nh,"]")}function $h(s){return qn(s).replace(Ua,"{").replace($a,"}").replace(Da,"^")}function wn(s){return qn(s).replace(ka,"%2B").replace(Uh,"+").replace(Na,"%23").replace(Ph,"%26").replace(kh,"`").replace(Ua,"{").replace($a,"}").replace(Da,"^")}function zh(s){return wn(s).replace(Fh,"%3D")}function Hh(s){return qn(s).replace(Na,"%23").replace(Oh,"%3F")}function Wh(s){return s==null?"":Hh(s).replace(Lh,"%2F")}function Is(s){try{return decodeURIComponent(""+s)}catch{}return""+s}const Vh=/\/$/,Gh=s=>s.replace(Vh,"");function Zr(s,t,e="/"){let r,n={},i="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=t.slice(0,l),i=t.slice(l+1,a>-1?a:t.length),n=s(i)),a>-1&&(r=r||t.slice(0,a),o=t.slice(a,t.length)),r=Kh(r??t,e),{fullPath:r+(i&&"?")+i+o,path:r,query:n,hash:Is(o)}}function Xh(s,t){const e=t.query?s(t.query):"";return t.path+(e&&"?")+e+(t.hash||"")}function $i(s,t){return!t||!s.toLowerCase().startsWith(t.toLowerCase())?s:s.slice(t.length)||"/"}function Yh(s,t,e){const r=t.matched.length-1,n=e.matched.length-1;return r>-1&&r===n&&qt(t.matched[r],e.matched[n])&&za(t.params,e.params)&&s(t.query)===s(e.query)&&t.hash===e.hash}function qt(s,t){return(s.aliasOf||s)===(t.aliasOf||t)}function za(s,t){if(Object.keys(s).length!==Object.keys(t).length)return!1;for(const e in s)if(!jh(s[e],t[e]))return!1;return!0}function jh(s,t){return Ye(s)?zi(s,t):Ye(t)?zi(t,s):s===t}function zi(s,t){return Ye(t)?s.length===t.length&&s.every((e,r)=>e===t[r]):s.length===1&&s[0]===t}function Kh(s,t){if(s.startsWith("/"))return s;if(!s)return t;const e=t.split("/"),r=s.split("/"),n=r[r.length-1];(n===".."||n===".")&&r.push("");let i=e.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return e.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const ot={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Ms;(function(s){s.pop="pop",s.push="push"})(Ms||(Ms={}));var ys;(function(s){s.back="back",s.forward="forward",s.unknown=""})(ys||(ys={}));function qh(s){if(!s)if(Ht){const t=document.querySelector("base");s=t&&t.getAttribute("href")||"/",s=s.replace(/^\w+:\/\/[^\/]+/,"")}else s="/";return s[0]!=="/"&&s[0]!=="#"&&(s="/"+s),Gh(s)}const Qh=/^[^#]+#/;function Zh(s,t){return s.replace(Qh,"#")+t}function Jh(s,t){const e=document.documentElement.getBoundingClientRect(),r=s.getBoundingClientRect();return{behavior:t.behavior,left:r.left-e.left-(t.left||0),top:r.top-e.top-(t.top||0)}}const Br=()=>({left:window.scrollX,top:window.scrollY});function ef(s){let t;if("el"in s){const e=s.el,r=typeof e=="string"&&e.startsWith("#"),n=typeof e=="string"?r?document.getElementById(e.slice(1)):document.querySelector(e):e;if(!n)return;t=Jh(n,s)}else t=s;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Hi(s,t){return(history.state?history.state.position-t:-1)+s}const bn=new Map;function tf(s,t){bn.set(s,t)}function sf(s){const t=bn.get(s);return bn.delete(s),t}let rf=()=>location.protocol+"//"+location.host;function Ha(s,t){const{pathname:e,search:r,hash:n}=t,i=s.indexOf("#");if(i>-1){let a=n.includes(s.slice(i))?s.slice(i).length:1,l=n.slice(a);return l[0]!=="/"&&(l="/"+l),$i(l,"")}return $i(e,s)+r+n}function nf(s,t,e,r){let n=[],i=[],o=null;const a=({state:d})=>{const g=Ha(s,location),x=e.value,y=t.value;let v=0;if(d){if(e.value=g,t.value=d,o&&o===x){o=null;return}v=y?d.position-y.position:0}else r(g);n.forEach(T=>{T(e.value,x,{delta:v,type:Ms.pop,direction:v?v>0?ys.forward:ys.back:ys.unknown})})};function l(){o=e.value}function u(d){n.push(d);const g=()=>{const x=n.indexOf(d);x>-1&&n.splice(x,1)};return i.push(g),g}function h(){const{history:d}=window;d.state&&d.replaceState(de({},d.state,{scroll:Br()}),"")}function f(){for(const d of i)d();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:l,listen:u,destroy:f}}function Wi(s,t,e,r=!1,n=!1){return{back:s,current:t,forward:e,replaced:r,position:window.history.length,scroll:n?Br():null}}function of(s){const{history:t,location:e}=window,r={value:Ha(s,e)},n={value:t.state};n.value||i(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(l,u,h){const f=s.indexOf("#"),d=f>-1?(e.host&&document.querySelector("base")?s:s.slice(f))+l:rf()+s+l;try{t[h?"replaceState":"pushState"](u,"",d),n.value=u}catch(g){console.error(g),e[h?"replace":"assign"](d)}}function o(l,u){const h=de({},t.state,Wi(n.value.back,l,n.value.forward,!0),u,{position:n.value.position});i(l,h,!0),r.value=l}function a(l,u){const h=de({},n.value,t.state,{forward:l,scroll:Br()});i(h.current,h,!0);const f=de({},Wi(r.value,l,null),{position:h.position+1},u);i(l,f,!1),r.value=l}return{location:r,state:n,push:a,replace:o}}function af(s){s=qh(s);const t=of(s),e=nf(s,t.state,t.location,t.replace);function r(i,o=!0){o||e.pauseListeners(),history.go(i)}const n=de({location:"",base:s,go:r,createHref:Zh.bind(null,s)},t,e);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>t.state.value}),n}function lf(s){return s=location.host?s||location.pathname+location.search:"",s.includes("#")||(s+="#"),af(s)}function cf(s){return typeof s=="string"||s&&typeof s=="object"}function Wa(s){return typeof s=="string"||typeof s=="symbol"}const Va=Symbol("");var Vi;(function(s){s[s.aborted=4]="aborted",s[s.cancelled=8]="cancelled",s[s.duplicated=16]="duplicated"})(Vi||(Vi={}));function Qt(s,t){return de(new Error,{type:s,[Va]:!0},t)}function et(s,t){return s instanceof Error&&Va in s&&(t==null||!!(s.type&t))}const Gi="[^/]+?",uf={sensitive:!1,strict:!1,start:!0,end:!0},hf=/[.+*?^${}()[\]/\\]/g;function ff(s,t){const e=de({},uf,t),r=[];let n=e.start?"^":"";const i=[];for(const u of s){const h=u.length?[]:[90];e.strict&&!u.length&&(n+="/");for(let f=0;f<u.length;f++){const d=u[f];let g=40+(e.sensitive?.25:0);if(d.type===0)f||(n+="/"),n+=d.value.replace(hf,"\\$&"),g+=40;else if(d.type===1){const{value:x,repeatable:y,optional:v,regexp:T}=d;i.push({name:x,repeatable:y,optional:v});const R=T||Gi;if(R!==Gi){g+=10;try{new RegExp(`(${R})`)}catch(A){throw new Error(`Invalid custom RegExp for param "${x}" (${R}): `+A.message)}}let E=y?`((?:${R})(?:/(?:${R}))*)`:`(${R})`;f||(E=v&&u.length<2?`(?:/${E})`:"/"+E),v&&(E+="?"),n+=E,g+=20,v&&(g+=-8),y&&(g+=-20),R===".*"&&(g+=-50)}h.push(g)}r.push(h)}if(e.strict&&e.end){const u=r.length-1;r[u][r[u].length-1]+=.7000000000000001}e.strict||(n+="/?"),e.end?n+="$":e.strict&&(n+="(?:/|$)");const o=new RegExp(n,e.sensitive?"":"i");function a(u){const h=u.match(o),f={};if(!h)return null;for(let d=1;d<h.length;d++){const g=h[d]||"",x=i[d-1];f[x.name]=g&&x.repeatable?g.split("/"):g}return f}function l(u){let h="",f=!1;for(const d of s){(!f||!h.endsWith("/"))&&(h+="/"),f=!1;for(const g of d)if(g.type===0)h+=g.value;else if(g.type===1){const{value:x,repeatable:y,optional:v}=g,T=x in u?u[x]:"";if(Ye(T)&&!y)throw new Error(`Provided param "${x}" is an array but it is not repeatable (* or + modifiers)`);const R=Ye(T)?T.join("/"):T;if(!R)if(v)d.length<2&&(h.endsWith("/")?h=h.slice(0,-1):f=!0);else throw new Error(`Missing required param "${x}"`);h+=R}}return h||"/"}return{re:o,score:r,keys:i,parse:a,stringify:l}}function df(s,t){let e=0;for(;e<s.length&&e<t.length;){const r=t[e]-s[e];if(r)return r;e++}return s.length<t.length?s.length===1&&s[0]===80?-1:1:s.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Ga(s,t){let e=0;const r=s.score,n=t.score;for(;e<r.length&&e<n.length;){const i=df(r[e],n[e]);if(i)return i;e++}if(Math.abs(n.length-r.length)===1){if(Xi(r))return 1;if(Xi(n))return-1}return n.length-r.length}function Xi(s){const t=s[s.length-1];return s.length>0&&t[t.length-1]<0}const pf={type:0,value:""},gf=/[a-zA-Z0-9_]/;function mf(s){if(!s)return[[]];if(s==="/")return[[pf]];if(!s.startsWith("/"))throw new Error(`Invalid path "${s}"`);function t(g){throw new Error(`ERR (${e})/"${u}": ${g}`)}let e=0,r=e;const n=[];let i;function o(){i&&n.push(i),i=[]}let a=0,l,u="",h="";function f(){u&&(e===0?i.push({type:0,value:u}):e===1||e===2||e===3?(i.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function d(){u+=l}for(;a<s.length;){if(l=s[a++],l==="\\"&&e!==2){r=e,e=4;continue}switch(e){case 0:l==="/"?(u&&f(),o()):l===":"?(f(),e=1):d();break;case 4:d(),e=r;break;case 1:l==="("?e=2:gf.test(l)?d():(f(),e=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:e=3:h+=l;break;case 3:f(),e=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,h="";break;default:t("Unknown state");break}}return e===2&&t(`Unfinished custom RegExp for param "${u}"`),f(),o(),n}function xf(s,t,e){const r=ff(mf(s.path),e),n=de(r,{record:s,parent:t,children:[],alias:[]});return t&&!n.record.aliasOf==!t.record.aliasOf&&t.children.push(n),n}function yf(s,t){const e=[],r=new Map;t=Ki({strict:!1,end:!0,sensitive:!1},t);function n(f){return r.get(f)}function i(f,d,g){const x=!g,y=_f(f);y.aliasOf=g&&g.record;const v=Ki(t,f),T=[y];if("alias"in f){const A=typeof f.alias=="string"?[f.alias]:f.alias;for(const L of A)T.push(de({},y,{components:g?g.record.components:y.components,path:L,aliasOf:g?g.record:y}))}let R,E;for(const A of T){const{path:L}=A;if(d&&L[0]!=="/"){const I=d.record.path,F=I[I.length-1]==="/"?"":"/";A.path=d.record.path+(L&&F+L)}if(R=xf(A,d,v),g?g.alias.push(R):(E=E||R,E!==R&&E.alias.push(R),x&&f.name&&!ji(R)&&o(f.name)),Xa(R)&&l(R),y.children){const I=y.children;for(let F=0;F<I.length;F++)i(I[F],R,g&&g.children[F])}g=g||R}return E?()=>{o(E)}:xs}function o(f){if(Wa(f)){const d=r.get(f);d&&(r.delete(f),e.splice(e.indexOf(d),1),d.children.forEach(o),d.alias.forEach(o))}else{const d=e.indexOf(f);d>-1&&(e.splice(d,1),f.record.name&&r.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return e}function l(f){const d=wf(f,e);e.splice(d,0,f),f.record.name&&!ji(f)&&r.set(f.record.name,f)}function u(f,d){let g,x={},y,v;if("name"in f&&f.name){if(g=r.get(f.name),!g)throw Qt(1,{location:f});v=g.record.name,x=de(Yi(d.params,g.keys.filter(E=>!E.optional).concat(g.parent?g.parent.keys.filter(E=>E.optional):[]).map(E=>E.name)),f.params&&Yi(f.params,g.keys.map(E=>E.name))),y=g.stringify(x)}else if(f.path!=null)y=f.path,g=e.find(E=>E.re.test(y)),g&&(x=g.parse(y),v=g.record.name);else{if(g=d.name?r.get(d.name):e.find(E=>E.re.test(d.path)),!g)throw Qt(1,{location:f,currentLocation:d});v=g.record.name,x=de({},d.params,f.params),y=g.stringify(x)}const T=[];let R=g;for(;R;)T.unshift(R.record),R=R.parent;return{name:v,path:y,params:x,matched:T,meta:Tf(T)}}s.forEach(f=>i(f));function h(){e.length=0,r.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:n}}function Yi(s,t){const e={};for(const r of t)r in s&&(e[r]=s[r]);return e}function _f(s){return{path:s.path,redirect:s.redirect,name:s.name,meta:s.meta||{},aliasOf:void 0,beforeEnter:s.beforeEnter,props:vf(s),children:s.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in s?s.components||null:s.component&&{default:s.component}}}function vf(s){const t={},e=s.props||!1;if("component"in s)t.default=e;else for(const r in s.components)t[r]=typeof e=="object"?e[r]:e;return t}function ji(s){for(;s;){if(s.record.aliasOf)return!0;s=s.parent}return!1}function Tf(s){return s.reduce((t,e)=>de(t,e.meta),{})}function Ki(s,t){const e={};for(const r in s)e[r]=r in t?t[r]:s[r];return e}function wf(s,t){let e=0,r=t.length;for(;e!==r;){const i=e+r>>1;Ga(s,t[i])<0?r=i:e=i+1}const n=bf(s);return n&&(r=t.lastIndexOf(n,r-1)),r}function bf(s){let t=s;for(;t=t.parent;)if(Xa(t)&&Ga(s,t)===0)return t}function Xa({record:s}){return!!(s.name||s.components&&Object.keys(s.components).length||s.redirect)}function Rf(s){const t={};if(s===""||s==="?")return t;const r=(s[0]==="?"?s.slice(1):s).split("&");for(let n=0;n<r.length;++n){const i=r[n].replace(ka," "),o=i.indexOf("="),a=Is(o<0?i:i.slice(0,o)),l=o<0?null:Is(i.slice(o+1));if(a in t){let u=t[a];Ye(u)||(u=t[a]=[u]),u.push(l)}else t[a]=l}return t}function qi(s){let t="";for(let e in s){const r=s[e];if(e=zh(e),r==null){r!==void 0&&(t+=(t.length?"&":"")+e);continue}(Ye(r)?r.map(i=>i&&wn(i)):[r&&wn(r)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+e,i!=null&&(t+="="+i))})}return t}function Sf(s){const t={};for(const e in s){const r=s[e];r!==void 0&&(t[e]=Ye(r)?r.map(n=>n==null?null:""+n):r==null?r:""+r)}return t}const Ef=Symbol(""),Qi=Symbol(""),Nr=Symbol(""),Qn=Symbol(""),Rn=Symbol("");function rs(){let s=[];function t(r){return s.push(r),()=>{const n=s.indexOf(r);n>-1&&s.splice(n,1)}}function e(){s=[]}return{add:t,list:()=>s.slice(),reset:e}}function ct(s,t,e,r,n,i=o=>o()){const o=r&&(r.enterCallbacks[n]=r.enterCallbacks[n]||[]);return()=>new Promise((a,l)=>{const u=d=>{d===!1?l(Qt(4,{from:e,to:t})):d instanceof Error?l(d):cf(d)?l(Qt(2,{from:t,to:d})):(o&&r.enterCallbacks[n]===o&&typeof d=="function"&&o.push(d),a())},h=i(()=>s.call(r&&r.instances[n],t,e,u));let f=Promise.resolve(h);s.length<3&&(f=f.then(u)),f.catch(d=>l(d))})}function Jr(s,t,e,r,n=i=>i()){const i=[];for(const o of s)for(const a in o.components){let l=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(Cf(l)){const h=(l.__vccOpts||l)[t];h&&i.push(ct(h,e,r,o,a,n))}else{let u=l();i.push(()=>u.then(h=>{if(!h)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const f=Mh(h)?h.default:h;o.components[a]=f;const g=(f.__vccOpts||f)[t];return g&&ct(g,e,r,o,a,n)()}))}}return i}function Cf(s){return typeof s=="object"||"displayName"in s||"props"in s||"__vccOpts"in s}function Zi(s){const t=Xe(Nr),e=Xe(Qn),r=Ve(()=>{const l=Se(s.to);return t.resolve(l)}),n=Ve(()=>{const{matched:l}=r.value,{length:u}=l,h=l[u-1],f=e.matched;if(!h||!f.length)return-1;const d=f.findIndex(qt.bind(null,h));if(d>-1)return d;const g=Ji(l[u-2]);return u>1&&Ji(h)===g&&f[f.length-1].path!==g?f.findIndex(qt.bind(null,l[u-2])):d}),i=Ve(()=>n.value>-1&&Pf(e.params,r.value.params)),o=Ve(()=>n.value>-1&&n.value===e.matched.length-1&&za(e.params,r.value.params));function a(l={}){return Mf(l)?t[Se(s.replace)?"replace":"push"](Se(s.to)).catch(xs):Promise.resolve()}return{route:r,href:Ve(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}const Af=Mt({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Zi,setup(s,{slots:t}){const e=Cr(Zi(s)),{options:r}=Xe(Nr),n=Ve(()=>({[eo(s.activeClass,r.linkActiveClass,"router-link-active")]:e.isActive,[eo(s.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:e.isExactActive}));return()=>{const i=t.default&&t.default(e);return s.custom?i:Ba("a",{"aria-current":e.isExactActive?s.ariaCurrentValue:null,href:e.href,onClick:e.navigate,class:n.value},i)}}}),If=Af;function Mf(s){if(!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)&&!s.defaultPrevented&&!(s.button!==void 0&&s.button!==0)){if(s.currentTarget&&s.currentTarget.getAttribute){const t=s.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return s.preventDefault&&s.preventDefault(),!0}}function Pf(s,t){for(const e in t){const r=t[e],n=s[e];if(typeof r=="string"){if(r!==n)return!1}else if(!Ye(n)||n.length!==r.length||r.some((i,o)=>i!==n[o]))return!1}return!0}function Ji(s){return s?s.aliasOf?s.aliasOf.path:s.path:""}const eo=(s,t,e)=>s??t??e,Lf=Mt({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(s,{attrs:t,slots:e}){const r=Xe(Rn),n=Ve(()=>s.route||r.value),i=Xe(Qi,0),o=Ve(()=>{let u=Se(i);const{matched:h}=n.value;let f;for(;(f=h[u])&&!f.components;)u++;return u}),a=Ve(()=>n.value.matched[o.value]);ar(Qi,Ve(()=>o.value+1)),ar(Ef,a),ar(Rn,n);const l=Ze();return Yt(()=>[l.value,a.value,s.name],([u,h,f],[d,g,x])=>{h&&(h.instances[f]=u,g&&g!==h&&u&&u===d&&(h.leaveGuards.size||(h.leaveGuards=g.leaveGuards),h.updateGuards.size||(h.updateGuards=g.updateGuards))),u&&h&&(!g||!qt(h,g)||!d)&&(h.enterCallbacks[f]||[]).forEach(y=>y(u))},{flush:"post"}),()=>{const u=n.value,h=s.name,f=a.value,d=f&&f.components[h];if(!d)return to(e.default,{Component:d,route:u});const g=f.props[h],x=g?g===!0?u.params:typeof g=="function"?g(u):g:null,v=Ba(d,de({},x,t,{onVnodeUnmounted:T=>{T.component.isUnmounted&&(f.instances[h]=null)},ref:l}));return to(e.default,{Component:v,route:u})||v}}});function to(s,t){if(!s)return null;const e=s(t);return e.length===1?e[0]:e}const Ya=Lf;function Ff(s){const t=yf(s.routes,s),e=s.parseQuery||Rf,r=s.stringifyQuery||qi,n=s.history,i=rs(),o=rs(),a=rs(),l=yu(ot);let u=ot;Ht&&s.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=Qr.bind(null,w=>""+w),f=Qr.bind(null,Wh),d=Qr.bind(null,Is);function g(w,P){let N,$;return Wa(w)?(N=t.getRecordMatcher(w),$=P):$=w,t.addRoute($,N)}function x(w){const P=t.getRecordMatcher(w);P&&t.removeRoute(P)}function y(){return t.getRoutes().map(w=>w.record)}function v(w){return!!t.getRecordMatcher(w)}function T(w,P){if(P=de({},P||l.value),typeof w=="string"){const m=Zr(e,w,P.path),_=t.resolve({path:m.path},P),C=n.createHref(m.fullPath);return de(m,_,{params:d(_.params),hash:Is(m.hash),redirectedFrom:void 0,href:C})}let N;if(w.path!=null)N=de({},w,{path:Zr(e,w.path,P.path).path});else{const m=de({},w.params);for(const _ in m)m[_]==null&&delete m[_];N=de({},w,{params:f(m)}),P.params=f(P.params)}const $=t.resolve(N,P),te=w.hash||"";$.params=h(d($.params));const ee=Xh(r,de({},w,{hash:$h(te),path:$.path})),p=n.createHref(ee);return de({fullPath:ee,hash:te,query:r===qi?Sf(w.query):w.query||{}},$,{redirectedFrom:void 0,href:p})}function R(w){return typeof w=="string"?Zr(e,w,l.value.path):de({},w)}function E(w,P){if(u!==w)return Qt(8,{from:P,to:w})}function A(w){return F(w)}function L(w){return A(de(R(w),{replace:!0}))}function I(w){const P=w.matched[w.matched.length-1];if(P&&P.redirect){const{redirect:N}=P;let $=typeof N=="function"?N(w):N;return typeof $=="string"&&($=$.includes("?")||$.includes("#")?$=R($):{path:$},$.params={}),de({query:w.query,hash:w.hash,params:$.path!=null?{}:w.params},$)}}function F(w,P){const N=u=T(w),$=l.value,te=w.state,ee=w.force,p=w.replace===!0,m=I(N);if(m)return F(de(R(m),{state:typeof m=="object"?de({},te,m.state):te,force:ee,replace:p}),P||N);const _=N;_.redirectedFrom=P;let C;return!ee&&Yh(r,$,N)&&(C=Qt(16,{to:_,from:$}),ye($,$,!0,!1)),(C?Promise.resolve(C):Y(_,$)).catch(S=>et(S)?et(S,2)?S:ce(S):K(S,_,$)).then(S=>{if(S){if(et(S,2))return F(de({replace:p},R(S.to),{state:typeof S.to=="object"?de({},te,S.to.state):te,force:ee}),P||_)}else S=ie(_,$,!0,p,te);return b(_,$,S),S})}function Q(w,P){const N=E(w,P);return N?Promise.reject(N):Promise.resolve()}function q(w){const P=_e.values().next().value;return P&&typeof P.runWithContext=="function"?P.runWithContext(w):w()}function Y(w,P){let N;const[$,te,ee]=Of(w,P);N=Jr($.reverse(),"beforeRouteLeave",w,P);for(const m of $)m.leaveGuards.forEach(_=>{N.push(ct(_,w,P))});const p=Q.bind(null,w,P);return N.push(p),ae(N).then(()=>{N=[];for(const m of i.list())N.push(ct(m,w,P));return N.push(p),ae(N)}).then(()=>{N=Jr(te,"beforeRouteUpdate",w,P);for(const m of te)m.updateGuards.forEach(_=>{N.push(ct(_,w,P))});return N.push(p),ae(N)}).then(()=>{N=[];for(const m of ee)if(m.beforeEnter)if(Ye(m.beforeEnter))for(const _ of m.beforeEnter)N.push(ct(_,w,P));else N.push(ct(m.beforeEnter,w,P));return N.push(p),ae(N)}).then(()=>(w.matched.forEach(m=>m.enterCallbacks={}),N=Jr(ee,"beforeRouteEnter",w,P,q),N.push(p),ae(N))).then(()=>{N=[];for(const m of o.list())N.push(ct(m,w,P));return N.push(p),ae(N)}).catch(m=>et(m,8)?m:Promise.reject(m))}function b(w,P,N){a.list().forEach($=>q(()=>$(w,P,N)))}function ie(w,P,N,$,te){const ee=E(w,P);if(ee)return ee;const p=P===ot,m=Ht?history.state:{};N&&($||p?n.replace(w.fullPath,de({scroll:p&&m&&m.scroll},te)):n.push(w.fullPath,te)),l.value=w,ye(w,P,N,p),ce()}let re;function oe(){re||(re=n.listen((w,P,N)=>{if(!we.listening)return;const $=T(w),te=I($);if(te){F(de(te,{replace:!0}),$).catch(xs);return}u=$;const ee=l.value;Ht&&tf(Hi(ee.fullPath,N.delta),Br()),Y($,ee).catch(p=>et(p,12)?p:et(p,2)?(F(p.to,$).then(m=>{et(m,20)&&!N.delta&&N.type===Ms.pop&&n.go(-1,!1)}).catch(xs),Promise.reject()):(N.delta&&n.go(-N.delta,!1),K(p,$,ee))).then(p=>{p=p||ie($,ee,!1),p&&(N.delta&&!et(p,8)?n.go(-N.delta,!1):N.type===Ms.pop&&et(p,20)&&n.go(-1,!1)),b($,ee,p)}).catch(xs)}))}let G=rs(),V=rs(),H;function K(w,P,N){ce(w);const $=V.list();return $.length?$.forEach(te=>te(w,P,N)):console.error(w),Promise.reject(w)}function fe(){return H&&l.value!==ot?Promise.resolve():new Promise((w,P)=>{G.add([w,P])})}function ce(w){return H||(H=!w,oe(),G.list().forEach(([P,N])=>w?N(w):P()),G.reset()),w}function ye(w,P,N,$){const{scrollBehavior:te}=s;if(!Ht||!te)return Promise.resolve();const ee=!N&&sf(Hi(w.fullPath,0))||($||!N)&&history.state&&history.state.scroll||null;return ia().then(()=>te(w,P,ee)).then(p=>p&&ef(p)).catch(p=>K(p,w,P))}const pe=w=>n.go(w);let ve;const _e=new Set,we={currentRoute:l,listening:!0,addRoute:g,removeRoute:x,clearRoutes:t.clearRoutes,hasRoute:v,getRoutes:y,resolve:T,options:s,push:A,replace:L,go:pe,back:()=>pe(-1),forward:()=>pe(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:V.add,isReady:fe,install(w){const P=this;w.component("RouterLink",If),w.component("RouterView",Ya),w.config.globalProperties.$router=P,Object.defineProperty(w.config.globalProperties,"$route",{enumerable:!0,get:()=>Se(l)}),Ht&&!ve&&l.value===ot&&(ve=!0,A(n.location).catch(te=>{}));const N={};for(const te in ot)Object.defineProperty(N,te,{get:()=>l.value[te],enumerable:!0});w.provide(Nr,P),w.provide(Qn,qo(N)),w.provide(Rn,l);const $=w.unmount;_e.add(w),w.unmount=function(){_e.delete(w),_e.size<1&&(u=ot,re&&re(),re=null,l.value=ot,ve=!1,H=!1),$()}}};function ae(w){return w.reduce((P,N)=>P.then(()=>q(N)),Promise.resolve())}return we}function Of(s,t){const e=[],r=[],n=[],i=Math.max(t.matched.length,s.matched.length);for(let o=0;o<i;o++){const a=t.matched[o];a&&(s.matched.find(u=>qt(u,a))?r.push(a):e.push(a));const l=s.matched[o];l&&(t.matched.find(u=>qt(u,l))||n.push(l))}return[e,r,n]}function Bf(){return Xe(Nr)}function Nf(s){return Xe(Qn)}const kf=["texture","width","height","x","y"],Df=Mt({__name:"Icon",props:["name"],setup(s){function t(o,a){const l=dt.createTexture("ImageTexture",{src:o});return a.reduce((u,h)=>{const{x:f,y:d,width:g,height:x}=h;return u[h.name]=dt.createTexture("SubTexture",{texture:l,x:f,y:d,width:g,height:x}),u},{})}const e=s,r="/vue-demo-app/",n=Ze([{name:"experiment",width:81,height:100,x:0,y:0},{name:"trending",width:100,height:56,x:81,y:0},{name:"tv",width:100,height:68,x:181,y:0},{name:"movie",width:94,height:100,x:282,y:0}]),i=t(r+"assets/icons_white.png",n.value);return(o,a)=>(Pt(),Os("view",Lr(e,{texture:Se(i)[e.name],width:Se(i)[e.name].props.width,height:Se(i)[e.name].props.height,x:(100-(Se(i)[e.name].props.width||0))/2,y:(100-(Se(i)[e.name].props.height||0))/2}),null,16,kf))}}),Uf={y:-16},en=Mt({__name:"NavButton",props:["icon"],setup(s){const t=s,e={zIndex:102,height:70,width:100,borderRadius:8,focus:{color:1111638783},active:{width:328,height:70}},r={fontSize:38,x:116,y:18,height:50,alpha:0,active:{alpha:1}};return(n,i)=>(Pt(),Os("view",Lr({style:e},t,{forwardStates:!0}),[Be("view",Uf,[Te(Df,{scale:.5,name:t.icon},null,8,["name"])]),Be("text",{style:r},[fa(n.$slots,"default")])],16))}});function $f(){if(!this||this.selected===void 0||this.children.length===0)return!1;let s=this.children[this.selected];for(;s!=null&&s.skipFocus;)this.selected++,s=this.children[this.selected];return s instanceof st?(s.setFocus(),!0):!1}function so(s){return function(){var i,o,a;const t=this.children.length,e=this.wrap;this.selected=this.selected||this.children.findIndex(l=>!l.skipFocus)||0;const r=this.selected;if(t===0)return!1;if(s==="right"||s==="down")do if(this.selected=this.selected%t+1,this.selected>=t){if(!e){this.selected=void 0;break}this.selected=0}while((i=this.children[this.selected])!=null&&i.skipFocus);else if(s==="left"||s==="up")do if(this.selected=this.selected%t-1,this.selected<0){if(!e){this.selected=void 0;break}this.selected=t-1}while((o=this.children[this.selected])!=null&&o.skipFocus);if(this.selected===void 0&&(this.selected=r,(a=this.children[this.selected])!=null&&a.states.has("focus")))return!1;const n=this.children[this.selected];if(this.onSelectedChanged&&this.onSelectedChanged.call(this,this,n,this.selected,r),this.plinko&&r!==void 0){const u=this.children[r].selected||0;n.selected=u<n.children.length?u:n.children.length-1}return n.setFocus(),!0}}function ro(...s){const t=s.filter(e=>typeof e=="function");if(t.length!==0)return t.length===1?t[0]:function(...e){let r;for(const n of t)if(r=n.apply(this,e),r===!0)return r;return r}}function zf(s=0){return(t,e,r=0,n)=>{if(t.children.length===0)return;const i=t.flexDirection==="row"?"width":"height",o=t.flexDirection==="row"?"x":"y",a=t.gap||0,l=t.scroll||"auto",[u,h]=Hf(t);let f=t[o]??0;const d=(e==null?void 0:e[o])??0,g=(e==null?void 0:e[i])??0,x=n===void 0?"none":r>n?"positive":"negative";let y=f;if(l==="auto")t.scrollIndex!=null&&t.scrollIndex>=0?t.selected>=t.scrollIndex&&(x==="positive"?y=f-g-a:y=f+g+a):(Math.abs(f)+h<u.position+u.size||d<Math.abs(f))&&(y=-d+s);else if(l==="always"||l==="edge"&&x==="negative"&&Math.abs(f)>d)y=-d+s;else if(l==="edge"&&x==="positive"&&Math.abs(f)+h<d+g)y=f-g-a;else if(l==="edge"&&x==="none"){let v=0,T,R;for(;v<t.children.length&&Math.abs(f)+h<d+g;)T=t.children[v++],R=T[i]??0,f-=R+a;y=f}o==="x"&&t.x!==y?t.x=y:o==="y"&&t.y!==y&&(t.y=y)}}function Hf(s){let t,e;return s.flexDirection==="row"?(t={position:s.children[s.children.length-1].x??0,size:s.children[s.children.length-1].width??0},e=s.width??0):(t={position:s.children[s.children.length-1].y??0,size:s.children[s.children.length-1].height??0},e=s.height??0),[t,e]}const Wf=["onUp","onDown","forwardFocus","selected"],Vf=Mt({__name:"Column",props:{selected:{type:Number,default:0},scrollIndex:Number,onUp:Function,onDown:Function,onLayout:Function,onSelectedChanged:Function,scroll:String,style:Object},setup(s){const t=s,e=ro(t.onUp,so("up")),r=ro(t.onDown,so("down")),n=o=>{t.onSelectedChanged&&t.onSelectedChanged(o),t.scroll!=="none"&&zf(t.x)(o)},i={display:"flex",flexBoundary:"fixed",flexDirection:"column",gap:30,transition:{y:{easing:"ease-in-out",duration:250}}};return(o,a)=>(Pt(),Os("node",{onUp:Se(e),onDown:Se(r),forwardFocus:Se($f),selected:t.selected,selectedChanged:n,style:Fs([i,t.style])},[fa(o.$slots,"default")],44,Wf))}}),no={Column:{flexDirection:"column",display:"flex",width:140,height:600,y:360,gap:20,zIndex:101,transition:{x:{duration:250,easing:"ease-in-out"}},x:8,focus:{width:500,x:24}},Gradient:{zIndex:99,color:255,src:"./assets/sidenav.png",alpha:0,width:1200,height:1080,focus:{alpha:1},transition:{alpha:!0}}},Gf=Be("view",{flexItem:!1,width:300,height:150,x:30,y:15,zIndex:105},[Be("text",{x:0,y:40,fontSize:28,fontFamily:"Roboto",color:4143380070},"Built With:"),Be("view",{x:120,y:10,src:"./assets/vue.png",width:80,height:80}),Be("view",{x:0,y:106,src:"./assets/tmdb.png",width:80,height:41}),Be("text",{x:90,y:110,contain:"width",width:160,fontSize:12,color:4143380070}," This product uses the TMDB API but is not endorsed or certified by TMDB. ")],-1),Xf=Mt({__name:"NavDrawer",props:{focusPage:Function},setup(s){const t=s,e=Ze(null),r=Bf(),n=Nf();function i(){e.value.states.add("focus"),this.children.forEach(l=>{var u;return(u=l.states)==null?void 0:u.add("active")}),this.children.selected.setFocus()}function o(){e.value.states.remove("focus"),this.selected=0,this.children.forEach(l=>{var u;return(u=l.states)==null?void 0:u.remove("active")})}function a(l){if(n.path===l)return t.focusPage();r.push(l)}return(l,u)=>(Pt(),Os(Ue,null,[Gf,Te(Vf,Lr(l.$attrs,{ref:"column",onFocus:i,onBlur:o,style:Se(no).Column,scroll:"none"}),{default:ls(()=>[Te(en,{icon:"trending",onEnter:u[0]||(u[0]=h=>a("/browse/all"))},{default:ls(()=>[cr(" Trending ")]),_:1}),Te(en,{icon:"movie",onEnter:u[1]||(u[1]=h=>a("/browse/movie"))},{default:ls(()=>[cr(" Movies ")]),_:1}),Te(en,{icon:"tv",onEnter:u[2]||(u[2]=h=>a("/browse/tv"))},{default:ls(()=>[cr("TV")]),_:1})]),_:1},16,["style"]),Be("view",{skipFocus:!0,ref_key:"backdrop",ref:e,style:Fs(Se(no).Gradient)},null,4)],64))}});function tr(s){return typeof s=="function"}const io={ArrowLeft:"Left",ArrowRight:"Right",ArrowUp:"Up",ArrowDown:"Down",Enter:"Enter",l:"Last"," ":"Space",Backspace:"Back",Escape:"Escape"},ja=Ze(),Yf=s=>{ja.value=s},jf=s=>{let t=[];Yt(()=>Hn.value,(r,n)=>{let i=r;const o=[];for(;i;)i.states.has("focus")||(i.states.add("focus"),tr(i.onFocus)&&i.onFocus.call(i,r,n)),o.push(i),i=i.parent;t.forEach(a=>{o.includes(a)||(a.states.remove("focus"),tr(a.onBlur)&&a.onBlur.call(a,r,n))}),t=o,Yf(o)});const e=r=>{if(r){const n=io[r.key]||io[r.keyCode],i=ja.value||[];let o;for(const a of i){if(o=o||a,n){const l=a[`on${n}`];if(tr(l)&&l.call(a,r,a,o)===!0)break}else console.log(`Unhandled key event: ${r.key||r.keyCode}`);if(tr(a.onKeyPress)&&a.onKeyPress.call(a,r,n,a,o)===!0)break}return!1}};document.addEventListener("keydown",e)},Kf=Ze(),qf=["onLast","onMenu"],Qf={width:1920,height:1080,zIndex:-5},Zf=Be("node",{src:"./assets/hero-mask-inverted.png",color:255,width:1920,height:1080},null,-1),tn=1,Jf=Mt({__name:"App",setup(s){jf();const t=Ze(null);let e=0;const r=Ze(null),n=Ze(null);Ze({});let i;const o={alpha:tn,color:4294967295},a={duration:550,easing:"ease-in-out"};function l(){const f=t.value.$refs.column.$el;return f.states.has("focus")?!1:(i=Hn.value,f.setFocus())}function u(){return t.value.$refs.column.$el.states.has("focus")&&(i==null?void 0:i.setFocus())}Yt(Kf,f=>{h(f)});function h(f){if(e===0){r.value.src=f,e=1;return}if(e===1){n.value.src=f,e=2,n.value.alpha=0,n.value.animate({alpha:tn},a).start(),r.value.animate({alpha:0},a).start();return}e===2&&(r.value.src=f,e=1,r.value.alpha=0,r.value.animate({alpha:tn},a).start(),n.value.animate({alpha:0},a).start())}return(f,d)=>(Pt(),Os("node",{ref:"{window.APP}",onLast:()=>f.history.back(),onMenu:()=>f.navigate("/"),style:{width:1920,height:1080},onBackspace:l,onLeft:l,onRight:u},[Te(Se(Ya)),Te(Xf,{ref_key:"navDrawer",ref:t,focusPage:()=>Se(i).setFocus()},null,8,["focusPage"]),Be("node",Qf,[Be("node",{ref_key:"bg1",ref:r,style:o},null,512),Be("node",{ref_key:"bg2",ref:n,style:o,alpha:0},null,512),Zf])],40,qf))}}),ed="modulepreload",td=function(s){return"/vue-demo-app/"+s},oo={},Ka=function(t,e,r){let n=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));n=Promise.all(e.map(a=>{if(a=td(a),a in oo)return;oo[a]=!0;const l=a.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${u}`))return;const h=document.createElement("link");if(h.rel=l?"stylesheet":ed,l||(h.as="script",h.crossOrigin=""),h.href=a,o&&h.setAttribute("nonce",o),document.head.appendChild(h),l)return new Promise((f,d)=>{h.addEventListener("load",f),h.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${a}`)))})}))}return n.then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},ao=()=>Ka(()=>import("./Browse-B8jlrHPW.js"),__vite__mapDeps([0,1])),sd=()=>Ka(()=>import("./Entity-ChfXJnP-.js"),__vite__mapDeps([2,1])),rd=[{path:"/",component:ao},{path:"/browse/:filter",component:ao,props:!0},{path:"/entity/:type/:id",component:sd}],nd=Ff({history:lf(),routes:rd}),Ot="/vue-demo-app/";function id(s){s.fontManager.addFontFace(new us("msdf",{fontFamily:"Roboto",descriptors:{weight:700},atlasDataUrl:Ot+"fonts/Roboto-Bold.msdf.json",atlasUrl:Ot+"fonts/Roboto-Bold.msdf.png",stage:s})),s.fontManager.addFontFace(new us("msdf",{fontFamily:"Roboto",descriptors:{weight:400},atlasDataUrl:Ot+"fonts/Roboto-Regular.msdf.json",atlasUrl:Ot+"fonts/Roboto-Regular.msdf.png",stage:s})),s.fontManager.addFontFace(new us("msdf",{fontFamily:"Arial",descriptors:{weight:500},atlasDataUrl:Ot+"fonts/Roboto-Regular.msdf.json",atlasUrl:Ot+"fonts/Roboto-Regular.msdf.png",stage:s}))}Pe.debug=!1;Pe.animationsEnabled=!0;Pe.fontSettings.fontFamily="Roboto";Pe.fontSettings.color=4143380223;Pe.fontSettings.fontSize=32;Pe.rendererOptions={fpsUpdateInterval:0,enableInspector:!0,numImageWorkers:0};const{app:qa,rootNode:od,renderer:ad}=Ah(Jf);qa.use(nd);id(ad.stage);qa.mount(od);export{so as A,$f as B,Ue as F,Vf as _,hd as a,cd as b,Os as c,Mt as d,Te as e,Be as f,Pa as g,fd as h,ls as i,Kf as j,Bf as k,ud as l,Hn as m,Fs as n,Pt as o,fa as p,Lr as q,Ze as r,Nf as s,cr as t,Se as u,z as v,Yt as w,jc as x,ro as y,zf as z};
//# sourceMappingURL=main-CtGexzRa.js.map
